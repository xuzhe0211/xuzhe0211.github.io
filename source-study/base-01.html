<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端知识体系+大厂面试笔记(框架篇) | 随风</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <meta name="description" content="随风随雨又随流">
    <meta name="theme-color" content="#ffffff">
    <meta name="google-site-verification" content="Ld_AEWr30siza2LmmZ12csitRGsSj9gqqEAch0UXkTc">
    
    <link rel="preload" href="/assets/css/0.styles.3be6d54c.css" as="style"><link rel="preload" href="/assets/js/app.ff5704b6.js" as="script"><link rel="preload" href="/assets/js/3.32bc1a55.js" as="script"><link rel="preload" href="/assets/js/103.5aa338f8.js" as="script"><link rel="prefetch" href="/assets/js/10.9a16f06d.js"><link rel="prefetch" href="/assets/js/100.8dae6464.js"><link rel="prefetch" href="/assets/js/101.0ee63e30.js"><link rel="prefetch" href="/assets/js/102.a5cb0d15.js"><link rel="prefetch" href="/assets/js/104.bdf8a758.js"><link rel="prefetch" href="/assets/js/105.1bc156bf.js"><link rel="prefetch" href="/assets/js/106.c27baf7c.js"><link rel="prefetch" href="/assets/js/107.1129e372.js"><link rel="prefetch" href="/assets/js/108.419e776c.js"><link rel="prefetch" href="/assets/js/109.a86f3f13.js"><link rel="prefetch" href="/assets/js/11.c92d8b8b.js"><link rel="prefetch" href="/assets/js/110.adb411be.js"><link rel="prefetch" href="/assets/js/111.deb38d73.js"><link rel="prefetch" href="/assets/js/112.0642ddce.js"><link rel="prefetch" href="/assets/js/113.0acf79f5.js"><link rel="prefetch" href="/assets/js/114.59d3a497.js"><link rel="prefetch" href="/assets/js/115.cfda2c63.js"><link rel="prefetch" href="/assets/js/116.00860f3c.js"><link rel="prefetch" href="/assets/js/117.31bb0135.js"><link rel="prefetch" href="/assets/js/118.3e731057.js"><link rel="prefetch" href="/assets/js/119.deeb8465.js"><link rel="prefetch" href="/assets/js/12.923d760f.js"><link rel="prefetch" href="/assets/js/120.553f579c.js"><link rel="prefetch" href="/assets/js/121.61ea13e2.js"><link rel="prefetch" href="/assets/js/122.e33bb2b1.js"><link rel="prefetch" href="/assets/js/123.79e24b0e.js"><link rel="prefetch" href="/assets/js/124.f49ba6e4.js"><link rel="prefetch" href="/assets/js/125.01ec88cd.js"><link rel="prefetch" href="/assets/js/126.d5dd3711.js"><link rel="prefetch" href="/assets/js/127.bd1b267c.js"><link rel="prefetch" href="/assets/js/128.7c260028.js"><link rel="prefetch" href="/assets/js/129.0cd9afe6.js"><link rel="prefetch" href="/assets/js/13.07ba374a.js"><link rel="prefetch" href="/assets/js/130.23fbfe9b.js"><link rel="prefetch" href="/assets/js/131.330c1df5.js"><link rel="prefetch" href="/assets/js/132.74937db1.js"><link rel="prefetch" href="/assets/js/133.496f7f59.js"><link rel="prefetch" href="/assets/js/134.5021f5a5.js"><link rel="prefetch" href="/assets/js/135.a0793e0b.js"><link rel="prefetch" href="/assets/js/136.37ed4c95.js"><link rel="prefetch" href="/assets/js/137.5614fd6e.js"><link rel="prefetch" href="/assets/js/138.219e7a9a.js"><link rel="prefetch" href="/assets/js/139.d0a8203f.js"><link rel="prefetch" href="/assets/js/14.cee0a79c.js"><link rel="prefetch" href="/assets/js/140.859f27ab.js"><link rel="prefetch" href="/assets/js/141.3b464d35.js"><link rel="prefetch" href="/assets/js/142.36c89f83.js"><link rel="prefetch" href="/assets/js/143.65876482.js"><link rel="prefetch" href="/assets/js/144.eb280322.js"><link rel="prefetch" href="/assets/js/145.80a390d4.js"><link rel="prefetch" href="/assets/js/146.d46fd68f.js"><link rel="prefetch" href="/assets/js/147.e1703fb2.js"><link rel="prefetch" href="/assets/js/148.1694f341.js"><link rel="prefetch" href="/assets/js/149.e70fc38d.js"><link rel="prefetch" href="/assets/js/15.bd6dd584.js"><link rel="prefetch" href="/assets/js/150.0b43b134.js"><link rel="prefetch" href="/assets/js/151.065b0278.js"><link rel="prefetch" href="/assets/js/152.5bda0bb1.js"><link rel="prefetch" href="/assets/js/153.f8341037.js"><link rel="prefetch" href="/assets/js/154.3cbb8933.js"><link rel="prefetch" href="/assets/js/155.eca73f7a.js"><link rel="prefetch" href="/assets/js/156.6bf44638.js"><link rel="prefetch" href="/assets/js/157.1f0d68cb.js"><link rel="prefetch" href="/assets/js/158.3935c3f1.js"><link rel="prefetch" href="/assets/js/159.2b6f9849.js"><link rel="prefetch" href="/assets/js/16.bef7fd8d.js"><link rel="prefetch" href="/assets/js/160.ea70546e.js"><link rel="prefetch" href="/assets/js/161.c021a004.js"><link rel="prefetch" href="/assets/js/162.cda27944.js"><link rel="prefetch" href="/assets/js/163.541fbc77.js"><link rel="prefetch" href="/assets/js/164.2fa1f4f2.js"><link rel="prefetch" href="/assets/js/165.155fd797.js"><link rel="prefetch" href="/assets/js/166.1d17bfbd.js"><link rel="prefetch" href="/assets/js/167.2e7b9b6c.js"><link rel="prefetch" href="/assets/js/168.c7fd3e2e.js"><link rel="prefetch" href="/assets/js/169.278a4564.js"><link rel="prefetch" href="/assets/js/17.6fb6044c.js"><link rel="prefetch" href="/assets/js/170.1699c89d.js"><link rel="prefetch" href="/assets/js/171.b09d0982.js"><link rel="prefetch" href="/assets/js/172.9ec0d737.js"><link rel="prefetch" href="/assets/js/173.dec62707.js"><link rel="prefetch" href="/assets/js/174.6a369c0d.js"><link rel="prefetch" href="/assets/js/175.8acd00f8.js"><link rel="prefetch" href="/assets/js/176.da309638.js"><link rel="prefetch" href="/assets/js/177.b17adcb7.js"><link rel="prefetch" href="/assets/js/178.245cd9fe.js"><link rel="prefetch" href="/assets/js/179.21d6efa6.js"><link rel="prefetch" href="/assets/js/18.2c626aee.js"><link rel="prefetch" href="/assets/js/180.e61696c0.js"><link rel="prefetch" href="/assets/js/181.07e757a1.js"><link rel="prefetch" href="/assets/js/182.8f5250c3.js"><link rel="prefetch" href="/assets/js/183.fdd6c228.js"><link rel="prefetch" href="/assets/js/184.06917930.js"><link rel="prefetch" href="/assets/js/185.f951ac1b.js"><link rel="prefetch" href="/assets/js/186.77228eff.js"><link rel="prefetch" href="/assets/js/187.0ce0382a.js"><link rel="prefetch" href="/assets/js/188.67074cfd.js"><link rel="prefetch" href="/assets/js/189.dc5a66d3.js"><link rel="prefetch" href="/assets/js/19.c79579c3.js"><link rel="prefetch" href="/assets/js/190.a43bad1f.js"><link rel="prefetch" href="/assets/js/191.b89a95b7.js"><link rel="prefetch" href="/assets/js/192.d902d2b5.js"><link rel="prefetch" href="/assets/js/193.6e21c360.js"><link rel="prefetch" href="/assets/js/194.9052cade.js"><link rel="prefetch" href="/assets/js/195.0b021c51.js"><link rel="prefetch" href="/assets/js/196.2de52006.js"><link rel="prefetch" href="/assets/js/197.1b78c992.js"><link rel="prefetch" href="/assets/js/198.85925b53.js"><link rel="prefetch" href="/assets/js/199.dc67e536.js"><link rel="prefetch" href="/assets/js/2.ff4b99f4.js"><link rel="prefetch" href="/assets/js/20.a545f188.js"><link rel="prefetch" href="/assets/js/200.8e44d8eb.js"><link rel="prefetch" href="/assets/js/201.93167736.js"><link rel="prefetch" href="/assets/js/202.1dc9b630.js"><link rel="prefetch" href="/assets/js/203.9d39e273.js"><link rel="prefetch" href="/assets/js/204.baad1c21.js"><link rel="prefetch" href="/assets/js/205.0da6ae35.js"><link rel="prefetch" href="/assets/js/206.c264711e.js"><link rel="prefetch" href="/assets/js/207.a0ad3a18.js"><link rel="prefetch" href="/assets/js/208.dba1756e.js"><link rel="prefetch" href="/assets/js/209.e84102bd.js"><link rel="prefetch" href="/assets/js/21.ff17fd3c.js"><link rel="prefetch" href="/assets/js/210.d3d78992.js"><link rel="prefetch" href="/assets/js/211.70341df3.js"><link rel="prefetch" href="/assets/js/212.4daebdb8.js"><link rel="prefetch" href="/assets/js/213.142ff1d8.js"><link rel="prefetch" href="/assets/js/214.b578e008.js"><link rel="prefetch" href="/assets/js/215.c410ca78.js"><link rel="prefetch" href="/assets/js/216.dbe966db.js"><link rel="prefetch" href="/assets/js/217.280fc56b.js"><link rel="prefetch" href="/assets/js/218.5ce96820.js"><link rel="prefetch" href="/assets/js/219.cb1e014d.js"><link rel="prefetch" href="/assets/js/22.e12822f2.js"><link rel="prefetch" href="/assets/js/220.764a390b.js"><link rel="prefetch" href="/assets/js/221.38dcc881.js"><link rel="prefetch" href="/assets/js/222.5c917ff3.js"><link rel="prefetch" href="/assets/js/223.f30e4a73.js"><link rel="prefetch" href="/assets/js/224.d343501e.js"><link rel="prefetch" href="/assets/js/225.71ddb707.js"><link rel="prefetch" href="/assets/js/226.fadb3c5b.js"><link rel="prefetch" href="/assets/js/227.74c37342.js"><link rel="prefetch" href="/assets/js/228.e5a4f024.js"><link rel="prefetch" href="/assets/js/229.99847b61.js"><link rel="prefetch" href="/assets/js/23.b2b0dc67.js"><link rel="prefetch" href="/assets/js/230.7053c381.js"><link rel="prefetch" href="/assets/js/231.17ca5124.js"><link rel="prefetch" href="/assets/js/232.757e0d93.js"><link rel="prefetch" href="/assets/js/233.0aa5714c.js"><link rel="prefetch" href="/assets/js/234.b57d559d.js"><link rel="prefetch" href="/assets/js/235.7e3bfa79.js"><link rel="prefetch" href="/assets/js/236.6419c0a2.js"><link rel="prefetch" href="/assets/js/237.767e3b49.js"><link rel="prefetch" href="/assets/js/238.ad6e6458.js"><link rel="prefetch" href="/assets/js/239.c24600ae.js"><link rel="prefetch" href="/assets/js/24.0bc9388b.js"><link rel="prefetch" href="/assets/js/240.0b82beb9.js"><link rel="prefetch" href="/assets/js/241.b0b77745.js"><link rel="prefetch" href="/assets/js/242.b1c257ea.js"><link rel="prefetch" href="/assets/js/243.9f6c7364.js"><link rel="prefetch" href="/assets/js/244.e811943a.js"><link rel="prefetch" href="/assets/js/245.f4b1ed14.js"><link rel="prefetch" href="/assets/js/246.f99e09a2.js"><link rel="prefetch" href="/assets/js/247.20c8d4b5.js"><link rel="prefetch" href="/assets/js/248.c16bc498.js"><link rel="prefetch" href="/assets/js/249.36276028.js"><link rel="prefetch" href="/assets/js/25.6e18367d.js"><link rel="prefetch" href="/assets/js/250.1d010fff.js"><link rel="prefetch" href="/assets/js/251.ff18c743.js"><link rel="prefetch" href="/assets/js/252.9d9fadba.js"><link rel="prefetch" href="/assets/js/253.d18592c3.js"><link rel="prefetch" href="/assets/js/254.474cfe33.js"><link rel="prefetch" href="/assets/js/255.f7cad93e.js"><link rel="prefetch" href="/assets/js/256.0572a13b.js"><link rel="prefetch" href="/assets/js/257.b26351c6.js"><link rel="prefetch" href="/assets/js/258.5559f1af.js"><link rel="prefetch" href="/assets/js/259.82bb27ad.js"><link rel="prefetch" href="/assets/js/26.2b1c4602.js"><link rel="prefetch" href="/assets/js/260.a6e74eb6.js"><link rel="prefetch" href="/assets/js/261.9abdf632.js"><link rel="prefetch" href="/assets/js/262.d10a13a9.js"><link rel="prefetch" href="/assets/js/263.6f7a03a5.js"><link rel="prefetch" href="/assets/js/264.064439c7.js"><link rel="prefetch" href="/assets/js/265.2e6032c2.js"><link rel="prefetch" href="/assets/js/266.b4896289.js"><link rel="prefetch" href="/assets/js/267.5d57e4d4.js"><link rel="prefetch" href="/assets/js/268.7a289535.js"><link rel="prefetch" href="/assets/js/269.2eb82dd4.js"><link rel="prefetch" href="/assets/js/27.3f668953.js"><link rel="prefetch" href="/assets/js/270.4786408c.js"><link rel="prefetch" href="/assets/js/271.65488b27.js"><link rel="prefetch" href="/assets/js/272.2e22be89.js"><link rel="prefetch" href="/assets/js/273.5eab00ba.js"><link rel="prefetch" href="/assets/js/274.76d7e85d.js"><link rel="prefetch" href="/assets/js/275.9c2593e6.js"><link rel="prefetch" href="/assets/js/276.590ff651.js"><link rel="prefetch" href="/assets/js/277.ea8f1a4c.js"><link rel="prefetch" href="/assets/js/278.162648dc.js"><link rel="prefetch" href="/assets/js/279.3a20dac4.js"><link rel="prefetch" href="/assets/js/28.268a84d8.js"><link rel="prefetch" href="/assets/js/280.7aff0c90.js"><link rel="prefetch" href="/assets/js/281.c4077013.js"><link rel="prefetch" href="/assets/js/282.62aa3377.js"><link rel="prefetch" href="/assets/js/283.5a9c20f4.js"><link rel="prefetch" href="/assets/js/284.b96dd41e.js"><link rel="prefetch" href="/assets/js/285.05e8798b.js"><link rel="prefetch" href="/assets/js/286.384bc776.js"><link rel="prefetch" href="/assets/js/287.988e42cf.js"><link rel="prefetch" href="/assets/js/288.e982f3b8.js"><link rel="prefetch" href="/assets/js/289.a1cdaf15.js"><link rel="prefetch" href="/assets/js/29.5ebae196.js"><link rel="prefetch" href="/assets/js/290.3bdd194a.js"><link rel="prefetch" href="/assets/js/291.ce4a6e8e.js"><link rel="prefetch" href="/assets/js/292.c572ba35.js"><link rel="prefetch" href="/assets/js/293.3a0a75e9.js"><link rel="prefetch" href="/assets/js/294.89855f28.js"><link rel="prefetch" href="/assets/js/295.432d4b6f.js"><link rel="prefetch" href="/assets/js/296.8caa722e.js"><link rel="prefetch" href="/assets/js/297.ea665063.js"><link rel="prefetch" href="/assets/js/298.7342b9ac.js"><link rel="prefetch" href="/assets/js/299.96f266a8.js"><link rel="prefetch" href="/assets/js/30.04499e5f.js"><link rel="prefetch" href="/assets/js/300.4fb17682.js"><link rel="prefetch" href="/assets/js/301.68dd904a.js"><link rel="prefetch" href="/assets/js/302.949e8678.js"><link rel="prefetch" href="/assets/js/303.8d164540.js"><link rel="prefetch" href="/assets/js/304.d13a59d0.js"><link rel="prefetch" href="/assets/js/305.df4ce6c2.js"><link rel="prefetch" href="/assets/js/306.22811eba.js"><link rel="prefetch" href="/assets/js/307.19fca2db.js"><link rel="prefetch" href="/assets/js/308.5862fa2d.js"><link rel="prefetch" href="/assets/js/309.246c6f1b.js"><link rel="prefetch" href="/assets/js/31.8f6472b2.js"><link rel="prefetch" href="/assets/js/310.579f6d83.js"><link rel="prefetch" href="/assets/js/311.6960705c.js"><link rel="prefetch" href="/assets/js/312.fce13b44.js"><link rel="prefetch" href="/assets/js/313.824e0f39.js"><link rel="prefetch" href="/assets/js/314.46fe2716.js"><link rel="prefetch" href="/assets/js/315.8f5ea1d6.js"><link rel="prefetch" href="/assets/js/316.4fb9e207.js"><link rel="prefetch" href="/assets/js/317.05ecbba7.js"><link rel="prefetch" href="/assets/js/318.5a63c924.js"><link rel="prefetch" href="/assets/js/319.7a84b7fb.js"><link rel="prefetch" href="/assets/js/32.e644fc2f.js"><link rel="prefetch" href="/assets/js/320.6f07d860.js"><link rel="prefetch" href="/assets/js/321.1424a2f3.js"><link rel="prefetch" href="/assets/js/322.8186e341.js"><link rel="prefetch" href="/assets/js/323.c365752f.js"><link rel="prefetch" href="/assets/js/324.0d0cad4d.js"><link rel="prefetch" href="/assets/js/325.6f18413d.js"><link rel="prefetch" href="/assets/js/326.922e42d6.js"><link rel="prefetch" href="/assets/js/327.9d118497.js"><link rel="prefetch" href="/assets/js/328.847a8140.js"><link rel="prefetch" href="/assets/js/329.35ac005d.js"><link rel="prefetch" href="/assets/js/33.4d924d17.js"><link rel="prefetch" href="/assets/js/330.ce14daeb.js"><link rel="prefetch" href="/assets/js/331.c954fb98.js"><link rel="prefetch" href="/assets/js/332.63354d06.js"><link rel="prefetch" href="/assets/js/333.17fe6c9d.js"><link rel="prefetch" href="/assets/js/334.05a87e8f.js"><link rel="prefetch" href="/assets/js/335.98271250.js"><link rel="prefetch" href="/assets/js/336.a2659c1b.js"><link rel="prefetch" href="/assets/js/337.b421d04f.js"><link rel="prefetch" href="/assets/js/338.521727be.js"><link rel="prefetch" href="/assets/js/339.0641a1ce.js"><link rel="prefetch" href="/assets/js/34.ec2252ab.js"><link rel="prefetch" href="/assets/js/340.e2a76919.js"><link rel="prefetch" href="/assets/js/341.22842212.js"><link rel="prefetch" href="/assets/js/342.f2391224.js"><link rel="prefetch" href="/assets/js/343.9ef8b768.js"><link rel="prefetch" href="/assets/js/344.aaebdd43.js"><link rel="prefetch" href="/assets/js/345.1aa0f979.js"><link rel="prefetch" href="/assets/js/346.dbd0ef4a.js"><link rel="prefetch" href="/assets/js/347.cb5e25bc.js"><link rel="prefetch" href="/assets/js/348.1e8c4b8a.js"><link rel="prefetch" href="/assets/js/349.94e50052.js"><link rel="prefetch" href="/assets/js/35.deadf157.js"><link rel="prefetch" href="/assets/js/350.28de7649.js"><link rel="prefetch" href="/assets/js/351.a5b1e1bb.js"><link rel="prefetch" href="/assets/js/352.daf1985e.js"><link rel="prefetch" href="/assets/js/353.c91426dd.js"><link rel="prefetch" href="/assets/js/354.2a7e28a4.js"><link rel="prefetch" href="/assets/js/355.62d6d9dc.js"><link rel="prefetch" href="/assets/js/356.f85570c0.js"><link rel="prefetch" href="/assets/js/357.da2c7602.js"><link rel="prefetch" href="/assets/js/358.38c14e29.js"><link rel="prefetch" href="/assets/js/359.50d6368b.js"><link rel="prefetch" href="/assets/js/36.2f992cb4.js"><link rel="prefetch" href="/assets/js/360.596daa7b.js"><link rel="prefetch" href="/assets/js/361.bb5aed49.js"><link rel="prefetch" href="/assets/js/362.f5f35103.js"><link rel="prefetch" href="/assets/js/363.f50065f5.js"><link rel="prefetch" href="/assets/js/364.049a964c.js"><link rel="prefetch" href="/assets/js/365.c6ce33e9.js"><link rel="prefetch" href="/assets/js/366.f76d6668.js"><link rel="prefetch" href="/assets/js/367.779a29b2.js"><link rel="prefetch" href="/assets/js/368.89f592d6.js"><link rel="prefetch" href="/assets/js/369.8c81dd4d.js"><link rel="prefetch" href="/assets/js/37.139ff2bf.js"><link rel="prefetch" href="/assets/js/370.3d7506ae.js"><link rel="prefetch" href="/assets/js/371.f7d9f883.js"><link rel="prefetch" href="/assets/js/372.c028db9b.js"><link rel="prefetch" href="/assets/js/373.e77612a2.js"><link rel="prefetch" href="/assets/js/374.d7efbd92.js"><link rel="prefetch" href="/assets/js/375.edc3192b.js"><link rel="prefetch" href="/assets/js/376.b3034ea3.js"><link rel="prefetch" href="/assets/js/377.0e20f4ad.js"><link rel="prefetch" href="/assets/js/378.54242b0f.js"><link rel="prefetch" href="/assets/js/379.e9873a9b.js"><link rel="prefetch" href="/assets/js/38.e54baa53.js"><link rel="prefetch" href="/assets/js/380.253e07df.js"><link rel="prefetch" href="/assets/js/381.20fd6e2c.js"><link rel="prefetch" href="/assets/js/382.e26669d7.js"><link rel="prefetch" href="/assets/js/383.7237a834.js"><link rel="prefetch" href="/assets/js/384.a3ca6915.js"><link rel="prefetch" href="/assets/js/385.179de6df.js"><link rel="prefetch" href="/assets/js/386.96d2dee7.js"><link rel="prefetch" href="/assets/js/387.2c7a542b.js"><link rel="prefetch" href="/assets/js/388.9f7be656.js"><link rel="prefetch" href="/assets/js/389.15bc606f.js"><link rel="prefetch" href="/assets/js/39.d9d4480d.js"><link rel="prefetch" href="/assets/js/390.58370b5c.js"><link rel="prefetch" href="/assets/js/391.0aec0437.js"><link rel="prefetch" href="/assets/js/392.be0fc3ad.js"><link rel="prefetch" href="/assets/js/393.42a0997e.js"><link rel="prefetch" href="/assets/js/394.008a90ec.js"><link rel="prefetch" href="/assets/js/395.c52347d3.js"><link rel="prefetch" href="/assets/js/396.e4ee75f3.js"><link rel="prefetch" href="/assets/js/397.58231684.js"><link rel="prefetch" href="/assets/js/398.2cf5f7b0.js"><link rel="prefetch" href="/assets/js/399.7ae92f9d.js"><link rel="prefetch" href="/assets/js/4.3024e0ea.js"><link rel="prefetch" href="/assets/js/40.f331ad72.js"><link rel="prefetch" href="/assets/js/400.e8e6d413.js"><link rel="prefetch" href="/assets/js/401.63d6974b.js"><link rel="prefetch" href="/assets/js/402.4966f1a3.js"><link rel="prefetch" href="/assets/js/403.5a3c86f0.js"><link rel="prefetch" href="/assets/js/404.e606068f.js"><link rel="prefetch" href="/assets/js/405.0bac6d3a.js"><link rel="prefetch" href="/assets/js/406.7dffd606.js"><link rel="prefetch" href="/assets/js/407.aa119d21.js"><link rel="prefetch" href="/assets/js/408.c2179b52.js"><link rel="prefetch" href="/assets/js/409.363fd0d2.js"><link rel="prefetch" href="/assets/js/41.25b0f36b.js"><link rel="prefetch" href="/assets/js/410.cea7ce15.js"><link rel="prefetch" href="/assets/js/411.be6f3f32.js"><link rel="prefetch" href="/assets/js/412.99a55c8f.js"><link rel="prefetch" href="/assets/js/413.ea472c87.js"><link rel="prefetch" href="/assets/js/414.edb6aa8a.js"><link rel="prefetch" href="/assets/js/415.d37e6366.js"><link rel="prefetch" href="/assets/js/416.16186baa.js"><link rel="prefetch" href="/assets/js/417.f899b04f.js"><link rel="prefetch" href="/assets/js/418.9ffbe043.js"><link rel="prefetch" href="/assets/js/419.3230af20.js"><link rel="prefetch" href="/assets/js/42.9c168dab.js"><link rel="prefetch" href="/assets/js/420.987c80da.js"><link rel="prefetch" href="/assets/js/421.65617e5d.js"><link rel="prefetch" href="/assets/js/422.10599020.js"><link rel="prefetch" href="/assets/js/423.b43671d3.js"><link rel="prefetch" href="/assets/js/424.48e44464.js"><link rel="prefetch" href="/assets/js/425.05854d99.js"><link rel="prefetch" href="/assets/js/426.1206d3ad.js"><link rel="prefetch" href="/assets/js/427.d11ad83b.js"><link rel="prefetch" href="/assets/js/428.7075e03a.js"><link rel="prefetch" href="/assets/js/429.4f697522.js"><link rel="prefetch" href="/assets/js/43.cb23aea6.js"><link rel="prefetch" href="/assets/js/430.cb6e7b9c.js"><link rel="prefetch" href="/assets/js/431.dae66aeb.js"><link rel="prefetch" href="/assets/js/432.1b80cb2b.js"><link rel="prefetch" href="/assets/js/433.170262b1.js"><link rel="prefetch" href="/assets/js/434.a93c834a.js"><link rel="prefetch" href="/assets/js/435.10fbf75f.js"><link rel="prefetch" href="/assets/js/436.67b676c3.js"><link rel="prefetch" href="/assets/js/437.2a6664db.js"><link rel="prefetch" href="/assets/js/438.96a06be6.js"><link rel="prefetch" href="/assets/js/439.da5efae3.js"><link rel="prefetch" href="/assets/js/44.dad6bc5f.js"><link rel="prefetch" href="/assets/js/440.bb3f47e7.js"><link rel="prefetch" href="/assets/js/441.4334f8bc.js"><link rel="prefetch" href="/assets/js/442.5ee52b3e.js"><link rel="prefetch" href="/assets/js/443.b8947524.js"><link rel="prefetch" href="/assets/js/444.ad74ea19.js"><link rel="prefetch" href="/assets/js/445.bb7ac97e.js"><link rel="prefetch" href="/assets/js/446.ce17e309.js"><link rel="prefetch" href="/assets/js/447.f59aeb30.js"><link rel="prefetch" href="/assets/js/448.92589f31.js"><link rel="prefetch" href="/assets/js/449.ed6a828e.js"><link rel="prefetch" href="/assets/js/45.914fb166.js"><link rel="prefetch" href="/assets/js/450.a33f0b6f.js"><link rel="prefetch" href="/assets/js/451.e2953884.js"><link rel="prefetch" href="/assets/js/452.efa9df49.js"><link rel="prefetch" href="/assets/js/453.c2a4fcdc.js"><link rel="prefetch" href="/assets/js/454.3afea930.js"><link rel="prefetch" href="/assets/js/455.207d966b.js"><link rel="prefetch" href="/assets/js/456.e4482fd9.js"><link rel="prefetch" href="/assets/js/457.e92b76a5.js"><link rel="prefetch" href="/assets/js/458.4f18fa1f.js"><link rel="prefetch" href="/assets/js/459.b034862d.js"><link rel="prefetch" href="/assets/js/46.ea6227fb.js"><link rel="prefetch" href="/assets/js/460.1ef23852.js"><link rel="prefetch" href="/assets/js/461.e9a4d939.js"><link rel="prefetch" href="/assets/js/462.8612a52f.js"><link rel="prefetch" href="/assets/js/463.c866487c.js"><link rel="prefetch" href="/assets/js/464.cd0d4604.js"><link rel="prefetch" href="/assets/js/465.332dd76c.js"><link rel="prefetch" href="/assets/js/466.8e6d2a98.js"><link rel="prefetch" href="/assets/js/467.36acec6d.js"><link rel="prefetch" href="/assets/js/468.ad3a3850.js"><link rel="prefetch" href="/assets/js/469.ede3dc4f.js"><link rel="prefetch" href="/assets/js/47.9c48dce4.js"><link rel="prefetch" href="/assets/js/470.029cc67b.js"><link rel="prefetch" href="/assets/js/471.792b6e4e.js"><link rel="prefetch" href="/assets/js/472.8b5468e9.js"><link rel="prefetch" href="/assets/js/473.28911ce3.js"><link rel="prefetch" href="/assets/js/474.605311df.js"><link rel="prefetch" href="/assets/js/475.2c767294.js"><link rel="prefetch" href="/assets/js/476.cd114014.js"><link rel="prefetch" href="/assets/js/477.09a05037.js"><link rel="prefetch" href="/assets/js/478.a0fb568e.js"><link rel="prefetch" href="/assets/js/479.48866dc1.js"><link rel="prefetch" href="/assets/js/48.0fe79bd0.js"><link rel="prefetch" href="/assets/js/480.7e2e8702.js"><link rel="prefetch" href="/assets/js/481.11b589c2.js"><link rel="prefetch" href="/assets/js/482.fdfdec18.js"><link rel="prefetch" href="/assets/js/483.51fd70b9.js"><link rel="prefetch" href="/assets/js/484.7f0af724.js"><link rel="prefetch" href="/assets/js/485.c67ee119.js"><link rel="prefetch" href="/assets/js/486.71c71c7f.js"><link rel="prefetch" href="/assets/js/487.cca67f27.js"><link rel="prefetch" href="/assets/js/488.499899e2.js"><link rel="prefetch" href="/assets/js/489.0f6f3fa0.js"><link rel="prefetch" href="/assets/js/49.5bce96f8.js"><link rel="prefetch" href="/assets/js/490.1d13e54c.js"><link rel="prefetch" href="/assets/js/491.45cd721b.js"><link rel="prefetch" href="/assets/js/492.1f54c848.js"><link rel="prefetch" href="/assets/js/493.208a6593.js"><link rel="prefetch" href="/assets/js/494.4ac302d5.js"><link rel="prefetch" href="/assets/js/495.e8ec9acf.js"><link rel="prefetch" href="/assets/js/496.370ffb41.js"><link rel="prefetch" href="/assets/js/497.c7a7e029.js"><link rel="prefetch" href="/assets/js/498.625f852d.js"><link rel="prefetch" href="/assets/js/499.a0c96c3f.js"><link rel="prefetch" href="/assets/js/5.1244f18e.js"><link rel="prefetch" href="/assets/js/50.4278c91c.js"><link rel="prefetch" href="/assets/js/500.f161a842.js"><link rel="prefetch" href="/assets/js/501.0511efd0.js"><link rel="prefetch" href="/assets/js/502.404f07b0.js"><link rel="prefetch" href="/assets/js/503.200962a2.js"><link rel="prefetch" href="/assets/js/504.499269a4.js"><link rel="prefetch" href="/assets/js/505.dd8a5460.js"><link rel="prefetch" href="/assets/js/506.de58c7b3.js"><link rel="prefetch" href="/assets/js/507.f13689af.js"><link rel="prefetch" href="/assets/js/508.2fcd3058.js"><link rel="prefetch" href="/assets/js/509.13599f11.js"><link rel="prefetch" href="/assets/js/51.9297e3bb.js"><link rel="prefetch" href="/assets/js/510.ceccf928.js"><link rel="prefetch" href="/assets/js/511.f103e7d3.js"><link rel="prefetch" href="/assets/js/512.4f500f59.js"><link rel="prefetch" href="/assets/js/513.f9102ec7.js"><link rel="prefetch" href="/assets/js/514.95cd541c.js"><link rel="prefetch" href="/assets/js/515.894fae30.js"><link rel="prefetch" href="/assets/js/516.b6a05e0e.js"><link rel="prefetch" href="/assets/js/517.315c5a6d.js"><link rel="prefetch" href="/assets/js/518.e2e22827.js"><link rel="prefetch" href="/assets/js/519.bce5f0c8.js"><link rel="prefetch" href="/assets/js/52.f37880c1.js"><link rel="prefetch" href="/assets/js/520.6435b535.js"><link rel="prefetch" href="/assets/js/521.d348c1e8.js"><link rel="prefetch" href="/assets/js/522.499e796d.js"><link rel="prefetch" href="/assets/js/523.418beff6.js"><link rel="prefetch" href="/assets/js/524.0baff9a9.js"><link rel="prefetch" href="/assets/js/525.bf36235f.js"><link rel="prefetch" href="/assets/js/526.f02685e1.js"><link rel="prefetch" href="/assets/js/527.a99b970f.js"><link rel="prefetch" href="/assets/js/528.f1c7eabf.js"><link rel="prefetch" href="/assets/js/529.380f731d.js"><link rel="prefetch" href="/assets/js/53.c6c7b22b.js"><link rel="prefetch" href="/assets/js/530.8bf41a62.js"><link rel="prefetch" href="/assets/js/531.6d3f5873.js"><link rel="prefetch" href="/assets/js/532.9150f8f4.js"><link rel="prefetch" href="/assets/js/533.63232eb9.js"><link rel="prefetch" href="/assets/js/534.fa76477d.js"><link rel="prefetch" href="/assets/js/535.91a0e837.js"><link rel="prefetch" href="/assets/js/536.904ad6f4.js"><link rel="prefetch" href="/assets/js/537.a44b05b8.js"><link rel="prefetch" href="/assets/js/538.9943a5ea.js"><link rel="prefetch" href="/assets/js/539.1e5bf5d2.js"><link rel="prefetch" href="/assets/js/54.f591e0de.js"><link rel="prefetch" href="/assets/js/540.bdde5ab9.js"><link rel="prefetch" href="/assets/js/541.c1cdcc1d.js"><link rel="prefetch" href="/assets/js/542.c361e7b8.js"><link rel="prefetch" href="/assets/js/543.dba7d709.js"><link rel="prefetch" href="/assets/js/544.88fb4af0.js"><link rel="prefetch" href="/assets/js/545.989e2015.js"><link rel="prefetch" href="/assets/js/546.9eb22fa2.js"><link rel="prefetch" href="/assets/js/547.4dafbcb2.js"><link rel="prefetch" href="/assets/js/548.04ab571e.js"><link rel="prefetch" href="/assets/js/549.ddb0bee4.js"><link rel="prefetch" href="/assets/js/55.80f96495.js"><link rel="prefetch" href="/assets/js/550.4ef7808b.js"><link rel="prefetch" href="/assets/js/551.83e26e82.js"><link rel="prefetch" href="/assets/js/552.a776d6f5.js"><link rel="prefetch" href="/assets/js/553.13e9f8a2.js"><link rel="prefetch" href="/assets/js/554.e41a0614.js"><link rel="prefetch" href="/assets/js/555.69d9a13e.js"><link rel="prefetch" href="/assets/js/556.25e940a3.js"><link rel="prefetch" href="/assets/js/557.164e4fd3.js"><link rel="prefetch" href="/assets/js/558.e9ad897d.js"><link rel="prefetch" href="/assets/js/559.bd2f883c.js"><link rel="prefetch" href="/assets/js/56.c6f21e4d.js"><link rel="prefetch" href="/assets/js/560.b5ade97a.js"><link rel="prefetch" href="/assets/js/561.1e4ed91c.js"><link rel="prefetch" href="/assets/js/562.977abf54.js"><link rel="prefetch" href="/assets/js/563.8dd38420.js"><link rel="prefetch" href="/assets/js/564.e5626493.js"><link rel="prefetch" href="/assets/js/565.3c9a9bf7.js"><link rel="prefetch" href="/assets/js/566.9c48d10f.js"><link rel="prefetch" href="/assets/js/567.ac24341a.js"><link rel="prefetch" href="/assets/js/568.1aa6984c.js"><link rel="prefetch" href="/assets/js/569.c7d29cee.js"><link rel="prefetch" href="/assets/js/57.eb1d56ec.js"><link rel="prefetch" href="/assets/js/570.a6660390.js"><link rel="prefetch" href="/assets/js/571.84271957.js"><link rel="prefetch" href="/assets/js/572.fac89f9d.js"><link rel="prefetch" href="/assets/js/573.25bab672.js"><link rel="prefetch" href="/assets/js/574.3aafc701.js"><link rel="prefetch" href="/assets/js/575.e596368b.js"><link rel="prefetch" href="/assets/js/576.7679790e.js"><link rel="prefetch" href="/assets/js/577.9d7c7300.js"><link rel="prefetch" href="/assets/js/578.43862aa5.js"><link rel="prefetch" href="/assets/js/579.6501b0b3.js"><link rel="prefetch" href="/assets/js/58.5f0df764.js"><link rel="prefetch" href="/assets/js/580.93b09c06.js"><link rel="prefetch" href="/assets/js/581.ce3be8b9.js"><link rel="prefetch" href="/assets/js/582.2dc51924.js"><link rel="prefetch" href="/assets/js/583.89d653f8.js"><link rel="prefetch" href="/assets/js/584.2922b4dc.js"><link rel="prefetch" href="/assets/js/585.afc6c050.js"><link rel="prefetch" href="/assets/js/586.aff773fc.js"><link rel="prefetch" href="/assets/js/587.9bc6ad4e.js"><link rel="prefetch" href="/assets/js/588.9bb2f30f.js"><link rel="prefetch" href="/assets/js/589.ac36c015.js"><link rel="prefetch" href="/assets/js/59.326d8420.js"><link rel="prefetch" href="/assets/js/590.7abcf8c6.js"><link rel="prefetch" href="/assets/js/591.b8cc2f00.js"><link rel="prefetch" href="/assets/js/592.43245afa.js"><link rel="prefetch" href="/assets/js/593.e3bb4493.js"><link rel="prefetch" href="/assets/js/594.65819f6f.js"><link rel="prefetch" href="/assets/js/595.b39d13c0.js"><link rel="prefetch" href="/assets/js/596.970397c3.js"><link rel="prefetch" href="/assets/js/597.21293422.js"><link rel="prefetch" href="/assets/js/598.77cf5286.js"><link rel="prefetch" href="/assets/js/599.c8864d4f.js"><link rel="prefetch" href="/assets/js/6.830ac73f.js"><link rel="prefetch" href="/assets/js/60.ff7812a4.js"><link rel="prefetch" href="/assets/js/600.fffc79ed.js"><link rel="prefetch" href="/assets/js/601.d80284ef.js"><link rel="prefetch" href="/assets/js/602.f10ab4fd.js"><link rel="prefetch" href="/assets/js/603.b196967f.js"><link rel="prefetch" href="/assets/js/604.5313b517.js"><link rel="prefetch" href="/assets/js/605.1a1f68fb.js"><link rel="prefetch" href="/assets/js/606.cc28d341.js"><link rel="prefetch" href="/assets/js/607.00d95597.js"><link rel="prefetch" href="/assets/js/608.aae57856.js"><link rel="prefetch" href="/assets/js/609.3d4a5412.js"><link rel="prefetch" href="/assets/js/61.f943499d.js"><link rel="prefetch" href="/assets/js/610.24080179.js"><link rel="prefetch" href="/assets/js/611.7139d124.js"><link rel="prefetch" href="/assets/js/612.eb1864df.js"><link rel="prefetch" href="/assets/js/613.ded9d28a.js"><link rel="prefetch" href="/assets/js/614.acb0edb8.js"><link rel="prefetch" href="/assets/js/615.ef2a6c09.js"><link rel="prefetch" href="/assets/js/616.df6e4e3b.js"><link rel="prefetch" href="/assets/js/617.4f19cb62.js"><link rel="prefetch" href="/assets/js/618.8ab2e9df.js"><link rel="prefetch" href="/assets/js/619.00637cc7.js"><link rel="prefetch" href="/assets/js/62.638325e0.js"><link rel="prefetch" href="/assets/js/620.1b0b4cb6.js"><link rel="prefetch" href="/assets/js/621.8b370627.js"><link rel="prefetch" href="/assets/js/622.2615c03d.js"><link rel="prefetch" href="/assets/js/623.958acc26.js"><link rel="prefetch" href="/assets/js/624.e5603812.js"><link rel="prefetch" href="/assets/js/625.59a01c3d.js"><link rel="prefetch" href="/assets/js/626.f58048e3.js"><link rel="prefetch" href="/assets/js/627.87e87a88.js"><link rel="prefetch" href="/assets/js/628.e0f97481.js"><link rel="prefetch" href="/assets/js/629.52ed9186.js"><link rel="prefetch" href="/assets/js/63.5474bba6.js"><link rel="prefetch" href="/assets/js/630.c797b8cb.js"><link rel="prefetch" href="/assets/js/631.d35e30c7.js"><link rel="prefetch" href="/assets/js/632.731c602a.js"><link rel="prefetch" href="/assets/js/633.bd9bbcb6.js"><link rel="prefetch" href="/assets/js/634.a6e4fc91.js"><link rel="prefetch" href="/assets/js/635.f8e5aa9e.js"><link rel="prefetch" href="/assets/js/636.cb5d0aa9.js"><link rel="prefetch" href="/assets/js/637.bcfad99c.js"><link rel="prefetch" href="/assets/js/638.35ee32bb.js"><link rel="prefetch" href="/assets/js/639.01e21a8d.js"><link rel="prefetch" href="/assets/js/64.30628b19.js"><link rel="prefetch" href="/assets/js/640.7b2d2b86.js"><link rel="prefetch" href="/assets/js/641.c3d6d4d1.js"><link rel="prefetch" href="/assets/js/642.5c79f394.js"><link rel="prefetch" href="/assets/js/643.96db5b9d.js"><link rel="prefetch" href="/assets/js/644.2aa94e55.js"><link rel="prefetch" href="/assets/js/645.ff9620b7.js"><link rel="prefetch" href="/assets/js/646.c5baff7a.js"><link rel="prefetch" href="/assets/js/647.55212d7c.js"><link rel="prefetch" href="/assets/js/648.e54efbbd.js"><link rel="prefetch" href="/assets/js/649.5c3d2fb0.js"><link rel="prefetch" href="/assets/js/65.71816150.js"><link rel="prefetch" href="/assets/js/650.d8c7f774.js"><link rel="prefetch" href="/assets/js/651.27bee633.js"><link rel="prefetch" href="/assets/js/652.f8048b0b.js"><link rel="prefetch" href="/assets/js/653.709d6491.js"><link rel="prefetch" href="/assets/js/654.91db8d84.js"><link rel="prefetch" href="/assets/js/655.7048d384.js"><link rel="prefetch" href="/assets/js/656.cff77d15.js"><link rel="prefetch" href="/assets/js/657.31586ab9.js"><link rel="prefetch" href="/assets/js/658.d25f21ee.js"><link rel="prefetch" href="/assets/js/659.3b7b08e9.js"><link rel="prefetch" href="/assets/js/66.70128440.js"><link rel="prefetch" href="/assets/js/660.ea92cebe.js"><link rel="prefetch" href="/assets/js/661.525b3cc7.js"><link rel="prefetch" href="/assets/js/662.1d1e6748.js"><link rel="prefetch" href="/assets/js/663.336eff72.js"><link rel="prefetch" href="/assets/js/664.d6018682.js"><link rel="prefetch" href="/assets/js/665.778f5c84.js"><link rel="prefetch" href="/assets/js/666.657a68c7.js"><link rel="prefetch" href="/assets/js/667.95afe4ad.js"><link rel="prefetch" href="/assets/js/668.ecc000eb.js"><link rel="prefetch" href="/assets/js/669.28290568.js"><link rel="prefetch" href="/assets/js/67.17a8cd4b.js"><link rel="prefetch" href="/assets/js/670.e7cd9bb3.js"><link rel="prefetch" href="/assets/js/671.cf0e5261.js"><link rel="prefetch" href="/assets/js/672.41a00248.js"><link rel="prefetch" href="/assets/js/673.a43d5324.js"><link rel="prefetch" href="/assets/js/674.e8ce84c9.js"><link rel="prefetch" href="/assets/js/675.5b30e80c.js"><link rel="prefetch" href="/assets/js/676.d850673a.js"><link rel="prefetch" href="/assets/js/677.29732340.js"><link rel="prefetch" href="/assets/js/678.941bcc4a.js"><link rel="prefetch" href="/assets/js/679.78241996.js"><link rel="prefetch" href="/assets/js/68.659d8ed6.js"><link rel="prefetch" href="/assets/js/680.ab48a823.js"><link rel="prefetch" href="/assets/js/681.436a9245.js"><link rel="prefetch" href="/assets/js/682.2e55c96d.js"><link rel="prefetch" href="/assets/js/683.4d340990.js"><link rel="prefetch" href="/assets/js/684.24cee4d8.js"><link rel="prefetch" href="/assets/js/685.bfbe4a55.js"><link rel="prefetch" href="/assets/js/686.30c2b372.js"><link rel="prefetch" href="/assets/js/687.428bf5e6.js"><link rel="prefetch" href="/assets/js/688.932602b0.js"><link rel="prefetch" href="/assets/js/689.79ffd250.js"><link rel="prefetch" href="/assets/js/69.4b51d971.js"><link rel="prefetch" href="/assets/js/690.9ee2073d.js"><link rel="prefetch" href="/assets/js/691.28a15e04.js"><link rel="prefetch" href="/assets/js/692.d215f449.js"><link rel="prefetch" href="/assets/js/693.56137f50.js"><link rel="prefetch" href="/assets/js/694.935aa814.js"><link rel="prefetch" href="/assets/js/695.f8449085.js"><link rel="prefetch" href="/assets/js/696.979f6704.js"><link rel="prefetch" href="/assets/js/697.f821c698.js"><link rel="prefetch" href="/assets/js/698.c420c072.js"><link rel="prefetch" href="/assets/js/699.6045b82f.js"><link rel="prefetch" href="/assets/js/7.cb453354.js"><link rel="prefetch" href="/assets/js/70.008e75e5.js"><link rel="prefetch" href="/assets/js/700.aac16fe5.js"><link rel="prefetch" href="/assets/js/701.467fe66b.js"><link rel="prefetch" href="/assets/js/702.122f5b45.js"><link rel="prefetch" href="/assets/js/703.fef8eed8.js"><link rel="prefetch" href="/assets/js/704.282508b1.js"><link rel="prefetch" href="/assets/js/705.31048778.js"><link rel="prefetch" href="/assets/js/706.3a8b2d98.js"><link rel="prefetch" href="/assets/js/707.b02d8ecc.js"><link rel="prefetch" href="/assets/js/708.a32666cb.js"><link rel="prefetch" href="/assets/js/709.b0af4c50.js"><link rel="prefetch" href="/assets/js/71.3324454d.js"><link rel="prefetch" href="/assets/js/710.cb9fbc76.js"><link rel="prefetch" href="/assets/js/711.87b5ef21.js"><link rel="prefetch" href="/assets/js/712.3a1495ff.js"><link rel="prefetch" href="/assets/js/713.4291fb23.js"><link rel="prefetch" href="/assets/js/714.c4ef4bfa.js"><link rel="prefetch" href="/assets/js/715.5411c40f.js"><link rel="prefetch" href="/assets/js/716.558bcb23.js"><link rel="prefetch" href="/assets/js/717.81d931a9.js"><link rel="prefetch" href="/assets/js/718.c062bbdf.js"><link rel="prefetch" href="/assets/js/719.ce826421.js"><link rel="prefetch" href="/assets/js/72.80901173.js"><link rel="prefetch" href="/assets/js/720.d0a39b7d.js"><link rel="prefetch" href="/assets/js/721.acfebd27.js"><link rel="prefetch" href="/assets/js/722.384381d3.js"><link rel="prefetch" href="/assets/js/723.a0e8eea4.js"><link rel="prefetch" href="/assets/js/724.dc68d7a4.js"><link rel="prefetch" href="/assets/js/725.b7bad5b5.js"><link rel="prefetch" href="/assets/js/726.2522c4e5.js"><link rel="prefetch" href="/assets/js/727.9e5bc334.js"><link rel="prefetch" href="/assets/js/728.54bc121f.js"><link rel="prefetch" href="/assets/js/729.d3519eee.js"><link rel="prefetch" href="/assets/js/73.69475df0.js"><link rel="prefetch" href="/assets/js/730.a8363d2d.js"><link rel="prefetch" href="/assets/js/731.dad88242.js"><link rel="prefetch" href="/assets/js/732.0e273d9e.js"><link rel="prefetch" href="/assets/js/733.5df56316.js"><link rel="prefetch" href="/assets/js/734.65973254.js"><link rel="prefetch" href="/assets/js/735.70d2a754.js"><link rel="prefetch" href="/assets/js/736.aad25a62.js"><link rel="prefetch" href="/assets/js/737.6e2c4818.js"><link rel="prefetch" href="/assets/js/738.a240fd0c.js"><link rel="prefetch" href="/assets/js/739.5229b014.js"><link rel="prefetch" href="/assets/js/74.e1150ef8.js"><link rel="prefetch" href="/assets/js/740.370bd327.js"><link rel="prefetch" href="/assets/js/741.d51f2981.js"><link rel="prefetch" href="/assets/js/742.147e4f0c.js"><link rel="prefetch" href="/assets/js/743.3bbe4872.js"><link rel="prefetch" href="/assets/js/744.e30a8831.js"><link rel="prefetch" href="/assets/js/745.ed874713.js"><link rel="prefetch" href="/assets/js/746.b06fe6be.js"><link rel="prefetch" href="/assets/js/747.fee0a58e.js"><link rel="prefetch" href="/assets/js/748.5b6b1dd9.js"><link rel="prefetch" href="/assets/js/749.63eeddd7.js"><link rel="prefetch" href="/assets/js/75.f09edc3f.js"><link rel="prefetch" href="/assets/js/750.b9e661aa.js"><link rel="prefetch" href="/assets/js/751.9ffc6617.js"><link rel="prefetch" href="/assets/js/752.25665624.js"><link rel="prefetch" href="/assets/js/753.20a36692.js"><link rel="prefetch" href="/assets/js/754.4d91cf5f.js"><link rel="prefetch" href="/assets/js/755.63cf0164.js"><link rel="prefetch" href="/assets/js/756.f924cf85.js"><link rel="prefetch" href="/assets/js/757.880529a1.js"><link rel="prefetch" href="/assets/js/758.5c54c9ea.js"><link rel="prefetch" href="/assets/js/759.e907a11c.js"><link rel="prefetch" href="/assets/js/76.edd38760.js"><link rel="prefetch" href="/assets/js/760.25a88f22.js"><link rel="prefetch" href="/assets/js/761.b3f9a72e.js"><link rel="prefetch" href="/assets/js/762.f7e46ea3.js"><link rel="prefetch" href="/assets/js/763.be700e67.js"><link rel="prefetch" href="/assets/js/764.e02133f4.js"><link rel="prefetch" href="/assets/js/765.bc997b94.js"><link rel="prefetch" href="/assets/js/766.e0857398.js"><link rel="prefetch" href="/assets/js/767.85d8ef77.js"><link rel="prefetch" href="/assets/js/768.313971f2.js"><link rel="prefetch" href="/assets/js/769.b1d8359c.js"><link rel="prefetch" href="/assets/js/77.bad1e17d.js"><link rel="prefetch" href="/assets/js/770.c51c77a6.js"><link rel="prefetch" href="/assets/js/771.bced04e3.js"><link rel="prefetch" href="/assets/js/772.b363306d.js"><link rel="prefetch" href="/assets/js/773.1765d7c9.js"><link rel="prefetch" href="/assets/js/774.e64e812a.js"><link rel="prefetch" href="/assets/js/775.80ba2e01.js"><link rel="prefetch" href="/assets/js/776.264a89cf.js"><link rel="prefetch" href="/assets/js/777.640660f8.js"><link rel="prefetch" href="/assets/js/778.ce471428.js"><link rel="prefetch" href="/assets/js/779.fa84a589.js"><link rel="prefetch" href="/assets/js/78.871caac1.js"><link rel="prefetch" href="/assets/js/780.788b9350.js"><link rel="prefetch" href="/assets/js/781.baa1fd6f.js"><link rel="prefetch" href="/assets/js/782.e07dfca4.js"><link rel="prefetch" href="/assets/js/783.2b476376.js"><link rel="prefetch" href="/assets/js/784.6b40fe65.js"><link rel="prefetch" href="/assets/js/785.19de1934.js"><link rel="prefetch" href="/assets/js/786.b1910024.js"><link rel="prefetch" href="/assets/js/787.70e33999.js"><link rel="prefetch" href="/assets/js/788.7a676aa7.js"><link rel="prefetch" href="/assets/js/789.bec5efe7.js"><link rel="prefetch" href="/assets/js/79.8d41f9dc.js"><link rel="prefetch" href="/assets/js/790.c5dd47a4.js"><link rel="prefetch" href="/assets/js/791.a3fb9ec9.js"><link rel="prefetch" href="/assets/js/792.f6f28bf1.js"><link rel="prefetch" href="/assets/js/793.131d60fe.js"><link rel="prefetch" href="/assets/js/794.b2797539.js"><link rel="prefetch" href="/assets/js/795.f72bf6cb.js"><link rel="prefetch" href="/assets/js/796.f5318e9b.js"><link rel="prefetch" href="/assets/js/797.5ec81ca5.js"><link rel="prefetch" href="/assets/js/798.10a6d862.js"><link rel="prefetch" href="/assets/js/799.0b58983b.js"><link rel="prefetch" href="/assets/js/8.f8232281.js"><link rel="prefetch" href="/assets/js/80.29f002cb.js"><link rel="prefetch" href="/assets/js/800.bc35c5a2.js"><link rel="prefetch" href="/assets/js/801.6bedad40.js"><link rel="prefetch" href="/assets/js/802.8461a07c.js"><link rel="prefetch" href="/assets/js/803.595e6098.js"><link rel="prefetch" href="/assets/js/804.c8ff7677.js"><link rel="prefetch" href="/assets/js/805.502828e9.js"><link rel="prefetch" href="/assets/js/806.94964806.js"><link rel="prefetch" href="/assets/js/807.f0736b45.js"><link rel="prefetch" href="/assets/js/808.ca5c224c.js"><link rel="prefetch" href="/assets/js/809.ee75100a.js"><link rel="prefetch" href="/assets/js/81.5061f047.js"><link rel="prefetch" href="/assets/js/810.cb147b2c.js"><link rel="prefetch" href="/assets/js/811.7c43a374.js"><link rel="prefetch" href="/assets/js/812.f94931de.js"><link rel="prefetch" href="/assets/js/813.c315fb59.js"><link rel="prefetch" href="/assets/js/814.df98f474.js"><link rel="prefetch" href="/assets/js/815.b1545a3a.js"><link rel="prefetch" href="/assets/js/816.559f5d48.js"><link rel="prefetch" href="/assets/js/817.10fbbe90.js"><link rel="prefetch" href="/assets/js/818.15940c94.js"><link rel="prefetch" href="/assets/js/819.bd8da69e.js"><link rel="prefetch" href="/assets/js/82.6a318ad3.js"><link rel="prefetch" href="/assets/js/820.09a8aeac.js"><link rel="prefetch" href="/assets/js/821.7b47f642.js"><link rel="prefetch" href="/assets/js/822.bb268094.js"><link rel="prefetch" href="/assets/js/823.b5a869d6.js"><link rel="prefetch" href="/assets/js/824.702c7fe5.js"><link rel="prefetch" href="/assets/js/825.87185f83.js"><link rel="prefetch" href="/assets/js/826.06ffbcbf.js"><link rel="prefetch" href="/assets/js/827.ca37d712.js"><link rel="prefetch" href="/assets/js/83.ec14e26e.js"><link rel="prefetch" href="/assets/js/84.b45772f4.js"><link rel="prefetch" href="/assets/js/85.e93f7791.js"><link rel="prefetch" href="/assets/js/86.bfcc7e96.js"><link rel="prefetch" href="/assets/js/87.b1a0c17d.js"><link rel="prefetch" href="/assets/js/88.e827f4b8.js"><link rel="prefetch" href="/assets/js/89.3a23fcc3.js"><link rel="prefetch" href="/assets/js/9.49c28c7c.js"><link rel="prefetch" href="/assets/js/90.3e70c7d5.js"><link rel="prefetch" href="/assets/js/91.0c65c47f.js"><link rel="prefetch" href="/assets/js/92.ce986bb8.js"><link rel="prefetch" href="/assets/js/93.127730e7.js"><link rel="prefetch" href="/assets/js/94.4cdb42ca.js"><link rel="prefetch" href="/assets/js/95.27d08c91.js"><link rel="prefetch" href="/assets/js/96.2bfffb0d.js"><link rel="prefetch" href="/assets/js/97.8bb20cd6.js"><link rel="prefetch" href="/assets/js/98.b3ed5a1a.js"><link rel="prefetch" href="/assets/js/99.c6ca9d8c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3be6d54c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">随风</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/source-study/" class="nav-link router-link-active">
  课程学习
</a></div><div class="nav-item"><a href="/source-vue/" class="nav-link">
  Vue源码
</a></div><div class="nav-item"><a href="/source-react/" class="nav-link">
  React
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front End Menu" class="dropdown-title"><span class="title">Front End</span> <span class="arrow down"></span></button> <button type="button" aria-label="Front End Menu" class="mobile-dropdown-title"><span class="title">Front End</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end/Html/" class="nav-link">
  HTML-DOM
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/front-end/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Flutter/" class="nav-link">
  Flutter
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Electron/" class="nav-link">
  Electron
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Code/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Engineering/" class="nav-link">
  工程化
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Interview/" class="nav-link">
  前端面试题
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Visual/" class="nav-link">
  可视化
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Security/" class="nav-link">
  前端安全
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Log/" class="nav-link">
  前端性能监控
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="back End Menu" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="back End Menu" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/Node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/back-end/Docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/back-end/Nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/back-end/Mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/back-end/Shell/" class="nav-link">
  shell
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="tools End Menu" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="tools End Menu" class="mobile-dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/Ai/" class="nav-link">
  Ai
</a></li><li class="dropdown-item"><!----> <a href="/tools/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/VScode/" class="nav-link">
  VScode
</a></li><li class="dropdown-item"><!----> <a href="/tools/Chrome/" class="nav-link">
  Chrome
</a></li><li class="dropdown-item"><!----> <a href="/tools/Other/" class="nav-link">
  工具
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="wander End Menu" class="dropdown-title"><span class="title">随记</span> <span class="arrow down"></span></button> <button type="button" aria-label="wander End Menu" class="mobile-dropdown-title"><span class="title">随记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wander/Work/" class="nav-link">
  工作
</a></li><li class="dropdown-item"><!----> <a href="/wander/Life/" class="nav-link">
  生活
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/source-study/" class="nav-link router-link-active">
  课程学习
</a></div><div class="nav-item"><a href="/source-vue/" class="nav-link">
  Vue源码
</a></div><div class="nav-item"><a href="/source-react/" class="nav-link">
  React
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front End Menu" class="dropdown-title"><span class="title">Front End</span> <span class="arrow down"></span></button> <button type="button" aria-label="Front End Menu" class="mobile-dropdown-title"><span class="title">Front End</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end/Html/" class="nav-link">
  HTML-DOM
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/front-end/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Flutter/" class="nav-link">
  Flutter
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Electron/" class="nav-link">
  Electron
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Code/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Engineering/" class="nav-link">
  工程化
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Interview/" class="nav-link">
  前端面试题
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Visual/" class="nav-link">
  可视化
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Security/" class="nav-link">
  前端安全
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Log/" class="nav-link">
  前端性能监控
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="back End Menu" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="back End Menu" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/Node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/back-end/Docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/back-end/Nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/back-end/Mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/back-end/Shell/" class="nav-link">
  shell
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="tools End Menu" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="tools End Menu" class="mobile-dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/Ai/" class="nav-link">
  Ai
</a></li><li class="dropdown-item"><!----> <a href="/tools/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/VScode/" class="nav-link">
  VScode
</a></li><li class="dropdown-item"><!----> <a href="/tools/Chrome/" class="nav-link">
  Chrome
</a></li><li class="dropdown-item"><!----> <a href="/tools/Other/" class="nav-link">
  工具
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="wander End Menu" class="dropdown-title"><span class="title">随记</span> <span class="arrow down"></span></button> <button type="button" aria-label="wander End Menu" class="mobile-dropdown-title"><span class="title">随记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wander/Work/" class="nav-link">
  工作
</a></li><li class="dropdown-item"><!----> <a href="/wander/Life/" class="nav-link">
  生活
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Source Study</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/source-study/" aria-current="page" class="sidebar-link">课程学习</a></li><li><a href="/source-study/base-01.html" aria-current="page" class="active sidebar-link">前端知识体系+大厂面试笔记(框架篇)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/source-study/base-01.html#文章导图" class="sidebar-link">文章导图</a></li><li class="sidebar-sub-header"><a href="/source-study/base-01.html#前端框架" class="sidebar-link">前端框架</a></li><li class="sidebar-sub-header"><a href="/source-study/base-01.html#node" class="sidebar-link">Node</a></li><li class="sidebar-sub-header"><a href="/source-study/base-01.html#pm2" class="sidebar-link">PM2</a></li><li class="sidebar-sub-header"><a href="/source-study/base-01.html#计算机网络与安全" class="sidebar-link">计算机网络与安全</a></li><li class="sidebar-sub-header"><a href="/source-study/base-01.html#浏览器原理" class="sidebar-link">浏览器原理</a></li><li class="sidebar-sub-header"><a href="/source-study/base-01.html#总结" class="sidebar-link">总结</a></li><li class="sidebar-sub-header"><a href="/source-study/base-01.html#原文" class="sidebar-link">原文</a></li></ul></li><li><a href="/source-study/base-02.html" class="sidebar-link">10万字前端知识体系总结（算法篇）</a></li><li><a href="/source-study/base-03.html" class="sidebar-link">CSR，SSR，SSG 等常用渲染模式</a></li><li><a href="/source-study/base-04.html" class="sidebar-link">概念篇（1）： 什么是PV、UV、IP、VV、CV？</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="文章导图"><a href="#文章导图" class="header-anchor">#</a> 文章导图</h2> <p><img src="/assets/img/9af6a68af1804b499a5c14273405319b_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.ffb0c845.png" alt="导图"></p> <h2 id="前端框架"><a href="#前端框架" class="header-anchor">#</a> 前端框架</h2> <h3 id="vue"><a href="#vue" class="header-anchor">#</a> Vue</h3> <h4 id="手写minni版的mvvm框架"><a href="#手写minni版的mvvm框架" class="header-anchor">#</a> 手写minni版的MVVM框架</h4> <p>实现效果：2s后修改姓名和年龄这两个值，页面响应式更新渲染
<img src="/assets/img/6009534122ef4cfe99f8db3188d9e5a5_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.d0eec864.gif" alt="效果"></p> <h5 id="实现流程"><a href="#实现流程" class="header-anchor">#</a> 实现流程</h5> <ol><li>实现 observer函数，利用Object.defineProperty把data中的属性变成响应式的，同时给每一个属性添加一个dep对象(用来存储对应的watcher观察者)</li> <li>定义compile函数，模板编译，遍历DOM，遇到mustache(双大括号{{}})形式的文本，则替换成data.key对应的值，同时将该dom节点添加到对应key值的dep对象中</li> <li>当data的数据变化时，调用dep对象的update方法，更新所有观察者中的dom节点</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">doctype</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>vue的mvvm简单实现<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>姓名: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>年龄: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{age}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// new一个vue实例</span>
    <span class="token keyword">let</span> vue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        el<span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">'加载中'</span><span class="token punctuation">,</span>
            age<span class="token operator">:</span> <span class="token string">'18'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 2s后更新页面信息</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 修改vue中$data的name和age属性</span>
        vue<span class="token punctuation">.</span>$data<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'小明'</span><span class="token punctuation">;</span>
        vue<span class="token punctuation">.</span>$data<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">20</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> options<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$data <span class="token operator">=</span> options<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>el<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 监听data中属性变化</span>
    <span class="token function">observe</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 给data中的每一个属性添加一个dep对象(改对象用来存储对应的watcher观察者)</span>
            <span class="token keyword">let</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 利用闭包 获取和设置属性的时候，操作的都是value</span>
            <span class="token keyword">let</span> value <span class="token operator">=</span> data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
            Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 观察者对象添加对应的dom节点</span>
                    Dep<span class="token punctuation">.</span>target <span class="token operator">&amp;&amp;</span> observer<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Dep<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
                    <span class="token comment">// 属性变化时，更新观察者中的所有节点</span>
                    observer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">compile</span><span class="token punctuation">(</span><span class="token parameter">dom</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        dom<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// nodeType为3时是文本节点，并且该节点的内容包含`mustache`(双括号)</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\{\{(.*)\}\}</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// RegExp.$1是正则表达式匹配的第一个字符串，这里对应的就是data的key值</span>
                <span class="token keyword">let</span> key <span class="token operator">=</span> RegExp<span class="token punctuation">.</span>$<span class="token number">1.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 将该节点添加到对应的观察者对象中，在下面的this.options.data[key]中触发get方法</span>
                Dep<span class="token punctuation">.</span>target <span class="token operator">=</span> child<span class="token punctuation">;</span>
                <span class="token comment">// 将{{key}}替换成data中对应的值</span>
                child<span class="token punctuation">.</span>textContent <span class="token operator">=</span> child<span class="token punctuation">.</span>textContent<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{{</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                Dep<span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 递归遍历子节点</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// dep对象存储所有的观察者</span>
<span class="token keyword">class</span> <span class="token class-name">Dep</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>watcherList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 添加watcher</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>watcherList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 更新watcher</span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>watcherList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">node</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><a href="https://juejin.cn/post/6844903619808985095" target="_blank" rel="noopener noreferrer">50行代码的MVVM，感受闭包的艺术<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="手写v-model数据双向绑定"><a href="#手写v-model数据双向绑定" class="header-anchor">#</a> 手写v-model数据双向绑定</h4> <p><img src="/assets/img/cfeedc6eb44b4dce9c5d1c174f35910e_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.0b964c1d.gif" alt="v-model双向绑定"></p> <h4 id="和前文mini版mvvm框架的区别"><a href="#和前文mini版mvvm框架的区别" class="header-anchor">#</a> 和前文mini版MVVM框架的区别</h4> <ol><li>实现v-model指令，input值改变后,页面对应的数据也会变化，实现数据的双向绑定</li> <li>给input元素绑定input事件，当输入值变化会触发对应属性的dep.update方法，通过对应的观察者发生变化</li> <li>增加了数据代理，通过this.info.person.name就可以直接修改$data对应的值，实现了this对this.$data的代理</li> <li>数据劫持，对data增加了递归和设置新值的劫持，让data中每一层数据都是响应式的，如info.person.name</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">doctype</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>vue双向绑定的简单实现<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>年龄: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{info.person.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{job}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>job<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入工作<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// new一个vue对象</span>
    <span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// el为需要挂在的dom节点</span>
        el<span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span>
            info<span class="token operator">:</span> <span class="token punctuation">{</span>
                person<span class="token operator">:</span> <span class="token punctuation">{</span>
                    name<span class="token operator">:</span> <span class="token string">'加载中'</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            job<span class="token operator">:</span> <span class="token string">'程序猿'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        vm<span class="token punctuation">.</span>info<span class="token punctuation">.</span>person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'小明'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$data <span class="token operator">=</span> options<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">observe</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">proxy</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 模板编译</span>
    <span class="token function">compile</span><span class="token punctuation">(</span><span class="token parameter">dom<span class="token punctuation">,</span> vm</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>dom<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 元素节点，匹配v-model 如input,textArea元素等</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>attributes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">attr</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 判断元素是否设置v-model属性</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>attr<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'v-model'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        Dep<span class="token punctuation">.</span>target <span class="token operator">=</span> child<span class="token punctuation">;</span>
                        child<span class="token punctuation">.</span>value <span class="token operator">=</span> vm<span class="token punctuation">.</span>$data<span class="token punctuation">[</span>attr<span class="token punctuation">.</span>value<span class="token punctuation">]</span><span class="token punctuation">;</span>
                        Dep<span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                        <span class="token comment">// 重点：给input绑定原生input事件</span>
                        child<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                            <span class="token comment">// 当input输入内容发生变化时，动态设置vm.$data[attr.value]的值</span>
                            vm<span class="token punctuation">.</span>$data<span class="token punctuation">[</span>attr<span class="token punctuation">.</span>value<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>child<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\{\{(.*)\}\}</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> key <span class="token operator">=</span> RegExp<span class="token punctuation">.</span>$<span class="token number">1.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">let</span> keyList <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>
                <span class="token keyword">let</span> value <span class="token operator">=</span> vm<span class="token punctuation">.</span>$data
                Dep<span class="token punctuation">.</span>target <span class="token operator">=</span> child

                <span class="token comment">// 循环遍历，找到info.person.name对应的name值</span>
                keyList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    value <span class="token operator">=</span> value<span class="token punctuation">[</span>item<span class="token punctuation">]</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                Dep<span class="token punctuation">.</span>target <span class="token operator">=</span> <span class="token keyword">null</span>
                child<span class="token punctuation">.</span>textContent <span class="token operator">=</span> child<span class="token punctuation">.</span>textContent<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{{</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>child<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 递归模板编译</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> vm<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// this 代理this.$data;</span>
    <span class="token comment">// vm.info.person.name 相当于 vm.$data.info.person.name</span>
    <span class="token function">proxy</span><span class="token punctuation">(</span><span class="token parameter">$data<span class="token punctuation">,</span> vm</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>$data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    $data<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> $data<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">observe</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>data <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> data <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Observe</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 递归进行数据劫持，使data中的每一层都是响应式</span>
<span class="token keyword">function</span> <span class="token function">Observe</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> value <span class="token operator">=</span> data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> dep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 递归</span>
        <span class="token function">observe</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                Dep<span class="token punctuation">.</span>target <span class="token operator">&amp;&amp;</span> dep<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Dep<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> value<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
                <span class="token comment">// 如果新设置的值是一个对象，该对象也要变成响应式的</span>
                <span class="token function">observe</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
                dep<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Dep</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>subs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">node</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>tagName <span class="token operator">===</span> <span class="token string">'INPUT'</span> <span class="token operator">||</span> node<span class="token punctuation">.</span>tagName <span class="token operator">===</span> <span class="token string">'TEXTAREA'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                node<span class="token punctuation">.</span>value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><a href="https://github.com/xy-sea/blog/blob/dev/mini-vue/%E6%89%8B%E5%86%99v-model%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A.html" target="_blank" rel="noopener noreferrer">源码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="使用proxy实现数据监听"><a href="#使用proxy实现数据监听" class="header-anchor">#</a> 使用proxy实现数据监听</h4> <p>vue3底层通过Proxy实现了数据监听，替代了vue2中的Object.defineProperty</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">observe</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> result <span class="token operator">=</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 递归获取对象多层嵌套的情况，如pro.info.type(递归监听，保证每一层返回都是proxy对象)</span>
            <span class="token keyword">return</span> <span class="token function">isObject</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>key <span class="token operator">!==</span> <span class="token string">'length'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 解决对数组修改，重复更新视图的问题</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'更新视图'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">isObject</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> target <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span> target <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">observe</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> target<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> target <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'测试'</span><span class="token punctuation">,</span> info<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'1'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> pro <span class="token operator">=</span> <span class="token function">observe</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
pro<span class="token punctuation">.</span>infot<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="vue异步更新原理"><a href="#vue异步更新原理" class="header-anchor">#</a> vue异步更新原理</h4> <p><span style="color:red;">vue的数据频繁变化，但为什么dom只会更新一次</span></p> <ol><li>Vue数据发生变化之后，不会立即更新dom，而是异步更新的</li> <li>侦听到数据变化，Vue将开启一个队列，并缓存在同一事件循环中发生的所有数据变更</li> <li>如果同一个watcher被多次触发，只会被推入队列中一次，可以避免重复修改相同的dom，这种去掉重复数据，对于避免不必要的计算和DOM操作是非常重要的</li> <li>同步任务执行完毕，开始执行异步watcher队列任务，一次性更新DOM</li></ol> <p><strong>异步更新的源码实现</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 定义watcher类</span>
<span class="token keyword">class</span> <span class="token class-name">Watcher</span> <span class="token punctuation">{</span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 放到watcher队列中，异步更新</span>
        <span class="token function">queueWatcher</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 触发更新</span>
    <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 队列中添加watcher</span>
<span class="token keyword">function</span> <span class="token function">queueWatcher</span><span class="token punctuation">(</span><span class="token parameter">watcher</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> id <span class="token operator">=</span> watcher<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
    <span class="token comment">// 先判断watcher是否存在，去掉重复的watcher</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>has<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>watcher<span class="token punctuation">)</span><span class="token punctuation">;</span>
        has<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>pending<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            pending <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token comment">// 使用异步更新watcher</span>
            <span class="token function">nextTick</span><span class="token punctuation">(</span>flushSchedulerQueue<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 定义watcher队列</span>
<span class="token keyword">let</span> has <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 使用对象来保存id，进行去重操作</span>
<span class="token keyword">let</span> pending <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 如果异步队列正在执行，将不会再次执行</span>
<span class="token comment">// 执行watcher队列任务</span>
<span class="token keyword">function</span> <span class="token function">flushSchedulerQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    queue<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">watcher</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        watcher<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>watcher<span class="token punctuation">.</span>options<span class="token punctuation">.</span>render<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 在更新之后执行对应的回调：这里是updated钩子函数</span>
            watcher<span class="token punctuation">.</span><span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 执行完成后清空队列 充值pending状态</span>
    queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    has <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    pending <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="nexttick为什么要优先使用微任务实现"><a href="#nexttick为什么要优先使用微任务实现" class="header-anchor">#</a> nextTick为什么要优先使用微任务实现</h4> <ol><li><p>vue nextTick的源码实现，异步优先级判断，总结就是Promise &gt; MutationObserver &gt; setImmediate &gt; setTimeout</p></li> <li><p>优先使用Promise，因为根据event loop与浏览器更新渲染时机，宏任务-&gt;微任务-&gt;渲染更新，使用微任务，本次event loop轮训就可以获取到更新的dom</p></li> <li><p>如果使用宏任务，要到下一次event loop中，才能获取到更新dom</p></li></ol> <p><strong>nextTick的源码实现</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 定义nextTick的回调队列</span>
<span class="token keyword">let</span> callbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 批量执行nextTick的回调队列</span>
<span class="token keyword">function</span> <span class="token function">flushCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    callbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">cb</span> <span class="token operator">=&gt;</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    callbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    pending <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 定义异步方法，优先使用微任务实现</span>
<span class="token keyword">let</span> timerFunc<span class="token punctuation">;</span>

<span class="token comment">// 优先使用promise 微任务</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>promise<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">timerFunc</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>flushCallbacks<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 如果不支持promise,在使用MutationObserver 微任务</span>
<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>MutationObserver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> textNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutationObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">flushCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        observer<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> observer <span class="token operator">=</span> observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>textNode<span class="token punctuation">,</span> <span class="token punctuation">{</span> characterData<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    textNode<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'2'</span>
<span class="token punctuation">}</span>
<span class="token comment">// 微任务不支持，在使用宏任务实现</span>
<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>setImmediate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">timerFunc</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setImmediate</span><span class="token punctuation">(</span>flushCallbacks<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">timerFunc</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span>flushCallbacks<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 定义nextTick方法</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    callbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>pending<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        pending <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token function">timerFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="/front-end/Log/performance-word.html#指标">MutationObserver</a></p> <p><a href="https://juejin.cn/post/6844903843197616136" target="_blank" rel="noopener noreferrer">你真的理解$nextTick么<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://segmentfault.com/a/1190000008589736" target="_blank" rel="noopener noreferrer">Vue 源码详解之 nextTick：microtask 才是核心！<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="computed-和-watch的区别"><a href="#computed-和-watch的区别" class="header-anchor">#</a> computed 和 watch的区别</h4> <ol><li>计算属性本质上是computed watcher,而watch本质是user watcher(用户自己定义的watcher)；</li> <li>computed有缓存的功能，通过dirty控制</li> <li>watcher设置deep:true,实现深度监听的功能</li> <li>computed可以监听多个值的变化</li></ol> <h5 id="computed原理"><a href="#computed原理" class="header-anchor">#</a> computed原理</h5> <ol><li>初始化计算属性时，遍历computed对象,给其中每一个计算属性分别生成唯一computed watcher，并将该watcher中的dirty设置为true
初始化时，计算出现并不会立即计算(vue做的优化之一)，只有当获取的计算属性值才会进行对应计算</li> <li>初始化计算属性时候，将Dep.target设置成当前的computed watcher，将computed watcher添加到所依赖data值的dep中(依赖收集过程)，然后计算computed对应的值，后将dirty改成false</li> <li>当依赖data中的值发生变化时，调用set方法触发dep的notiry方法，将computed watcher中的dirty设置为true</li> <li>下次获取计算属性值时，若dirty为true，重新计算属性值</li> <li>dirty是控制缓存的关键，当所依赖的data发生变化，dirty设置为true，再次呗获取时，就会重新计算
<strong>computed源码实现</strong></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 空函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">noop</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// computed初始化的watcher传入lazy:true，就会触发watcher中的dirty值为true</span>
<span class="token keyword">const</span> computedWatcherOptions <span class="token operator">=</span> <span class="token punctuation">{</span> lazy<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token comment">// Object.defineProperty 默认value参数</span>
<span class="token keyword">const</span> sharedPropertyDefinition <span class="token operator">=</span> <span class="token punctuation">{</span>
    enumberable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    get<span class="token operator">:</span> noop<span class="token punctuation">,</span>
    set<span class="token operator">:</span> noop
<span class="token punctuation">}</span>
<span class="token comment">// 初始化computed</span>
<span class="token keyword">class</span> <span class="token class-name">initComputed</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">vm<span class="token punctuation">,</span> computed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 新建存储watcher对象，挂载在vm对象执行</span>
        <span class="token keyword">const</span> watchers <span class="token operator">=</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>_computedWatchers <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 遍历computed</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> computed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> userDef <span class="token operator">=</span> computed<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment">// getter值为computed重key的监听函数或对象的get值</span>
            <span class="token keyword">let</span> getter <span class="token operator">=</span> <span class="token keyword">typeof</span> userDef <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">?</span> userDef <span class="token operator">:</span> userDef<span class="token punctuation">.</span>get<span class="token punctuation">;</span>
            <span class="token comment">// 新建computed watcher</span>
            watchers<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Watcher</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> getter<span class="token punctuation">,</span>noop<span class="token punctuation">,</span> computedWatcherOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>key <span class="token keyword">in</span> vm<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 定义计算属性</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">defineComputed</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> key<span class="token punctuation">,</span> userDef<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 <span class="token comment">// 重新定义计算属性  对get和set劫持</span>
  <span class="token comment">// 利用Object.defineProperty来对计算属性的get和set进行劫持</span>
  <span class="token function">defineComputed</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> userDef</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果是一个函数，需要手动赋值到get上</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> userDef <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      sharedPropertyDefinition<span class="token punctuation">.</span>get <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createComputedGetter</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
      sharedPropertyDefinition<span class="token punctuation">.</span>set <span class="token operator">=</span> noop<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      sharedPropertyDefinition<span class="token punctuation">.</span>get <span class="token operator">=</span> userDef<span class="token punctuation">.</span>get
        <span class="token operator">?</span> userDef<span class="token punctuation">.</span>cache <span class="token operator">!==</span> <span class="token boolean">false</span>
          <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createComputedGetter</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
          <span class="token operator">:</span> userDef<span class="token punctuation">.</span>get
        <span class="token operator">:</span> noop<span class="token punctuation">;</span>
      <span class="token comment">// 如果有设置set方法则直接使用，否则赋值空函数</span>
      sharedPropertyDefinition<span class="token punctuation">.</span>set <span class="token operator">=</span> userDef<span class="token punctuation">.</span>set <span class="token operator">?</span> userDef<span class="token punctuation">.</span>set <span class="token operator">:</span> noop<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> sharedPropertyDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 计算属性的getter 获取计算属性的值时会调用</span>
  <span class="token function">createComputedGetter</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">computedGetter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 获取对应的计算属性watcher</span>
      <span class="token keyword">const</span> watcher <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_computedWatchers <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_computedWatchers<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>watcher<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// dirty为true,计算属性需要重新计算</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>watcher<span class="token punctuation">.</span>dirty<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          watcher<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 获取依赖</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Dep<span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          watcher<span class="token punctuation">.</span><span class="token function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//返回计算属性的值</span>
        <span class="token keyword">return</span> watcher<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="watch原理"><a href="#watch原理" class="header-anchor">#</a> watch原理</h5> <ol><li>遍历watch对象，给其中每一个watch属性，生成use watcher</li> <li>调用watcher中的get方法，将Dep.target设置成当前的user watcher，并将user watcher添加到监听data值对应的dep中(依赖收集的过程)</li> <li>当所监听data中的值发生变化时，会调用set方法触发dep的notify方法，执行watcher中定义的方法</li> <li>设置成deep：true的情况，递归遍历所监听的对象，将user watcher添加到对象中每一层key值的dep对象中，这样武林当对象的中那一层发生变化，watcher都可以监听到。通过对象的递归遍历，实现了深度监听功能</li></ol> <p><a href="https://juejin.cn/post/6844903667884097543" target="_blank" rel="noopener noreferrer">Vue.js的computed和watch是如何工作的？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://juejin.cn/post/6956407362085191717" target="_blank" rel="noopener noreferrer">手写Vue2.0源码（十）-计算属性原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.bilibili.com/video/BV1YE411u7m4/?from=search&amp;seid=14891340203736945411" target="_blank" rel="noopener noreferrer">珠峰：史上最全最专业的Vue.js面试题训练营<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="vue-css-scoped"><a href="#vue-css-scoped" class="header-anchor">#</a> vue css scoped</h4> <h5 id="css属性选择器示例"><a href="#css属性选择器示例" class="header-anchor">#</a> css属性选择器示例</h5> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 页面上&quot;属性选择器&quot;这几个字显示红色 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-v-hash</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test-attr<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>属性选择器<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token comment">/* 该标签有个data-v-hash的属性，只不过该属性为空，依然可以使用属性选择器 */</span>
<span class="token selector">.test-attr[data-v-hash]</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 通过js判断是否存在data-v-hash属性</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.test-attr'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-v-hash'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="vue-css-scoped原理"><a href="#vue-css-scoped原理" class="header-anchor">#</a> vue css scoped原理</h5> <ol><li><p>编译时，会给每个vue文件生成一个唯一的id,会将次id添加到当前文件中所有html标签上</p> <p>如&lt;div class=&quot;demo&quot;&gt;&lt;/div&gt;会被编译成&lt;div class=&quot;demo&quot; data-v-27e4e96e&gt;&lt;/div&gt;</p></li> <li><p>编译style标签时，会将css选择器改造成属性选择器，如.demo{color: red}会被编译成.demo[data-v-27e4e96e]{color: red}</p></li></ol> <h4 id="虚拟dom"><a href="#虚拟dom" class="header-anchor">#</a> 虚拟DOM</h4> <p><span stle="color: red">什么是虚拟dom?</span></p> <p><span style="color:blue;">Virtual DOM是模拟真实DOM节点，这个对象就是更加轻量级的对DOM的描述</span></p> <p><span style="color:red;">为什么现在主流的框架都是用虚拟dom?</span></p> <ol><li>前端性能优化的一个秘诀就是尽可能少操作DOM，频繁变动DOM会造成浏览器的回流或者重绘</li> <li>是用虚拟dom，当数据变化，页面需要更新时，通过diff算法，对比新旧虚拟dom节点进行对比，比较两棵树的差异，生成差异对象，一次性将dom进行批量更新操作，进而有效提高性能</li> <li>虚拟DOM本质上是JS对象，而DOM与平台强相关，相比之下虚拟DOM可以进行更方便的跨平台操作，例如服务器渲染、weex开发等等</li></ol> <h5 id="虚拟dom与真实dom的相互转化"><a href="#虚拟dom与真实dom的相互转化" class="header-anchor">#</a> 虚拟dom与真实dom的相互转化</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 将真实dom转化为虚拟dom</span>
<span class="token keyword">function</span> <span class="token function">dom2Json</span><span class="token punctuation">(</span><span class="token parameter">dom</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>dom<span class="token punctuation">.</span>tagName<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span>tag <span class="token operator">=</span> dom<span class="token punctuation">.</span>tagName<span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    dom<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 去掉空节点</span>
        <span class="token function">dom2Json</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">dom2Json</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> obj
<span class="token punctuation">}</span>

<span class="token comment">// 虚拟dom包含三个参数 type,props, children</span>
<span class="token keyword">class</span> <span class="token class-name">Element</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token operator">=</span> props<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>children <span class="token operator">=</span> children<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 将虚拟dom渲染成真实的dom</span>
<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">domObj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>domObj<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>domObj<span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> value <span class="token operator">=</span> domObj<span class="token punctuation">.</span>props<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token string">'value'</span><span class="token operator">:</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>tagName <span class="token operator">==</span> <span class="token string">'INPUT'</span> <span class="token operator">||</span> el<span class="token punctuation">.</span>tagName <span class="token operator">==</span> <span class="token string">'TEXTAREA'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    el<span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    el<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'style'</span><span class="token operator">:</span> 
                el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> value<span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token operator">:</span> 
                el<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    domObj<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// child = child instaceof Element ? render(child) : document.createTextNode(child);</span>
        el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">render</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> el<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://juejin.cn/post/6844903806132568072" target="_blank" rel="noopener noreferrer">让虚拟DOM和DOM-diff不再成为你的绊脚石<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://mp.weixin.qq.com/s/oAlVmZ4Hbt2VhOwFEkNEhw" target="_blank" rel="noopener noreferrer">虚拟 DOM 到底是什么？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://juejin.cn/post/6844903607913938951" target="_blank" rel="noopener noreferrer">详解vue的diff算法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="vuex原理"><a href="#vuex原理" class="header-anchor">#</a> vuex原理</h4> <ol><li>vuex中store本质就是一个没有template模板的隐藏式的vue组件</li> <li>vuex是利用vue的mixin混入机制，在beforeCreate钩子前混入vuexInit方法</li> <li>vuexInit方法实现将vuex store注册到当前组件的$store属性上</li> <li>vuex的state作为一个隐藏的vue组件的data，定义在state上面的变量，相当于这个vue示例的data属性，凡是定义在data上的数据都是响应式的</li> <li>当页面中使用了vuex state中的数据，就是依赖收集的过程，当vuex中state的数据发生变化，就通过调用对应的dp对象notify方法 去修改视图变化</li></ol> <p><a href="/source-vue/source-vue-vuex.html">vuex实现原理</a></p> <p><a href="https://www.jianshu.com/p/d95a7b8afa06" target="_blank" rel="noopener noreferrer">vuex工作原理详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://blog.csdn.net/weixin_34285318/article/details/90182481" target="_blank" rel="noopener noreferrer">Vuex数据流动过程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="vue-router原理"><a href="#vue-router原理" class="header-anchor">#</a> vue-router原理</h4> <ol><li>创建的页面路由会与该页面形式一个路由表(key value形式，key为该路由，value为对应页面)</li> <li>vue-router原理是监听URL的变化，然后匹配路由规则，会用新路由的页面替换到老页面，无需刷新</li> <li>目前单页面使用的路由有两种实现方式：hash模式、history模式</li> <li>hash模式(路由中带#号)，通过hashChange时间来监听路由变化 window.addEventListener('hashChange', ()=&gt; {})</li> <li>history模式，利用了pushState()和replaceState()方法，实现往history中添加新的浏览记录、或替换对应的浏览器记录，通过popstate事件来监听路由变化，window.addEventListener('popstate', () =&gt; {})</li></ol> <p><a href="https://juejin.cn/post/6844903615283363848" target="_blank" rel="noopener noreferrer">前端路由简介以及vue-router实现原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://juejin.cn/post/6844904099050160141" target="_blank" rel="noopener noreferrer">Vue Router原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="vue3和vue2的区别"><a href="#vue3和vue2的区别" class="header-anchor">#</a> vue3和vue2的区别</h4> <ol><li><p>vue3性能比vue2.x快1.2~2倍</p></li> <li><p>使用proxy取代Object.defineProperty,解决了vue中新增属性监听不到的问题，同时proxy也支持数组，不需要像vue2那样对数组的方法做拦截处理</p></li> <li><p>diff方法优化--vue3新增了静态标记(patchflag),虚拟节点对比时，就只会对比这些带有静态标记的节点</p></li> <li><p>静态提升</p> <p>vue3对于不参与更新的元素，会做静态提升，只会被创建一次，在渲染时直接复用即可。vue2无论元素是否参与更新，每次都会重新创建然后再渲染</p></li> <li><p>事件侦听器缓存
默认情况下onClick会被视为动态绑定，所以每次都会追踪它的变化，但是因为是同一个函数，所以不用追踪变化，直接缓存起来复用即可</p></li> <li><p>按需引入，通过treeSharking 体积比vue2.x更小</p></li> <li><p>组合API（类似react hooks），可以将data与对应的逻辑写到一起，更容易理解</p></li> <li><p>提供了很灵活的api 比如toRef、shallowRef等等，可以灵活控制数据变化是否需要更新ui渲染</p></li> <li><p>更好的Ts支持</p></li></ol> <h3 id="react"><a href="#react" class="header-anchor">#</a> React</h3> <h4 id="vue和react区别"><a href="#vue和react区别" class="header-anchor">#</a> vue和react区别</h4> <ol><li><p>设计理念不同</p> <p>react整体上是函数式编程思想，组件使用jsx语法，all in js，将html于css全都融入javascript中，jsx语法相对来说更加灵活</p> <p>vue整体思想，是拥抱经典的html(结构)+css(表现)+js(行为)的形式，使用template模板，并提供指令供开发者使用,如v-if、v-show、v-for等，开发时有结构、表现、行为分离的感觉</p></li> <li><p>数据是否可变</p> <p>vue的思想是响应式的，通过Object.defineProperty或proxy代理实现数据监听,每一个属性添加一个dep对象(用来存储对应的watcher)，当属性变化的时候，通知对应的watcher发生改变</p> <p>react推崇的是数据不可变，react使用的是浅比较，如果对象和数据的引用地址没有变，react认为该对象没有变化，所以react变化时一般都是新创建一个对象</p></li> <li><p>更新渲染方式不同</p> <p>当组件的状态发生变化时,vue是响应式,通过对应的watcher自动找到对应的组件重新渲染</p> <p>react需要更新组件时，会重新走渲染流程，通过从根节点开始遍历，dom diff找到需要变更的节点，更新任务还是很大，需要使用到Fiber，将大人物分割为多个小任务，可以中断和回复，不阻塞主进程执行高优先级任务</p></li> <li><p>各自优势不同</p> <p>vue的优势包括:框架内部封装的多，更容易上手，简单的语法及项目创建，更快的渲染速度和更小的体积</p> <p>react的优势包括:react更灵活，更接近原生的js、可操作性强，对于能力强的人，更容易早出更个性化的项目</p></li></ol> <p><a href="https://www.cnblogs.com/yubin-/p/11537122.html" target="_blank" rel="noopener noreferrer">React与Vue对比<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://github.com/lihongxun945/myblog/issues/21" target="_blank" rel="noopener noreferrer">关于Vue和React区别的一些笔记<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="react-hooks"><a href="#react-hooks" class="header-anchor">#</a> react Hooks</h4> <p>可以在函数式组件中，获取state、refs、生命周期钩子等特性</p> <p><strong>使用规则</strong></p> <ol><li>只在最顶层使用Hook，Hokks底层使用链表存储数据，按照定义的useState顺序存储对应的数据，不要在循环、条件或嵌套函数中调用hook，否则hooks的顺序会错乱</li> <li>自定义Hook必须以『use』开头，如useFriendStatus</li> <li>在两个组件中使用相同的Hook不会共享state，每次使用自定义Hook时，其中的所有state和副作用都是完全隔离的</li></ol> <p><a href="https://github.com/brickspert/blog/issues/26" target="_blank" rel="noopener noreferrer">React hooks原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="为什么vue和react都选择了hooks"><a href="#为什么vue和react都选择了hooks" class="header-anchor">#</a> 为什么vue和react都选择了Hooks</h4> <ol><li><p>更好的状态复用</p> <p>对于vue2来说，使用的是mixin进行混入，会造成方法与属性的难以追溯。 随着项目的复杂，文件的增多，经常会出现不知道某个变量在哪里引入的，几个文件间来回翻找， 同时还会出现同名变量，相互覆盖的情况……😥</p></li> <li><p>更好的代码组织</p> <p>vue2的属性是放到data中，方法定义在methods中，修改某一块的业务逻辑时， 经常会出现代码间来回跳转的情况，增加开发人员的心智负担</p> <p>使用Hooks后，可以将相同的业务逻辑放到一起，高效而清晰地组织代码</p></li> <li><p>告别this</p> <p>this有多种绑定方式，存在显示绑定、隐式绑定、默认绑定等多种玩法，里边的坑不是一般的多</p> <p><span style="color:red;">vue3的setup函数中不能使用this，不能用挺好，直接避免使用this可能会造成错误的</span></p></li></ol> <h4 id="react-fiber"><a href="#react-fiber" class="header-anchor">#</a> React Fiber</h4> <p><span style="color:red;"><strong>解决react旧版本，页面卡段时候出现丢帧卡顿问题</strong></span></p> <h4 id="react旧版本问题"><a href="#react旧版本问题" class="header-anchor">#</a> React旧版本问题</h4> <p>当我们调用setState更新页面的时候，React会遍历应用的所有节点，计算出差异，然后在更新UI</p> <p>整个过程一气呵成，不能被打断。如果页面元素很多，这个过程执行的时间可能超过50毫秒，就容易出现掉帧的现象</p> <h4 id="新版本解决方案"><a href="#新版本解决方案" class="header-anchor">#</a> 新版本解决方案</h4> <p>React Fiber是把一个大任务拆分为很多个小块的任务，一个小块任务的执行必须是一次完成的，不能出现暂停，但是一个小块任务执行完后可以移交控制权给浏览器响应用户操作</p> <p>核心是通过requestIdleCallback，会在利用浏览器空闲时间找出所有需要变更的节点</p> <p><span style="color:red;">阶段一，生成Fiber树，得出需要更新的节点信息，这一步是一个渐进的过程，可以被打断</span></p> <p><span style="color:red;">阶段二,将需要更新的节点一次性批量更新，这个过程不能被打断</span></p> <p><a href="https://juejin.cn/post/6943896410987659277" target="_blank" rel="noopener noreferrer">走进Fiber的世界<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="react中使用了fiber-为什么vue没有使用fiber"><a href="#react中使用了fiber-为什么vue没有使用fiber" class="header-anchor">#</a> React中使用了Fiber，为什么vue没有使用Fiber？</h4> <p><span style="color:red;">原因是二者的更新机制不一样</span></p> <p>Vue是基于template和watcher的组件级更新，把每个更新任务分割的足够小，不需要使用Fiber架构，将任务进行更细粒度的拆分</p> <p>React是不管在哪里调用setState，都是从根节点开始更新，更新任务还是很大，需要用到Fiber将大任务分割为多个小任务，可以中断和恢复，不阻塞主进程执行高优先级的任务，如果不用Fiber，会出现老版本卡顿问题</p> <p><a href="https://juejin.cn/post/6943896410987659277" target="_blank" rel="noopener noreferrer">走进Fiber的世界<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="为什么react推行函数式组件"><a href="#为什么react推行函数式组件" class="header-anchor">#</a> 为什么React推行函数式组件</h4> <ol><li>函数组件不需要声明类，可以避免大量的譬如extends或者constructor这样的代码</li> <li>函数组件不需要处理this指向问题</li> <li>函数组件更贴近于函数式编程，更加贴近react的原则。使用函数式编程，灵活度更高，更好的代码复用</li> <li>随着Hooks功能强大，更推动了函数式组件+Hooks这对组合的发展
<a href="https://www.zhihu.com/question/343314784" target="_blank" rel="noopener noreferrer">为什么 React 现在要推行函数式组件，用 class 不好吗？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <p><a href="https://juejin.cn/post/6844904100891459591" target="_blank" rel="noopener noreferrer">函数式组件 &amp;&amp; React Hook<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="usememo和usecallback的作用与区别"><a href="#usememo和usecallback的作用与区别" class="header-anchor">#</a> useMemo和useCallback的作用与区别</h4> <h5 id="usecallback"><a href="#usecallback" class="header-anchor">#</a> useCallback</h5> <p>useCallback返回一个函数，只有在依赖项发生变化的时候才会更新(返回一个新的函数),多用于生成一个防抖函数</p> <p>注意:组件每次更新时，所有方法都会重新创建，这样之前写的防抖函数就会失效，需要使用useCallback包裹</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>debounce<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'debounce'</span><span class="token punctuation">;</span>
<span class="token comment">// 第二个参数为要监听的变量，当为空数组时[],submit只会被创建一次</span>
<span class="token comment">// 当监听有值时，会随着值的变化重新创建生成新的submit</span>
<span class="token keyword">const</span> submit <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token function">debounce</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>提交<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre></div><h5 id="usememo"><a href="#usememo" class="header-anchor">#</a> useMemo</h5> <p>useMemo只有依赖项发生改变的时候，才会重新调用此函数，返回一个新的值，类似于vue中的Computed计算属性</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 定义info变量，该变量会随着inputPerson,inputAge的变化而变化，info可以在页面中显示</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> inputPerson<span class="token punctuation">,</span>
        age<span class="token operator">:</span> inputAge
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>inputPerson<span class="token punctuation">,</span> inputAge<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p><a href="https://juejin.cn/post/6844904101445124110" target="_blank" rel="noopener noreferrer">详解React useCallback &amp; useMemo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="setstate是同步还是异步"><a href="#setstate是同步还是异步" class="header-anchor">#</a> setState是同步还是异步？</h4> <p>首先，同步和异步主要取决于它被调用的环境</p> <p><strong>这里的同步还是异步，指的是调用setState方法后，是否能立刻拿到更新后的值</strong></p> <ol><li><p>如果setState在React能够控制的范围被调用，它就是异步的。比如合成事件处理函数、生命周期函数</p> <p>在合成事件和钩子函数中，多次调用setState修改同一个值，只会取最后一次的执行，前面的会被覆盖</p></li> <li><p>如果setState在原生Javascript控制的范围被调用，它就是同步的。比如原生事件处理函数、setTimeout、promise的回调函数</p> <p>在原生事件和异步中，可以多次调用setState 修改同一个值，每次修改都会生效</p></li></ol> <h5 id="react中的合成事件和原生事件"><a href="#react中的合成事件和原生事件" class="header-anchor">#</a> react中的合成事件和原生事件</h5> <p>react为了解决跨平台，兼容性问题，自己封装了一套事件机制，代理了原生的事件，像在jsx中常见的onClick、onChange这些都是合成事件</p> <p>原生事件是指非react合成事件，原生自带的事件监听addEventListener，或者也可以用原生js、jq直接绑定事件的形式都属于原生事件</p> <h4 id="jsx语法"><a href="#jsx语法" class="header-anchor">#</a> JSX语法</h4> <ol><li>jsx是React.createElement(component, props, ...children)函数的语法糖</li> <li>底层是使用babel-plugin-transform-react-jsx插件将jsx的语法转成js对象，判断是否是jsx对象或者是否是一个组件，转换为对应的js对象(虚拟dom)</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 示例一</span>
<span class="token operator">&lt;</span>MyButton color<span class="token operator">=</span><span class="token string">&quot;blue&quot;</span> shadowSize<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Chick Me<span class="token operator">&lt;</span><span class="token operator">/</span>MyBotton<span class="token operator">&gt;</span>
<span class="token comment">// 会编译为</span>
React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>MyBotton<span class="token punctuation">,</span> <span class="token punctuation">{</span>color<span class="token operator">:</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> shadowSize<span class="token operator">:</span><span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'Chick Me'</span><span class="token punctuation">)</span>

<span class="token comment">// 示例二:</span>
<span class="token comment">// 以下两种示例代码完全等效</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>h1 className<span class="token operator">=</span><span class="token string">'greet'</span><span class="token operator">&gt;</span>Hello<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">)</span> 
<span class="token comment">// 等价于</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>className<span class="token operator">:</span><span class="token string">&quot;greet&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token string">'Hello'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="服务端渲染"><a href="#服务端渲染" class="header-anchor">#</a> 服务端渲染</h3> <h4 id="服务器渲染的多重模式"><a href="#服务器渲染的多重模式" class="header-anchor">#</a> 服务器渲染的多重模式</h4> <ul><li><p>传统的spa应用，都属于CSR(Client Side Rendering)客户端渲染</p> <p>主要问题</p> <ul><li><span style="color:red;"><strong>白屏时间过程</strong>:在JS bundle返回之前，加入bundle体积过大或者网络条件不好的情况下，页面一直是空白的，用户体验不好</span></li> <li>SEO不友好:搜索引擎访问页面时，只会看HTML中的内容，默认是不会执行JS，所以赚取不到页面的具体内容</li></ul></li> <li><p>服务端渲染的多种模式</p> <ul><li><p>SSR(Server Side Rendering),即服务端渲染</p> <p>服务端直接实时同构渲染当前用户访问的页面，返回的HMTL包含页面具体内容，提高用户的体验</p> <p>适用于:页面动态内容，SEO的诉求、要求首屏时间快的场景</p> <p>缺点: SSR需要较高的服务器运维成本、切换页面时较慢，每次切换页面都需要服务端新生成页面</p></li> <li><p>SSG(Static Site Generation),是指在应用编译构建时预先渲染页面，并生成静态HTML</p> <p>把生成的HTML静态资源部署到服务器后，浏览器不仅首次能请求到带页面内容的HTML，而且不需要服务端实时渲染，大大节约了服务器运维成本和资源</p> <p>适用于:页面内容由后端获取，但变化不频繁，满足SEO 的诉求、要求首屏时间快的场景，SSG打包好的是静态页面，和普通页面部署一样</p></li> <li><p>ISR(Incremental Static Regeneration),创建需要增量静态再生的页面</p> <p>创建具有动态路由的页面(增量静态再生)，允许在应用运行时再重新生成每个页面HTML，而不需要重新构建整个应用，这样即使有海量页面(比如博客、商品介绍也等场景)，也能使用SSG的特性</p> <p>在Next.js，使用ISR需要getStaticPaths 和getStaticProps同时配合使用</p></li></ul></li></ul> <p><a href="https://www.cnblogs.com/lhb25/p/16223782.html" target="_blank" rel="noopener noreferrer">你知道吗？SSR、SSG、ISR、DPR 有什么区别？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://blog.csdn.net/weixin_41556756/article/details/125486069" target="_blank" rel="noopener noreferrer">什么是SSR/SSG/ISR？如何在AWS上托管它们？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="vue-ssr服务端渲染"><a href="#vue-ssr服务端渲染" class="header-anchor">#</a> vue SSR服务端渲染</h4> <h5 id="ssr原理"><a href="#ssr原理" class="header-anchor">#</a> ssr原理</h5> <p><span styl="color: red">通过asyncData获取数据，获取数据成功后，通过vue-server-renderer将数据渲染到页面中，生成完整的html内容，实现服务端渲染</span></p> <h5 id="ssr基本交互流程"><a href="#ssr基本交互流程" class="header-anchor">#</a> SSR基本交互流程</h5> <ol><li>在浏览器访问首页时，Web服务器根据路由拿到对应数据渲染并输出html，输出的html包含两部分
<ul><li>路由页对应的页面及已渲染好的数据(后端渲染)</li> <li>完整的SPA程序代码</li></ul></li> <li>在客户端首屏渲染完成之后，其实已经是一个和之前SPA相差无几的应用程序了，接下来我们进行的任何操作只是客户端的应用进行交互</li></ol> <h5 id="vue-ssr整体流程"><a href="#vue-ssr整体流程" class="header-anchor">#</a> vue SSR整体流程</h5> <ol><li>配置两个入口文件，一个是客户端使用，一个是服务端使用，一套代码两套执行环境</li> <li>服务端渲染需要Vue实例，每一次客户端请求页面，服务端渲染都是用一个新的vue实例，服务端利用工厂函数每次都返回一个新的vue实例</li> <li>获取请求页面的路由，生成对应的vue实例</li> <li>如果页面中需要调接口获取数据，通过asyncData获取数据，数据获取成功后，通过异步的方式在继续进行初始化，通过vue-server-renderer将数据渲染到页面中，生成html内容</li></ol> <h5 id="如何避免客户端重复请求数据"><a href="#如何避免客户端重复请求数据" class="header-anchor">#</a> 如何避免客户端重复请求数据</h5> <p>在服务端已经请求的数据，在客户端应该避免重复请求，怎样同步数据到客户端？</p> <p>通过（window对象作为中间媒介进行传递数据）</p> <ol><li>服务端获取数据，保存到服务端的store状态，以便渲染时候使用，最终会将store保存到window中</li> <li>在renderer中会在html代码中添加<div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">window<span class="token punctuation">.</span>__INITIAL_STATE__ <span class="token operator">=</span> context<span class="token punctuation">.</span>state</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>，
<span class="token comment">&lt;!-- 在解析页面的时候会进行设置全局变量 --&gt;</span>
</code></pre></div></li> <li>在浏览器进行初始化Store的时候，通过window对象进行获取数据在服务端的状态，并且将其注入到store.state状态中，这样能够实现状态统一</li></ol> <h5 id="为什么服务端渲染不能调用mounted钩子"><a href="#为什么服务端渲染不能调用mounted钩子" class="header-anchor">#</a> 为什么服务端渲染不能调用mounted钩子</h5> <p><span style="color:red;">服务端渲染不能调用beforeMount和mounted，Node环境没有document对象，初始化的时候，vue底层会判断当前环境中是否有el这个dom对象，如果没有，就不会执行到beforeMount和mounted这两个钩子函数</span></p> <p><a href="https://juejin.cn/post/6844903569632526344" target="_blank" rel="noopener noreferrer">Vue 服务端渲染（SSR）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://juejin.cn/post/6950802238524620837" target="_blank" rel="noopener noreferrer">理解Vue SSR原理，搭建项目框架<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="react-next预渲染模式"><a href="#react-next预渲染模式" class="header-anchor">#</a> React Next预渲染模式</h4> <p>Next.js支持SSR、SSG、ISR三种模式，默认是SSG</p> <ol><li><p>SSR模式</p> <p>需要将Next.js应用程序部署到服务器，开启服务端渲染</p> <p>整个流程：用户访问页面-&gt;如果该页面配置了getServerSideProps函数-&gt;调用getServerSideProps函数-&gt;用接口的数据渲染出完整的页面返回给用户</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 定义页面</span>
<span class="token keyword">function</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Render data...</span>
<span class="token punctuation">}</span>
<span class="token comment">// 如果该页面配置了getServerSideProps函数，调用该函数</span>
<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getServerSideProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 请求接口拿到对应的数据</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://.../data'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 将数据渲染到页面中</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> props<span class="token operator">:</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 导出整个页面</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Page
</code></pre></div></li> <li><p>SSG模式</p> <p>SSG模式:项目在打包时，从接口中请求数据，然后用数据构建出完整的html页面，最后把打包好的静态页面，直接放到服务器上即可。</p> <p>Next.js允许你从同意文件export(导出)一个名为getStaticProps的async(异步)函数。该函数在构建时候被调用，并允许你在预渲染时将获取的数据作为props参数传递给页面</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 定义Blog页面</span>
<span class="token keyword">function</span> <span class="token function">Blog</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>posts<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Render posts...</span>
<span class="token punctuation">}</span>
<span class="token comment">// getStaticProps函数，在构建时候被调用</span>
<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getStaticProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 调用外部API获取博文列表</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://...//posts'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> posts <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 通过返回{ props: {posts}} 对象 Blog组件</span>
    <span class="token comment">// 在构建时将接收到的posts参数</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        props<span class="token operator">:</span> <span class="token punctuation">{</span>
            props<span class="token operator">:</span> <span class="token punctuation">{</span>
                posts<span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Blog
</code></pre></div></li></ol> <ul><li><p>ISR模式</p> <p>创建具有动态路由的页面，用于海量生成</p> <p>Next.js允许在应用运行时在重新生成每个页面HTML，而不需要重新构建整个应用。这样即使有海量页面，也能使用上SSG的特性。一般来说，使用ISR需要getStaticPaths和getStaticProps同时配合使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 定义博文页面</span>
<span class="token keyword">function</span> <span class="token function">Blog</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> post <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Render post...</span>
<span class="token punctuation">}</span>

<span class="token comment">// 此函数在构建时被调用</span>
<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getStaticPaths</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 调用外部 API 获取博文列表</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://.../posts'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> posts <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// 据博文列表生成所有需要预渲染的路径</span>
    <span class="token keyword">const</span> paths <span class="token operator">=</span> posts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        params<span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> post<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> paths<span class="token punctuation">,</span> fallback<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 在构建时也会被调用</span>
<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getStaticProps</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// params 包含此片博文的 `id` 信息。</span>
    <span class="token comment">// 如果路由是 /posts/1，那么 params.id 就是 1</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://.../posts/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> post <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// 通过 props 参数向页面传递博文的数据</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> props<span class="token operator">:</span> <span class="token punctuation">{</span> post <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Blog
</code></pre></div></li></ul> <p><a href="https://www.nextjs.cn/docs/basic-features/pages#%E9%A2%84%E6%B8%B2%E6%9F%93" target="_blank" rel="noopener noreferrer">next预渲染<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://juejin.cn/post/6977783923099041800" target="_blank" rel="noopener noreferrer">使用Next.js进行增量静态再生（ISR）的完整指南<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="node"><a href="#node" class="header-anchor">#</a> Node</h2> <p>Node经常用于前端构建、微服务、中台等场景</p> <h3 id="node-高并发的原理"><a href="#node-高并发的原理" class="header-anchor">#</a> Node 高并发的原理</h3> <p><span style="color:red;">Node的特点:事件驱动、非阻塞I/O、高并发</span></p> <h4 id="node高并发的原理"><a href="#node高并发的原理" class="header-anchor">#</a> node高并发的原理</h4> <p><span style="color:red;">Nodejs之所以单线程可以处理高并发的原因，得益于内部的事件循环机制和底层线程池实现</span></p> <p>遇到异步任务,node将所有的阻塞操作都交给了内部的线程池去实现。本质上的异步操作还是由线程池完成的，主线程本身只负责不断的往返调度，从而实现异步非阻塞I/O，这边是Node单线程和事件驱动的精髓之处</p> <h4 id="整体流程"><a href="#整体流程" class="header-anchor">#</a> 整体流程</h4> <ol><li>每个Node进程只有一个主线程在执行程序代码</li> <li>当用户的网络请求、数据库操作、读取文件等其他的异步操作时候，node会把它放到Event Queue('事件队列')之中，此时并不会立即执行它，代码也不会被阻塞，继续往下走，直到主线程代码执行完毕</li> <li>主线程代码执行完毕完成后，然后通过事件循环机制，依次取出对应的事件，从线程池中分配一个对应的线程去执行，当有事件执行完毕后，会通知主线程，主线程执行回调拿到对应的结果</li></ol> <h3 id="node事件循环机制与浏览器的区别"><a href="#node事件循环机制与浏览器的区别" class="header-anchor">#</a> Node事件循环机制与浏览器的区别</h3> <p><span style="color:red;">主要区别:<strong>浏览器中的微任务是在每个相应的宏任务中执行的，而nodejs的微任务是在不同阶段之间执行的</strong></span></p> <p>node事件循环机制分为6个阶段，他们会按照顺序反复执行</p> <p>每当进入某一阶段的时候，都会从对应的回调队列中取出函数去执行。当队列为空或执行的回调函数数量达到系统设置的阀值，会进入下一阶段</p> <p><img src="data:image/png;base64,UklGRpAZAABXRUJQVlA4IIQZAACQewCdASpnAUsBPpFEnUolo6Mho7U7yLASCWk6eHA7mOPY7iqgX4RsAef39M8gDqiv259m7x6g/uw4A9+fmpB53jh8eebp6tad8of2L8g/Od+1f5zonPb8nE4T6Ifuv7T7d/4v9UvF35C/IXsBeqv9B32PbzaV/u/+R/c/YF9d/lf+z+5b4p/i/8F6Bflf90/6P95/qPyAfxv+g/8/1376f6v/3PYA/kX9c/4H+J/Mj43/+n/T/lR7X/0T/V/+7/O/5n5C/5t/U/+d/dva99ff7nf//3Ov2c//5fIefHSzjWnkWbtT1u0Hl/z2KsspFCiz/24nqE2Z8eIvwY3s6uNaeRZuLh+A8eq8VtSdOXJ2odTX9OB0DHKbPtc3LtLWNspoXRptVnx0s41owFwxzxbChEn2gclyL2TerkK3hiM31rCpu1PW7QfMmM+YOIBM682GbCjLdVJrBo90iJG3mdEz7U9btCzXkO51DxlAsDQfRPR+7R5HBaU1oG+UuxOHUClNYL8Gt471jkuc0Z/6MZlC2p63aFm80PXaqRllY7AG4f64oweodx+R3ZfC8zWLF1OyerEWaeRZuHFCWfBPfTXKdsVyYFuOjd+Zmha82Nk41p49Gl5hCEkZYzdF3nHI+nwa/Yf/0U68jwEIfl5EkHSzjWnj0UNODL0swcgtgrdDh7eF0p1GPkPlZ7VFzFGmPFEEx4ZJFTbPX932xvH5mpGpHLYtecq6SbL8FsEd7ZxuAL74bHp3SNyGP3YyQ2zAyJbaeHyrDaF8QCFNFXBXdW/4aZFNXwB+ziWSi7ezOfpD6c/cmiBp70S/zqbiUeFPIYr5DjN1wKe0tBpd1SlSDk716zFxaOru5+p71Sb4xc9gomeXrbo0oJP9Tz4Nc7TN1cjqCWSQ6aAFfIbIFywAbXaW9JvQl2MGKBII47gclWzPvFyX1McRTGXiBwRD4x/TadcR9re4g7TW9WjSLPCK5rT/qtnq/ajti8VbFxjyKjoFbtm4dUogXsIbjYpVYk/27It+UBSCnOweBL3M9WbghwT1G1VcVOnOIcXf4cccYbGmdfjgSPbZWM9+bt7yIyZyQbjIqYefHSziyVmILT+9uzYltEIeklE3VMHkHHeoyPoQsbJxrTx55mL+OtDbDlFQOXE2ULlX1+d5UlyCyH+45Yy+v3mAWbtT1kGfHppGUgeyL2Zl+gELxCrYy0x0AbE1xLQF0ZsHkxDqF1PcLpwqti2ck/FJ8dLONadfVgjfrCIdX4OgqZePPfPl5U5tKU/pFU4y9bkNzjWrOwjvqoIIqiPHfUNnuo57U9btC18bJxT61bO+YnGAAP79zCWw0kIVIAC1NOy/hVrh1e8CN9gBcyhA/KC+YslXx6b8xJKgq/r0cvgVHAPD3tfTtPDzt5E1dtP4Bvis1amWO+sag1SK7F9PFUEVYMk7McoAWodBXD88PgdgRZ9koyoqf5fBAI+BNA0Pvp/GzaxFFOvubdnqcTYqo4dlohC1Nc1T7N3PSmbgC3ATxHfG980DGBurA78o4PsbfBzqcI520gIx8AvRcnvp+1vWi2KMBSbiLLZ7yuT/wX4KNv+JNtPL5WJcBDAvZLiJXUFr0Svsr2wof42hjErnJsDteX3gCcW12F2KQPYdtG7BriErOfMx5lncxGwK20TqoZtzUI6V+yWbolz9IukeZXhQ7c2z3/2gT0QzQvz+ZRw4TAinRbM0HhIrEKdBxFJnH+XtUSU/GbzkWYmYecQ/zffMNkLUv4pHu7JORlDo6DlHp/lw5krFDiFhGFrWFcyIF3rgnmRWSizhThGmYaqTsirkXrMv1l5bGvxgAn6bTDWIgz+uiZPw3mOye0vvUjvdqS8OmgKlVpV1W6dLJ3Yv95MaqLh9wfY2zRPK49x74CPx/xHOJNMf1EXEh44rCOTBAoP7340DxQBpI4xzz1cMR1aaeJVvjRrCPKECNi1U8jvc7f+EEv7zcwwZCZXmHMe7tN4AgwE6wzhZ7zmaFPgwgdmXZ0f7NezVQgcppNcL5QJ/awJE785l5Ax73430RSLztLtRlmqSr3/HQmZamzXgyGktl47unv3+iQO6ijQXOOudvDuL9WeYSsF9s7JAklwubLndtG7JY4B0T+Kgq4DPSX84Y4LXtwyil0Qtzr4csAHCETQtp/gmpLOTjj2BNjQ2t2632bYxVw5y7+zhfc1EMKyF9NK6d4kBA0s+1k/wL9DMI1mnMKOzKqVv3sqAiTxDezquTNfm8c4btfeW0GGnkcUQwoB3l84/Qb7EC1zW5vDvPyHqOhVHqIWkae1DwWRELh9Ckx5l3Er+z4rvSzcQcw8HsstFqVqqazXBQ5GPkX2g7m1qmRcGK4XgEUi3GdTObVwB9DOVW9Rj+V0giiL3wEhKRaXE+tGNS5raNUd1ViiIXvqHspH2SjPgCJGls2hA0xm7KH9xyjf/ElAgFaiyHpg8ngJulYNbxE5mNA5b8SzErugzSyf/0f9GUTVRJgWGFtrd7ZWliQPOiVzuLycrHeiK3B9U5chyXxyFKTCRjGk62PCSHjtjGacZctEKWRHqCXt/HjEl/jKbiGnCvAKIXJSrmhUkMspT3orXVC2gC8Y4953pNmuS2exI6LCEpuhm72KuuUuO2BvXlhvSJAYws8KofuJwDAf422IvyWhHxqt9zuT3n92gz5RjjxuYkHnfVVMvierE1shiNk/1funHbruYTEnKNSIhm/Vqe1lX5f1ZMBB1Q8LaQ/QJxRDI1RtA6JVvCowZvp8UUlrK+/6/SB1g1cUOj8HmNRrS/P+AaJdmmGiFOL6TJTWq46G1LJHxzbIZRUcsrvbZMB0/iJJGyGwkPQes5N7WQ/sDb2y9b1kM/ycE3izMqO+I1mA2WIlASO+/EwmJQ5MtD6ZJ+NM1xQQA+QxsIjNpB6XmlWuNXcEtH0Yb+VtkWvX/n5sXDikj0+KdQ7+uBE/oZYe7MGN7HdoWFgmRvOaAD0tn5Wz8D2k/6bSoEcIsLWGUeElKK23osBhwJL17wL66LVQusGYrnp7QY9eUR2WYoLlZ49hqP4knaIAAUYmsLcwxSTMj1/glkDnJvzyp8B1M5CbVnOeijMgU9GxtZoSKrMuydQWfe/6LmH6RlIUbQceb9O7FPWvdEeZjTIHKkO76lTZA8T+E3pV8I/+VF3briYKr/PA+kOZImG9HneusHnqWjldcYSgC02Qtq9BGHQ2VsGRJIjhmUa4gRZERdFBJo4cgaarJ4uW+IEtDA5JjNpUraJGl1jxnfC4amk6djlWLcEfGM1aDZkzlW7T6/XITX52+6/P4cZ9h2LTDf6fUzOMY5M9R7y2GW6YB760PdfPfjhVV5gJs43eN3eYmUtdOqLapZEwoRuxJXefv9WiKZdx4MvSKlrTKhDA0Mtg4K4BxDLD0oAPJ76dbtUo3N/LYAVugfrrhZ6MakmD0JlYaXANek5Twpi2eT3FTQhy9fXf9R5d+dUlxlrFrVQMup/L6s0Lyi97fbmJ0i4mkplSO/dD8x5+aroXN1G/6HSzYfDjrbfDP+aAJrHX+2XwTORZ/jr2iKS0S9n1wjeXa8qcsnTmOACjKrxrPwAVRtKodSh5Zekz2bQk/S2FeqR8NdYk8bqh/ZGZQa2R/NW7GyZ4Jo14Ee/tTZjnZCKfjijI7Ap5G6Uj+/VeB7O6mJaG1dE3Ugkk8SdxbaVxTCUCwMGbrMQeU6AO5wNg67y6S1zQCbqPe661rckb0CA69nwwMSC3db9UbeswWYZHYwrpYEUlm1OEbGD3W9lE8s0z9608uJtg+xPWwdrC03Xqx353RZ+L2DRSxCDLJPilcQfJ+f/CjdX5vAY/tTgh9XfwZCWU80PG87YK7OWtUbx6JotkEaIA8eU2SY+lp3/nudDQEElDeLBpI6VCQvNNur5WooIvUdLb+R4Z2n6q+M1gbjnh2mdPSFrFPFsHzrJ/0FnihlQvgUcbitLQvLCiEumn6lrCP/9CK8ET7uPc7pJarnHMJJNoZ94w9CvtC8L18O6JrDE3bh1kkcP2jxBIa/6xz0HEI29hTZThatWj0rx+O5WDEsdRAHk8UoOTDoUUKE+iMBjcBuCgepK1pJdIX9Zk2zGwFGwpBjPilmPfWzLLE4kOe/FddRaS+Ih/CY9LdHqjz/x+WB6dVskL31wIRPnG15XGLGpLI3OLnYBBF+zvbYA/00EoQBGhVudLv7FSYDXgrwi2Ty0U0B0emo13pUPPxn0t+HzcK46/2EunSEiz4KuIDGQRjSuIL7kWyGm5U5D0E8EcnSIGJaPiVfl69A6lMhKNlqUQHLrEwszbd2CAfiqkq1y7DqGjCohZz3P/iKFA3y/jRDQ4rqEtdYeYNJUzZryiDWPrUBnW4lEQqKCUzvosyP4NQTX2Yb7r7JMPs08SXBe2xqU27F/ZBY8Q6UfFv0ot1+Qn1rufxShig+DNcSJmh/CE/88aiKTPVRksxEAwfn7QXdNZo0PXrDzNqQMlnA9G/IzpLYn6LMmtxREkonII63Y4Z1xw9NEnRLjHctkpY2AYdi0aCiB2NEYTlAxFEA2aFiFVm+NqGlpZz37sybVefm5P6T5zqCdgWGY+LGQKDragXuPxDFwu214ldEy01dK/oPGrOJ8Xn8dP9A/wumpEG745NNgBbYEsBV5a780DkNBhQAL9mfAcmNcYrgik8QYhiWlMIM6i3wMR04UeefDg+imC+39+mrAlwJPjRM2PjcJQ7pH81tkEm9QwC9ce9mhy/bgDT3sD82zh4XsagyKefWDAgzj7oSAK40sYQiEqMVeQB25YjsTv2WaDZadFyQIAkCOuI/O4kHTO9PHtecrvPwzlLwV3CRgoI2VvqooXoTt3PIK+gqy6jJX2+fJfaYyp1lFyAjQGW8ESwjwGaxKVz8by2xldS1OQ1HJBzt9XSu80XwbvEft1Zib5+uLy2MiLtbKcagveApJHbeV39Mq8AGTOgS//Fhr0AKcCGo6uzOE3TFWUZykpoFdnOHCG+QZ40mcouJfmY2wYSkleb9l7o+v7M1Fm7rHrrWcECiDd6/AYSeJZdfFNZCGwpxzb/jxQP+bmkPx7HBkHxvh8GR94DjkxBX01NTz9BS1Vij3DVOv7QWT8Bz3FIxn3sRc99DFcIEXUtFYy+V5CN+ZYngPF2ch1bKXAVnmvflNwcqmUGzf35rZ+Ssk3x8rjQcZ+QF3Aw8YkiSl5DITPFF2IDjoFjbUt8uxsRY0UE8HnUMYr/EzYmePsQMlwxRnR/CVe+ioTa8XnImhizwuVsl31UHLj/UNhSGxBAKUFWF/PzlNj2ZPIiGDrnWuuzGiC4ycomKXNfqTKlOdUIWpAt4BR4HsPmeOlTmEcdzIbm1dpD5lpp2n/DK31dGXdhCVkeCDAdjOsGxPjQG8T4SAlGGoIji+5+QfPJellQwO5TC0G+is5EAZe+awjRGMvRqOWTpGFwR66yGXszr3RbHAwGFfl1eG9FY3GJ/KDgDwZfRCeKWLB9W71AcJecpHgHK0nLqo7v+HwNCCympa2ChJappW1PyYhjIZd34T59uMQxD7ZIJSIMQVLcrzllZp9ZtckbMLhTJpD3Vw9S2gkb+Yi5+3G3S7bsOtl5ZNUutsJzxzFbPvABKrdJQmJWbxKv5sh67eMrWADSfJNaWTgPYD9WYi1gCZn5eU4XHRrLitkbHovXQV+K72DO+0K1vPzl1cZbgAWokrIvjwFrE/Wtm/9E/7YTErbp0MiDsWuF6LYBmKSMVscR3QnFkzG8r6lfOb+2ecU90zwZ/qQ1csUvrYTko+IltLlLjm2JD6CuBsv6cMyo3f718f1zK5ILwy7XTTkPZ3JrFZEmpxQkBlyOaLGWs4n8ji6Ot8401782/EuwsoF9i97Go8Ux3MnHyKCdwGAF33QmmxUSpC2TS3FvHIs/L+yBfCVUE3jGfQIzX16+NQ+rGkRJQ1nSTMpR11ONZpt9BXXGQgV5n1eQ2ZsBdhX+kvkBc7xupDjfzDYCOKoYlYHEv4wNn0awHBnIHpzvRBb00+FOUd+9xtVTkxIxR1Q9pvbJdRhYGPmwT1mJFBMY4v20wosPgdD++p3xmIyG2TParCfUY54op4HIZHMsN0tx3pQqmKvHlTXCp0DQa9wV2i00oLKQQL43fDGEomceIa1xsqnJhWCxbixsivJXq6ImVNOovPKINf4x/9YC5Z9dY49rrFD6YZ9CL8aJe3F5BBDF9K5iKoB5PVgZcjOODiGaQ2of4Ahb7U4m8pbLfj9PoeqkzZCY3x4FKBTFAWmee8nGaKP2lEtPEgoEhXd4iBdselnAsER1axvbE4X8BFmmauR4yi8oHwUrN7gU2mP2kkrKRmgc0gQoOR37KYot3bPRXfTHz78qxYHnpCMGqYllKUU3u9sxrNL3u3r6BeH2GkBhTPYJvMj7G/CLJ0jjfvBZIbYJ5oTQKIyPyo1D6nCbzCPyMDESxRThigWW4g2Qi8/qGGF5wR68Szd8k8sBLJb57+wXfyhyzIMGBx0dhHF9kx1mE97d+vQXNvK2yLXr/z80+OYAMnCwsCRmP9X3vYDDRP6wNcJzGUUpzgoJs1RbGvOKOMKEdELE70HwTcZ1DsFZzW2LVk5bXUna5ii4YjtzCNZNeeyiQgz9c4tvwQuhgVv0DvMxMF5FJW6AfXsacP7kqyy7LosuBTAIeNYTMvQrXn88lXwfhIi6DnTjdVB2qkI6XP0gUTECwsKV3FpFtTwf1/RrAz1OSJLsp1pBL56D1rc06Fk4DXTnVaUj78eo56LrkaBQANQTvhaDYXuNV+YyRbSUoQzboHfgnYLPhOm3rkjS9iSuTihFri9FPp3oAps7ShmwqhrmIIGGm36FiEgEQEmYZjS7jYcV4ZFOCqeMwuMHHGCgjkIz8H6NQ+TS7qiev+YDkOt8IrFpFBvR53r/1qlEsGsByvEIwZM79p4rL09wGbqRDUDaF4L/pU1RxdJgT/Czhtj4pKNPjl/9QvFJAHnhkWHm/7Ywdo3eRQAw4T+pM8AyWhd86pbpLEwoPkxekCvBSR1IgtceDEdJSd52c6RcPgt12KFRXMrZVDSoFwMpiYq63UVzZ9lt3UzZ4QLudNZPd1O+SPSkF5olT76M8s39XnDSVVMeXUeWjjD35mSSllOjkdddUDNLd73iibSg6AERNLAlz033SYyOmLNyOGgFyYhwtf8g9F9WSwCuF1f6ZRbBVcA3ePk2py4IgwwnBXQmQTQiM9BumzM20MsVTaVDBFimp7OH7UpHb+mC4pk12O8dVnmbl8o5Yn468vTXjm4Cli3NYdB57ZKR4mPqDFIsdI65GxgpseUYeu+ilDVze563RDeuOrM1KxU7szl7FHIDcH2ZN1XmUX7cS9IwRj5akmoQcukOHmiltl/ixGoAltvJJ4LuPTbA0L8vbsbugDDOjdjq3Bv2iy/LG60fWWqPLr3w/mmfhkcECFMdRugN6NZ15eBhwFrwrDhjVh6TRfIZhGsWo90tECGP757l4l0pzDeNWDPyYvCZWLHDuIncWXZrF/25814LmzAgiDxGR6Y/933ch3LA13j9LJAL5yQpYgCZSwbOdVQxWWSNxBzDweyy0Vn+/DR56eITnsocjHyL7nQYVla+n/60jsuCIUsmLCv6XRdcydc02a5nsWqrwLhZ1Xw1AOFe5up8Is+GJVR57DjupHxETZONTzl7drJIuMOy2YP6RqjuqsJwObmiB4qoU6JY7ABhUZQQ9r94ArihfsvL1REeV8Qk1xZHt5S5DdIsumQUVOkLdnO/lxaOfNOmX/KUcluhVOQfJsaeC9aCpEw83r1QhSpoV0326v8x1qwtgoMyF6D2JgR+I7t/Rc8jO+ezXQgSO7AHvn4p6AYfRRrMoxeTa8CqBwJqdy2cqu5H3GJ6lbtZOS0jla+mauqQu9mtpZStP7kqEI4gIwWfJSO+WlB6iajFzr/HVJ5rDOI3n5JV5oVcoW9UCHyCI3cBNCDWbSpBnS2FjrMwS7QRuHPEfQ2KzMXL+xCkvZ/z/0OeTY0+1LKPU5xcRQColnX3j/HlLrt34Cit3uoP1GcvDG/U4e4DoMoMwkw67W9GaPwYSfz9VekR59BLTND/keQ2gBuM9VEwYYntFGZ5Q33y9O5oXjtQ9l7qHHRbj54Wl6I80Qodbl2e1puURzxtZS8Fwu9SwYbT3miYgfDaS3N8KTUSHqx+8COjjKCfRVDHk4G+ZMOaf/stBB9JoTMV9X1NM3lP0w8M8uU5XzYHK9XUu5U/khXyh/2x+/Yg7W1SNcYVF6G6mNbrnLMDfECiMauJW6Koo+VQuIrS0tpKEg9LbE2VJh37gpYsiDcP/zreXTo26+ux8aJJa54KLTDP4wCvCyBRYlY0FY+CB715HFBBMPjhudpQR0nMMoaJENNfL98X4Wo3s9pSoUY1KbcnYaAs8OErkhFxjpvM9nfuajf1d9NS3XKfHPhFZaa+bS6+QmsssW6zRjk+AUvtvRxP614Qm1Ol8u8UONZk5TtQ90Adgxg58K/7oLeH4sxH0i+pxSXVHru1TdPCIfDvNgjQUO7rYBAcFKy6hkNyPAFdRkmkkE2J3WltBXuiM638sCilBZPpTBKAFnI1amvyMnJlA9ebw09LZifftYVlF8kghsqK8PVSqT8qBp1CXO97YT3rvxayijzAsBrOW0fsXMEAA0zRok3BrNsv/LHZj/+7vpLbzXu/CUS83904EC4AAAAA" alt="node事件循环"></p> <p>主要介绍timers、poll、check这3个阶段，因为日常开发中的绝大部分异步任务都是在这3个阶段处理的</p> <ol><li><p>timer</p> <p>timers阶段会执行setTimeout和setInterval回调，并且是由poll阶段控制的</p></li> <li><p>poll</p> <p>poll是一个至关重要的阶段，这一阶段中，系统会做两件事情:回到timer阶段执行回调，执行I/O回调</p></li> <li><p>check阶段</p> <p>setImmediate()回调会被加入check队列中，从event loop的阶段图可以知道，check阶段的执行顺序在poll阶段之后</p></li></ol> <p><a href="https://blog.csdn.net/LuckyWinty/article/details/104765786" target="_blank" rel="noopener noreferrer">面试题：说说事件循环机制(满分答案来了)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://zhuanlan.zhihu.com/p/54882306" target="_blank" rel="noopener noreferrer">浏览器与Node的事件循环(Event Loop)有何区别?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="中间件原理"><a href="#中间件原理" class="header-anchor">#</a> 中间件原理</h3> <p>比较流行的Node.js框架有Express、Koa和Egg.js，都是基于中间件来实现的。中间件主要用于请求拦截和修改请求或响应结果</p> <p>node中间件本质就是在进入具体的业务处理之前，先让特定过滤器进行处理。</p> <p><strong>一次HTTP请求通常包含很多工作，如果请求体解析、Cookie处理、权限验证、参数验证、记录日志、ip过滤、异常处理，这些环节通过中间件处理，让开发人员把核心放在对应的业务开发上</strong></p> <p>这种模式也被称为&quot;洋葱圈模型&quot;</p> <p><img src="data:image/png;base64,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" alt="洋葱圈模式"></p> <p><strong>模拟一个中间件流程</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">m1</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">next</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'m1 run'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'result1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">m2</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">next</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'m2 run'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'result2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">m3</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">next</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'m3 run'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'result3'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> middlewares <span class="token operator">=</span> <span class="token punctuation">[</span>m1<span class="token punctuation">,</span> m2<span class="token punctuation">,</span> m3<span class="token punctuation">]</span>

<span class="token keyword">function</span> <span class="token function">useApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">next</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> middleware <span class="token operator">=</span> middleware<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>middleware<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">middleware</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 启动中间件</span>
<span class="token function">useApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 依次打印 </span>
<span class="token comment">// m1 run</span>
<span class="token comment">// m2 run</span>
<span class="token comment">// m3 run</span>
<span class="token comment">// result3</span>
<span class="token comment">// result2</span>
<span class="token comment">// result1</span>
</code></pre></div><p><a href="/back-end/Node/frame-compose.html">koa中间件</a></p> <p><a href="/back-end/Node/study-02koa.html#中间件">koa中间件实现</a></p> <p><strong>express中间件的执行过程</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'3000'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'启动服务'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'first'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'end1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'second'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'end2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'third'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'end3'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 请求http://localhost:3000/#/</span>
<span class="token comment">// 依次打印：</span>
<span class="token comment">// first</span>
<span class="token comment">// second</span>
<span class="token comment">// third</span>
<span class="token comment">// end3</span>
<span class="token comment">// end2</span>
<span class="token comment">// end1</span>
</code></pre></div><ul><li><p>express常用的中间件</p> <table><thead><tr><th>中间件名称</th> <th>作用</th></tr></thead> <tbody><tr><td>express.static()</td> <td>用来返回静态文件</td></tr> <tr><td>body-parser</td> <td>用来解析post数据</td></tr> <tr><td>multer</td> <td>处理文件上传</td></tr> <tr><td>cookie-parser</td> <td>用来操作cookie</td></tr> <tr><td>cookie-session</td> <td>处理session</td></tr></tbody></table></li></ul> <p><a href="https://blog.csdn.net/KlausLily/article/details/109506490" target="_blank" rel="noopener noreferrer">深入浅出node中间件原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.cnblogs.com/xiaosongJiang/p/10854467.html" target="_blank" rel="noopener noreferrer">nodejs 中间件理解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="实现一个大文件上传和断点续传"><a href="#实现一个大文件上传和断点续传" class="header-anchor">#</a> 实现一个大文件上传和断点续传</h3> <p>该案例会使用node对文件进行操作，这也是node最常用的场景之一</p> <p>其中一个关键的知识点：pipe管道流</p> <ul><li><p>管道:一个程序的输出直接成为下一个程序的输入，就像水流过管道一样方便</p> <p>readStream.pipe(writeStream)就是在可读流与可写流中间加入一个管道，实现一遍读取，一边写入，读一点写一点</p></li> <li><p>管道流的好处:节约内存</p> <p>读出的数据，不做保存，直接流出。写入写出会极大的占用内存，stream可以边读边写，不占用太多内存，并且完成所需任务</p></li></ul> <p><a href="https://juejin.cn/post/6844904046436843527" target="_blank" rel="noopener noreferrer">字节跳动面试官：请你实现一个大文件上传和断点续传<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="如何做到接口防刷"><a href="#如何做到接口防刷" class="header-anchor">#</a> 如何做到接口防刷</h3> <ul><li><p>第一步:负载均衡层的限流,防止用户重复抽象</p> <p>在负载均衡设备中做一些配置，判断如果同一个用户在1分钟之内多次发送请求来进行抽奖，就认为是恶意重复抽奖，或者是他们自己写的脚本在刷</p> <p>这种流量一律认为是无效流量，在负载均衡那个层就给直接屏蔽掉。所以这里就可以把无效流量给拦截掉</p></li> <li><p>第二步:暴力拦截浏览</p> <p>其实秒杀、抢红包、抽奖，这类系统有一个共同的特点，那就是假设有50万请求涌入进来，可能前5万请求就直接把事儿干完了，甚至是前500请求就把事儿干完了</p> <p>后续的几十万流量是无效的，不需要让他们进入后台系统执行业务逻辑了</p> <p>这样的话，其实在负载均衡这一层（可以考虑用Nginx之类的来实现）就可以拦截掉99%的无效流量</p></li> <li><p>第三步: ip或用户抽象次数校验</p> <p>建立一个抽奖表，该表记录所有参与抽奖的ip和用户信息，比如判断5s内，该用户连续抽奖了2次以上，就拒绝该请求，认为是在刷接口，就把该用户和ip加入黑名单</p></li></ul> <p><a href="https://juejin.cn/post/6844903847031226382" target="_blank" rel="noopener noreferrer">如何设计一个百万级用户的抽奖系统？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="mongodb和mysql的区别"><a href="#mongodb和mysql的区别" class="header-anchor">#</a> mongoDb和mySQL的区别</h3> <ul><li><p>mongoDb是非关系型数据库，mySQL是关系型数据库</p> <p>mongoDb里存储的是json格式的数据,键值对形式，该数据结构非常符合前端的需求。</p> <p>关系型数据天然就是表格式的，就是后端常说的&quot;表&quot;,数据存储在数据表的行和列中。数据表可以彼此关联协作存储，也很容易提取数据</p></li> <li><p>对事务性的支持不同</p> <p>mongoDb不支持事务，mySQL支持事务</p> <p>事务的好处便于回滚，如第一个账户划出款项必须保证正确的存入第二个账户，如果第二个环节没有完成，整个的过程都应该取消，否则就会发生丢失款的问题。这时就需要回滚，恢复到初始的状态</p> <p><a href="https://www.cnblogs.com/1488boss/p/10754290.html" target="_blank" rel="noopener noreferrer">mongodb与mysql区别(超详细)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h3 id="高并发的如何正确修改库存"><a href="#高并发的如何正确修改库存" class="header-anchor">#</a> 高并发的如何正确修改库存</h3> <ul><li><p>场景</p> <p>抽象或秒杀活动，同时一千个请求过来，但奖品库存只有一个，期望的结果是只有一个人中奖，剩下999个人没有中奖。</p> <p>但是压测时，遇到的情况却是1000个都中奖了，并且库存还是一个</p> <p>原因就是高并发时，一千个请求同时读到库存都是一个，都中奖后，库存同时减一，最后导致库存没有减对</p> <p><span style="color:red;">解决此类问题，就是要给<strong>数据库加锁</strong>的概念，保证库存一个一个减、串行的减，解决方式就是使用mongoDB中的update方法减库存</span></p></li> <li><p>mongoDb中,有三种方法可以实现更新数据</p> <ol><li>save方法，如db.collection.save(obj),save是在客户端代码中生成的对象，需要从客户端回写到服务端</li> <li>findOneAndUpdate方法，如db.findOneAndUpdaet(&lt;filter&gt;,{obj}),和save类似也需要从客户端回写到服务端</li> <li>update方法,如db.update(&lt;filter&gt;{obj}),update是服务端处理的，速度最快；实测当并发超过1000次每秒时，update的速度是其他的2倍</li></ol></li></ul> <h3 id="redis"><a href="#redis" class="header-anchor">#</a> Redis</h3> <ul><li><p>Redis特点</p> <ol><li>Redis也是一种数据库，Redis中的数据是<span style="color:red;">放到内存中的，Redis查询速度极快</span>。一些常用的数据，可以存到Redis中，缩短从数据库查询数据的时间。</li> <li>Redis可以设置过期时间，可以将一些需要定期过期的信息放到Redis中，有点类似cookie</li></ol></li> <li><p>运用场景</p> <ol><li>将经常查询的信息存储到redis中，如抽奖活动的配置信息，这些信息查询的频率最高，放到Redis中可以提高查询速度，还可以存储用户的个人信息(权限、基础信息等)</li> <li>需要设置过期时长的信息，如微信授权，每2个小时过期一次，将对应的授权code存进去，到时删除</li></ol></li> <li><p>优点</p> <ol><li><p>支持多重数据类型</p></li> <li><p>持久化存储</p> <p>作为一个内存数据库，最担心的，就是万一机器死机宕机，数据就会消失掉。redis使用RDB和AOF做数据的持久化存储。主从数据同时，生成rdb文件，并利用缓冲区添加新的数据更新操作做对应的同步。</p></li> <li><p>性能很好</p></li></ol></li> <li><p>缺点</p> <ol><li>由于是内存数据库，所以单台机器存储的数据量跟机器本身的内存有关</li> <li>如果进行完成重同步，需要生成rdb文件，并进行传输，会占用主机的CPU，并会小号现网的带宽。</li> <li>修改配置文件，进行重启，将硬盘中的数据加载进内存，时间比较久，在这个过程中，redis不能提供服务</li></ol></li></ul> <p><a href="https://blog.csdn.net/wgw_dream/article/details/83780503" target="_blank" rel="noopener noreferrer">Redis的优缺点<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="node创建子进程"><a href="#node创建子进程" class="header-anchor">#</a> node创建子进程</h3> <p>当项目中需要大量计算的操作的时候，就要考虑开启多进程来完成了，类似于<a href="https://juejin.cn/post/7137728629986820126" target="_blank" rel="noopener noreferrer">web worker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>,否则会阻塞主线程的执行</p> <p><span style="color:red;">Node提供了 child_process 模块来创建子进程</span></p> <p><span style="color:red;">进程间通信:使用fork方法创建的子进程，可通过send、on(message)方法来发送和接收进程间的数据</span></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// parent.js</span>
<span class="token keyword">const</span> cp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'child_process'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过child_process中的fork方法来生成子进程</span>
<span class="token keyword">let</span> child <span class="token operator">=</span> cp<span class="token punctuation">.</span><span class="token function">fork</span><span class="token punctuation">(</span><span class="token string">'child.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
child<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'from_parent'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// send方法发送数据</span>
child<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// on 方法接收数据</span>

<span class="token comment">// child.js</span>
process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
process<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'from_child'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://www.cnblogs.com/chyingp/p/node-learning-guide-child_process.html" target="_blank" rel="noopener noreferrer">Nodejs进阶:如何玩转子进程(child_process)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="pm2"><a href="#pm2" class="header-anchor">#</a> PM2</h2> <p>PM2可以根据cpu核数,开启多个进程，充分利用cpu的多核性能</p> <p>如pm2 start app.js -i 8 该命令可以开启8个进程</p> <ul><li><p>主要作用</p> <ol><li>内建负载均衡(使用 Node Cluster 集群模块)</li> <li>线程守护，keep alive</li> <li>0秒停机重载，维护升级的时候不需要停机</li> <li>停止不稳定的进程(避免无限循环)</li></ol></li> <li><p>负载均衡cluster的原理</p> <ol><li>Node.js给我们提供了 cluster模块，它可以生成多个工作线程来共享同一个TCP连接</li> <li>首先,Cluster会创建一个master,然后根据你指定的数量复制出多个 server app(也被称为工作线程)</li> <li>它通过IPC通道与工作线程之间进行通信，并使用内置的负载均衡来更好的处理线程之间的压力，该负载均衡使用了Round-robin算法(也被称为循环算法)</li></ol></li></ul> <p><a href="https://www.cnblogs.com/jaxu/p/5193643.html" target="_blank" rel="noopener noreferrer">使用PM2将Node.js的集群变得更加容易<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.cnblogs.com/jaxu/p/5193643.html" target="_blank" rel="noopener noreferrer">PM2入门指南<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="计算机网络与安全"><a href="#计算机网络与安全" class="header-anchor">#</a> 计算机网络与安全</h2> <p><img src="/assets/img/2952cccf0f414e3bae38e939016b04ab_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.006059ab.png" alt="计算机网络与安全"></p> <h3 id="从输入url到页面加载发生了什么"><a href="#从输入url到页面加载发生了什么" class="header-anchor">#</a> 从输入URL到页面加载发生了什么？</h3> <ol><li><p>浏览器查找当前URL是否存在缓存，并比较缓存是否过期.(先判断HTTP请求浏览器是否已缓存)</p> <p>有缓存</p> <ul><li>如为强制缓存，通过Expires或Cache-Control:max-age判断该缓存是否过期，未过期，直接使用该资源；Expires和max-age，如果两者同事存在，则被Cache-Control的max-age覆盖</li> <li>如为协商缓存，请求头上带上相关信息 If-none-match(Etag)与If-modified-since(last-modified)，验证缓存是否有效，若有效则返回状态码304,若无效则重新返回资源，状态码为200</li></ul></li> <li><p>DNS解析URL对应的IP(DNS解析流程见下文)</p></li> <li><p>根据IP简历TCP连接(三次握手)（握手过程见下文）</p></li> <li><p>HTTP发起请求</p></li> <li><p>服务器处理请求，浏览器接收HTTP响应</p></li> <li><p>渲染页面，构建DOM树</p> <ul><li>HTML解析，生成DOM树</li> <li>根据CSS解析生成CSS树</li> <li>结合CSS树和DOM树，生成渲染树</li> <li>根据渲染树计算每一个节点的信息(layout布局)</li> <li>根据计算好的信息绘制页面</li></ul> <p>如果遇到script标签，则判断是否含有defer或者async属性，如果有，异步去下载该资源；如果没有设置，暂停dom的解析，去加载script资源，然后执行该js代码(<span style="color:red;"><strong>script标签加载和执行会阻塞页面的渲染</strong></span>)</p></li> <li><p>关系TCP连接(四次挥手)（挥手过程见下文）</p></li></ol> <p><a href="https://www.cnblogs.com/liutianzeng/p/10456865.html" target="_blank" rel="noopener noreferrer">从输入url到页面加载完成发生了什么详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://juejin.cn/post/6844903922084085773" target="_blank" rel="noopener noreferrer">在浏览器输入 URL 回车之后发生了什么（超详细版）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="彻底弄懂cors跨域请求"><a href="#彻底弄懂cors跨域请求" class="header-anchor">#</a> 彻底弄懂cors跨域请求</h3> <p>cors是解决跨域问题的常见解决方法,关键是服务器要设置Access-Control-Allow-Origin,控制那些域名可以共享资源</p> <p>origin是cors的重要标识,只要是非同源或者POST请求都会带上Origin字段，接口返回后服务器也可以将Access-Control-Allow-Origin设置为请求的Origin，解决cors如何指定多个域名的问题</p> <p><strong>cors将请求分为简单请求和非简单请求</strong></p> <ul><li><p>简单请求</p> <ol><li>支持持HEAD、get、post请求方式</li> <li>没有自定义的请求头</li> <li>Content-Type;只限于三个值 application/x-www-form-urlencoded、multipart/form-data、text/plain</li></ol> <p>对于简单请求，浏览器直接发出cors请求。具体来说，就是在头信息之中，增加一个Origin字段。如果浏览器发现这个接口回应的头信息没有包含Access-Control-Allow-Origin字段的话就会报跨域错误</p></li> <li><p>非简单请求的跨域处理</p> <p>非简单请求,会在正式通信之前，增加一个HTTP查询请求，成为&quot;预检&quot;请求(options)，用来判断当前网页所在的域名是否在服务器的许可名单之中。</p> <p>如果在许可名单中，就会发正式请求;如果不在，就会报跨域错误。</p></li></ul> <blockquote><p>注:新版chrome浏览器看不到OPTIONS预检请求，可以网上查找对应的查看方法</p></blockquote> <p><a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener noreferrer">跨域资源共享CORS详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="tcp的三次握手和四次挥手"><a href="#tcp的三次握手和四次挥手" class="header-anchor">#</a> TCP的三次握手和四次挥手</h3> <h3 id="websocket"><a href="#websocket" class="header-anchor">#</a> WebSocket</h3> <p>WebSocket是HTML5提供的一种浏览器与服务进行全双工通讯的网络协议，属于应用层协议，WebSocket没有跨域限制。</p> <p>相比于接口轮训，需要不断的建立http连接，严重浪费了服务器端和客户端的资源</p> <p>WebSocket基于TCP传输协议，并复用HTTP的握手通道。浏览器和服务器只需要建立一次http连接，两者之间可以创建持久性的连接，并进行双向数据传输</p> <ul><li><p>缺点</p> <p>websocket不稳定，要建立心跳检测机制，如果断开自动连接</p></li></ul> <p><a href="https://juejin.cn/post/6844903698498322439" target="_blank" rel="noopener noreferrer">手摸手教你使用WebSocket[其实WebSocket也不难]<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://blog.csdn.net/yournevermore/article/details/103067079" target="_blank" rel="noopener noreferrer">socket 及 websocket的握手过程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="tcp和udp的区别"><a href="#tcp和udp的区别" class="header-anchor">#</a> TCP和UDP的区别</h3> <p>相同点:UDP协议和TCP协议都是传输层协议</p> <p>不同点：</p> <ol><li><p>TCP面向有连接；UDP：面向无连接</p></li> <li><p>TCP是要提供可靠、面向连接的传输服务。TCP在建立通信钱，必须建立一个TCP连接,之后才能传输数据。TCP建立一个连接需要3次握手，断开连接需要4次挥手，并且提供超时重发，丢弃重复数据，校验数据，流量控制等功能，保证数据从一端传到另一端</p></li> <li><p>UDP不可靠性，只是把应用程序传给IP层的数据报发送出去，但是不能保证他们能达到目的地</p></li> <li><p>应用场景</p> <p>TCP效率要求相对低，但是对准确性要求相对高的场景。如常见的接口调用、文件传输、远程登录等</p> <p>UDP效率要求相对高，对准确性要求相对低的场景，如在线视频、网络语音电话等</p></li></ol> <p><a href="https://blog.csdn.net/sifanchao/article/details/82285018" target="_blank" rel="noopener noreferrer">面试题：UDP&amp;TCP的区别<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.cnblogs.com/liangyc/p/11628208.html" target="_blank" rel="noopener noreferrer">TCP和UDP的区别及应用场景<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="keep-alive-持久连接"><a href="#keep-alive-持久连接" class="header-anchor">#</a> keep-alive 持久连接</h3> <p>keep-alive又叫持久连接，它通过重用一个TCP连接来发送/接收多个HTTP请求，来减少创建/关闭多个TCP连接的开销，启动Keep-Alive模式性能更高</p> <p>在HTTP1.1协议中默认开启，可以在请求头上看到Connection:keep-alive开启的标识</p> <p>在HTTP1.0中非KeepAlive模式时，每次请求都要新建一个TCP请求，请求结束后，要关闭TCP连接。效率很低。</p> <p><span style="color:red;">注意：持久连接采用阻塞模式，下次请求必须等到上次响应返回后才能发起，如果上次的请求还没返回响应内容，下次请求就只能等着(<strong>就是常说的线头阻塞</strong>)</span></p> <p><a href="https://lotabout.me/2019/Things-about-keepalive/" target="_blank" rel="noopener noreferrer">HTTP keep-alive二三事<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="http1、2、3的区别"><a href="#http1、2、3的区别" class="header-anchor">#</a> HTTP1、2、3的区别</h3> <ul><li><p>http1、2的区别</p> <ul><li><p>二进制传输，HTTP/2采用二进制格式传输数据，而非HTTP/1.X纯文本形式的报文，二进制协议解析起来更高效</p></li> <li><p>Hearder压缩--HTTP/1.X的请求和响应头部带有大量信息，而且每次请求都要重复发送。HTTP2在客户端和服务器端使用&quot;首部表&quot;来跟踪和存储之前发送的键-值对，对于相同的数据，不在每次请求和响应发送</p></li> <li><p>多路复用</p> <p>就是在一个TCP连接中可以发送多个请求，可以避免HTTP旧版本中的线头阻塞问题(下次请求必须等到上次相应返回后才能发起)</p> <p>这样某个请求任务耗时严重，不会影响到其他连接的正常执行，极大的提高传输性能</p> <p><span style="color:red;font-weight:bold;">在HTTP/2中，有两个非常重要的概念，分别是帧(frame)和流(steam)。帧代表最小的数据单位，每个帧回表示出该帧属于哪个流(即请求),通过重新排序还原请求</span></p></li> <li><p>服务端推送：这里的服务端推送，是指把客户端所需要的CSS/JS/IMG资源伴随着index.html，一起发送到客户端，省去了客户端重复请求的步骤</p></li></ul></li> <li><p>HTTP3.0的区别</p> <p>http协议是应用层协议，都是建立在传输层之上的。2.0和1.0都是基于TCP的，而Http3.0则是建立在UDP的基础上</p></li> <li><p>HTTP3.0新特性</p> <ul><li>多路复用，彻底解决TCP中队头阻塞的问题</li> <li>集成了TLS加密功能</li> <li>向前纠错机制</li></ul></li> <li><p>HTTP1、2、3总结</p> <ul><li>HTTP1.1有两个主要缺点:安全不足和性能不高</li> <li>http2完全兼容http1，是更安全的HTTP、更快的HTTPS&quot;，头部压缩、多路复用等技术可以充分利用带宽，降低延迟，从而大幅度提高上网体验</li> <li>QUIC 基于 UDP 实现，是 HTTP/3 中的底层支撑协议，该协议基于 UDP，又取了 TCP 中的精华，实现了即快又可靠的协议</li></ul></li></ul> <p><a href="https://segmentfault.com/a/1190000020714686" target="_blank" rel="noopener noreferrer">解密HTTP/2与HTTP/3 的新特性<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://limeii.github.io/2019/06/http2-http3/" target="_blank" rel="noopener noreferrer">HTTP/3 新特性<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="https握手过程"><a href="#https握手过程" class="header-anchor">#</a> HTTPS握手过程</h3> <p><span style="color:red;">https采用非对称加密 + 对称加密，非对称加密来传递秘钥;对称加密来加密内容</span></p> <ol><li>客户端使用https的url访问web服务器,要求与服务器建立ssl连接</li> <li>服务器收到客户端请求后,会将网站的证书(包含公钥)传送一份给客户端</li> <li>客户端收到网站证书后会检查证书的颁发机构以及过期时间，如果没有问题就随机产生一个秘钥</li> <li>客户端利用公钥将会话秘钥加密，并传送给服务端</li> <li>服务端利用自己的私钥解密出会话秘钥，之后服务器会客户端使用秘钥加密传输</li></ol> <ul><li><p>加密速度对比</p> <p>对称急吗解密的速度比较快，适合数据比较长时的使用</p> <p>非对称加密和解密话费的时间长、速度相对较慢，只适合对少量数据的使用</p> <p>非对称加密: 有公钥私钥，公钥加密，私钥加密；对称加密：同一个秘钥进行加密和解密</p></li></ul> <h3 id="http-与-https-默认端口号"><a href="#http-与-https-默认端口号" class="header-anchor">#</a> http 与 https 默认端口号</h3> <ul><li>HTTP 默认端口号： 80</li> <li>HTTPS 默认端口号： 443</li></ul> <p>当客户端与服务器进行HTTP通信时,默认情况下会使用端口号80进行通信。例如，如果你在浏览器中输入http://example.com，则浏览器会默认使用80端口发送http请求给服务器。</p> <p>当客户端与服务器进行HTTPS通信时，默认情况下会使用端口号443进行加密通信。HTTPS通过使用SSL（Secure Sockets Layer）或TLS（Transport Layer Security）协议对通信进行加密和认证，以确保数据传输的安全性。例如，如果您在浏览器中输入 https://example.com,  则浏览器会默认使用443端口发送HTTPS请求给服务器</p> <p><strong>请注意，虽然这些是默认端口号，但是在实际应用中，可以通过显式指定不同的端口号来进行自定义配置。例如，有时会在非标准端口上部署HTTP或HTTPS服务，以满足特定的需求。</strong></p> <h3 id="介绍下中间人攻击"><a href="#介绍下中间人攻击" class="header-anchor">#</a> 介绍下中间人攻击</h3> <ul><li><p>过程</p> <ul><li>客户端向服务器发送建立连接的请求</li> <li>服务器向客户端发送公钥</li> <li>攻击者劫获公钥，保留在自己手上</li> <li>然后攻击者生产一个【伪造的】公钥，发送客户端</li> <li>客户端收到伪造的公钥后，生成加密的秘钥值发送给服务器</li> <li>攻击者获得机密密钥，用自己的私钥及诶获得密钥</li> <li>同时生成假的加密秘钥，发送服务器</li> <li>服务器使用四月解密获得假秘钥</li> <li>服务器用假秘钥加密传输信息</li></ul></li> <li><p>防范方法</p> <p>服务器在发送浏览器的公钥中加入CA证书，浏览器可以验证CA证书的有效性</p></li></ul> <p><a href="https://www.muyiy.cn/question/network/91.html" target="_blank" rel="noopener noreferrer">介绍下HTTPS中间人攻击<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="dns解析过程"><a href="#dns解析过程" class="header-anchor">#</a> DNS解析过程</h3> <p>DNS叫做域名系统，是域名和对应ip地址的分布式数据库。有了它，就可以用域名来访问对应的服务器。</p> <ul><li><p>过程</p> <ol><li><p>在浏览器中输入url后，会优先在浏览器dns缓存中查找，如果有缓存，则直接响应用户的请求</p></li> <li><p>如果没有要访问的域名，就继续在操作系统的dns缓存中查找，如果也没有，最后通过本地的dns服务器查到对应的ip地址。</p></li> <li><p>DNS 服务器完整的查询过程</p> <p>本地DNS服务器向根域名服务器发送请求，根域名服务器会返回一个所查询域的顶级域名服务器地址</p> <p>本地DNS服务器向顶级域名服务器发送请求,接受请求的服务器查询自己的缓存，如果有记录，就返回查询结果，如果没有就返回相关的下一级权威域名服务器的地址。</p> <p>本地DNS服务器向权威域名服务器发送请求，权威域名服务器返回对应的结果</p> <p>本地DNS服务器将返回结果保存在缓存中，便于下次使用</p> <p>本地DNS服务器将返回结果返回给浏览器</p></li></ol></li> <li><p>DNS解析</p> <p>DNS Prefetch 是一种DNS预解析技术,当你浏览网页时，浏览器会在对网页中的域名进行解析缓存，这样当页面中需要加载该域名的资源时候就无需解析，减少用户等待时间，提高用户体验</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dns-prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>//hhh.images.test.com.cn<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p><a href="https://www.yuque.com/cuggz/interview/cdpgm0#egcXy" target="_blank" rel="noopener noreferrer">DNS完整的查询过程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.sojson.com/blog/218.html" target="_blank" rel="noopener noreferrer">dns-prefetch对网站速度能提升有多少？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h3 id="xss-跨站脚本攻击"><a href="#xss-跨站脚本攻击" class="header-anchor">#</a> XSS(跨站脚本攻击)</h3> <h2 id="浏览器原理"><a href="#浏览器原理" class="header-anchor">#</a> 浏览器原理</h2> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <h2 id="原文"><a href="#原文" class="header-anchor">#</a> 原文</h2> <p><a href="https://juejin.cn/post/7146996646394462239" target="_blank" rel="noopener noreferrer">10万字前端知识体系总结（前端框架+浏览器原理篇）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/source-study/" class="prev router-link-active">
        课程学习
      </a></span> <span class="next"><a href="/source-study/base-02.html">
        10万字前端知识体系总结（算法篇）
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ff5704b6.js" defer></script><script src="/assets/js/3.32bc1a55.js" defer></script><script src="/assets/js/103.5aa338f8.js" defer></script>
  </body>
</html>
