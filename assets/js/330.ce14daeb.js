(window.webpackJsonp=window.webpackJsonp||[]).push([[330],{1484:function(t,e,n){t.exports=n.p+"assets/img/4489c9938d9f4f5fb82d72273f878104_tplv-k3u1fbpfcp-watermark.3e1947dc.jpg"},2627:function(t,e,n){"use strict";n.r(e);var s=n(46),a=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"ä»‹ç»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»‹ç»"}},[t._v("#")]),t._v(" ä»‹ç»")]),t._v(" "),s("p",[t._v("Sentry ä¸ºä¸€å¥—å¼€æºçš„åº”ç”¨ç›‘æ§å’Œé”™è¯¯è¿½è¸ªçš„è§£å†³æ–¹æ¡ˆã€‚è¿™å¥—è§£å†³æ–¹æ¡ˆç”±å¯¹åº”çš„å„ç§è¯­è¨€çš„SDKå’Œä¸€å¥—åºå¤§çš„æ•°æ®åå°æœåŠ¡ç»„æˆã€‚åº”ç”¨éœ€è¦é€šè¿‡ä¸ä¹‹ç»‘å®šçš„tokenæ¥å…¥Sentry SDKå®Œæˆæ•°æ®ä¸ŠæŠ¥é…ç½®ã€‚é€šè¿‡Sentry SDKçš„é…ç½®ï¼Œè¿˜å¯ä»¥ä¸ŠæŠ¥é”™è¯¯å…³è”çš„ç‰ˆæœ¬ä¿¡æ¯ã€å‘å¸ƒç¯å¢ƒã€åŒæ—¶Sentry SDKä¼šè‡ªåŠ¨æ•è·å¼‚å¸¸å‘ç”Ÿå‰çš„ç›¸å…³æ“ä½œï¼Œä¾¿äºåç»­å¼‚å¸¸è¿½è¸ªã€‚å¼‚å¸¸æ•°æ®ä¸ŠæŠ¥åˆ°æ•°æ®æœåŠ¡åï¼Œä¼šé€šè¿‡è¿‡æ»¤ã€å…³é”®ä¿¡æ¯æå–ã€å½’çº³å±•ç¤ºåœ¨æ•°æ®åå°çš„Webé¡µé¢ä¸­")]),t._v(" "),s("p",[t._v("å®˜æ–¹åœ°å€ï¼šhttps://github.com/getsentry/onpremise")]),t._v(" "),s("h2",{attrs:{id:"éƒ¨ç½²"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#éƒ¨ç½²"}},[t._v("#")]),t._v(" éƒ¨ç½²")]),t._v(" "),s("p",[t._v("éƒ¨ç½²é…ç½®å‚è€ƒå®˜ç½‘")]),t._v(" "),s("ul",[s("li",[t._v("Docker 19.03.6+")]),t._v(" "),s("li",[t._v("Compose 1.28.0+")]),t._v(" "),s("li",[t._v("4 CPU Cores")]),t._v(" "),s("li",[t._v("8 GB RAM")]),t._v(" "),s("li",[t._v("20 GB Free Disk Space")])]),t._v(" "),s("h3",{attrs:{id:"æ­¥éª¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ­¥éª¤"}},[t._v("#")]),t._v(" æ­¥éª¤")]),t._v(" "),s("ol",[s("li",[t._v("git clone https://github.com/getsentry/onpremise.git")]),t._v(" "),s("li",[t._v("cd onpremise")]),t._v(" "),s("li",[t._v("æ‰§è¡Œ./install.sh")]),t._v(" "),s("li",[t._v("docker-compose up -d")])]),t._v(" "),s("blockquote",[s("p",[t._v("æç¤º: ç›®å‰sentryå·²ç»æ˜¯dockerå®¹å™¨åŒ–éƒ¨ç½²;å¦‚æœæˆ‘ä»¬æƒ³è¦æ•´ä½“èµ°ä¸€ä¸‹å®¹å™¨åŒ–éƒ¨ç½²çš„è¯ï¼Œéœ€è¦ä¸Šé¢çš„æ­¥éª¤åœ¨ä¸€ä¸ªlinuxçš„å®¹å™¨ä¸­æ“ä½œï¼Œç„¶åæŠŠlinuxçš„å®¹å™¨æ‰“åŒ…æˆä¸€ä¸ªæ–°çš„é•œåƒ;ç„¶ååœ¨sreä¸­æ–°å»ºä¸€ä¸ªåº”ç”¨ï¼Œç„¶åæ¨é€è¿‡å»ã€‚ä¹‹å‰å’Œé¸¿é’§ã€ç‹åšæ²Ÿé€šï¼Œ1.linuxå®¹å™¨æ‰“åŒ…æˆé•œåƒæ¯”è¾ƒå¤§ï¼Œ2ã€‚æ–°å»ºåº”ç”¨ç›¸å¯¹å¤æ‚ä¸€äº›ï¼›ç›®å‰éƒ¨ç½²åœ¨çº¿ä¸Š10.102.119.42æœºå™¨ä¸­ï¼ŒäºŒçº§åŸŸåhttps://sentry-zl.***.cn/æŒ‡å‘")])]),t._v(" "),s("h3",{attrs:{id:"éƒ¨ç½²ä¸­çš„é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#éƒ¨ç½²ä¸­çš„é—®é¢˜"}},[t._v("#")]),t._v(" éƒ¨ç½²ä¸­çš„é—®é¢˜")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("docker-composeç‰ˆæœ¬è¿‡ä½")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("curl -L https://github.com/docker/compose/releases/download/1.28.3/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose\n\nchmod +x /usr/local/bin/docker-compose\n\ndocker-compose --version\n")])])])]),t._v(" "),s("li",[s("p",[t._v("dockerä¸‹è½½å¤ªæ…¢")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('vim /etc/docker/daemon.json\n\n{\n    "registry-mirrors": [\n        "https://registry.docker-cn.com",    //å›½å†…å®˜æ–¹é•œåƒ\n        "https://mirrors.tuna.tsinghua.edu.cn",   //æ¸…åé•œåƒ\n        "http://hub-mirror.c.163.com",    //ç½‘æ˜“163é•œåƒ\n        "https://docker.mirrors.ustc.edu.cn",   //ä¸­ç§‘å¤§é•œåƒ\n    ]\n}\n// æ–°å¢æ–‡ä»¶ cron/sources.list\ndeb http://mirror.bjtu.edu.cn/debian bullseye main\ndeb http://mirror.bjtu.edu.cn/debian bullseye-updates main\n\n// cron/Dockerfile \nARG BASE_IMAGE\nFROM ${BASE_IMAGE}\nCOPY sources.list /etc/apt/sources.list\nRUN apt-get update && apt-get install -y --no-install-recommends cron && \\\n    rm -r /var/lib/apt/lists/*\nCOPY entrypoint.sh /entrypoint.sh\nENTRYPOINT ["/entrypoint.sh"]\n\n// .env\n\n\n// é‡å¯docker\n\nsudo systemctl daemon-reload\n\nsudo systemctl restart docker\n')])])])]),t._v(" "),s("li",[s("p",[t._v("dockerç«¯å£ä¿®æ”¹")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// åŸæ¥é»˜è®¤æ˜¯9000ç«¯å£æŒ‡å‘å®¹å™¨å†…çš„80ç«¯å£ï¼Œç°åœ¨10.102.119.42çš„80ç«¯å£ç›´æ¥æŒ‡å‘å®¹å™¨å†…80ç«¯å£\n// .env\nOMPOSE_PROJECT_NAME=sentry_onpremise\nSENTRY_EVENT_RETENTION_DAYS=90\n# You can either use a port number or an IP:PORT combo for SENTRY_BIND\n# See https://docs.docker.com/compose/compose-file/#ports for more\nSENTRY_BIND=80\n# Set SENTRY_MAIL_HOST to a valid FQDN (host/domain name) to be able to send emails!\n# SENTRY_MAIL_HOST=example.com\nSENTRY_IMAGE=getsentry/sentry:nightly\nSNUBA_IMAGE=getsentry/snuba:nightly\nRELAY_IMAGE=getsentry/relay:nightly\nSYMBOLICATOR_IMAGE=getsentry/symbolicator:nightly\nWAL2JSON_VERSION=latest\nSENTRY_EVENT_RETENTION_DAYS=30\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"ä½¿ç”¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨"}},[t._v("#")]),t._v(" ä½¿ç”¨")]),t._v(" "),s("h3",{attrs:{id:"æ¥å…¥é‚®ç®±ğŸ“®æŠ¥è­¦"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¥å…¥é‚®ç®±ğŸ“®æŠ¥è­¦"}},[t._v("#")]),t._v(" æ¥å…¥é‚®ç®±ğŸ“®æŠ¥è­¦")]),t._v(" "),s("ol",[s("li",[t._v("é…ç½®å®Œæˆåï¼Œå³å¯è¿›å…¥é¡µé¢"),s("a",{attrs:{href:"https://sentry-zl.***.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://sentry-zl.***.cn/"),s("OutboundLink")],1),t._v(" æ‰“å¼€é¡µé¢å¡«å…¥ä¿¡æ¯åå³å¯è¿›å…¥sentryç³»ç»Ÿ\n"),s("img",{attrs:{src:n(1484),alt:"é¡µé¢é…ç½®"}})]),t._v(" "),s("li",[t._v("config.ymlé…ç½®"),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("mail.backend: 'smtp'\nmail.host: 'smtp.***.cn'\nmail.port: 25\nmail.username: 'xuzhe1@***.cn'\nmail.password: '*********'\nmail.use-tls: false\n# mail.use-ssl: true\n# The email address to send on behalf of\nmail.from: 'xuzhe1@***.cn'\n")])])])])]),t._v(" "),s("ul",[s("li",[t._v("mail.backendï¼šé‚®ä»¶å‘é€æ–¹å¼ï¼›")]),t._v(" "),s("li",[t._v("mail.host: é‚®ä»¶å‘é€åŸŸå ï¼Œä½¿ç”¨çš„å“ªä¸ªé‚®ç®±å¯ä»¥å»è¯¥é‚®ç®±æ–‡æ¡£ä¸­æ‰¾åˆ° smtp å‘é€åŸŸåï¼›")]),t._v(" "),s("li",[t._v("mail.port: é‚®ä»¶å‘é€çš„ç«¯å£å·ï¼›")]),t._v(" "),s("li",[t._v("mail.usernameï¼šç”¨äº smtp é‚®ç®±çš„è´¦å·ï¼›")]),t._v(" "),s("li",[t._v("mail.passwordï¼šç”¨äº smtp é‚®ç®±çš„å¯†ç ï¼›")]),t._v(" "),s("li",[t._v("mail.use-tlsï¼šæ˜¯å¦ä½¿ç”¨ tls å®‰å…¨åè®®ï¼Œè¿™é‡Œå¡«å†™ true æˆ– falseï¼Œå’Œ use-ssl é…ç½®äº’æ–¥ï¼›")]),t._v(" "),s("li",[t._v("mail.use-sslï¼šæ˜¯å¦ä½¿ç”¨ ssl å®‰å…¨åè®®ï¼Œè¿™é‡Œå¡«å†™ true æˆ– falseï¼Œå’Œ use-tls é…ç½®äº’æ–¥ï¼›")]),t._v(" "),s("li",[t._v("mail.fromï¼šæ”¶åˆ°é‚®ä»¶æ—¶çš„å‘é€äººåç§°ï¼›")])]),t._v(" "),s("p",[t._v("ä¹‹åå¯ä»¥è¿›å…¥é¡µé¢æµ‹è¯•é‚®ä»¶å‘é€"),s("a",{attrs:{href:"https://sentry-zl.***.cn/manage/status/mail/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://sentry-zl.***.cn/manage/status/mail/"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"sentryé€šè¿‡httpsè®¿é—®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sentryé€šè¿‡httpsè®¿é—®"}},[t._v("#")]),t._v(" sentryé€šè¿‡httpsè®¿é—®")]),t._v(" "),s("p",[t._v("é¦–å…ˆè¦ä¿®æ”¹ onpremise/sentry/config.yml system.url-prefix é…ç½®ï¼Œå°†å…¶è®¾ç½®ä¸ºæˆ‘ä»¬è®¿é—®çš„ Sentry åŸŸåã€‚ url-prefix ç»„æˆäº†é¡¹ç›®çš„ DSN åœ°å€ï¼Œä¸€å®šè¦ä¿è¯æ ¼å¼æ­£ç¡®ã€‚")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("system.internal-url-prefix: 'https://sentry-zl.***.cn'\n")])])]),s("p",[t._v("ç„¶åæ˜¯ /sentry/sentry.conf.py æ–‡ä»¶ä¸‹çš„ SSL/TLS é…ç½®ï¼Œå°†åŸæ¥æ³¨é‡Šçš„éƒ¨åˆ†å…¨éƒ¨æ‰“å¼€ã€‚")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("###########\n# SSL/TLS #\n###########\n\n# If you're using a reverse SSL proxy, you should enable the X-Forwarded-Proto\n# header and enable the settings below\n\nSECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTO', 'https')\nSESSION_COOKIE_SECURE = True\nCSRF_COOKIE_SECURE = True\nSOCIAL_AUTH_REDIRECT_IS_HTTPS = True\n\n# End of SSL/TLS settings\n")])])]),s("h3",{attrs:{id:"é¡¹ç›®æ¥å…¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é¡¹ç›®æ¥å…¥"}},[t._v("#")]),t._v(" é¡¹ç›®æ¥å…¥")]),t._v(" "),s("p",[t._v("Sentry é…ç½®åº”åœ¨åº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸä¸­å°½æ—©è¿›è¡Œã€‚å®Œæˆæ­¤æ“ä½œåï¼ŒSentry çš„ JavaScript SDK ä¼šæ•è·æ‰€æœ‰æœªå¤„ç†çš„å¼‚å¸¸å’Œäº‹åŠ¡")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.51cto.com/article/680787.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("å…³é—­æµè§ˆå™¨æ•è·çš„æ§åˆ¶å°è°ƒç”¨--åœ°å€"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/hacker-linner/p/14265447.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.cnblogs.com/hacker-linner/p/14265447.html"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("https://www.cnblogs.com/hacker-linner/p/14307722.html")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save @sentry/vue @sentry/tracing\n\nSentry.init"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  // Sentry é¡¹ç›®çš„ dsnï¼Œå¯ä»é¡¹ç›®è®¾ç½®ä¸­è·å–\n  dsn: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://23d1e539ef6c4cb6b14937fead1bf2ff@sentry-zl.***.cn/2'")]),t._v(",\n  // åˆå§‹å‚æ•°é…ç½®å†…å®¹\n  integrations: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    new Integrations.BrowserTracing"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      routingInstrumentation: Sentry.vueRouterInstrumentation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",\n      tracingOrigins: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost"')]),t._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my-site-url.com"')]),t._v(", /^"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("//"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",\n    new Sentry.Integrations.Breadcrumbs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" console: "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" // å…³é—­æµè§ˆå™¨æ•è·çš„æ§åˆ¶å°è°ƒç”¨ï¼š\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n  // è§¦å‘å¼‚å¸¸åå‘é€ç»™ Sentry çš„æ¦‚ç‡\n  tracesSampleRate: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v(",\n  // æ§åˆ¶åº”æ•è·çš„é¢åŒ…å±‘"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("è¡Œä¸ºæ ˆ"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("çš„æ€»é‡\n  maxBreadcrumbs: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(",\n  // è§„å®šä¸Šä¸‹æ–‡æ•°æ®ç»“æ„çš„æ·±åº¦ï¼Œé»˜è®¤ä¸º "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n  normalizeDepth: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(",\n  // ç‰ˆæœ¬ä¿¡æ¯\n  release: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"common@1.0.0"')]),t._v(",\n  // ç¯å¢ƒä¿¡æ¯\n  environment: process.env.NODE_ENV,\n  // é’©å­å‡½æ•°ï¼Œåœ¨æ¯æ¬¡å‘é€ event å‰è§¦å‘\n  beforeSend"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    // ç½‘é¡µåº”ç”¨åˆ·æ–°åè®¾ç½®çš„å˜é‡ä¼šæ¶ˆå¤±ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©åœ¨ beforeSend è§¦å‘æ—¶æ’å…¥ç”¨æˆ·ä¿¡æ¯\n    event.user "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      userNick: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xz"')]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(",\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"sentry-srouce-map"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sentry-srouce-map"}},[t._v("#")]),t._v(" sentry-srouce map")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("//.npmrc\nsentrycli_cdnurl=https://npm.taobao.org/mirrors/sentry-cli\n\n// vue.config.js\nconst SentryCliPlugin = require('@sentry/webpack-plugin');\n\nnew SentryCliPlugin({\n    include: './dist',\n    ignoreFile: '.gitignore',\n    release: 'production@1.2.0',\n    ignore: ['node_modules', 'webpack.config.js'],\n    configFile: '.sentryclirc',\n    urlPrefix: '~/'\n})\n\n// .sentryclirc\n[auth]\ntoken=c32f47d178064adeb3736742af42c34ebedf21aed43649bbb3d253a419e5c092\n\n\n[defaults]\nurl=https://sentry-zl.***.cn\norg=name\nproject=name-zl-pc\n\n// package.json\n\"build\": \"vue-cli-service build && rm -fr ./dist/js/*.map\",\n")])])]),s("h3",{attrs:{id:"ä¸Šä¼ æ—¥å¿—ä¿¡æ¯-æ‰‹åŠ¨ä¸ŠæŠ¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸Šä¼ æ—¥å¿—ä¿¡æ¯-æ‰‹åŠ¨ä¸ŠæŠ¥"}},[t._v("#")]),t._v(" ä¸Šä¼ æ—¥å¿—ä¿¡æ¯--æ‰‹åŠ¨ä¸ŠæŠ¥")]),t._v(" "),s("p",[t._v("æœ‰æ—¶æˆ‘ä»¬ä¸ä»…ä»…è¦æ”¶é›†å¼‚å¸¸ä¿¡æ¯ï¼Œè¿˜éœ€è¦åœ¨é¡µé¢ä¸­æ‰“ log æ¥æ”¶é›†é¡µé¢è¿è¡Œæ•°æ®ï¼Œè¿™æ—¶å¯ä»¥ç”¨ Sentry.captureMessage(err[, obj])Â apiï¼Œè¿›è¡Œä¼ è¾“æ—¥å¿—ã€‚ä½¿ç”¨æ–¹æ³•ä¸ captureException ä¸€è‡´ï¼Œå»ºè®®å°† level è®¾ç½®ä¸º Infoï¼Œä¾¿äºä¸å¼‚å¸¸åŒºåˆ†å¼€æ¥ï¼Œé¿å…è§¦å‘æˆ‘ä»¬è®¾ç½®çš„å¼‚å¸¸è­¦æŠ¥ã€‚")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('Sentry.captureMessage("Something went fundamentally wrong", {\n  contexts: {\n    text: {\n      hahah: 22,\n    },\n  },\n  level: Sentry.Severity.Info,\n});\n')])])]),s("h3",{attrs:{id:"è®¾ç½®å˜é‡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è®¾ç½®å˜é‡"}},[t._v("#")]),t._v(" è®¾ç½®å˜é‡")]),t._v(" "),s("p",[t._v("æ•æ‰å¼‚å¸¸è¿˜éœ€è¦é‡‡é›†ç”¨æˆ·ä¿¡æ¯ï¼Œåœ¨ç”¨æˆ·ç™»å½•åéœ€è¦é€šè¿‡ setUser è®¾ç½®ä¸€ä¸‹ç”¨æˆ·ä¿¡æ¯å…¨å±€å˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤º")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Sentry.setUser({\n    tenant: {\n        code: 12345,\n        name: 'æµ‹è¯•å…¬å¸',\n        _id: 12345\n    },\n    orgAccount: {\n        _id: 54321,\n        orgName: 'æ˜¯æœºæ„å•¦'\n    },\n    user: {\n        _id: '8910JQ',\n        loginName: 'æµ‹è¯•äººå‘˜å°Q'\n    } \n})\n")])])]),s("p",[s("strong",[t._v("é€šè¿‡ beforeSnd æ’å…¥ç”¨æˆ·ä¿¡æ¯")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Sentry.init({\n    ...,\n \t  // é’©å­å‡½æ•°ï¼Œåœ¨æ¯æ¬¡å‘é€ event å‰è§¦å‘\n    beforeSend(event) {\n        // åœ¨è¿™é‡Œå¯æ ¹æ®ä¸šåŠ¡æƒ…å†µå‘é€ç”¨æˆ·ä¿¡æ¯\n        event.user = {\n            userNick: 'xiaohu'\n        };\n        return event;\n    }\n});\n")])])]),s("p",[s("strong",[t._v("è®¾ç½®å…¨å±€å˜é‡")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// ä»¥ä¸‹æ˜¯ Sentry å®šä¹‰çš„å…¨å±€å˜é‡ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ Sentry api è®¾ç½®\nSentry.setUser(object);\nSentry.tags(object);\nSentry.extra(object);\nSentry.level(object);\nSentry.fingerprint(object);\n\n// é€šè¿‡ setContextï¼Œè®¾ç½® key å€¼ï¼Œå¯è‡ªå®šä¹‰éšäº‹ä»¶ä¼ é€’çš„å˜é‡å\nSentry.setContext(key, context);\n")])])]),s("h3",{attrs:{id:"åˆ›å»ºè­¦æŠ¥è§„åˆ™"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åˆ›å»ºè­¦æŠ¥è§„åˆ™"}},[t._v("#")]),t._v(" åˆ›å»ºè­¦æŠ¥è§„åˆ™")]),t._v(" "),s("p",[t._v("æ‚¨å¯ä»¥ä¸ºæ¯ä¸ªé¡¹ç›®åˆ›å»ºå„ç§è­¦æŠ¥è§„åˆ™ï¼Œå¹¶è®© Sentry çŸ¥é“æ‚¨å¸Œæœ›åœ¨åº”ç”¨ç¨‹åºä¸­å‘ç”Ÿé”™è¯¯æ—¶é€šçŸ¥çš„æ—¶é—´(when)ã€æ–¹å¼(how)å’Œå¯¹è±¡(whom)ã€‚\n"),s("a",{attrs:{href:"https://juejin.cn/post/7007607369962094599#heading-4",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://juejin.cn/post/7007607369962094599#heading-4"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"release"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#release"}},[t._v("#")]),t._v(" release")]),t._v(" "),s("p",[t._v("å…¶ä¸­ä¸€ç§æ–¹å¼åœ¨source mapä¸Šä¼ çš„æ—¶å€™åˆ›å»º, å¦ä¸€ç§è„šæ‰‹æ¶å¯ä»¥åˆ›å»º sentry-cliï¼Ÿ")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("new SentryCliPlugin({\n    include: './dist',\n    ignoreFile: '.gitignore',\n    release: process.env.RELEASE_VERSION,\n    ignore: ['node_modules', 'vue.config.js'],\n    configFile: '.sentryclirc',\n    urlPrefix: '~/'\n})\n")])])]),s("h2",{attrs:{id:"åŸç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸç†"}},[t._v("#")]),t._v(" åŸç†")]),t._v(" "),s("p",[t._v("å‰ç«¯æ•è·å¼‚å¸¸åˆ†ä¸ºå…¨å±€æ•è·å’Œå•ç‚¹æ•è·")]),t._v(" "),s("ul",[s("li",[t._v("å…¨å±€æ•è·ä»£ç é›†ä¸­ï¼Œæ˜“äºç®¡ç†")]),t._v(" "),s("li",[t._v("å•ç‚¹æ•è·ä½œä¸ºè¡¥å……ï¼Œå¯¹æŸäº›ç‰¹æ®Šæƒ…å†µè¿›è¡Œæ•è·ï¼Œä½†åˆ†æ•£ï¼Œä¸åˆ©äºç®¡ç†")])]),t._v(" "),s("ol",[s("li",[t._v("å…¨å±€æ•è·\n"),s("ul",[s("li",[t._v("é€šè¿‡å…¨å±€çš„æ¥å£ï¼Œå°†æ•è·ä»£ç é›†ä¸­å†™åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå¯ä»¥åˆ©ç”¨çš„æ¥å£åˆ\n"),s("ul",[s("li",[t._v("window.addEventListener('error')")]),t._v(" "),s("li",[t._v("window.addEventListener('unhandledrejection')")]),t._v(" "),s("li",[t._v("document.addEventListener('click')")]),t._v(" "),s("li",[t._v("ç­‰")])])]),t._v(" "),s("li",[t._v("æ¡†æ¶çº§åˆ«çš„å…¨å±€ç›‘å¬\n"),s("ul",[s("li",[t._v("ä¾‹å¦‚axiosä¸­ä½¿ç”¨interceptorè¿›è¡Œæ‹¦å‡»")]),t._v(" "),s("li",[t._v("vueã€reactéƒ½æœ‰è‡ªå·±çš„é”™è¯¯é‡‡é›†æ¥å£")])])]),t._v(" "),s("li",[t._v("é€šè¿‡å¯¹å…¨å±€å‡½æ•°è¿›è¡Œå°è£…åŒ…è£¹ï¼Œå®ç°åœ¨åœ¨è°ƒç”¨è¯¥å‡½æ•°æ—¶è‡ªåŠ¨æ•è·å¼‚å¸¸")]),t._v(" "),s("li",[t._v("å¯¹å®ä¾‹æ–¹æ³•é‡å†™(Patch), åœ¨åŸæœ‰åŠŸèƒ½åŸºç¡€ä¸ŠåŒ…è£¹ä¸€å±‚\n"),s("ul",[s("li",[t._v("ä¾‹å¦‚å¯¹setTimeoutè¿›è¡Œé‡å†™ï¼Œåœ¨ä½¿ç”¨æ–¹æ³•ä¸å˜çš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥æ•è·å¼‚å¸¸")])])])])]),t._v(" "),s("li",[t._v("å•ç‚¹æ•è·\n"),s("ul",[s("li",[t._v("åœ¨ä¸šåŠ¡ä»£ç ä¸­å¯¹å•ä¸ªä»£ç å¿«è¿›è¡ŒåŒ…è£¹ï¼Œæ´»åœ¨é€»è¾‘æµç¨‹ä¸­å¤§ç‚¹ï¼Œå®ç°æœ‰é’ˆå¯¹æ€§çš„å¼‚å¸¸æ•è·")]),t._v(" "),s("li",[t._v("trye-catch")]),t._v(" "),s("li",[t._v("ä¸“é—¨å†™ä¸€ä¸ªå‡½æ•°æ¥æ”¶é›†å¼‚å¸¸ä¿¡æ¯ï¼Œåœ¨å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œè°ƒç”¨è¯¥å‡½æ•°")]),t._v(" "),s("li",[t._v("ä¸“é—¨å†™ä¸€ä¸ªå‡½æ•°æ¥åŒ…è£¹å…¶ä»–å‡½æ•°ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°å‡½æ•°ï¼Œè¯¥æ–°å‡½æ•°è¿è¡Œç»“æœå’ŒåŸå‡½æ•°ä¸€æ¨¡ä¸€æ ·ï¼Œåªæ˜¯åœ¨å‘ç”Ÿå¼‚å¸¸æ—¶å¯ä»¥æ•è·å¼‚å¸¸")])])])]),t._v(" "),s("h2",{attrs:{id:"èµ„æ–™"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#èµ„æ–™"}},[t._v("#")]),t._v(" èµ„æ–™")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://juejin.cn/post/7007607369962094599#heading-4",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sentry Web å‰ç«¯ç›‘æ§ - å®˜æ–¹æœ€ä½³å®è·µæ•™ç¨‹"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://juejin.cn/post/6974424800563298341",target:"_blank",rel:"noopener noreferrer"}},[t._v("åŸºäºSentryæ­å»ºå‰ç«¯å¼‚å¸¸ç›‘æ§ç³»ç»Ÿ"),s("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=a.exports}}]);