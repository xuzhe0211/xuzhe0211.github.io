(window.webpackJsonp=window.webpackJsonp||[]).push([[804],{2943:function(a,t,e){"use strict";e.r(t);var s=e(46),r=Object(s.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h2",{attrs:{id:"curl请求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#curl请求"}},[a._v("#")]),a._v(" curl请求")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("curl -X DELETE --header 'Content-Type: application/json' --header 'Accept: application/json' --header 'token: x-csrf-token' -d '{\"id\":\"19\"}' http://192.168.3.6:7001/v1/api/acts/19\n\ncurl -X GET \"http://http://172.24.193.39:8801/ihs/charge/traffic/actual_path?page_no=0&page_size=20&passid=101\" -H \"accept: */*\"\n\n\ncurl -X PUT --header 'Content-Type: application/json' --header 'Accept: application/json' -d '{\"title\":\"test1\"}' http://192.168.3.6:7001/v1/api/acts/19\n")])])]),e("p",[e("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2019/09/curl-reference.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("阮一峰curl用法指南"),e("OutboundLink")],1),a._v(" "),e("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2011/09/curl.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("阮一峰curl开发指南"),e("OutboundLink")],1)]),a._v(" "),e("h2",{attrs:{id:"简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[a._v("#")]),a._v(" 简介")]),a._v(" "),e("p",[a._v("curl是常用的命令行工具，用来请求Web服务器。它的名字就是客户端(client)的URL工具的意思。")]),a._v(" "),e("p",[a._v("它的功能非常强大，命令行参数多达几十种。如果熟练的话，完全可以取代Postman这一类的图形界面工具.")]),a._v(" "),e("p",[a._v("本文介绍它的主要命令行参数，作为日常的参考，方便查阅。内容主要翻译自《curl cookbook》。为了节约篇幅，下面的例子不包括运行时的输出，初学者可以先看我以前写的"),e("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2011/09/curl.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("curl 初学者教程"),e("OutboundLink")],1),a._v("。")]),a._v(" "),e("p",[a._v("不带有任何参数时，curl就是发出GET请求。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("curl https: //www.example.com\n")])])]),e("p",[a._v("上面命令向www.example.com发出GET请求，服务器返回的内容会在命令行输出。")]),a._v(" "),e("h3",{attrs:{id:"a"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#a"}},[a._v("#")]),a._v(" -A")]),a._v(" "),e("p",[a._v("-A参数指定客户端的用户代理标头，即User-Agent。curl的默认用户代理字符串是curl/[version].")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -A 'Mozilla/5.0 (Window NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36' https://google.com'\n")])])]),e("p",[a._v("上面命令将User-Agent改成Chrome浏览器")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -A '' https://google.com\n")])])]),e("p",[a._v("上面命令会移除User-Agent标头.")]),a._v(" "),e("p",[a._v("也可以通过-H参数直接指定标头，更改User-Agent.")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("curl -H 'User-Agent: php/1.0' https://google.com\n")])])]),e("h3",{attrs:{id:"b"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#b"}},[a._v("#")]),a._v(" -b")]),a._v(" "),e("p",[a._v("-b 参数用来向服务器发送Cookie。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -b 'foo=bar' https://google.com\n")])])]),e("p",[a._v("上面命令会生成一个标头Cookie: foo=bar,想服务器发送一个名为foo、值为bar的Cookie。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -b 'foo1=bar;foo2=bar2' https://google.com\n")])])]),e("p",[a._v("上面命令发送两个Cookie。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -b cookies.txt https://www.google.com\n")])])]),e("p",[a._v("上面命令读取本地文件cookies.txt，里面是服务器设置的Cookie(参见-c参数)，将其发送到服务器")]),a._v(" "),e("h3",{attrs:{id:"c"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#c"}},[a._v("#")]),a._v(" -c")]),a._v(" "),e("p",[a._v("-c参数将服务器设置的Cookie写入一个文件。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$curl -c cookie.txt https://www.google.com\n")])])]),e("p",[a._v("上面命令将服务器的HTTP回应所设置Cookie写入文本文件cookies.txt")]),a._v(" "),e("h3",{attrs:{id:"d"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#d"}},[a._v("#")]),a._v(" -d")]),a._v(" "),e("p",[a._v("-d参数用于发送POST请求的数据体。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$curl -d 'login=emma &&password=123' -X POST https://google.com/login\n# 或者\n$curl -d 'login=emma' -d 'password=123' -X POST https://google.com/login\n")])])]),e("p",[a._v("使用-d参数以后，HTTP请求会自动加上标头Content-Type: application/x-wwwform-urlencodeed.并且会自动将请求转为POST方法，因此可以省略 -X POST。")]),a._v(" "),e("p",[a._v("-d参数可以读取本地文本文件的数据，想服务器发送。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -d '@data.txt' https://google.com/login\n")])])]),e("p",[a._v("上面命令读取data.txt文件的内容，作为数据体向服务器发送。")]),a._v(" "),e("h3",{attrs:{id:"data-urlencode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#data-urlencode"}},[a._v("#")]),a._v(" --data-urlencode")]),a._v(" "),e("p",[a._v("--data-urlencode参数等同于-d，发送POST请求的数据体，区别在于会自动发送的数据进行URL编码.")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl --data-urlencode 'comment=hello world' https://google.com/login\n")])])]),e("p",[a._v("上面代码中，发送的数据hello world之间有一个空格,需要进行URL编码")]),a._v(" "),e("h3",{attrs:{id:"e"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#e"}},[a._v("#")]),a._v(" -e")]),a._v(" "),e("p",[a._v("-e参数用来设置HTTP的标头Referer,表情请求的来源。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("curl -e 'https://google.com?q=example' https://www.example.com\n")])])]),e("p",[a._v("上面的命令将Referer标头设为https://google.com?q=example.")]),a._v(" "),e("p",[a._v("-H参数可以通过直接添加标头Referer，达到同样效果")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("curl -H 'Referer: https://google.com?q=example' https://www.example.com\n")])])]),e("h3",{attrs:{id:"f"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#f"}},[a._v("#")]),a._v(" -F")]),a._v(" "),e("p",[a._v("-F 参数用来向服务器上传二进制文件")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -F 'file=@photo.png;type=image/png' https://google.com/profile\n")])])]),e("p",[a._v("上面命令会给HTTP请求加上标头Content-Type:multipart/form-data,然后将文件photo.png作为file字段上传。")]),a._v(" "),e("p",[a._v("-F参数可以指定MIME类型")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -F 'file=@photo.png;type:image/png' https://google.com/profile\n")])])]),e("p",[a._v("上面命令指定MIME类型为image/png,否则curl会吧MIME类型设为application/octet-stream")]),a._v(" "),e("p",[a._v("-F参数也可以指定文件名")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -F 'file=@photo.png;filename=me.png' https://google.com/profile\n")])])]),e("p",[a._v("上面命令中，原始文件名为photo.png,但是服务器接受到的文件名为me.png")]),a._v(" "),e("h3",{attrs:{id:"g"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#g"}},[a._v("#")]),a._v(" -G")]),a._v(" "),e("p",[a._v("-G参数用来构造URL的查询字符串。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -G -d 'q=kitties' -d 'count=20' https://google.com/search\n")])])]),e("p",[a._v("上面命令会发出一个GET请求，实际请求的URL为https://google.com/search?q=kittes&count=20。如果省略--G，会发出一个POST请求。")]),a._v(" "),e("p",[a._v("如果数据需要URL编码，可以结合--data--urlencode参数。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -G --data-urlencode 'comment=hello world' https://www.example.com\n")])])]),e("h3",{attrs:{id:"h"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#h"}},[a._v("#")]),a._v(" -H")]),a._v(" "),e("p",[a._v("-H参数添加HTTP请求的标头")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -H 'Accept-Language: en-US' https://google.com\n")])])]),e("p",[a._v("上面命令添加HTTP标头Accept-Language:en-US.")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -H 'Accept-Language:en-US' -H 'Secret-Message:xyzzy' https://google.com\n")])])]),e("p",[a._v("上面命令添加两个HTTP标头")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('$ curl -d \'{"login": "emma", "pass": "123"}\' -H \'Content-Type: application/json\' https://google.com/login\n')])])]),e("p",[a._v("上面命令添加 HTTP 请求的标头是Content-Type: application/json，然后用-d参数发送 JSON 数据。")]),a._v(" "),e("h3",{attrs:{id:"i"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#i"}},[a._v("#")]),a._v(" -i")]),a._v(" "),e("p",[a._v("-i参数打印出服务器回应的HTTP标头。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -i https://www.example.com\n")])])]),e("p",[a._v("上面命令收到服务器回应后，先输出服务器回应的标头,然后空一行，在输出网页的源码。")]),a._v(" "),e("h3",{attrs:{id:"i-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#i-2"}},[a._v("#")]),a._v(" -I")]),a._v(" "),e("p",[a._v("-I参数向服务器发出HEAD请求，然后会将服务器返回的HTTP标头打印出来。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -I https://www.example.com\n")])])]),e("p",[a._v("上面命令输出服务器对HEAD请求的回应")]),a._v(" "),e("p",[a._v("--head参数等同于-I")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl --head https://www.example.com\n")])])]),e("h3",{attrs:{id:"k"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#k"}},[a._v("#")]),a._v(" -k")]),a._v(" "),e("p",[a._v("-k参数指定跳过SSL检测")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -k https://www.example.com\n")])])]),e("p",[a._v("上面命令不会检查服务器的SSL证书是否正确")]),a._v(" "),e("h3",{attrs:{id:"l"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#l"}},[a._v("#")]),a._v(" -L")]),a._v(" "),e("p",[a._v("-L参数会让HTTP请求更随服务器的重定向。curl默认不更随重定向")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$curl -L -d 'tweet=hi' https://api.twitter.com/tweet\n")])])]),e("h3",{attrs:{id:"limit-rate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#limit-rate"}},[a._v("#")]),a._v(" --limit-rate")]),a._v(" "),e("p",[a._v("--limit-rate用来限制HTTP请求和回应的带宽，模拟慢网速的环境")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl --limit-rate 200k https://google.com\n")])])]),e("p",[a._v("上面命令将带宽限制在每秒200K字节。")]),a._v(" "),e("h3",{attrs:{id:"o"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#o"}},[a._v("#")]),a._v(" -o")]),a._v(" "),e("p",[a._v("-o参数将服务器的回应保存为文件，等同于wget命令。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -o example.html https://www.example.com\n")])])]),e("p",[a._v("上面命令将www.example.com保存成example.html")]),a._v(" "),e("h3",{attrs:{id:"o-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#o-2"}},[a._v("#")]),a._v(" -O")]),a._v(" "),e("p",[a._v("-O参数将服务器回应保存成文件，并将URL的最后部分当成文件名。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -O https://www.example.com/foo/bar.html\n")])])]),e("p",[a._v("上面命令将服务器回应保存成文件，文件名为bar.html")]),a._v(" "),e("h3",{attrs:{id:"s"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#s"}},[a._v("#")]),a._v(" -s")]),a._v(" "),e("p",[a._v("-s参数将不输出错误和进度信息")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -s https://www.example.com\n")])])]),e("p",[a._v("上面命令一旦发生错误，不会显示错误信息。不发生错误的华，会正常显示运行结果。")]),a._v(" "),e("p",[a._v("如果想让curl不产生任何输出，可以使用下面命令")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -s -o /dev/null https://google.com\n")])])]),e("h3",{attrs:{id:"s-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#s-2"}},[a._v("#")]),a._v(" -S")]),a._v(" "),e("p",[a._v("-S参数指定只输出错误信息，通常与-s一起使用")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -s -o /dev/null https://google.com\n")])])]),e("p",[a._v("上面命令没有任何输出，除非发生错误。")]),a._v(" "),e("h3",{attrs:{id:"u"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#u"}},[a._v("#")]),a._v(" -u")]),a._v(" "),e("p",[a._v("-u参数用来设置服务器认证的用户名和密码")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -u 'bob:12345' https://google.com/login\n")])])]),e("p",[a._v("上面命令设置用户名为bob，密码为12345，然后将其转为HTTP标头uthorization: Basic Ym9iOjEyMzQ1")]),a._v(" "),e("p",[a._v("curl能识别URL里面的用户名和密码")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl https://bob:12345@google.com/login\n")])])]),e("p",[a._v("上面命令能够识别URL里面的用户名和密码，将其转为上个例子里面的HTTP标头")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -u 'bob' https://google.com/login\n")])])]),e("p",[a._v("上面命令只设置了用户名，执行后，curl会提示用户输入密码")]),a._v(" "),e("h3",{attrs:{id:"v"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#v"}},[a._v("#")]),a._v(" -V")]),a._v(" "),e("p",[a._v("-v参数输出通信的整个过程，用于调试.")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -v https://www.example.com\n")])])]),e("p",[a._v("--trace参数也可以用用于调试，还会输出原始的二进制数据")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl --trace - https://www.example.com\n")])])]),e("h3",{attrs:{id:"x"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#x"}},[a._v("#")]),a._v(" -x")]),a._v(" "),e("p",[a._v("-x参数指定HTTP请求的代理")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -x socks5://james:cate@myproxy.com:8080 https://www.example.com\n")])])]),e("p",[a._v("上面命令指定HTTP请求通过myproxy.com:8080的socks5代理发出")]),a._v(" "),e("p",[a._v("如果没有指定代理协议，默认为HTTP。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -x james:cats@myproxy.com:8080 https://www.example.com\n")])])]),e("p",[a._v("上面命令中，请求的代理使用HTTP协议")]),a._v(" "),e("h3",{attrs:{id:"x-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#x-2"}},[a._v("#")]),a._v(" -X")]),a._v(" "),e("p",[a._v("-X参数指定HTTP请求的方法")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ curl -X POST https://www.example.com\n")])])]),e("p",[a._v("上面命令对https://www.example.com发出POST请求")])])}),[],!1,null,null,null);t.default=r.exports}}]);