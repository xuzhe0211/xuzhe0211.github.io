(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{1874:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAcAAAABqCAAAAAAOvt6TAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAFiUAABYlAUlSJPAAAA2XelRYdFJhdyBwcm9maWxlIHR5cGUgaWNjAABogaU5V7LsNq7/WoWXgByWA4Jk1ex/A1OUuk/ysT1+T+feUgsMyIHg9Z/u648//vhDwOSC8+wFhg4O1kB4g2zacnFSEhci0NDUIgBfBgAIgA4ADUAOgHQZGjs7CCooSMPr+fn9d8+2adez+/NMpvlB2b98rn83HcnE1Nn4+dQXQqPL5IBtPgMvuAQZOzi5PPPkeQOxu4vDG27xQiCX0yPGZ8D7PWD+FZ7wAf82v+TrRqIkD6k2HgwBbWjoZH5/r35TBG7G5i+K1nrBGS5bJpa27u+N74FlbGFoz/fW90Zt06btN/zFGVBcLwzP967XCIf9FaX+O/zYEdovLNxw/wX+VWufT1wilscgrQ094f/8/Es7+n9sZNPa9ScrZK8fbeEkofTa6KUtnGHDtgyl98QHvtqWkSzZr/nPOO6wfDR4fRsgKAtXCdVvCAj7uLbwyxABH4qIj/BRRMZ7owczidmylvX2+vcCIzNLMXmp4+Xn5GHpIqnynTWKOMoVVf5OabaTbaUfrFG2mZOw4PUdc63jGJ9CfSNocbWhKvidgxkWppLSPzba4mWhoi9Th0cmDOVmqSbrBX/ejCd2DOVPGT0bMdHZSPhjwedG5Kr0VgI9lDKHqa0TjL/LiPXh2d7qfyNwsOlfbOklIw6zsJSU9V39nOFyWJO3Wz+y4Cpjwy9KeMZ52E0Rqv6ZInXW+FD/p3bEVETe9vW8uNfZSFX5B0VznTAq9MHaC/O+E8JnVnnNFzgyOip9y4heA1jObso/MAv3nePkA8HDgUgfxAqfBvkIVQysDKX0LdWHAnGDm5oT0E4iOPu5Pm8jANvXieAnuvdaPXz1M/h1kRiAIcAx1BPo7Gwwf8w5BvkVyzHEj0Xr+X005QWw5gumAMcUviM8G9GXxWeSPQv2/IW6r+ydjT+ovV4LX1hsAJwi4d70kD/gTt/3uH4iO4i+s3cBqAGc/HRPyt/4/87+iZa2Xwj2e931v008Xn/P6e9zDpUPxdebZALYf9rURO+8bxInFIJRHlsD4QXC49jR81vgegEJhAOE86eAf0Wgy0Angi4CnQq64AKdqdsy6Gbhb2Qj8wlDh4NvtqV3WfOXqhayF6V6EyY8X9Q/VAvazeZRjrBcD0uCILwfvs/CM1l+Cv2l/t9t6/qztj418bn4N4v/adnJAAkEiQ4pAEnxDxYNsKhgsf4wyJuat7X+lR19FS79YrSHtZ+L/oGaP8vubdkndx/A7Vd/vylHAA8GbgduBO4EHg08/GGNxwYeAdwHOM/A73Hpwyf9N6f94tH29vY/WfgvPolfWb2+xCFmqMGwkmH394UAfkq+eFWz93LbDp5OluYWlx+jfR0bTl6UtGVMi5qAic//O+B/HGq+PJvR3hniPougdf02MfhJ2Txt7fsZ/ds8GbvuLDLkdbaq9Stm8vkA1lNbdOQ5U6mTv0vAV8X2wTnoq3DYT+7CPHXfXZrBbfHzVBoAbEfVz8KTA+VQdIqnU9lrnkDzsux4YvZRxKnmzxklECAMIMbxKYBUgCyA3AB1LPtU+zUBBgEc+xkN0HgKVoAeAOfgNBVgjiceLQVY4yYatgHsAQh4AYIDwgREBsQExA1ICkgDkAmQA5AXoCigNKASoOadnNEc0Bag6wXoDRgMGAMwCTALsBCwEnAg4EjARsBOwImAMwEXAq4E3AS4Cwj4AoJzIBYgnEBkQLSBOIAEgWQAqQDphHNeIUcgL6AQoFhAGUBFQNUX0DCgRqAeQFOBjpLWANoKfJd9A47hMSEwzVPuAQsDy4ZTd7MZ8Mm07As4CjgNuAi4FvCox8MnA69zfGvgnSBw4jTfWV7uWH1SUoCcik2MQRxBfIFEg2SBVIAMA2kBmQyy8LYS2QsUJig2KA1QLlBJUI0L1BzUHTQMNA20DHQoaOsrZynoNrj/8CRJh3NyvpOmJpgVmI8LLBosJ1jtJ4JMBFsMthWOLzsmOA1wnuCywQ3hnGk9DDwTvBp87AuOH/lS8B0QMCBwQzBBiEFoQdiCCIJIg6iCGAtiEsRyiD0g8SQMPVmkIGXDOS6lJ2RsyBLIUZC9IZdC7gGFCEUOxRNKBcoKKhAqA6rWBdUKNRtqH0UPGEQwOGEowrCEc/4dGTDG8Z6AsRDGTmgkaCpoYWjtC9oVOhZ0OfRxs5nQm2GePzKYclytYLrAjAWzEmYzzLlg7oCFDIvWBUsSlgks37BywBoGaxKstWBDwiaFLQhbF2wv2Gmwx4nGG/Y63p0IZNdJ+giGCL4QciCMRJh+ViIi3/9QNqJNxGjEKsROxBVI4EhkSKLX6b8ghSAVIzUjLUYGRiZGFkY2Rg5GLkFuRV6KAoZCjiKJYoUS40KpidILZQMqEiqfM4qheqDmQB0TdZ2owafTgCaJZo0WG20Q2jS0XRc6TnRBdFP0SPRa6JPQt2PgwBDAMMWIwqiNMRVj1xNxRDFtYCZemMMx5zyVIRYVliKWO1YurFas1ThQcPDAYYwjCscgHLPwBKCmwla6sH1gF2N3Y2/FiQunOE4/MSxxNuNcjQsNlwAuK1wpuMbCtRI3Mm5eF25L3Cm4x8a9iu5YKkhgTZBB0EKwgRCbUILQlbCQsBfhHkTkRKoXURBRbaI5iaGIOYjNiFOIm4j3CZabRCaJN0kNklmkx8M4SC1I0y/SdtLtZORk6nSaHTacbAU5BrkkuRd5DfLZFDApeFM4UhRRTKEEuyg5KG1Q5qScQAVExUplQZWDqjcNIBpsNCxp5KQxkU5oa05qW9RFF/V0mtA0BWm60axBcyEtNFrStIJoDae1Fm0S2lq0E2m3096LgZXB+mIoYZiDEYlRijGIcRTjJj60kTFTDqYpzDCZxZh9M49g3shCg8X0YsnFMoMVmVUmazhrE+uefFo05sRWi20lnzaIn6SRzT6dA4VDT0XYF0cHJ+itpPTNOZpzJxcblwvXIK61edDkYYNHFY8V3OTcptwl3IsvnkQ8DXkW8lzAi07zEHgV8FrAm5C3Ie8i3osEiOU+MtUdewQpBa0uwWrBtYROunISGiq0XZhL2Kdw3/WsiLhIlEgv0RM4VEWzROcSI7rEzMVqiG0QZxX3Id4gASohQyJRYrokTkljyUrJDVLsUj6lWmRAX3I3bbJkLJKmknaSHiUTSKaUzGSZs2WRyrIla/iTKyVlJ8ueJ8/7peCoME6oNz3NcMyhuEyJUclbqV0ZWVm3cpXyPk0SUomtMocqharrpdqkBltNW61Sbbu6iHqS+qkpaWv41OihiaVpqTlOxnMtNa0yra2XDlEdqTqWarNqh2lP00mu00Nnpy4sXda6xtQNW7eh7nEKSTVQN6i6DHYbyjYsMtxqJGmnzUMbjIWN043XeM7Ip/G30pSnaZLpOj3jaZZ0ma0w52mebL7SgrdFmsVqS2HLLMuNVhJWua2225Bto9zG3tbq1rUvmxA2DWyOtIVky4atFtu4bHvYnuhAwyHMYYEjl2Oq4wYnGU5lzoCXs07nES4oTze/25XidOpdFx6+3HK47XBXcx/sgehhy6Pbk8oz8vJc7iXmVeoDxIexjyZvQu9A75NUBH0W+qlfl5GvJt/EvkN8Lw0QvwIqTk0RaCOwZxBDUFLQlmD14FEhOEMCQhaHiofWCIMjXAqbHs7jCs8dARJhGdErkjkyM3KvKJOorhgMMdJi7I42ju6KyRgzI+bescyuWL1is8XOlfeJz1bCtETeiRVJiEleSYuPsyQPSyFIicrjJ6o7tfO6/dByp0Olu6YvyJDOGJFJkpmQuTvLImtqDqEctbOxsyOzt+c0uXJOyiWQq1ZunLlj5N5VYFkwo1C8cFgRWVFaMVixW/GyErXj5aUcV2llGVZZjLI9y22VL6hQqmipZK+srMKuil0DqIZrjZXV2tUTaopcNUfUolmrsI4B7zhFHgxwHbBqoMHAaYNkDGoazDG41hDSIdlDkYdGXcMAh3kO2zDcYviCEce/J46UGtk0iseooWPQGqOOmeHoHKfgGTP2WFDXWCFj7T2219hbGxwaVjeaNy5u0t00R7NG85QWxZZerTJajzWItTVf7XIKkt3Bs2N0J1fnyC6OruE92HoM62btHtqTtefQXmy9hvVm7z3imsA5YdRE7oljTeI9qXGyyOS2KZJTekyVNXXiNNVpM6ZrT18ww2TGimum9Tx6L7dZe8wRMBt0dtScCHOmzYU9V9HclHPXXsC2YMyFIgu7Fylfi+ZYbLx4jSXOS3YvDVkGc537Mse9vHIF04rRK8VWTlilY9XSNRzW2ONaHbYm4pqn70ux1pC1Bdbu3qCxYelGp417b4rejLm5fAvLlqatClvnurbZ3HaUFrUDc0fFTo6d7bvUdy3fw303+O6MPSn3HLWXjL1m723z9Cguh/uKEL80Ht6XBOd25u40bKqnBTH1vqlBfu4+oXS8rxJ/3mbh13vbLzD4J/j1c+DbneQnkfZqnTx9j1fr5NQFd28F+tmI3tetMz4aJPf7aR0RM/Mv72/P5WzGzF/bMwj9uj/SHXe3h/ERio+7DbTnqfpOFyhvQe9ZLxnxvIXY4Pjt+vT9vHRR8JbykTuGfdzD/M3V4bdr15egXu+3Nr99X7+p+y0H/qTrL7+v/wJe+YMyNmPGRQAAD/xJREFUeNrtnXtAVGXexz8gKiqHSnMsnTUlxdSkZKPYzNbY1bJWtAxTV0tNS00tL6WWablqueVlveUl85opiOiavKuSeUMKLympiRdKwNtEqIyCwsCzf5xz5j4w+kqzZzyff+a5/M4z55nvOc95buc3AQIdLRPo6xPQ+f+hC6hxdAE1ji6gxtEF1Di6gBpHF1Dj6AJqHF1AjaMLqHF0ATVOeQLmXfH12elUSHkCDr5/nce8vAwPGUOH/+jrOt1WlCNgRoKp6988LVZ889Cjn192l3FqZsSTFqe0Il/X0o9xJ2Ch/DEJpK4BHo6rwd4Bf3eXkQe1gxyTDteb7etq+i8Ov/WGrDeqwdHoaQOAjAQ40ARmHp5V0/W4YIhwK8tvsBTIHH3XnerFsdI87OS0IHQqA4ffNXfE/L/Dl+bXDnwGkyBmzx6+XUrGhntdjguGdo3dFfgrkXcC4dWXRv5BVvCcCWZVme7rmvopDgIGc3xNKJfgWFlgegLG3MlwHPa+ssXlOE9Na5GZBwACvlqtmvT5DsO7cb6uqL/i8AysAlvT0t5E2hJ4tQcdf87MzNwqYfw8yfvyTNCM0tipZYGqfv+3jHYZb9b3dUX9FYc70KpmVUZlRawOAksvc6/Pq3u3b6bgp5pViw7AwcVpGzfuWl5bSe3DK4uq+rqa/ouDgLZ2ceN8w6ZQYNquoTMDi5+IfS+g4qJMsSYADp0+AJvWvianjjUN/1Sf7qlEhB3L4YwQk5HOSUSl7d+/fwOR+/bvHwbdC4UjO2GYEkxrkS8HjvVZdmYCFIr58ImcNCeOMUKnEnHfu+9fw7z3TwAceASA1W895ukKONvZ9NKmqgDNlsBRImpwATrJmTkJxI+q4+uL1J9xK6D5xJ4mrOhOUSj/HA6burDTjX675wKwzMTWUf9SEw/xGJyDBnK0Bjyn61eZOAs4PpQNSJlAlSByoXkQVIEwN4fmrgWgVjsoUNOuHycSziGFyPEa8DSQnvamryvqrzgLmH+dYGvkF2gih9z1Q7v/yzXtFDwMZ3lCictzODmdTPX1gWDl4CzgnPpMeU+NZIEy23Ldy+LS4UFKjxG4sbYUAJyDHxuK3ia6pUf5uqr+SblTlKcIry6Hir0sbgdtQzhipnGsNWnsWACGpfm6qv6JZwFTAtmBZQ2wH7xd2k2mI+yCt18qvt8ALHyLdc8AoI/lKwcPAl6Hr3cX5pLVnXAued2E/mwiBr7F2LChnFAVqtXwdR39Gg+TJFdgQeYi6AOZmcsY+Kh3paXCw5Ru4a++rtbtg8MdaOtrBhp7dOBL2jcF+OsZb6eiy6DJoIfMPOvrat0+OAh4FRLuYR9m7sqBgpX0ywII8nop4eVnF09+D/Q78PfDoQm9DFNGjUqBUoBEJFtfcvpZr4q7e/TZccDwM76u122Ds4A/5OSMkWdWfn2Twba9FMvyvCwwpCawrPkmX1fsdsFBQHVGrEUtYIi5xQRrTmlGYbnFHLZmH3mX4RGY/3be1zW7TXAQ8BIEQ8zC76tBYjzxtgHASXLKKyX78T5lcignhk6frJdgsa9rdpvgIGCw9FFtiB4QAhte5LOWoHZNt/FlOYUUPW9OeB+AzHam9iuqNF4P91wuli8JfTW3Ugmwn6a2WDul00Yx5w1g6hhSHym6uH20iWUv98+rY30onkmiRYwaObwdWN8ZNsYyelIQMDl12aRZYQ1Ld8E3MTd0Qjo3RoC7dYZfxy6Wkp8ASGlvTVw4YM8zjR+o6bGkFzpdGLNUWmxddbBsXxQPcKyZr+vo37gu0pvGwjsX5HDRQMWs264KF/c3S2FzCxxSvgaGlPl604F/43oHzh0S9kp/29D90q9FpVXr3O3FXHRmVocqTkl9lk2Y4MV2KJ2bx1XAXSGtb1nphddq+7qC/k6A7itN2+idfI2jC6hxdAE1ji6gxtEF1Di6gBpHF1Dj6AJqHF1AjaMLqHF0ATWOLqDGuWkBz3u3z1CnkrlpAWc3GJrlhVnhSV/X0M/xKOCn860u637pkOmav5o593/v9sizz+62RYY1Xe3rKvo37tcDP/tzi9cXthhTS459vJeEF50sjjyIvO3JlZNNaRuuhAsSYGalvl6978HgGz2ktMqNHvE/jP27EVerKL/F2sFh6dU5OkpJN0Fc/l2Oxy2H6MG2aL7dynsNoJoSvhu4kQX+nDnpR42tu3ZU4z8v/OHX0NaDmrpaLvkFgNwvLgYDnJ1/MNPSMnpIqJtCT0yJ6W2NbJv5Q66x9XsenW5oDrv9MUPAYDAYDAag60iMavoI+MJpK81VCbbZotON522RC/bmEl1vYIfOVOWkel+R47Og+7xXYbaLpXWf8WvyCcCIJVPCMKS6WJ56FaapkZJeymFzfb0Z6VZhL2DhyMnxyXGQnJycvHcMRiEOjDsnhBihaFlSajVdAu1tB26GNkXW2M0LuByQG9+hQggh5sBU+csWOJuOVgU8IIQQK2GvEOJKWwznHe1ODwQ7AQcRPXv1OwDHfP3L3yJcthWOVW7KsRiFSILRQqg34wqkMAWAsDD72EBrCRcgbpoKNyDgCVh1XZQsAkgXQmRBRIkQQrSHLEfTi4QnJSUlJSV9K4QQFkm5EffBHEfDuKnrjTYBU/igRAhxXIIZvv7lbxHl+2G9Dls/tr732Sv3bDMDAEuy6Ozkr9fBnc/+m3q15SsyWkFQ/7pdYHsUfAIDgwAGbGW2o7/RLxjfxRb7yYzs0fQh2OtYZjwkrrDG5nadAND0wxGcqORH0+9F+QIWwyd2PvDGKJ+FQ5AW1IMXWr3u/t3PcX3VUKi5zOtzWTq5FQCd2+4iAywrQe7NtIfPp9rvTC2eavVEg+zmeQfI78fd4VJsiC14zyT5s7l710VapPyBfBG4dABL4FMT0+sBpyc26Os6IeM0MLnmlF1w1cOXZV9Rt4E/DsAOMzQC4E4j5hT1hADiTTSq1y1B/aYmsD0BIBmewt7QiXlKZ/lniMU/cC/gMcUrRQHUc8oqCcvImUB0P+TBQrrre4MCzp1UMTt7KFl0R4iHoX3DC+pYJBRaQQqozoFaQgqQ88eaIwHER4ApoVvbQ3J2gyjo9gWcHcVzsdgZeqBwPrOb4ic4PxTHgjguvVI2FqMQ45GEECMx2BlABBwWQgjRDvJcH6tObxJGOOYaIbyiB3NP2CxEb+imJLwGcUKISUCuEOKCtf0bJ+enAgzbF0bMb0LYGQohhBhk1wsVQghxOY6vfN33uGXYPwMz+t9dJygd+qaYl7W8BnBRaUEdG6QMlsivDlZ3ewdfg+k91cg93AfsOWgd9Btzub+ii+o7Iv4C50FSEmpBDnCv4jDIcEqYtiUmApMe6QzweHw3mDWLWYPk+txbjmchy4bBJha19pd3puwFjIjeHFKvAAw9oe4xgPPcBwjMdlaSmX595GA1T6U+Zm14uz0wGnKeMddVXztbNLXaGMpnUxbTqsBp1Vce1IAsoPu571+Xu8EB9Xr0ODE2EXqfNADEJXYFaKZUx2bowsbBucC2B75t5+uf/hbhfEuq48DnMQrRhhHyTMw1a75FwnBVCXeGfCFE0XPpQghRsvvgqezs7OzsxTuyHTgVCaR53SiUhNNPyI3t20rSByC5sfwQmCcHlafhTDdWjk1oRuI/4iTAeMnXjd+tweMw4iJAhtoJvWy9nseZMdq95SlADNy090ADuDY4o5wLpcP5mnjH/OPRcwGa5Fp7sIVwrxvL8Zmr2A/A2jjG798Eb5UNr6D0Vq1eILtTBrnxA37P+6TS8ChgPvCbWfUXelEVcOnHAB9+XlsCMuApiaIDmGL3VCckeUN4o2pgOfIQQMej4Vvtv8hb/dKHhv07GOA+658AUQBuB5zjV5EGkBLHmA/LZoyCES07VPwVDfc8tZeDvv7pbw3lCFiNXdB+6BvNoI3iu46dfQ0mYNShGs3rwMWj9JAHzlVKgQZyT2VPbO8pRgimrnLU2Rv504gznQyb64IsoOr3pAD3PZ9mBtM1oPgNwqYQOLJlRxj+oxdr1LXej+WYr3/6W4Rzm6o+AyXmiW60McA3OzZYlMx9kvGEgUjVVnkGOjFafuJF0kaOb5YnnL2jIEI6pAQX2YYg7WGFW/NIesqjCHkqNhnIdrZxGUYIIfLgVV8+uW4d7i/X/DWDtl8dVBDPyBBinnwyVlkB/f6pxt81qfCS+BI6t7BFT79I7EVb1PL1f0o9H1scl/GfCCX8F8iQdwWI73CYOrNxgkjgJ5Cd63dsJ3dXKyTYU4Gaw52A05+s8+5jD9dkCcZOIdQPAkjcAqnRXdIaVFjiD7kYlocCpIaGhoaGNjKTO9CWPaBTx7c9Hlvad/NWeR6Nvrsbd0fpopwyE93Inf1JMzHyXwYpjW1kRbO7Csf8RkCn6lrSv4eREQldgiD7LUYHKS6X2RDdgSQPeygcmQEfyevi0ho1zW45PxG+9PhPZsNXbZQdHVo+WzqbEatZ8xjAbhgHULoh/aXWwLWchvJ5vcf7rWXZdsm9z0sQaWcIjnOzokQZus5hSsVNiTawa04vJfaRgDbJsmeQzkiXRRS9hBBCtFiuWknlPwN/Al4tEXbPQEd6whBP7fk4iIqKioqKipAYLISIg6NCiHwDMaVCCLEO+E2IqxLS7GIhxEyiioUQoiQKUoUQ4pwkF64YyjwPE5VgW6I3CyHECmIswj+wE1Bew4vZqUQXQYpQBcwnQTWTbLObNgFPWEvpCV3pZPYo4LX4pGIP5/Kx/YW1XwhR3BPjVvO2joTLXzMO2KmcaIsVK59noPL1ZwywylzyXQTRRXaGQghRthOIkNfpSySgzYI5cXxwVfgJ9nfgPyF6uxpZK09rKAL+m8XWI2ihBq0CxpOiJO2EdWWDiTzkSUDPHLXXT77LLRPDAcYpsyY/SkRZlBkYoJ1tA0z+eACkOcUOhratF8YlQgixSgKI6Hfixs7sfxl7AS1j5lkblmmwRAghougkhBBP01n1uIRtt5Mq4AGQ5D0m5wxMFMLSG3rhKOD1m2yzzqcdt92xl4/Ln5dSk3dmO7qAKj6xfXt2qbOhM9dO7rMZ+QXu94XmDV1tiP8zwDObWVi/cP0qSJL3MIhACCs2VAM4YiaipvxJWEYtsDy9rdvqALC8MwOQutauGRRYcr0gPy/vZ/PR5r5+3Psl7gQUif3ME0bKSzkTVaev7TfKHT9zKKxb0LSx80pEQK87KBn4Re/58pTZzndTHbK7z7jH11X1T9wImD4idcg7f1AixbO25V0OqmV8vpeyM+ZsA/Dgxd780u4lXa2xjNSjp07nKAtRhsw7fV1TP8VVQPMj/fqX849xpxvxwQS3OaWP3rvIZc2g7EpxcUlJcZ166FQKN+wrrfAfL3t6mG1pr3sm/N3Rnd1pHP0NXY2jC6hxdAE1ji6gxtEF1Di6gBpHF1Dj6AJqHF1AjaMLqHF0ATWOLqDG0QXUOLqAGkcXUOPoAmqc/wL9tY4FZyAg1gAAABh0RVh0ZXhpZjpFeGlmSW1hZ2VMZW5ndGgAMTA28w7RNAAAABd0RVh0ZXhpZjpFeGlmSW1hZ2VXaWR0aAA0NDjrjn7OAAAAEnRFWHRleGlmOkV4aWZPZmZzZXQANzjJ1HsnAAAAXHRFWHRleGlmOlVzZXJDb21tZW50ADY1LCA4MywgNjcsIDczLCA3MywgMCwgMCwgMCwgODMsIDk5LCAxMTQsIDEwMSwgMTAxLCAxMTAsIDExNSwgMTA0LCAxMTEsIDExNkC4H3IAAAAodEVYdGljYzpjb3B5cmlnaHQAQ29weXJpZ2h0IEFwcGxlIEluYy4sIDIwMjLktL+cAAAAF3RFWHRpY2M6ZGVzY3JpcHRpb24ARGlzcGxheRcblbgAAAAASUVORK5CYII="},1875:function(t,s,a){t.exports=a.p+"assets/img/65cef93b68f3ccce274b0eb038846014.a5dfbda6.png"},1876:function(t,s,a){t.exports=a.p+"assets/img/53dccf1910c10347c66cc87c164f22be.2e0df8d2.png"},1877:function(t,s,a){t.exports=a.p+"assets/img/8a437032528b14a1b8c61b09f6643f34.a1a7ab66.png"},1878:function(t,s,a){t.exports=a.p+"assets/img/2e81e1a743900ac58d11e04e5e08d6c4.920e00ce.png"},1879:function(t,s,a){t.exports=a.p+"assets/img/5dd7a62ebd234966eb76652f9bf7b35d.c2538979.png"},1880:function(t,s,a){t.exports=a.p+"assets/img/8fa8562498b6e0d04ce497008323881d.669bb8ed.png"},1881:function(t,s,a){t.exports=a.p+"assets/img/f52bd40696141e04fa4dc1273861386a.7e645d4e.png"},2813:function(t,s,a){"use strict";a.r(s);var n=a(46),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[t._v('提到react fiber,大部分人都知道这是一个react新特性，看过一些网上的文章，大概能说出"纤程"一种新的数据结构"更新时调度机制"等关键词')]),t._v(" "),n("p",[t._v("但是如果被问：")]),t._v(" "),n("ol",[n("li",[n("span",{staticStyle:{color:"red"}},[t._v("有react fiber,为什么不需要vue fiber")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"red"}},[t._v("之前递归遍历虚拟dom树被打断就的从头开始，为什么有了react Fiber就能断点恢复呢")])])]),t._v(" "),n("p",[t._v("本文将从两个框架的响应式设计为切入口讲清这两个问题，不涉及晦涩源码，不管有没有使用过react，阅读都不会有太大的阻力")]),t._v(" "),n("h2",{attrs:{id:"什么是响应式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#什么是响应式"}},[t._v("#")]),t._v(" 什么是响应式")]),t._v(" "),n("p",[t._v('无论你常用的是react，还是vue，"响应式更新"这个词肯定都不陌生。')]),t._v(" "),n("p",[t._v('响应式，直观来说就是视图自动更新。如果一开始接触前端就直接上手框架，会觉得这是理所当然，但在"响应式框架"出世之前，实现这一切是很麻烦的')]),t._v(" "),n("p",[t._v("下面做一个时间显示器，用原生js、react、vue分别实现")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1874),alt:"时间显示器"}})]),t._v(" "),n("h3",{attrs:{id:"原生js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#原生js"}},[t._v("#")]),t._v(" 原生js")]),t._v(" "),n("p",[t._v("想让屏幕上内容辩护，必须先找到dom(document.getElementById),然后在修改dom(clockDom.innerText).")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("root"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("greet"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("clock"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" clockDom "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'clock'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" greetDom "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'greet'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        clockDom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerText "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("现在是:")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("Util"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        greet"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerText "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Util"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("有了响应式框架，一切就很简单了")]),t._v(" "),n("h3",{attrs:{id:"react"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#react"}},[t._v("#")]),t._v(" react")]),t._v(" "),n("p",[t._v("对内容做修改，只需要调用setState去修改数据，之后页面便会重新渲染。")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("root"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text/babel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Clock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setTime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("greet"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setGreet"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTime")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Util"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setGreet")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Util"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("greet"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("现在是："),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        ReactDOM"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Clock "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("h3",{attrs:{id:"vue"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue"}},[t._v("#")]),t._v(" vue")]),t._v(" "),n("p",[t._v("我们一样不用关注dom，在修改数据时,直接this.state=xxx修改，页面就会展示最新的数据。")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("root"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{greet}}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("现在是：{{time}}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Clock "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createApp")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    time"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    greet"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mounted")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("time "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Util"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("greet "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Util"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getGreet")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        Clock"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#root'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    ")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("h2",{attrs:{id:"react、vue的响应式原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#react、vue的响应式原理"}},[t._v("#")]),t._v(" react、vue的响应式原理")]),t._v(" "),n("p",[t._v("上文提到修改数据时，react需要调用setState方法，而vue直接修改变量就行。看起来只是两个框架的用法不同罢了，但是响应式原来正在于此。")]),t._v(" "),n("p",[t._v("从底层实现来看修改数据:"),n("span",{staticStyle:{color:"red"}},[n("strong",[t._v("在React中，组件的状态是不能被修改的，setState没有修改原来那块内存中的变量，而是去新开辟一块内存；而vue则是直接修改保存状态的那块原始内存")])])]),t._v(" "),n("p",[t._v('所以经常能看到react相关的文章里经常会出现一个词"immutable"，翻译过来就是不可变的。')]),t._v(" "),n("p",[n("span",{staticStyle:{color:"blue"}},[t._v("数据修改了，接下来要解决视图的更新："),n("strong",[t._v("react中，调用setState方法后，会自顶向下重新渲染组件，自顶向下的含义是，该组件以及它的子组件全部需要渲染；而vue使用Object.defineProperty(vue@3迁移到Proxy)对数据的设置(setter)和获取(getter)做了劫持，也就是说，vue能准确知道视图模块中哪一块用到了这个数据，并且在这个数据修改时，告诉这个视图，你需要重新渲染了")])])]),t._v(" "),n("p",[n("span",{staticStyle:{color:"red"}},[n("strong",[t._v("所以当一个数据改变，react的组件渲染是很消耗性能的--父组件的状态更新了，所有的子组件得跟着一起渲染，它不能像vue一样，精确到当前组件的粒度")])])]),t._v(" "),n("p",[t._v("为了佐证，我分别用react和vue写了一个demo，功能很简单：父组件嵌套子组件，点击父组件的按钮会修改父组件的状态，点击子组件的按钮会修改子组件的状态。")]),t._v(" "),n("p",[t._v("为了更好的对比，直观展示渲染阶段，没用使用更流行的react函数式组件，vue也用的是不常见的render方法：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Father")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    state "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        fatherState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Father-original state'")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("changeState")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-----change Father state-----'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("fatherState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Father-new state'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Father:render'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" \n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h2"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fatherState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h2"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("changeState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("change Father state"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("hr"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Child"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Child")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    state "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            childState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Child-original state'")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("changeState")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-----change Child state-----'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("childState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Child-new state'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'child:render'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" \n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h3"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("childState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h3"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("changeState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("change Child state"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nReactDOM"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Father"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[n("img",{attrs:{src:a(1875),alt:"react demo"}})]),t._v(" "),n("p",[t._v("上面是使用react时的效果，修改父组件的状态，父子组件都会重新渲染：点击change Father state，不仅打印了Father:render，还打印了child:render。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Father "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createApp")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            fatherState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Father-original state'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    methods"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("changeState")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-----change Father state-----'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fatherState "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Father-new state'")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Father:render'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'h2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fatherState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'button'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("changeState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'change Father state'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hr'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveComponent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'child'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nFather"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("component")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'child'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            childState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Child-original state'")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    methods"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("changeState")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-----change Child state-----'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("childState "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Child-new state'")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'child:render'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'h3'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("childState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'button'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("changeState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'change Child state'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n \n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nFather"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#root'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[n("img",{attrs:{src:a(1876),alt:"vue demo"}})]),t._v(" "),n("p",[t._v("上面使用vue时的效果，无论是修改哪个状态，组件都只重新渲染最小颗粒：点击change Father state，只打印Father:render，不会打印child:render。")]),t._v(" "),n("h3",{attrs:{id:"不同响应式原理的影响"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#不同响应式原理的影响"}},[t._v("#")]),t._v(" 不同响应式原理的影响")]),t._v(" "),n("p",[t._v('首先需要强调的是，上文提到的"渲染"、『render』、"更新"都不是指浏览器真正渲染出视图。而是框架在javascript层面,调用自身实现的render方法，生成一个普通的对象，这个对象保存了真实dom的属性，也就是常说的虚拟dom。本文会用组件渲染和页面渲染对两者区分')]),t._v(" "),n("p",[t._v("每次的视图更新流程是这样的")]),t._v(" "),n("ol",[n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("组件渲染生成一颗新的虚拟dom树")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("新旧虚拟dom树对比，找出变动的部分(也就是常说的diff算法)")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("为真正改变的部分创建真实dom，把他们挂载到文档，实现页面重新渲染")])])]),t._v(" "),n("p",[t._v("由于react和vue的响应式实现原理不同，数据更新时，第一步中react组件会渲染出一棵更大的虚拟dom树。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1877),alt:"虚拟dom"}})]),t._v(" "),n("h2",{attrs:{id:"fiber是什么"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fiber是什么"}},[t._v("#")]),t._v(" Fiber是什么")]),t._v(" "),n("p",[t._v("上面说的这么多，都是为了方便将清楚为什么需要react fiber："),n("span",{staticStyle:{color:"red"}},[t._v("在数据更新时，react生成一颗更大的虚拟dom树，给第二步的diff带来了很大压力---我们想要找到真正变化的部分，这需要花费更长的时间。"),n("strong",[t._v("js占据主线程去做比较，渲染线程便无法做其他工作，用户的交互得不到响应，所以便出现了react fiber")])])]),t._v(" "),n("p",[t._v('react fiber没法让比较的时间缩短，但它使得diff的过程被分成一小段一小段的，因为它有了"保存工作进度"的能力，js会比较一部分虚拟dom，然后让渡主线程，给浏览器去做其他工作，然后继续比较，以此往复，等到最后比较完成，一次性更新到视图上')]),t._v(" "),n("h3",{attrs:{id:"fiber是一种新的数据结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fiber是一种新的数据结构"}},[t._v("#")]),t._v(" fiber是一种新的数据结构")]),t._v(" "),n("p",[t._v("上文提到了，react fiber使得diff阶段有了被保存工作进度的能力，这部分会讲清楚为什么。")]),t._v(" "),n("p",[t._v("我们要找到前后状态变化的部分，必须把所有节点遍历。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1878),alt:"fiber diff"}})]),t._v(" "),n("p",[t._v("在老的架构中，节点以树的形式被组织起来:每个节点上有多个指针指向子节点。要找到两棵树的变化部分，最容易想到的办法就是深度优先遍历，规则如下")]),t._v(" "),n("ol",[n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("从根节点开始，依次遍历改节点的所有子节点")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("当一个节点的所有子节点遍历完成，才认为该节点遍历完成")])])]),t._v(" "),n("p",[t._v("如果你系统学习过数据结构，应该很快就能反应过来，这不过是深度优先遍历的后续遍历。根据这个规则，在图中标出了节点完成遍历的顺序。")]),t._v(" "),n("p",[n("span",{staticStyle:{color:"blue"}},[t._v("这种遍历有一个特点，必须一次性完成。假设遍历发生了中断，虽然可以保留当前进行中节点的索引，下次继续时，我们的确可以继续遍历该节点下面的所有子节点，但是没有办法找到其父节点--因为每个节点只有其子节点的指向。断点没有办法恢复，只能从头再来一遍。")])]),t._v(" "),n("p",[t._v("以该树为例")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1879),alt:"发生中断"}})]),t._v(" "),n("p",[t._v("在遍历到节点2时发生了中断，我们保存对节点2的索引，下次恢复时可以把它下面的3、4节点遍历到，但是却无法找回5、6、7、8节点。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1880),alt:"fiber新的架构"}})]),t._v(" "),n("p",[n("span",{staticStyle:{color:"blue"}},[n("strong",[t._v("在新的架构中，每个节点有三个指针: 分别指向第一个子节点、下一个兄弟节点、父节点。这种数据结构就是fiber")]),t._v("，他的遍历规则如下")])]),t._v(" "),n("ul",[n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("从根节点开始，依次遍历该节点的子节点、兄弟节点，如果两者都遍历了，则回到它的父节点；")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("当一个节点的所有子节点遍历完成，才认为该节点遍历完成；")])])]),t._v(" "),n("p",[n("span",{staticStyle:{color:"red"}},[t._v("根据这个规则，同样在图中标出了节点遍历完成的顺序。跟树结构对比会发现，虽然数据结构不同，但是节点的遍历开始和完成顺序一模一样。不同的是，当遍历发生中断时，只要保留下当前节点的索引，断点是可以恢复的——"),n("strong",[t._v("因为每个节点都保持着对其父节点的索引")]),t._v("。")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(1881),alt:"fiber发生中断"}})]),t._v(" "),n("p",[t._v("同样在遍历到节点2时中断，fiber结构使得剩下的所有节点依旧能全部被走到。")]),t._v(" "),n("p",[t._v("这就是react fiber的渲染可以被中断的原因，树和fiber虽然看起来很像，但本质上来说，"),n("strong",[t._v("一个是树，一个是链表")])]),t._v(" "),n("h3",{attrs:{id:"fiber是纤程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fiber是纤程"}},[t._v("#")]),t._v(" fiber是纤程")]),t._v(" "),n("p",[t._v("这种数据结构之所以被叫做fiber，因为fiber的翻译是纤程，它被认为是协程的一种实现形式。协程是比线程更小的调度单位：它的开启、暂停可以被程序员所控制。具体来说，"),n("span",{staticStyle:{color:"red"}},[t._v("react fiber是通过requestIdleCallback这个api去控制的组件渲染的“进度条”。")])]),t._v(" "),n("p",[n("span",{staticStyle:{color:"blue"}},[t._v("requesetIdleCallback是一个属于宏任务的回调，就像setTimeout一样。不同的是，setTimeout的执行时机由我们传入的回调时间去控制，requesetIdleCallback是受屏幕的刷新率去控制。")]),t._v("本文不对这部分做深入探讨，只需要知道它每隔16ms会被调用一次，它的回调函数可以获取本次可以执行的时间，每一个16ms除了requesetIdleCallback的回调之外，还有其他工作，所以能使用的时间是不确定的，但只要时间到了，就会停下节点的遍历。")]),t._v(" "),n("p",[t._v("使用方法如下")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("workLoop")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("deadLine")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" shouldYield "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否该让出线程")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("shouldYield"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'working'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 遍历节点等工作")]),t._v("\n        shouldYield "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" deadLine"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeRemaining")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestIdleCallback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("workLoop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestIdleCallback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("workLoop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("requestIdleCallback的回调函数可以通过传入的参数deadLine.timeRemaining()检查当下还有多少时间供自己使用。上面的demo也是react fiber工作的伪代码。")]),t._v(" "),n("p",[t._v("但由于兼容性不好，加上该回调函数被调用的频率太低，react实际使用的是一个polyfill(自己实现的api)，而不是requestIdleCallback。")]),t._v(" "),n("p",[t._v("现在，可以总结一下了："),n("span",{staticStyle:{color:"red"}},[t._v("React Fiber是React 16提出的一种更新机制，使用链表取代了树，将虚拟dom连接，使得组件更新的流程可以被中断恢复；它把组件渲染的工作分片，到时会主动让出渲染主线程。")])]),t._v(" "),n("h2",{attrs:{id:"react-fiber带来的变化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#react-fiber带来的变化"}},[t._v("#")]),t._v(" react fiber带来的变化")]),t._v(" "),n("h2",{attrs:{id:"react不如vue"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#react不如vue"}},[t._v("#")]),t._v(" react不如vue?")]),t._v(" "),n("p",[t._v('我们现在已经知道了react fiber是弥补更新时"无脑"刷新，不够精确带来的缺陷。这是不是能说明react性能更差呢？')]),t._v(" "),n("p",[t._v("并不是。孰优孰劣是一个很争议的话题，再次不做评论。"),n("span",{staticStyle:{color:"red"}},[n("strong",[t._v('因为vue实现精准更新也是有代价的，一方面是需要给每一个组件配置一个"监视器"，管理者视图的依赖收集和数据更新时的发布通知，这对性能同样是有消耗的；另一方面vue能实现依赖收集得益于它的模块语法，实现静态编译，这是使用更灵活的JSX语法的react做不到的')])])]),t._v(" "),n("p",[n("strong",[t._v("在react fiber出现之前，react也提供了PureComponent、shouldComponentUpdate、useMemo,useCallback等方法给我们，来声明哪些是不需要连带更新子组件。")])]),t._v(" "),n("h2",{attrs:{id:"总语"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#总语"}},[t._v("#")]),t._v(" 总语")]),t._v(" "),n("p",[t._v("回到开头的几个问题，答案不难在文中找到")]),t._v(" "),n("ol",[n("li",[n("span",{staticStyle:{color:"red"}},[t._v("react因为先天不足--无法精准更新，所以需要react fiber把组件渲染工作切片；而vue基于数据劫持，更新粒度更小，没有这个压力")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"red"}},[t._v("react fiber这种数据结构使得节点可以回溯到其父节点，只要保留中断的节点索引，就可以恢复之前的工作进度")])])]),t._v(" "),n("h2",{attrs:{id:"资料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#资料"}},[t._v("#")]),t._v(" 资料")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://blog.csdn.net/frontend_frank/article/details/123700502",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文"),n("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);