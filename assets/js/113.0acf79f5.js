(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{1004:function(t,a,s){t.exports=s.p+"assets/img/303907a791f847f7929f78ffc5bf7e6a_tplv-k3u1fbpfcp-watermark.3005e395.jpg"},1005:function(t,a,s){t.exports=s.p+"assets/img/79b4ce72af624d77a5918a8482193101_tplv-k3u1fbpfcp-watermark.fab49af4.jpg"},1006:function(t,a,s){t.exports=s.p+"assets/img/e58900866bf64abd960921cad24f4ac6_tplv-k3u1fbpfcp-watermark.b4d96f26.jpg"},1007:function(t,a,s){t.exports=s.p+"assets/img/51aad9cf25e642de9f782e4ff4975422_tplv-k3u1fbpfcp-watermark.d34b70ef.jpg"},1008:function(t,a){t.exports="data:image/jpeg;base64,UklGRtwIAABXRUJQVlA4INAIAABwRACdASopA5kAPpFGnUwlo6MiIVTZeLASCWlu/Gf5j5ADV8677Z5glk6hgSmEB+Tf9v6HPUj8wH6c/rT7//oM/+np/6Wn7Nf7g+k5qyy/P9J4K9+b3dJjOK+saJv+deCvv7/oPUC9Q7xWAD8z/kH+p+4DnH41f+V4MP1D/K9LL/Uf+v/T/kz7X/qn9mfgO/nH9z6xHoZfsKJeopW8fIWlbx8haVvHyFpW8fIWlbx8haVvHyFpW8fIWlbx8haVvHyFpW8fIWlbx8haVvHyFpW8fIWlbx8haVvHyFpW8fIWlbx8hIlwm6ucJVjBUzKOXY5KXeHV7LQzbLMu9yY+QtK3j5C0rePkLSt4+QtK3j48OzH6IvhGbByyVgKsy6DJUHYAIiXtREScUAP34qo5jEKXM8fJinwjvOetEXnRGug0I5YJC86I10GhHLBIXnRGugz7FMSIuN1cIXYSuUga6CFuAcs/+NRdfGbVRmNP3nPWiLzojXQaEcsEhedEa6DQjlgkLzojXQaEcDOVftWhcuUQdrPkLSt4+QtK3j5C0rePkLSt4+QtK3j5C0rePkLSt4+QtK3j5C0rePkLSt47AN9dJ1y/02CSRyyT9lpW8fIWlbx8haVvHyFpW8fIWlbRP9I3hpBhZ0A2hts7ERhg3zR1UMLfr4yKCA+IndZ/HU4NLq7px3T1hCE2j/SVjHIMJOzzttgb4XJj5C0rePkLSt4+QtK3j5C0icrSt44gAP7/m6AAAAADt+l+pl0LeKqws1kdvIfJvlWpw2Wwwwdfhw7xxRjXHWFnKsvP807eZqasuJzCFp4x3+sDV9D+eDdyP5Ckj+/bcR/PBL5yIkzaeeoDlBl8Uhz47ew1J+iBSCorg3Wxlin9BPDR/kSYrVfa8cJXbjIOSKV2b819SqBftrt8g3h2+KTzJyHYaO/PF1/eSdp/OPVtc71yyBTE3susMjre7W9L295i40xvXXp7nISH//DI7LPA9bCf/+xOnxC01o+cb/9gne8HkMpaSWd4D/FMRnGsczfhkbP2cENnqLQwyen4W9Kyk4yul/x4chPq+nboJnmDawLcMbVR1iqkStaQUQaydeIWmaBd/4rycnxKUjWmslTVMBtpZX1or/D8OV8cHm7NbSE+RFWDckZZzvo5c4bOKiXS+l14LRW7qNk8N9G+owq2n+0Ze+NY1mSehGYuPj62PRDReDzQDII+uahcd7hDB901Wq5OGCTG245cR1gJJPfQV15dXXEEl74Nce7o9HkW6eA/r2Wl3RNGya37BSspb+ZN/mxD7KEktlqizr24Zt3mgZRPvOGQrU/1bVx/3LkgS9eG38/+8ViBG4n5wZs2O3Z2PaENoHXrQK3635SvJYtn+4GBej/M7AREKTGLnKqFzRcaijzOLMytKj7hZ0t635/BgzSws5KdWH/WhUm02l6sAjzOGPmfwpGbpl8zWD2xUPcSJUIX9fFfC2QAKrYQRpqtLgyHeHBbgt+1oRwFOmVlO4GBej/M5jaC6I3VTfrDyWkbRFAAK4iWcDrfkT7PoaijP/Ucl4aFOtGlHafoBb+W87F5sBf+VlYvLs03OiLarF4xT0wwIFE5Z/2uHNiPd8v0gw9bsz67IftsBoBWn26SLwo/l+1W6aPe16Dt390nNR7RI3ceYU10Ninphgcc+z6j1r7/ujKwqOWpl02X1TTbXjK4Gz3wpYCVpALNDz9aIP4GniPCf/54HNuA1/xM6jtiEl6kdEBatDZo6qtwnWnFXJD7RrU8hpJnDO8cIlux17pBml6R+anDkzQ4LXoiIDfF5Qnol8j98GHuBExAHIji1y51HjtREQiPfzRqMT+kw0886BY+6V8BqDL/LQPEe2/+ZaGH5WBUCwPNOU/Us2vmjUYnxkrf01/KJdILOwfvO5nZr+WeSq/HPdNVlFHEQyUrfdyS2vmcKHEw4TxSilSSj30GEIj7GYEiVE0P9RCsVztVpwjwbnYTweaAaZ+pibXDmlqn45Jn1gT4HcRAuSZwCOioydJAHBzSMegFj7l///7r/1H80Jf35ao2oQjecKf/iFzLUH4Nsj6uU81fFmNjmjJ/sbvQKXfOOjstH3wAAABI8dXuZFLNYYPblcr6RWp2CieA0bpF+TmPwQfeAyUmdDC6SWS1xiyUFQs/aSNMe2UvaVXl34q8ub46UR52NDWOzvHgZen7wxdV+5BTVTd97siYA+bTU7UX5vPOvk3AKp3QQ2JoMePR54AX5gFC7+DIO3daYNOQ8uElK5eM2JJizaVxY8GZvjugAcavh2ZbB4BaIBRIQoJ46upbYxoUGKvmNsc4sC8DgkuJQvRRP8mG7LvA7V7s5PAErD7PQ+vjvlAZBUQeD7BHkV4fcLjCjikPLYDjfx+HGrjHQoup4mG07zpifFE5cQ+LBd39DptsuXqKvpw1vYxEfPgV69oRYHWPuR+V5rK5qKVJi6zv7TL3rrHaj3sWi+s1V5BCwCYrhdBSKsVls6RZgUSjTMsoBBBpzLbplL8Aoz8eyctG5oiu4zsy0lsAmyMm7Qe0aWQk6H6dswHvSH6Glnz4p1aIUfQBsEbAJm4Zf76/hGmHebdLqQg0fbG0O9QY6xRT0L1x4RFPiVUTMCUZQGxRWD5mxQl4w/3FEHF2D7O9CRWGB1lnHT7eL+/mFoAtqQdvEo4s5cD0YX3f8eaH81lb4t4rHQwVD0k8Qm1EJwgwu6yuFyGMN5qtofzvEF6J7d6IwW72AYj1KRRg1/ofH5fEtf7CJuHnTTN1Zn9Tx19eTX4ZVaY1dagi4KhOb6q/4PqFrjF2TtSwDS+0zWq6e4g28yxw5ZKMPvumfBl0M5tucSHP/4Ii1DiT6BCOyNThy7CRTS1yFANqDm/YXzt+weYwQwFR9h0s0bVjoHhZ8rUQKwbAfzlEs63nrjYt49z90cUqIpAZkQWXIV2+fS0P8FHdpke900+mbq5DlRKyoLTAeLYDlHV9O3+2y7Dn1rn2GlbN9XofXXosFaCQOhkCgAA="},2399:function(t,a,s){"use strict";s.r(a);var n=s(46),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"浏览器渲染页面流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#浏览器渲染页面流程"}},[t._v("#")]),t._v(" 浏览器渲染页面流程")]),t._v(" "),n("p",[t._v("开篇先盗图，一下是李兵老师在讲解<浏览器工作原理与实践>时提供的一张图")]),t._v(" "),n("p",[n("img",{attrs:{src:s(1004),alt:"浏览器渲染"}})]),t._v(" "),n("div",{staticClass:"custom-block danger"},[n("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),n("p",[t._v("主线程 = GUI 渲染线程/ JS 引擎线程 因为二者互斥不会同时运行且都会阻塞UI 也有叫UI线程的")]),t._v(" "),n("p",[t._v("工作线程= 事件触发线程 + 定时触发器线程 + 异步 HTTP 请求线程 + web works 等用户执行耗时任务的线程")]),t._v(" "),n("p",[t._v("合成线程：用于合成帧的线程/一些动画属性变化也可以单独在这个线程运行 不需要经过主线程 提高渲染性能")]),t._v(" "),n("p",[t._v("raster 线程：和合成线程共同作用 用于同层分块的 提高渲染性能")])]),t._v(" "),n("p",[t._v("从上图可知，浏览器下载html后，大致流程")]),t._v(" "),n("ol",[n("li",[t._v("DOM解析")]),t._v(" "),n("li",[t._v("样式解析\n"),n("ul",[n("li",[t._v("style标签会先解析")]),t._v(" "),n("li",[t._v("link标签会先下载，在解析")]),t._v(" "),n("li",[t._v("以上两种情况都会阻塞DOM解析？---应该是不会阻塞dom树的解析，阻塞dom渲染")])])]),t._v(" "),n("li",[t._v("script下载、执行\n"),n("ul",[n("li",[t._v("遇到内嵌script代码，会执行该代码，执行之前会等待2步骤完成，因为js可能需要操作样式")]),t._v(" "),n("li",[t._v("遇到外链script标签，会下载并执行js代码")]),t._v(" "),n("li",[t._v("以上两种情况都会阻塞DOM解析")])])])]),t._v(" "),n("blockquote",[n("p",[t._v("从以上情况可知，平时把script放在body标签最后的原因:提升首屏渲染速度、避免js获取不到DOM元素等")])]),t._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[n("p",[t._v("生成布局树")]),t._v(" "),n("p",[n("img",{attrs:{src:s(1005),alt:"布局树"}})]),t._v(" "),n("p",[t._v("每个dom节点都对应这一个布局树的节点，从上图的对应关系看，并不是所有的dom节点都对应图层树一个layer，如果没有对应的layer，该节点隶属于它的父元素的layer。那么，如何才能生成一个layer呢？以下两种情况会产生一个layer")]),t._v(" "),n("ul",[n("li",[t._v("拥有层叠上下文的元素\nposition:fixed,asbsolute等脱离文档流的属性；opacity透明度，filter过滤等")]),t._v(" "),n("li",[t._v("需要剪裁(clip)的地方也会被创建为图层，比如出现滚动条")])])]),t._v(" "),n("li",[n("p",[t._v("生成图层树\n"),n("span",{staticStyle:{color:"red"}},[t._v("生成图层树后，就开始绘制了，"),n("strong",[t._v("也就是图1中paint步骤,其实paint并不是真正的绘制，而是生成一个绘制列表，然后将绘制列表交给合成线程，之后由GPU生成位图，最后由浏览器进程渲染到页面")]),t._v("上。也就是说paint之后，主线程就空闲了，如果之后没有任务了。这关系到GPU加速，下面再讲")])])])]),t._v(" "),n("h2",{attrs:{id:"什么是重排-回流"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#什么是重排-回流"}},[t._v("#")]),t._v(" 什么是重排(回流)")]),t._v(" "),n("p",[n("img",{attrs:{src:s(1006),alt:"重排"}})]),t._v(" "),n("p",[t._v("上面是一个浏览器渲染页面的完整流程，但是不是每个流程都是必须执行的，那么重排是什么意思呢？当改变元素宽度、高度等影响布局的属性时，就会触发layout和layer两个流程，这就是所谓的重排或者回流。")]),t._v(" "),n("p",[t._v("重排会占用主线程，因为主线程是单线程，所以影响性能。比如动画，动画是一帧一帧渲染的，假设每一帧都涉及到了重排，并且每一帧之间有一个复杂的js代码执行，就会导致每一帧渲染时间延长，当渲染时间超过16ms时,也就是低于60hz，就会造成视觉上卡顿")]),t._v(" "),n("h2",{attrs:{id:"什么是重绘"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#什么是重绘"}},[t._v("#")]),t._v(" 什么是重绘")]),t._v(" "),n("p",[n("img",{attrs:{src:s(1007),alt:"重绘"}})]),t._v(" "),n("p",[t._v("了解了重排，同理可知，没有layout和layer，直接paint，就是重绘。比如修改background-color,color等不影响布局的操作。没有重排，将大大提升性能")]),t._v(" "),n("p",[t._v("注意：重排一定会造成重绘")]),t._v(" "),n("h3",{attrs:{id:"如何减少重排和重绘"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#如何减少重排和重绘"}},[t._v("#")]),t._v(" 如何减少重排和重绘")]),t._v(" "),n("ul",[n("li",[t._v("使用createElementFragment操作dom，最后一期推入文档")]),t._v(" "),n("li",[t._v("使用class去修改样式")]),t._v(" "),n("li",[t._v("避免使用table布局")]),t._v(" "),n("li",[t._v("dom读写分离")])]),t._v(" "),n("h2",{attrs:{id:"gpu加速"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gpu加速"}},[t._v("#")]),t._v(" GPU加速")]),t._v(" "),n("p",[t._v("了解了重排和重绘，那么GPU加速又是什么呢？其实就是GPU为该元素单独绘制一个复合层，当修改样式时不影响其他复合层。以下样式将开启GPU加速")]),t._v(" "),n("ul",[n("li",[n("span",{staticStyle:{color:"red"}},[t._v("transform动画")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"red"}},[t._v("opacity动画")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"red"}},[t._v("设置translateZ()、translate3D();")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"red"}},[t._v("设置will-change等")])])]),t._v(" "),n("p",[t._v("下面我们看下浏览器GPU加速具体是怎么表现的")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[t._v('html lang="en">\n'),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UTF-8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("viewport"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("width=device-width, initial-scale=1.0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Document"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token style"}},[n("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n    "),n("span",{pre:!0,attrs:{class:"token atrule"}},[n("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@keyframes")]),t._v(" move")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("transform")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("translateX")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("to")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("transform")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("translateX")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("200px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".move")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("animation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" move 3s linear"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  ")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("move"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token special-attr"}},[n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),n("span",{pre:!0,attrs:{class:"token value css language-css"}},[n("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-color")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" red"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("position")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" absolute"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("z-index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token special-attr"}},[n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),n("span",{pre:!0,attrs:{class:"token value css language-css"}},[n("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-color")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" blue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("position")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" absolute"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("z-index")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("left")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 40px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("我们用Chrome浏览器测试一下，打开开发者工具=>layers")]),t._v(" "),n("p",[n("strong",[t._v("首先，页面的布局不是2d的，它其实是一个3D的层叠，假设屏幕横向为X轴，纵向为Y轴，那么我们眼睛看的方向就是z轴。开启GPU加速的元素，GPU将会为它绘制一个复合层，如下")])]),t._v(" "),n("p",[n("img",{attrs:{src:s(1008),alt:"GPU复合层"}})]),t._v(" "),n("p",[t._v("在以上动画执行过程中，我们可以看到红色块是单独的复合层，复合层之间是独立的，重排、重绘都不会相互影响，这样就达到了性能优化的目的")]),t._v(" "),n("p",[t._v("另外我们可以发现在动画执行前和之后，红色块是没有单独的复合层的，这样页面会闪一下，原因是动画开始前红色块生成复合层时是经历过一次重绘，同样结束后也经历了一次重绘，那么如何避免呢")]),t._v(" "),n("p",[t._v("就是上面提到了transform(translateZ、translate3D)、will-change这几个属性，一开始就会给DOM生成一个复合层，这样就不会经理动画前后的重绘")]),t._v(" "),n("ul",[n("li",[t._v("css加载不会阻塞DOM树的解析")]),t._v(" "),n("li",[t._v("css加载会阻塞DOM树的渲染")]),t._v(" "),n("li",[t._v("css加载会阻塞后面js语句的执行、")])]),t._v(" "),n("h2",{attrs:{id:"资料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#资料"}},[t._v("#")]),t._v(" 资料")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.cn/post/6868906622774935565",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://blog.csdn.net/weixin_42301080/article/details/119368348",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSS什么情况引起回流,回流（重排）与重绘"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://www.jianshu.com/p/e1839e06ec8a",target:"_blank",rel:"noopener noreferrer"}},[t._v("怎么查看"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://www.pianshen.com/article/94631124156/",target:"_blank",rel:"noopener noreferrer"}},[t._v("优化"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://mp.weixin.qq.com/s/O0poI3y62W0vO8Z858lY4Q",target:"_blank",rel:"noopener noreferrer"}},[t._v("浏览器渲染之回流重绘"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://segmentfault.com/a/1190000014733203",target:"_blank",rel:"noopener noreferrer"}},[t._v("浏览器渲染简述"),n("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=e.exports}}]);