(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{2181:function(t,s,a){"use strict";a.r(s);var n=a(46),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"前言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),n("p",[t._v("进程和线程是一个程序员的必知概念，面试经常被问及，但是一些文章内容只是讲讲理论知识，可能一些小伙伴并没有整的理解，在实际开发中应用也比较少。本篇文章除了介绍概念，通过Node.js的角度讲解进程与线程，并且讲解一些项目中的实战的应用，让你不仅仅能迎战面试官还可以在实战中完美应用")]),t._v(" "),n("h3",{attrs:{id:"文章导览"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#文章导览"}},[t._v("#")]),t._v(" 文章导览")]),t._v(" "),n("p",[n("img",{attrs:{src:a(509),alt:"文章导览"}})]),t._v(" "),n("h3",{attrs:{id:"面试会问"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#面试会问"}},[t._v("#")]),t._v(" 面试会问")]),t._v(" "),n("ol",[n("li",[t._v("Node.js是单线程吗？")]),t._v(" "),n("li",[t._v("Node.js做耗时的计算时候，如何避免阻塞")]),t._v(" "),n("li",[t._v("Node.js如何实现多进程的开启和关闭")]),t._v(" "),n("li",[t._v("Node.js可以创建线程吗")]),t._v(" "),n("li",[t._v("开发过程中如何实现进程守护")]),t._v(" "),n("li",[t._v("处了使用第三方模块，自己是否封装过一个多进程架构")])]),t._v(" "),n("h2",{attrs:{id:"进程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#进程"}},[t._v("#")]),t._v(" 进程")]),t._v(" "),n("p",[t._v("进程Process是计算机程序中关于某数据集合上的一次运行活动，是系统进行资源分配的和调度的基本单位，是操作系统结构的基础，进程是线程的容器。"),n("span",{staticStyle:{color:"red"}},[t._v("进程是资源分配的最小单位")]),t._v("。我们启动一个服务、运行一个实例，就是开一个服务进程，例如Java里的JVM本身就是一个进程，"),n("strong",[n("span",{staticStyle:{color:"blue"}},[t._v("Node.js里通过node app.js开启一个服务进程，多进程就是进程的复制fork，fork出来的每一个进程都拥有自己的独立空间地址、数据线，一个进程无法访问另一个进程里定义的变量、数据结构，只有建立了IPC(InterProcess Communication)通信，进程之间才可数据共享。")])])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nserver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'程序员成长测试进程'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'进程id'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v('运行上面代码后，以下为Mac系统自带的监控工具"活动监视器"所展示的效果，可以看到我们刚开启的Nodejs进程7663')]),t._v(" "),n("p",[n("img",{attrs:{src:a(510),alt:"mac活动监视器"}})]),t._v(" "),n("h2",{attrs:{id:"线程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#线程"}},[t._v("#")]),t._v(" 线程")]),t._v(" "),n("p",[n("span",{staticStyle:{color:"red"}},[t._v("线程是操作系统能够进行运算调度的最小单位")]),t._v("，首先我们要清楚线程是隶属于进程的，被包含于进程中。"),n("strong",[n("span",{staticStyle:{color:"blue"}},[t._v("一个线程只能隶属于一个进程，但是一个进程是可以拥有多个线程的")])])]),t._v(" "),n("h3",{attrs:{id:"单线程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#单线程"}},[t._v("#")]),t._v(" 单线程")]),t._v(" "),n("p",[n("strong",[n("span",{staticStyle:{color:"red"}},[t._v("单线程就是一个进程只开一个线程")])])]),t._v(" "),n("p",[t._v("Javascript就是属于单线程，程序顺序执行(这里暂且不提JS异步)，可以想象一个队列，前面一个执行完之后，后面才可以执行，当你在使用单线程语言编码时切勿有过多耗时的同步操作，否则想成会造成阻塞，导致后续响应无法处理。你如果采用Javascript进行编码时，尽可能的利用Javascript异步操作的特性")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 经典计算耗时造成线程阻塞的例子")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("longComputation")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" sum "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1e10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        sum "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" sum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nserver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'request'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/compute'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'计算开始'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" sum "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("longComputation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'计算结束'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("Sum is ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("sum"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ok'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nserver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//打印结果")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//计算开始 2019-07-28T07:08:49.849Z")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//计算结束 2019-07-28T07:09:04.522Z")]),t._v("\n\n")])])]),n("p",[t._v("查看打印结果，当我们调用 127.0.0.1:3000/compute的时候，如果想要调用其他的路由地址比如127.0.0.1/大约需要15秒时间，也可以说一个用户请求完第一个 compute接口后需要等待15秒，这对于用户来说是极其不友好的。"),n("span",{staticStyle:{color:"red"}},[t._v("下文我会通过创建多进程的方式 child_process.fork 和 cluster 来解决解决这个问题。")])]),t._v(" "),n("p",[n("strong",[t._v("单线程的一些说明")])]),t._v(" "),n("ol",[n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("Node.js虽然是单线程，但是其基于事件驱动、异步非阻塞模式，可以应用于高并发场景，避免了线程创建、线程之间上下文切换所产生的资源开销")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("当你的项目中需要有大量计算,CPU耗时的操作的时候，要注意考虑开启多进程来完成了")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("Node.js开发过程中，错误会引起整个应用退出，应用的健壮性值得考验，尤其是错误的异常抛出，以及进程守护是必须要做的")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("单线程无法利用多核CPU，但是后来Node.js提供的API以及一些第三方工具相应都得到了解决，文章后面会讲到")])])]),t._v(" "),n("h2",{attrs:{id:"node-js中进程和线程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node-js中进程和线程"}},[t._v("#")]),t._v(" Node.js中进程和线程")]),t._v(" "),n("p",[n("strong",[n("span",{staticStyle:{color:"orange"}},[t._v("Node.js是Javascript在服务端的运行环境,构建在chrome的V8引擎之上，基于事件驱动、非阻塞I/O模型，充分利用操作系统提供的异步I/O进行多任务执行，适合于I/O密集型的应用场景，因为异步，程序无需阻塞等待结果返回，而是基于回调通知的机制，原本同步模式等待的时间，则可以用来处理其他任务")])])]),t._v(" "),n("div",{staticClass:"custom-block danger"},[n("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),n("p",[t._v("在web服务器方面，著名的Nginx也是采用此模式(事件驱动)，避免了多线程的线程创建、线程上下文切换开销，Nginx采用C语言进行编写，主要用来做高性能的Web服务器，不适用做业务")])]),t._v(" "),n("p",[t._v("Web业务开发中，如果你有高并发应用场景那么Node.js会是你不错的选择。")]),t._v(" "),n("p",[t._v("在单核CPU系统之后我们采用单进程+单线程的模式来开发。在多核CPU系统上，可以通过child_process, fork开启多个进程(Node.js在v0.8版本之后新增了Cluster来实现多进程架构)，"),n("strong",[n("span",{staticStyle:{color:"red"}},[t._v("即多进程+单线程模式。注意：开启多进程不是为了解决高"),n("RouterLink",{attrs:{to:"/front-end/JavaScript/network-xhr.html#fetch"}},[t._v("并发")]),t._v("，主要是解决了单进程模式下Nodejs CPU利用率不足的情况，充分利用多核CPU的性能")],1)])]),t._v(" "),n("h2",{attrs:{id:"node-js中的进程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node-js中的进程"}},[t._v("#")]),t._v(" Node.js中的进程")]),t._v(" "),n("h3",{attrs:{id:"process模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#process模块"}},[t._v("#")]),t._v(" process模块")]),t._v(" "),n("p",[t._v("Node.js中的进程Process是一个全局对象，无需require直接使用，给我们提供了当前进程中的相关信息。官方文档提供了详细说明，感兴趣的可以亲自实践下Process文档。")]),t._v(" "),n("ul",[n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("process.env:环境变量，例如通过process.env.NODE_ENV获取不同环境项目配置信息")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("process.nextTick：这个在谈及Event Loop时候经常用到")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("process.pid：获取当前的进程id")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("process.ppid：当前进程对应的父进程")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("process.cwd(): 获取当前进程工作目录")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("process.platform: 获取当前进程运行的操作系统平台")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("process.uptime(): 当前进程已运行时间，例如pm2守护进程的uptime值")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("进程事件: process.on('uncaughtException', cb),捕获异常信息、process.on('exit', cb)进程退出监听")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("三个标准流：process.stdout标准输出、process.stdin标准输入、process.stderr标准错误输出")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("process.title: 指定进程名称，有的时候需要给进程指定一个名称")])])]),t._v(" "),n("p",[t._v("以上仅列举了部分常用功能点，"),n("span",{staticStyle:{color:"red"}},[t._v("除了Process之外Node.js还提供了child_process模块用来对子进程进行操作，在下文Node.js进程创建会继续讲述")])]),t._v(" "),n("h3",{attrs:{id:"node-js进程创建"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node-js进程创建"}},[t._v("#")]),t._v(" Node.js进程创建")]),t._v(" "),n("p",[t._v("进程创建有多种方式，本篇文章以child_process模块和cluster模块进行讲解")]),t._v(" "),n("h4",{attrs:{id:"child-process模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#child-process模块"}},[t._v("#")]),t._v(" child_process模块")]),t._v(" "),n("p",[t._v("child_process是Node.js内置模块，"),n("a",{attrs:{href:"http://nodejs.cn/api/childprocess.html#childprocesschild_process",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网地址"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("几个常用函数：四种方式")]),t._v(" "),n("ul",[n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("child_process.spawn():适用于返回大量数据，例如图像处理，二进制数据处理。")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("child_process.exec():适用于小量数据，maxBuffer默认值为200*1024超出这个默认值将会导致程序崩溃，数据量大可采用spawn")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("child_process.execFile():类似child_process.exec()，区别是不能通过shell来执行，不支持I/O重定向和文件查找这样的行为")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("child_process.fork():衍生新的进程，进程之间是相互独立的，每个进程都有自己的V8实例、内存、系统资源是有限的，不建议衍生太多的子进程出来，通常根据cpu核心数设置。")])])]),t._v(" "),n("div",{staticClass:"custom-block danger"},[n("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),n("p",[t._v("CPU核心数这里说明下，fork确实可以开启多个进程，但是并不建议衍生出来太多的进程，cpu核心数的获取方式const cpus = require('os').cpus();这里cpus返回一个对象数组，包含所安装的每个CPU/内核的信息，二者总和的数组。假设主机装有两个cpu，每个cpu有4个核，那么总核数就是8")])]),t._v(" "),n("h4",{attrs:{id:"fork开启子进程demo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fork开启子进程demo"}},[t._v("#")]),t._v(" fork开启子进程demo")]),t._v(" "),n("p",[t._v("fork开启子进程解决文章起初的计算耗时时造成线程阻塞。在进程compute计算时创建子进程，子进程计算通过send方法将结果发送给主进程，主进程通过message监听到信息后处理并推出")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// fork_app.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fork "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'child_process'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fork"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/compute'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" compute "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fork")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./fork_compute.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        compute"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'开启一个新的子进程'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("；\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当一个子进程使用process.send()发送消息时会触发message事件")]),t._v("\n        compute"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("sum")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("Sum is ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("sum"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            compute"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("kill")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 子进程监听到一些错误消息退出")]),t._v("\n        compute"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'close'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("code"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" signal")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("收到close事件，子进程收到信号")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("signal"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("而终止，退出码")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("code"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            compute"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("kill")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ok'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nserver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v(".1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("server started at http://")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v(".1")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("针对需要进行计算的例子我们创建子进程拆分出来单独进行运算。")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("computation")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" sum "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'计算开始'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'计算耗时'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("；\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1e10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        sum "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'计算结束'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'计算耗时'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" sum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nprocess"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("msg")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'process.pid'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 子进程id")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" sum "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("computation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果Node.js进程是通过进程间通信产生的，那么，process.send()方法可以用来给父进程发送消息")]),t._v("\n    process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"cluster模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cluster模块"}},[t._v("#")]),t._v(" cluster模块")]),t._v(" "),n("p",[t._v("cluster开启子进程Demo")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" numCPUS "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'os'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cpus")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" cluster "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cluster'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cluster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isMaster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Master proces id is'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// fork workers")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" numsCPUS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        cluster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fork")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    cluster"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'exit'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" code"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" signal")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'worker process died,id'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Worker可以共享同一个TOP连接  这里是一个http服务器")]),t._v("\n    http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello wrod'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"cluster原理分析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cluster原理分析"}},[t._v("#")]),t._v(" cluster原理分析")]),t._v(" "),n("p",[n("img",{attrs:{src:a(511),alt:"cluster原理分析"}})]),t._v(" "),n("p",[n("span",{staticStyle:{color:"red"}},[t._v("cluster模块调用fork方法来创建子进程，该方法与child_process中的fork是同一个方法。"),n("strong",[t._v("cluster模块采用的是经典的主从模型，Cluster会创建一个master，然后根据你指定的数量复制出多个子进程，可以使用cluster.isMaster属性判断当前进程是master还是worker(工作进程)。由master来管理所有的子进程，主进程不负责具体的任务处理，主要工作是负责调度和管理。")])])]),t._v(" "),n("p",[n("span",{staticStyle:{color:"blue"}},[t._v("cluster模块使用内置的负载均衡来更好的处理线程之间的压力")]),t._v("，该负载均衡使用了Round-robin算法(也被称为循环算法)。当使用Round-robin调度策略时，master accepts()所有传入的连接请求，然后将相应的TCP请求处理发送给选中的工作进程(该方式仍然通过IPC来进行通信)。")]),t._v(" "),n("p",[t._v("开启多进程时候端口疑问讲解:如果多个Node进程监听同一个端口时出现Error：listen EADDRIUNS的错误，而cluster为什么可以让多个子进程监听同一个端口呢？"),n("strong",[n("span",{staticStyle:{color:"blue"}},[t._v("原因是master进程内部启动了一个TCP服务器，而真正监听端口的只有这个服务器，当来自前端的请求触发服务器的connection事件后，master会将对应的socket句柄发送给子进程")])])]),t._v(" "),n("h3",{attrs:{id:"child-process模块与cluster模块总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#child-process模块与cluster模块总结"}},[t._v("#")]),t._v(" child_process模块与cluster模块总结")]),t._v(" "),n("p",[n("mark",[t._v("无论是child_process模块还是cluster模块，为了解决Node.js实例单线程运行，无法利用多核CPU的问题而出现的")]),t._v("。"),n("strong",[n("span",{staticStyle:{color:"blue"}},[t._v("核心就是父进程(即master进程)负责监听端口，接收到新的请求后将其分发给下面的worker进程")])])]),t._v(" "),n("p",[t._v("cluster模块的弊端")]),t._v(" "),n("p",[n("img",{attrs:{src:a(512),alt:"child_process"}}),t._v(" "),n("img",{attrs:{src:a(513),alt:"cluster"}})]),t._v(" "),n("p",[n("span",{staticStyle:{color:"blue"}},[t._v("cluster内部隐式的构建TCP服务器的方式对使用者确实简单和透明了很多，但是这种方式无法像使用child_process那样灵活，因为一直主进程只能管理一组相同的工作进程；而自行通过child_process来创建的工作进程，一个主进程可以控制多组进程。"),n("mark",[t._v("原因是child_process操作子进程时，可以隐式的创建多个TCP服务器，对比上面的两幅图应该能理解")])])]),t._v(" "),n("h2",{attrs:{id:"node-js进程通信原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node-js进程通信原理"}},[t._v("#")]),t._v(" Node.js进程通信原理")]),t._v(" "),n("p",[t._v("前面讲解的无论是child_process模块，还是cluster模块，都需要主进程和工作进程之间的通信。"),n("span",{staticStyle:{color:"blue"}},[t._v("通过fork()或者其他API,创建了子进程之后,为了实现父子进程之间的通信,父子继承之间才能通过message和send()传递消息。")])]),t._v(" "),n("p",[t._v("IPC这个词我想大家并不陌生，不管哪一种开发语言只要提到进程通信，都会提到它。"),n("span",{staticStyle:{color:"red"}},[t._v("IPC的全程是Inter-Process Communication，即进程间通信。")]),t._v("它的目的是为了让不同的进程能够相互访问资源并进行协调工作。"),n("span",{staticStyle:{color:"blue"}},[t._v("实现进程间通信的技术有很多，"),n("strong",[t._v("如命名管道，匿名管道，socket，信号量，共享内存，消息队列等")]),t._v("。Node中实现IPC通道依赖于libuv。windows下由命名管道(name pipe)实现，unix系统则采用Unix Domain Socket实现。表现在应用层上的进程间通信只有简单的message事件和send()方法，接口十分简介和消息化")])]),t._v(" "),n("p",[t._v("IPC创建和实现示意图")]),t._v(" "),n("p",[n("img",{attrs:{src:a(514),alt:"IPC创建和实现示意图"}})]),t._v(" "),n("p",[t._v("IPC通信管道是如何创建的")]),t._v(" "),n("p",[n("img",{attrs:{src:a(515),alt:"IPC通信管道是如何创建的"}})]),t._v(" "),n("p",[n("span",{staticStyle:{color:"blue"}},[t._v("父进程在实际创建子进程之前，会创建IPC通道并监听它，然后才真正的创建出子进程，这个过程中也会通过环境变量(NODECHANNELFD)告诉子进程这个IPC通道的这个文件描述符。子进程启动的过程中，根据文件描述符去连接这个已存在的IPC通道，从而完成父子进程之间的连接。")])]),t._v(" "),n("h2",{attrs:{id:"node-js句柄传递"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node-js句柄传递"}},[t._v("#")]),t._v(" Node.js句柄传递")]),t._v(" "),n("p",[t._v("讲句柄之前，先想一个问题，send句柄发送的时候，真的是将服务器对象发送给了子进程？")]),t._v(" "),n("h3",{attrs:{id:"子进程对象send-方法可以发送的句柄类型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#子进程对象send-方法可以发送的句柄类型"}},[t._v("#")]),t._v(" 子进程对象send()方法可以发送的句柄类型")]),t._v(" "),n("ul",[n("li",[t._v("net.Socket TCP套接字")]),t._v(" "),n("li",[t._v("net.Server TCP服务器，任意建立在TCP服务上的应用层服务都可以享受它带来的好处")]),t._v(" "),n("li",[t._v("net.Native C++层面的TCP套接字或IPC管道")]),t._v(" "),n("li",[t._v("dgram.Socket UDP套接字")]),t._v(" "),n("li",[t._v("dgram.Native c++层面的UDP套接字")])]),t._v(" "),n("h3",{attrs:{id:"send句柄发送原理分析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#send句柄发送原理分析"}},[t._v("#")]),t._v(" send句柄发送原理分析")]),t._v(" "),n("p",[t._v("结合句柄的发送和还原示意图更容易理解")]),t._v(" "),n("p",[n("img",{attrs:{src:a(516),alt:"send句柄发送原理分析"}})]),t._v(" "),n("p",[n("span",{staticStyle:{color:"blue"}},[t._v("send()方法在将消息发送到IPC通道前，实际将消息组装成了两个对象，一个参数是hadler，另一个是message。message参数如下")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    cmd"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NODE_HANDLE'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TYPE")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'net.Server'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    msg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" message\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("发送到IPC管道中的实际上是我们要发送的句柄文件描述符。这个message对象在写入到IPC管道时，也会通过JSON.stringfy()进行序列化。所以最终发送到IPC通道中的信息都是字符串，send()方法能发送消息和句柄并不意味着它能发送任何对象。")]),t._v(" "),n("p",[t._v("连接了IPC通道的子线程可以读取父进程发来的消息，将字符串通过JSON.parse()解析还原为对象后，才触发message事件将消息传递给应用层使用。在这个过程中，消息对象还要被进行过滤处理，message.cmd的值如果以NODE为前缀，它将相应一个内部事件internalMessage，如果message.cmd值为NODEHANDLE,它将取出message.type的值和得到的文件描述符一起还原出一个对应的对象。")]),t._v(" "),n("p",[t._v("以发送的TCP服务器句柄为例，子进程收到消息后的还原过程代码如下")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("message"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" emit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" self "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" server "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("net"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Server")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("emit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("这段还原代码，子进程根据message.type创建对应的TCP服务器对象，然后监听到文件描述符上。由于底层细节不被应用层感知，所以子进程中，开发者会有一种服务器对象就是从父进程中直接传递过来的错觉。")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),n("p",[t._v("Node进程之间只有消息传递，不会真正的传递对象，这种错觉是抽象封装的结果。目前Node只支持我前面提到的几种句柄，并非任意类型的句柄都能在进程之间传递，除非它有完成的发送和还原的过程")])]),t._v(" "),n("h2",{attrs:{id:"node-js多进程架构模型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node-js多进程架构模型"}},[t._v("#")]),t._v(" Node.js多进程架构模型")]),t._v(" "),n("p",[t._v("我们自己实现一个多进程架构守护Demo")]),t._v(" "),n("p",[n("img",{attrs:{src:a(517),alt:"多进程架构守护"}})]),t._v(" "),n("p",[n("strong",[t._v("编写主进程")])]),t._v(" "),n("p",[t._v("master.js主要处理一下逻辑")]),t._v(" "),n("ul",[n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("创建一个server并监听3000端口")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("根据系统cpus开启多个进程")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("通过进程对象的send方法发送消息到子进程进行通信")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("在主进程中监听了子进程的变化，如果是自杀信号重新启动一个工作进程")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("主进程监听到退出消息的时候，先退出子进程在退出主进程")])])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// master.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fork "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'child_process'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fork"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" cpus "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'os'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cpus")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'net'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nserver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nprocess"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node-master'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" workers "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("createWorker")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" worker "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fork")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'worker.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("message")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("act "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'suicide'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWorker")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'exit'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("code"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" signal")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'worker process exited, code: %s signal: %s'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" code"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" signal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delete")]),t._v(" workers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'server'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    workers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'worker process created, pid: %s ppid:%s'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" cups"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWorker")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nprocess"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SIGINT'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SIGINT'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// KILL(2) Ctrl -c;")]),t._v("\nprocess"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SIGQUIT'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SIGQUIT'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// kill(3) Ctrl - \\")]),t._v("\nprocess"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SIGTERM'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SIGTERM'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// kill(15) default")]),t._v("\nprocess"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'exit'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("code")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'进程退出!'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" code"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" pid "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" workers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'master process exited, kill worker pid:'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            workers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("kill")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SIGINT'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("exit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("strong",[t._v("工作进程")])]),t._v(" "),n("p",[t._v("worker.js子进程处理逻辑如下")]),t._v(" "),n("ul",[n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("创建一个server对象，注意这里最开始并没有监听3000端口")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("通过message对象接收主进程send方法发送的消息")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("监听uncaughtException事件，捕获未处理的异常，发送自杀消息由主进程重建进程，子进程在连接关闭之后推出")])])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// worker.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/plan'")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'I am worker, pid:'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pid "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("', ppid:'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ppid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'worker process exception!'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 测试异常进程退出重启")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nprocess"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node-worker'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nprocess"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("message"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sendHandle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'server'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        worker "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sendHandle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connection'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("socket")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("emit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connection'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nprocess"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'uncaughtException'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("act"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'suicide'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("exit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h2",{attrs:{id:"node-js进程守护"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node-js进程守护"}},[t._v("#")]),t._v(" Node.js进程守护")]),t._v(" "),n("h3",{attrs:{id:"什么是进程守护"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#什么是进程守护"}},[t._v("#")]),t._v(" 什么是进程守护")]),t._v(" "),n("p",[t._v("每次启动Node.js程序都需要在命令窗口输入命令 node app.js才能启动，但如果把命令窗口关闭则Node.js程序就会立即断掉。除此之外，当我们这个Node.js服务以外崩溃了就不能自动重启进程了。这些线程都不是我们想要看到的，所以需要通过某些方式来守护这个进程，执行node app.js开启一个服务进程后，我还可以在这个终端上做些别的事情，且不会相互影响。")]),t._v(" "),n("h3",{attrs:{id:"如何实现进程守护"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#如何实现进程守护"}},[t._v("#")]),t._v(" 如何实现进程守护")]),t._v(" "),n("p",[n("span",{staticStyle:{color:"blue"}},[t._v("这里我只说一些第三方进程守护框架，pm2和forever，它们都是可以实现进程守护，底层也都是通过上面讲的child_process模块和cluster模块实现的，这里就不在提他们的额原理。")])]),t._v(" "),n("p",[t._v("pm2指定生成环境启动一个名为test的node服务")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("pm2 start app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("env production "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("name test\n")])])]),n("p",[n("strong",[t._v("Pm2常用api")])]),t._v(" "),n("ul",[n("li",[t._v("pm2 stop Name/processId停止某个服务，通过服务名称或者服务进程ID")]),t._v(" "),n("li",[t._v("pm2 delete Name/processId 删除某个服务，通过服务名称或者服务进程ID")]),t._v(" "),n("li",[t._v("pm2 log [name] 查看日志，如果添加服务名称，则指定查看某个服务的日志，不加则查看所有日志")]),t._v(" "),n("li",[t._v("pm2 start app.js -i 4 集群， -i参数用来告诉pm2以clustermode的形式运行你的app(对应的叫forkmode)，后面的数字表示要启动的工作线程的数量。如果给定的数字为0，PM2则会更加CPU核心的数量来生成对应的工作线程。注意一般在生成环境使用cluster_mode模式，测试或者本地环境使用fork模式，方便测试到错误")]),t._v(" "),n("li",[t._v("pm2 reload Name, pm2 restart Name 应用程序代码有更新，可以用重载来加载新代码，也可以用重启来完成 reload可以做到0秒宕机加载心代码，restart则是重新启动，生成环境中多用reload来完成代码更新")]),t._v(" "),n("li",[t._v("pm2 show Name 查看服务详情")]),t._v(" "),n("li",[t._v("pm2 list 查看pm2中所有项目")]),t._v(" "),n("li",[t._v("pm2 monit 用monit可以打开实时监控器去查看资源占用情况")])]),t._v(" "),n("p",[n("strong",[t._v("pm2官网个地址")])]),t._v(" "),n("p",[n("a",{attrs:{href:"http://pm2.keymetrics.io/docs/usage/quick-start/",target:"_blank",rel:"noopener noreferrer"}},[t._v("pm2官网"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("[forever]https://github.com/foreverjs/forever")]),t._v(" "),n("p",[t._v("注意：二者更推荐pm2，看一下二者对比就知道我为什么更推荐使用pm2了。")]),t._v(" "),n("p",[t._v("https://www.jianshu.com/p/fdc12d82b661")]),t._v(" "),n("h2",{attrs:{id:"linux关闭一个进程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#linux关闭一个进程"}},[t._v("#")]),t._v(" linux关闭一个进程")]),t._v(" "),n("ul",[n("li",[t._v("查找与进程相关的PID号"),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("ps aux "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" grep server\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// demo")]),t._v("\npx aux "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" grep "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("41184")]),t._v("\n")])])])]),t._v(" "),n("li",[t._v("杀死进程\n"),n("ul",[n("li",[n("p",[t._v("以优雅的方式结束进程")]),t._v(" "),n("p",[t._v("kill -I PID")]),t._v(" "),n("p",[t._v("-I选项告诉kill命令用好像启动进程的用户以注销的方式结束进程。当使用该选项时，kill命令也视图杀死所留下的子进程。但这个命令也不是总能成功--或许仍然需要先手工杀死子进程，然后在傻子父进程")])]),t._v(" "),n("li",[n("p",[t._v("kill 命令用于终止进程")]),t._v(" "),n("p",[t._v("例如：kill-9[PID]-9 表示强迫进程立即停止")]),t._v(" "),n("p",[t._v("这个强大和危险的命令迫使进程在运行时突然终止，进程在结束后不能自我清理。危害是导致系统资源无法正常释放，一般不推荐使用，除非其他办法都无效。当使用此命令时，一定要通过ps -ef确认没有剩下任何僵尸进程。只能通过终止父进程来消除僵尸进程。如果僵尸进程被init收养，问题就比较严重了。杀死init进程意味着关闭系统。如果系统中有僵尸进程，并且其父进程是init，\n而且僵尸进程占用了大量的系统资源，那么就需要在某个时候重启机器以清除进程表了。")])]),t._v(" "),n("li",[n("p",[t._v("killall 命令")]),t._v(" "),n("p",[t._v("杀死同一进程组内的所有进程。其允许指定要终止的进程的名称，而非PID")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("killall httppd\n")])])])])])])]),t._v(" "),n("h2",{attrs:{id:"node-js线程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node-js线程"}},[t._v("#")]),t._v(" Node.js线程")]),t._v(" "),n("h3",{attrs:{id:"node-js关于单线程的误区"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node-js关于单线程的误区"}},[t._v("#")]),t._v(" Node.js关于单线程的误区")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nserver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'程序员成长测试进程'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'进程id'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("仍然看本文第一段代码，创建了http服务，开启了一个进程，都说了Node.js是单线程，所以Node启动了线程数应该是1，但是为什么会开启7个线程呢？难道Javascript不是单线程不知道小伙伴有没有这个疑问？")]),t._v(" "),n("p",[t._v("解释下原因：")]),t._v(" "),n("p",[t._v("Node中最核心的是V8引擎，在Node启动后，会创建V8的实例，这个实例是多线程的。")]),t._v(" "),n("ul",[n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("主线程:编译、执行代码")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("编译/优化线程：在主线程执行的时候，可以优化代码")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("分析器线程：记录分析代码运行时间，为Crankshaft优化代码执行提供依据")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("垃圾回收的几个线程")])])]),t._v(" "),n("p",[t._v("所以大家常说的Node是单线程指的是Javascript的执行是单线程(开发者编码的代码运行在单线程环境中)，但Javascript的宿主环境，无论是Node还是浏览器是多线程的因为libuv中有线程池的概念存在的，libuv会通过类似线程池的实现来模拟不同操作系统的异步调用，这对开发者来说是不可见的")]),t._v(" "),n("h3",{attrs:{id:"某些异步io会占用额外的线程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#某些异步io会占用额外的线程"}},[t._v("#")]),t._v(" 某些异步IO会占用额外的线程")]),t._v(" "),n("p",[t._v("还是上面的例子，我们在定时器执行的同事，去读一个文件")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nfs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./index.html'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("线程数量变成11个，这是因为在Node中有一些IO操作(DNS,FS)和一些CPU秘密计算(zlib, Crypto)会启用Node的线程池，而线程池默认大小是4,因为线程数变成了11，我们可以手动更改线程池默认大小")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UV_THREADPPOOL_SIZE")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),t._v("\n")])])]),n("p",[t._v("一行代码轻松把线程变成71")]),t._v(" "),n("h3",{attrs:{id:"libuv"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#libuv"}},[t._v("#")]),t._v(" Libuv")]),t._v(" "),n("p",[n("span",{staticStyle:{color:"blue"}},[t._v("Libuv是一个跨平台的异步IO库，它结合了Unix下的libev和window下的IOCP的特性，最早由Node的作者开发，专门为Node提供多屏下的异步IO支持。Libuv本身是由C++语言实现的，Node中的非阻塞IO以及事件循环机制都是由Libuv实现的")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(518),alt:"libuv架构"}})]),t._v(" "),n("p",[t._v("在Window环境下，libuv直接使用windows的IOCP来实现异步IO。在非window下，libuv使用多线程来模拟异步IO")]),t._v(" "),n("p",[t._v("注意下面的话，Node的异步调用是由libuv来支持的，以上面的读取文件的例子，读取文件实质的系统调用是由libuv来完成的，Node只是负责调用libuv的接口，等数据返回后在执行对应的回调方法")]),t._v(" "),n("h3",{attrs:{id:"node-js线程创建"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node-js线程创建"}},[t._v("#")]),t._v(" Node.js线程创建")]),t._v(" "),n("p",[t._v("直到 Node 10.5.0 的发布，官方才给出了一个实验性质的模块 "),n("strong",[n("span",{staticStyle:{color:"blue"}},[t._v("worker_threads 给 Node 提供真正的多线程能力")])]),t._v("。")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    isMainThread"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    parentPort"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    workerData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    threadId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    MessageChannel"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    MessagePort"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Worker\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'worker_threads'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mainThread")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" worker "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Worker")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__filename"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("workerData"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'exit'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("code")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("main: worker stopped with exit code ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("code"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("msg")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("main: receive ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("msg"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("postMessage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("workerThread")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("worker: workerDate ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("workerData"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    parentPort"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("msg")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("worker: receive ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("msg"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    parentPort"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("postMessage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("workerData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isMainThread"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mainThread")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("workerThead")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("上述代码在主线程中开启五个子线程，并且主线程向子线程发送简单的消息。")]),t._v(" "),n("p",[t._v("由于 worker_thread 目前仍然处于实验阶段，所以启动时需要增加 --experimental-worker flag，运行后观察活动监视器，开启了5个子线程")]),t._v(" "),n("h3",{attrs:{id:"worker-thread-模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#worker-thread-模块"}},[t._v("#")]),t._v(" worker_thread 模块")]),t._v(" "),n("p",[t._v("workerthread 核心代码（地址https://github.com/nodejs/node/blob/master/lib/workerthreads.js）\nworker_thread 模块中有 4 个对象和 2 个类，可以自己去看上面的源码。")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("isMainThread: 是否是主线程，源码中是通过 threadId === 0 进行判断的。")])]),t._v(" "),n("li",[n("ul",[n("li",[t._v("MessagePort: 用于线程之间的通信，继承自 EventEmitter。")])])]),t._v(" "),n("li",[n("p",[t._v("MessageChannel: 用于创建异步、双向通信的通道实例。")])]),t._v(" "),n("li",[n("p",[t._v("threadId: 线程 ID。")])]),t._v(" "),n("li",[n("p",[t._v("Worker: 用于在主线程中创建子线程。第一个参数为 filename，表示子线程执行的入口。")])]),t._v(" "),n("li",[n("p",[t._v("parentPort: 在 worker 线程里是表示父进程的 MessagePort 类型的对象，在主线程里为 null")])]),t._v(" "),n("li",[n("p",[t._v("workerData: 用于在主进程中向子进程传递数据（data 副本）")])])]),t._v(" "),n("h2",{attrs:{id:"总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),n("p",[t._v("多进程 vs 多线程")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("属性")]),t._v(" "),n("th",[t._v("多进程")]),t._v(" "),n("th",[t._v("多线程")]),t._v(" "),n("th",[t._v("比较")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("数据")]),t._v(" "),n("td",[t._v("数据共享复杂，需要IPC;数据是分开的，同步简单")]),t._v(" "),n("td",[t._v("因为共享进程数据，数据共享简单，同步复杂")]),t._v(" "),n("td",[t._v("各有千秋")])]),t._v(" "),n("tr",[n("td",[t._v("CPU、内存")]),t._v(" "),n("td",[t._v("占用内存多，切换复杂，CPU利用率低")]),t._v(" "),n("td",[t._v("占用内存少，切换简单，CPU利用率高")]),t._v(" "),n("td",[t._v("多线程更好")])]),t._v(" "),n("tr",[n("td",[t._v("销毁、切换")]),t._v(" "),n("td",[t._v("创建销毁、切换复杂，速度慢")]),t._v(" "),n("td",[t._v("创建销毁、切换简单速度很快")]),t._v(" "),n("td",[t._v("多线程更好")])]),t._v(" "),n("tr",[n("td",[t._v("coding")]),t._v(" "),n("td",[t._v("编码简单、调试方便")]),t._v(" "),n("td",[t._v("编码、调试复杂")]),t._v(" "),n("td",[t._v("编码、调试复杂")])]),t._v(" "),n("tr",[n("td",[t._v("可靠性")]),t._v(" "),n("td",[t._v("进程独立运行，不会相互影响")]),t._v(" "),n("td",[t._v("线程同呼吸共命运")]),t._v(" "),n("td",[t._v("多进程更好")])]),t._v(" "),n("tr",[n("td",[t._v("分布式")]),t._v(" "),n("td",[t._v("可用于多机多核分布式，易于扩展")]),t._v(" "),n("td",[t._v("只能用于多核分布式")]),t._v(" "),n("td",[t._v("多进程更好")])])])]),t._v(" "),n("h2",{attrs:{id:"资料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#资料"}},[t._v("#")]),t._v(" 资料")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://mp.weixin.qq.com/s/RiuRbKFUOvB-0Y99AyACOw",target:"_blank",rel:"noopener noreferrer"}},[t._v("深入理解Node.js 进程与线程"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.im/entry/5d4b7694f265da03cd0a6a4b",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文"),n("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports},509:function(t,s,a){t.exports=a.p+"assets/img/615.f245b42f.jpg"},510:function(t,s,a){t.exports=a.p+"assets/img/616.dc162cee.jpg"},511:function(t,s){t.exports="data:image/jpeg;base64,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"},512:function(t,s){t.exports="data:image/jpeg;base64,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"},513:function(t,s){t.exports="data:image/png;base64,UklGRuQYAABXRUJQVlA4INgYAABwewCdASr1AQUBPpFInEulpCMhobLq8LASCWdu/FuXuhXryqx6d4Ofjb4T0qf9Hdx8+b56W+59Fr62H/gyXrzb/lO4D/Efk96C+Rrxj7ffHpeL6f9SP5Z9wv2Xre/jP+L4G8AX8s/l/63etF9N2iW1f5P0AvXH6j/tP8J+Rfxqev/6z+0+o32b/znuAfrN/u/Xr/l/7DxBvwP+19gL+Uf0z/b/5r8XPpk/p//R/rfzP9pv0p/7f8t8A/85/tv/b/wftj+vb92///7pn7W//8h6QYimwuwz+Kl2YlrSgm0P7BcJKiVw+xtJ2jBiR05p947lM8auUrSw18xEewagP+9Zrp6ye16e6N9PdG+nujfTgy1FuqGcbKc74r/Czexfp7o3090b6e6N9PVcmcWqXw0H0f0SrkL+0trs/WD+IKb2NymeO5TPHcpnjtNDbz9UblpfGi++5Pm/mMYA8Q6aAi7ZHQfkSNhjPY3KZ47lM7wPEFGKccNAVOadZ8y/ocJGvsLg+xf1NhjPY3KZ47lMvpL//Gl9u+WkVHTrYEx09ZevyXHKnTgeIuhLExvHcpnjuUzxlC9u/t8q5TR0YWv6DVGf6gwx2RVWd0Y0whtY0IdwxFNhjPYjaLeHrFnulOiR/TSFqR1yloE9rMBtrqQpdDcgy4TRvp7ljvjzUUweigSUMGDbtcVo3KNmXN9dXMfyhDGkBr/sHmGaAv48MP/VLelvALa+tpjJ2p59O1FLcb0xQ8gQErx7vios0Ntw9wfLPamPuXdNp9HIC75nJIX+9wP3OYJURFTuFKmh8wRkgJRK5nQKwefg6r6mAVBFBjV99Pbd/4Td6heP1wZIs2lZplwZ2zNu3kEKJMO/VLy5ka6QZpyt8qDaAoYQxctfWB8a2wKsZiEEeHTdmervyazht17D0wuZspYxQTdew5xY2Afxdl38/m2t5IMhqck0BxSaZfPlY//dukxVe7qt6IIHZ/ZzRuHzkPqkM6BGJgdpM/C1Ogz8ZvNT4GyCpD54/Z+M4QwBihmqZxTSV6e6N9PdG48i6OpfYwD29GIyydhMkTEW0X3LjojimMkdwHQ3Mdc4OaCKiA/KONbsblM7WejUR6twpAx6iRaBzCX4///p3pywYjOa4zwjxM1BNTcoQTD4qvKhVijlxfjom6P68O2SMCC00EOw+U8/jTqqwL40IZC2q3m09OsgGowAE/wkFhoo4WooI6yxMpp7hF7HXgF9PAWiipe9tafWyj3Bi/UJsVhyLUxUvT2Yr/9TBxE1q16e6LJCZZ5tg52zp4UpfQMHW/NjJtt7yfbXkP/r8DWSFXGmTN9PUgAA/v4ogBHEBvc4vbcOqGngjtXoV/vR76V0PrHVl/piwk/g0W7c52YLgiB+WwgIevEHNJBLYPYNzA9lSkiEuFT3ftlFJx/KhiF8tygjLIZi6tkp7oke//m/Q9HaIlaV6noejtESsZBPORfM8XdOHYAyb6RjlcHrqI5U6PuYFakaq7Q3rEfYRFzLLugiQkwrZVp4CST+dzyhDZs3mtT0Era7fGPIeridfFMO1B/M41plB14pnbvy6aImsBnoSFmR8Q8G9p1g4Ez9CIGuwzbrPAfghzPBf5iJ8sPw4yf4E4w/kh6Y+3ds55ruBUSSjTA0/e7PgLP1d5YuVne7YXKZ2fV+XcEKLd1+phgAAAAAS6vmWgVoCrusnmqLMePpXAJnMowzwP4mL69loMWarnn+XTqpceN9XZ0XXlPKbew9ChlqxAm7z7ILg3ig4r121GEhDqWJOD0xIvmtnFkYAABRuynTo6Z+FL575kq+b9pmMHbZ/qi0suP9jQs0WBoKj9YboKH4+/Ak0vdugJQOiGOCHErXU/iJBaUH4dCoz3HJnacYFKo8ag1HH8yp7RwMk3AixZPB+e5luhUgheEnwUkBHFfOpBiUyV25ONL5IAAACPqIoHIcHelMD3LFE8kxh9eZHtHbkGCI1Z1rTJeqwLUISrVn+0xV90pPVIUgLlfJUf8LLtCfmYJ2MQIk9TyHXu6WhbgkZfQoAN5nQgKlUbQTiz/MWZAC2CNjtTKRBjl9ekQrXeGygvWLoJLTuXTbB0ufgUg9WOTBmYIz/cERsl6tF8m76Hg9zi0KP46XhPIMvF0aTlMhlrpMFk2B713pV2H4Lvyy46XyZiiUWFo1c34wdOAAAASfc0SytCm3xrw1/ETrGKRmfXu2S3naKthdQ/wDJbOgegIAAigXmtMTZi147UOSghMSz3qttEb37DdDrF1Bna5rpNzGw5kc066PZwk3XZcxdaxYiYh7P5DNjQARRWKJj/TWIDCfr50mK4zPXSl8zViYIYJJReRitA+6MasTXRGVJ2GLpVu9cLPohrEqpZk3xjXzYRUaZs5bUCmOsnGxJeh/SoD77kF8mEtiEx1IJSotwvt+FiOB5sJwfKVirUyjaHTgVt7nLLjkqE1cASXE360IpSt4NGmrvZvkAAD3COOZs+WNlvue4rzRRUxZpX0hdKG4sF9m0Zj19jb7V/XUSCGKsNgIUNFHMCFtSH+zEBW0jaSpNxBotnkqn8I79F5ueFdwCCJctpT0IRVB95KYODEVZgcuTjOmxTz0AiAGdEbkilMnycw58LGMPmBftkIWUEO0DYi5f8W75+XsklAsEKIAE+uT/Z/bWDLahAC3cSJRUZwNFPj5aykC1gbbeXQMZGTu2A03aLEl3uqLAzxCCAVKLYoKcuax+8+IHSvJ0WKfU+ewQrdlwm3IrVUAAAYhBpqDIDNKAKpsK0cHY36/tjigWMYzm5dgTHVThpFSzlR9+uVwX/x076/nDximV4DK4GQ+i8lmYS/HLECJRRO0cBGE8sUDjfyhMxZ2RHb0DtiF01qhemFUcy0DLWA2di4j2yYejggmMlT6+m80MKinfnhKRlOVBIPtv3VKyE08jL0AWuIJah36/hgUbiglpOwybid+ON0yMoU/rD2UjJIWhcG7chqGuSSb96H8wY3Zqs2sN8xApKzuasXGuWiwbXPs5cQycggN4ssnGwA0CkLqeIUt2qIyiTUIEQ6gXn4Y6kmjbe5kxmly7jYv29oza5A9Yt+41iEM3NwysdURG6qk6JB7FkwibTPsBfxDWAuOvL+oAIB91GqWMSgLIKO8FVgDUSWTuNbFSrlTKiasTBXJTW46FMrrmYomRRjh884Awy8a4Euw+x+KPzTt2OwaJGhX+5tc7IHt1L60vnP/uDl16AEEXGd2GLKjHkWA8M8Xn/Xwh4JGpxeuQIkewASlbwQt/7f5OIg5lDsVHrU1ndb39BO5WNJPSolplZyAMEt/TzfABKKBUCJCmIoc6yFd4KpJNZMzKSC9QGi2wSAn7Un4q5AwEssT5nbP4EwHxpA0PLE+aTskGGuwphfVNN3UP0DIBAtD1v9Cw9tjhhBI9HFiYiTdolQVgh4SWd6Gezz6u5pqOpauvsIodFdVUupIMTutwztK6nOlrwsAMcpC17N1wmNbe9QI71PQ2HblCseYLIOlc8kjyOWW/8DN1d3wjcgFC2A0wgcViwEphA1+nWlWMJvsYAphsNO3mYNYHGcU0uyw5/0/CBIbOKRmxqFvxofiMT1ZFrEo/Bh9b1eomK4ReVkvdLkMbLG5fuwUFHiKZRXyBUpfaB+kfHWgxDt7rwElvFwzv+nA8tfkRN0tUB+aY8RrmxvxG6QK95T8h6TBPEzEfpxBELrTZbl9DLnN4KlDpiwdDVpLJRWW+FX8cnBmR598VqR/Sn1iAI0559tTA6GKlv0JjlVttTsshm762M6Wv9sNX3+hRZ53qTIOvBTnt+rh5mokA/TkvKYhs64D6+mZFVJplW0aPblko9wmouRXcOufGupGNalX4dalQd7StGRCed0GbIQ1YH+wIdZTVinIBEl5PMWGzUv5mmwlDKWnwCwddBpjue8yXS3ifMSEazL+aFRAuMfG1XHnUqXcz98KMBFlXym8GZDZldCru46/XF8Ei9zmXaOeMDKHwEd/lYWQYKCGMy9q0M1dNBjBNrNIjO53MzRhAv/BfBnTrxIKSWC/Nl0J/a6wce+fuRKrKXKoemvvCYokOC3Gw1+0/rROGpZaMbqHATsR7nwoD+BgZFlb5pFQFhAUrcrXJO7nQ/IURGlNypoAIVkpnKuj4W771S0xgdJa479/kRGm0cBWfd3iL6mlq5i7yCa8lXN5PwX1zCqSoK2mxqHQkcqm39JsfRwizxsrdMbQxQh54ZzTGsdRpBRHyqzH79XVs0MxPVakAizFu+8gYhaLiorGbcemNd5thUoaoHaWB/DUcccBrFe4/BQtlG1Ajq/aLzBZF1A9sEuHWN4nA6Dg1Ekg8hCgBC54wBa9AUwXDgcVpNTwEd/lYt0A/x1cgcLvp59eDADM8AhH6GMM5Gs+0s/vQsGFshnhC7og4cO61s6P1kIY/NhH1qMnVgxMEA2FMl+YEDR0DzrPsxL/fSbmUxygdCc+oPVJ7mN3PZnF8FpsiKSUS7rZ8Ld96paWH6ilZipoAT7hrdnkTkayjQmG+bSxn02XHJHfLJDh1pn6pgMPB4/QJ+cotI5nx9vLvJ+NulDL065RvJ2npLlYRgVSMPxVHyRKZsTffluRmbRnb5rgwcIViO5BW3iSLlCz4B/NRln3oqMci5aZEPjfC/xW6ILguYcD/URcIBmnw6zlPRY+gujzgynzbs2G8QauH1WxGrsMUUzlJuTO9cOIAZGHQ6fwZCzDLcl8H9TreeW2Ud9ALAkZh+BCMAaPO6b/gCLKB3YC99jpFGYNrM0Cc5GERHC/wsl071T7gv9SVKyv0L6284trAlZPx+quPGAMnA+07resNwXhn4vYrJ+WIFTnnWtJ2wShtbiFM7QVukQDR+Kan+r95NtwMQnlEv/N3e8GDu960XXDJHmwDOUwMAab79udAvjcNkLT4IgUS1TwNgnAs9BaOGRQtJLfoeNLzh7jIOKELpaPUAIdCuy26r3gPF2tX+COzk95m5hrN/FFxMF8DgViaHeTJHAVOcLw3dg1u/dDp2rB7KUUe3dCwSnRrH3e+db8uul/g0dZs1qDQiiS9UCjVDTMe2BXZqk/wEd/lYWQYKCGMy9q0M1dNBjBNrNIjO53MzRhAv/BfBnTrxIKSWC/Nl0J/a6wce+fuRKrKXKoemvvCYokOC3Gw1+0/rROGpZaMbqHATsR7nwoD+BgZFlb5pFQFhAUrcrXJO7nQ/IURGlNypoAIVkpnKuj4W771S0xgdJa479/kRGm0cBWfd3iL6mlq5i7yCa8lXN5PwX1zCqSoK2mxqHQkcqm39JsfRwizxsrdMbQxQh54ZzTGsdRpBRHyqyIZnI5A+DYAFI71tn22XeQMQtFxUVjNuPTGu82wqUNUDtLA/hqOOOA1ivcfgoWyjagR1ftF5gsi6ge2CXDrG8TgdBwcC4FMe/lDDvkc1FKOF6yME7hGTbwMf/UATwy8GPMNInKgHzYNDbya7moaYdjwK80AF0etLZEvP0seBe37ePAzB4pixX1NhT4eoACH2P7qeV5FSIaAlgSGbZxRlFrXcwcmAl8MO6BKXjoeuJGWJDMCwSlke3wyUeM5U1+6/q0jKjo7fhWVThlhrDjBr1rnMlno5eQsAUY1HtjRRPqBhB2AZMxRgN5swRJFpSn9GZJLmZUs8VKo4E5GiG4iTyzvcYSWgB/0R1+PzfUwzz5MCmYPfx8s4VK5Z2lbGnrCZTiZVM332y4n31Qr6ScUi74BizC97izOMWaXoIUc2HyeYaSgi9fJPYJdRvDiCrXAxy1WiR3tsCGo6p9nSkrPzv3MuMLylL/XCl21QD83wGIAAACvBGOBbXTRCUwST6bgM1r35cLXiaPJAW1CsfO7jwgJDAaL0kiJQHcMk+BUblxGenke6Vg6CJrKz0SMtLNdyZUGSRqQlA2TKn+YjokCqaAJ5TeWBt3sBHZ+ZcDs3ICWToZpnQww23nHq6qzl7gEpDAI4eoOAcL0DtzXHYRtdcRbxfuFUh0+vcG7yZVfBmgJh4iMyFK6ghMlbjAu+plVEHlh0N5uFEn1Ik8K1vvb1e7qLBneIrNfywAtxSMLTMcb1+YYy/TXUQ9r5hdm5/EKN9BLaPKioMlj7jJ6Binu30u1ybckJKDoG1FknSUAglhKw8bxX6INtadSHVBIA04eE498QLP966DPGEF/02QUmI1xdjMhGSUwIbdEl6Egu6tCd2LBLZbmAHp+Zh3EN64uJousmro4d/Y4D1HRGSAshRKRt8ElgF0/noE/z4H9u/hSEWZ/w9fIvMvy6dzv/eOdZ1cHz2Yd/fVZBuX9SY/9db7DI3la3c1NYMTSK4Sl0A3xMrUULfT7/n0WXF7NKvGD4YCC9/QJptVPK4wDIxh4Chgx8n1QmTrNR+qKJrXk/sqrj4kj5QVetdLXL94qg7Fxo9bdwk+6+ZXDqBfet2ZAcRisENoehGdsquEUzYfXD0P8XY9bou51+98oWjqE42/+73eNzNyD7cU2tknoSqskQ2fyXyS5ohGfyGvWbrPU3cXOcMj/0B7C85ZkVqVQ3d0Znzghed7dmEVVUIIhAIv2tvF+aDTFBRwQYPv28WUDflZB1gFruZUR9m+FdSA8L55Z3cFXEv2ZPS6zydUZGsR8inalicFXvOOvvnaGZDF+qWcpEZ+xmczqdaNa6Ielymi7y6nOYISYOrUUFelGyeLldwKZNZrE96ARl8LgWJ1NQ0kK84kiPbBdlZj3hw9h/V8Wz4mROd2KzuNLioMNOWNjAjcnyPJVAqR8sp48LGeoqjGtkszPBtXR/prK+6ZyVcIo/Loz7v3AYTNG2f8oi1xyohmEDgNimDK2d2mne5Ggt7V+IhhMnnb20zXd+HjeFfNcWdtT90izbCo9QHDf2LREcIpYG50Nh1PgQts6/mo13QMAXgig1drTolqRYOHiBr6q/JPsyXMUHYR9S2nvFsySzk/2gHajbEGF1R2g8KG2u8o1P4evdkG/aroePammlaHy9pu9j0+/1w2ogymmKhgybOkKSu7gw8nX4oMVK9S1DaoLi9bk2WpFiItvYBSK2sa9cPmGXGl9o9SUstmfq5Inyz9lB1cdHeFjCxXp4miioVyXg42p/a4qhPJut4J84bx4rUgNJXuNqlejoZlH4Xe8tRPkJW0Alx+PnYcnzP8WYP68aPlqeq/Wvds67avbGAbfC1eKHfLHzEvMwkXOqWdtX/zkwqNCHBXelX1BgZev7TpOaOmWMAxmx56YFzGaLkeaWF5FVgza/rfJR6M6RBc+oRRcChJUBw5tLh2ustytpu6Xpe7Bff2NXoy1+sqvEdBAMvLbVuX4FStDXjtfKErEZwd177Oon9eXG3QizJPQINk/fmI5iMxW8dJFM3XkHyrQjy55fw84XIg+CkVJzkOeVk0uh4lfWiCg22sy/S+6b7KEpQ91tpzyVOXyMJSuTwwUtH50Bdq3SWpKLTSAA0YLQp6hpcKm3B/zTyX+6KKVgUh1Nnn8lLw9rEgbJIttfb2yXgRVZr6bGxEVczYrOfAVBhgl6zjMn1D+7AY10rZRNfUPWOqI6f/8rgHp4yvRxHHVOoaX+5VNzFMKNQDeQsWxCGr7QsqK1/Jp6W5gWBYfq1NKIDHw5k60Ggim51bus0zlU+Dpx0AX+u/tkIIchSkV+6fnMSX13cLquS2Uw2EVzZ9/DwnOcQ1HVEGhACb0gv0DIyuEZw7p6mqDwDCy4lbvVJa1HFDfeYdmMkGFHDu/+omb4np2QCcJFEmeBfCW7M02BcjSKH1O2rR8K9Qrxlar4Zv4aPPO3Xjp/CelVBvm4WyPp37puc0ybzzlVAFZbww83QBb7JZX3vrjJV04OrAijjNs/UmIVG1yAYAYTJlqIaAjiEs18IrU0guTnidFyelUN3fnPgK3eYprAsMA1lxsqvFNCThk8zlm3EJ/pkiElADv8fOyLWOq/dszWE20Io9qq9xHpt9wPY+Me76ngVvv32sbGPBwBZksX806p+troTYco5GpgiWq1nqEDvtFK2GBIsTSsflBiD/8vjlZ3FvG77hTQu8zbkR0Yl0uvPB7ITLLqQ7RuKNxpYS7osrR6JZ1wzgjQstNoWAmTwSlbTzpZ8YkAyiwTbPZpItrXk/wdiQXfCkrS81c67NiXe2VMiPMc/5uYmMqy8el2uekmVpRDZU4g1xkwXYIsq1cT9Kq6SrtvE5AMloS+LBEcDCXetJxy/YZWUv3qEyQHfQKLvJ2cwtsHhNOVo4xfwDVPslm9lf/al6srPov45G3zKwytrX7fHNRBOtR6Uow0WRyqesuLB+bjLQYQcpAtceF1niSI2/W2q+sYaqA8x8uSTTMGZZ7nt8oEffX/wrMHA0X9iB1knaAe43zcV4ZgJF1a1Ws1RUoBAAITk/gOsfu1/Gif1NdN2BmDOdL2RLbYlW5ANBrL0tcixTnauY7szfWVUfRdfH1H/+tKntgicM8BQncX2XiCtTi00wkaHX+pFEeJ4AAAA="},514:function(t,s){t.exports="data:image/jpeg;base64,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"},515:function(t,s,a){t.exports=a.p+"assets/img/621.dec98bc5.jpg"},516:function(t,s,a){t.exports=a.p+"assets/img/622.5756fd73.jpg"},517:function(t,s,a){t.exports=a.p+"assets/img/623.d2d03822.jpg"},518:function(t,s){t.exports="data:image/jpeg;base64,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"}}]);