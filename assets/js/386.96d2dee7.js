(window.webpackJsonp=window.webpackJsonp||[]).push([[386],{2160:function(a,e,t){"use strict";t.r(e);var s=t(46),r=Object(s.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"docker-构建一个node镜像源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-构建一个node镜像源"}},[a._v("#")]),a._v(" docker 构建一个node镜像源")]),a._v(" "),t("h3",{attrs:{id:"_0设置国内docker镜像源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_0设置国内docker镜像源"}},[a._v("#")]),a._v(" 0设置国内docker镜像源")]),a._v(" "),t("p",[a._v("进入Setting->Daemon->Advanced,添加如下配置")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('{\n    "registry-mirrors": [\n        "http://hub-mirror.c.163.com",\n        "https://registry.docker-cn.com",\n        "http://f1361db2.m.daocloud.io"\n    ],\n    "insecure-registries": [],\n    "debug": true,\n    "experimental": true\n}\n')])])]),t("p",[a._v("点击Apply,等待Docker重启")]),a._v(" "),t("h3",{attrs:{id:"_1-拉取官方alpine最新版本镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-拉取官方alpine最新版本镜像"}},[a._v("#")]),a._v(" 1.拉取官方alpine最新版本镜像")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker pull alpine:latest\n")])])]),t("h3",{attrs:{id:"_2-新建一个dockerfile文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-新建一个dockerfile文件"}},[a._v("#")]),a._v(" 2. 新建一个Dockerfile文件")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("FROM alpine:latest\n\nRUN apk update \\\n    && apk add nodejs \\\n    && apk add npm\n")])])]),t("h3",{attrs:{id:"_3-设置docker的setting的shared-drives"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-设置docker的setting的shared-drives"}},[a._v("#")]),a._v(" 3.设置Docker的Setting的Shared Drives")]),a._v(" "),t("p",[a._v("进入Settings->Shared Drives勾选共享的硬盘，输入系统登录的用户名和密码。")]),a._v(" "),t("h3",{attrs:{id:"_4-构建镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-构建镜像"}},[a._v("#")]),a._v(" 4.构建镜像")]),a._v(" "),t("p",[a._v("在Dockerfile文件当前目录下执行cmd命令")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker build -t node:v1\n")])])]),t("p",[a._v("在Dockerfile文件当前目录下新疆一个index.js文件")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("console.log('hello docker');\n")])])]),t("h3",{attrs:{id:"_5-启动容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-启动容器"}},[a._v("#")]),a._v(" 5.启动容器")]),a._v(" "),t("p",[a._v("假设前面的Dockerfile文件和index.js文件都在件都在c:/test/docker/node目录下。")]),a._v(" "),t("p",[a._v("执行cmd命令")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker run --rm -v c:/test/docker/node:/data node:v1 node /data/index.js\n")])])]),t("h3",{attrs:{id:"docker-compose重启"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose重启"}},[a._v("#")]),a._v(" docker-compose重启")]),a._v(" "),t("p",[t("span",{staticStyle:{color:"red","font-weight":"bold"}},[a._v("注意：docker-compose.yml文件的路径必须是项目的根目录& docker-compose build这一步骤")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker-compose down\ndocker-compose build\ndocker-compose up -d\n")])])]),t("h2",{attrs:{id:"docker-将容器打包成镜像以及导入导出"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-将容器打包成镜像以及导入导出"}},[a._v("#")]),a._v(" Docker 将容器打包成镜像以及导入导出")]),a._v(" "),t("p",[a._v("可以使用docker commit命令来完成，docker commit可以从容器创建一个新的镜像")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("语法格式")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker commit "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTIONS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" CONTAINER "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("REPOSITORY"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(":TAG"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])])]),a._v(" "),t("li",[t("p",[a._v("参数说明")]),a._v(" "),t("ul",[t("li",[a._v("-a:提交的镜像作者；")]),a._v(" "),t("li",[a._v("-c:使用Dockerfile指令来创建镜像")]),a._v(" "),t("li",[a._v("-m:提交时的说明文字")]),a._v(" "),t("li",[a._v("-p:在commit时，将容器暂停")])])]),a._v(" "),t("li",[t("p",[a._v("容器打包成镜像")]),a._v(" "),t("p",[a._v("将容器a404c6c174a2 保存为新的镜像,并添加提交人信息和说明信息。")]),a._v(" "),t("div",{staticClass:"language-hell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('docker top 2a2a11e2c043\ndocker commit -a "alway.com" -m "socks5" 2a2a11e2c043 alway.com/wangwei/socks5:v1\n')])])])]),a._v(" "),t("li",[t("p",[a._v("导入& 导出")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("导入")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 在镜像包所在的文件夹下操作")]),a._v("\ndocker load --input uu.tar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("也可以使用docker load -i uu.tar或者 docker load "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" uu.tar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 或")]),a._v("\ndocker load "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" uu.tar\n")])])])]),a._v(" "),t("li",[t("p",[a._v("导出")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker save "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /root/docker_images/uu.tar ubuntu:latest\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或")]),a._v("\ndocker save /root/docker_images/ubuntu:latest "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" uu.tar\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或")]),a._v("\ndocker save -o /root/docker_images/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("镜像名"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(".tar "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("镜像名"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":latest\n")])])])])])]),a._v(" "),t("li",[t("p",[a._v("启动镜像")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker run -it -d --name container-name -pp1:p1-pp2:p2new-image-name\ndocker run -it -d --name qinglong -p "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5700")]),a._v(":5700 alway.com/wangwei/qinglong:v1\n")])])])])]),a._v(" "),t("h2",{attrs:{id:"资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#资料"}},[a._v("#")]),a._v(" 资料")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/160859583",target:"_blank",rel:"noopener noreferrer"}},[a._v("mac 设置docker国内镜像源"),t("OutboundLink")],1)]),a._v(" "),t("p",[t("a",{attrs:{href:"https://www.cnblogs.com/samwu/p/10572568.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Docker构建一个node镜像"),t("OutboundLink")],1)]),a._v(" "),t("p",[t("a",{attrs:{href:"https://blog.csdn.net/qq_22155255/article/details/118861560",target:"_blank",rel:"noopener noreferrer"}},[a._v("Mac电脑Docker拉取Mysql报错？no matching manifest for linux/arm64/v8 in the manifest list entries"),t("OutboundLink")],1)]),a._v(" "),t("p",[t("a",{attrs:{href:"https://www.xuxusheng.com/post/docker-build%E5%91%BD%E4%BB%A4%E5%90%8E-%E5%8F%B7%E7%9A%84%E6%84%8F%E6%80%9D",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker build命令后 . 号的意思"),t("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=r.exports}}]);