(window.webpackJsonp=window.webpackJsonp||[]).push([[399],{2174:function(n,t,s){"use strict";s.r(t);var a=s(46),e=Object(a.a)({},(function(){var n=this,t=n.$createElement,s=n._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# For more information on configuration, see:")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#   * Official English Documentation: http://nginx.org/en/docs/")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#   * Official Russian Documentation: http://nginx.org/ru/docs/")]),n._v("\n\nuser root"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\nworker_processes auto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\nerror_log /var/log/nginx/error.log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\npid /run/nginx.pid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.")]),n._v("\ninclude /usr/share/nginx/modules/*.conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\nevents "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n    worker_connections "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("1024")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\nhttp "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n    log_format  main  "),s("span",{pre:!0,attrs:{class:"token string"}},[n._v("'$remote_addr - $remote_user [$time_local] \"$request\" '")]),n._v("\n                      "),s("span",{pre:!0,attrs:{class:"token string"}},[n._v("'$status $body_bytes_sent \"$http_referer\" '")]),n._v("\n                      "),s("span",{pre:!0,attrs:{class:"token string"}},[n._v('\'"$http_user_agent" "$http_x_forwarded_for"\'')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n    access_log  /var/log/nginx/access.log  main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n    sendfile            on"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    tcp_nopush          on"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    tcp_nodelay         on"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    keepalive_timeout   "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("65")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    types_hash_max_size "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("4096")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    client_max_body_size 8M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    client_body_buffer_size 128k"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    fastcgi_intercept_errors on"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n    include             /etc/nginx/mime.types"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    default_type        application/octet-stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# Load modular configuration files from the /etc/nginx/conf.d directory.")]),n._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# See http://nginx.org/en/docs/ngx_core_module.html#include")]),n._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# for more information.")]),n._v("\n    include /etc/nginx/conf.d/*.conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n\n    server\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n        listen       "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        listen       "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("443")]),n._v(" ssl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        server_name  "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("52.83")]),n._v(".95.61"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        server_name  dev0.heartdub.info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        server_name  dev0.heartdub.cn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n        ssl_certificate "),s("span",{pre:!0,attrs:{class:"token string"}},[n._v('"/etc/nginx/6774279_dev.heartdub.cn/6774279_dev.heartdub.cn.pem"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        ssl_certificate_key "),s("span",{pre:!0,attrs:{class:"token string"}},[n._v('"/etc/nginx/6774279_dev.heartdub.cn/6774279_dev.heartdub.cn.key"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        ssl_session_cache shared:SSL:1m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        ssl_session_timeout  10m"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#ssl_protocols  SSLv2 SSLv3 TLSv1 TLSv1.1 TLSv1.2;")]),n._v("\n        ssl_ciphers TLS13-AES-256-GCM-SHA384:TLS13-CHACHA20-POLY1305-SHA256:TLS13-AES-128-GCM-SHA256:TLS13-AES-128-CCM-8-SHA256:TLS13-AES-128-CCM-SHA256:EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:"),s("span",{pre:!0,attrs:{class:"token operator"}},[n._v("!")]),n._v("MD5"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        ssl_prefer_server_ciphers on"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n        include /etc/nginx/default.d/*.conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#if ($scheme = http)")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#{")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#    return 301 https://$server_name$request_uri;")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#}")]),n._v("\n\n\n\n\n        location /api\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n            include  uwsgi_params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            uwsgi_pass  "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("127.0")]),n._v(".0.1:9090"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n        location ~ ^/api/static/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v(".*"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("$\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n            "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("alias")]),n._v("  /home/ec2-user/One-backend/static/"),s("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            add_header Access-Control-Allow-Origin *"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            expires "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("864000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n\n        location ^~ /meta/\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n            "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("alias")]),n._v(" /home/ec2-user/demo-dist/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            index index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            try_files "),s("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$uri")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$uri")]),n._v("/ /meta/index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n        location /duber/\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n            "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("alias")]),n._v(" /home/ec2-user/dist/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            index index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            try_files "),s("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$uri")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$uri")]),n._v("/ /index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n        location /test/\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n            "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("alias")]),n._v(" /home/ec2-user/dist/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            index index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            try_files "),s("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$uri")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$uri")]),n._v("/ /index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n        location /\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n            "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("alias")]),n._v(" /home/ec2-user/dist/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            index index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            try_files "),s("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$uri")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$uri")]),n._v("/ /index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n        location /axia8\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n            "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("alias")]),n._v(" /home/ec2-user/axia8-demo/demo/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            index index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            try_files "),s("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$uri")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$uri")]),n._v("/ /index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n        location /tunl\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n            "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("alias")]),n._v(" /home/ec2-user/tunl-demo/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            index index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            try_files "),s("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$uri")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$uri")]),n._v("/ /index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n        location /demo\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n            "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("alias")]),n._v(" /home/ec2-user/demo/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            index index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n            try_files "),s("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$uri")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[n._v("$uri")]),n._v("/ /index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n        location /resource\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v('#proxy_set_header referer "$http_referer";')]),n._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v('#proxy_set_header referer "http://sina.com.cn";加上这句就不行，说明默认会携带原始的referer')]),n._v("\n            proxy_pass  https://s3.cn-northwest-1.amazonaws.com.cn/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);