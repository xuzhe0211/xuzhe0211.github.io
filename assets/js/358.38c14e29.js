(window.webpackJsonp=window.webpackJsonp||[]).push([[358],{1882:function(t,s,a){t.exports=a.p+"assets/img/73be33f2d63c4ccca86a0d470fd63947_tplv-k3u1fbpfcp-zoom-in-crop-mark_1304_0_0_0.f4890af5.png"},2815:function(t,s,a){"use strict";a.r(s);var n=a(46),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"å‰è¨€"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[t._v("#")]),t._v(" å‰è¨€")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/reactjs/rfcs/blob/useevent/text/0000-useevent.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("useEvent"),n("OutboundLink")],1),t._v("æ˜¯ä¸€ä¸ªåˆšåˆšææ¡ˆçš„åŸç”ŸHookï¼Œè¿˜å¤„äºRFCã€‚"),n("a",{attrs:{href:"https://github.com/reactjs/rfcs/blob/useevent/text/0000-useevent.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("è®¨è®ºåœ°å€"),n("OutboundLink")],1),t._v("ä¸‹é¢æœ‰äº›å—²å—æ˜¯æ¥è‡ªå…¶ä¸­")]),t._v(" "),n("blockquote",[n("p",[t._v("RFC:request for Commentsè¿˜åœ¨å¹¿æ³›è®¨è®ºé˜¶æ®µ")])]),t._v(" "),n("h2",{attrs:{id:"ä¸ºä»€ä¹ˆè¦æ€ä¹ˆåš"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆè¦æ€ä¹ˆåš"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆè¦æ€ä¹ˆåš")]),t._v(" "),n("h3",{attrs:{id:"æ²¡æœ‰useeventçš„æ—¶å€™"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ²¡æœ‰useeventçš„æ—¶å€™"}},[t._v("#")]),t._v(" æ²¡æœ‰useEventçš„æ—¶å€™")]),t._v(" "),n("p",[t._v("æˆ‘ä¹ˆå…ˆçœ‹çœ‹ä¸ç”¨useEventçš„æƒ…å†µ")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Chat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setText"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Always a different function")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onClick")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendMessage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("SendButton onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("onClick"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("span",{staticStyle:{color:"blue"}},[t._v("å…¶ä¸­ç‚¹å‡»äº‹ä»¶çš„å›è°ƒå‡½æ•°onClickä¸­éœ€è¦è¯»å–å½“å‰é”®å…¥çš„æ–‡æœ¬textï¼Œè¿™é‡ŒonClickéšç€ç»„ä»¶æ¸²æŸ“ä¸€æ¬¡æ¬¡çš„é‡æ–°åˆ›å»ºï¼Œæ¯æ¬¡éƒ½ä¼šæ˜¯ä¸ä¸€æ ·çš„å¼•ç”¨ï¼Œè¿™æ˜¾ç„¶å¸¦æ¥äº†æ€§èƒ½æŸè€—")]),t._v("ï¼Œå¦‚æœä½ æƒ³å¯¹å…¶è¿›è¡Œä¼˜åŒ–ï¼Œä½ å¯èƒ½ä¼šè¿™æ ·åš")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Chat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setText"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ğŸŸ¡ A different function whenever `text` changes")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" onClick "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useCallback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendMessage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("SendButton onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("onClick"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"é€šè¿‡usecallbackè¿”å›ä¸€ä¸ªmemoizedå›è°ƒå‡½æ•°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é€šè¿‡usecallbackè¿”å›ä¸€ä¸ªmemoizedå›è°ƒå‡½æ•°"}},[t._v("#")]),t._v(" é€šè¿‡useCallbackè¿”å›ä¸€ä¸ªmemoizedå›è°ƒå‡½æ•°")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),n("p",[t._v("useCallback:è¿”å›ä¸€ä¸ª"),n("a",{attrs:{href:"https://en.wikipedia.org/wiki/Memoization",target:"_blank",rel:"noopener noreferrer"}},[t._v("memoized"),n("OutboundLink")],1),t._v("å›è°ƒå‡½æ•°(è®°å¿†)ã€‚"),n("span",{staticStyle:{color:"blue"}},[t._v("æŠŠå†…è”å›è°ƒå‡½æ•°åŠä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥callback,å®ƒå°†è¿”å›è¯¥å›è°ƒå‡½æ•°çš„memoizedç‰ˆæœ¬ï¼Œè¯¥å›è°ƒå‡½æ•°ä»…åœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰ä¼šæ›´æ–°ã€‚å½“ä½ æŠŠå›è°ƒå‡½æ•°ä¼ é€’ç»™ç»è¿‡ä¼˜åŒ–çš„å¹¶ä½¿ç”¨å¼•ç”¨ç›¸ç­‰æ€§å»é¿å…éå¿…è¦æ¸²æŸ“(ä¾‹å¦‚shouldComponentUpdate)çš„å­ç»„ä»¶æ—¶ï¼Œå®ƒå°†éå¸¸æœ‰ç”¨ã€‚useCallback(fn, deps)ç›¸å½“äºuseMemo(() => fn, deps)")])])]),t._v(" "),n("p",[n("span",{staticStyle:{color:"red"}},[n("strong",[t._v("æœ€ç»ˆä½¿å¾—onClickçš„å¼•ç”¨ä½¿ç”¨ä¸å˜")])])]),t._v(" "),n("p",[n("strong",[t._v('ä½†æ˜¯ï¼ŒonClickè¿™ä¸ªæ–¹æ³•æœ‰éœ€è¦ä¿è¯æ¯æ¬¡éƒ½æ‹¿åˆ°æœ€æ–°çš„ã€æ­£ç¡®çš„textï¼Œæ‰€ä»¥ä»–çš„depsä¸­å°±è‡ªç„¶æ˜¯è®¾ç½®äº†text----åäº†ï¼Œ"åˆä¼šåˆ°æœ€åˆçš„èµ·ç‚¹"ã€‚éšç€æ¯ä¸€æ¬¡keystroke, onClickåˆå˜æˆäº†ä¸Šé¢çš„æƒ…å†µ')])]),t._v(" "),n("blockquote",[n("p",[t._v("ğŸŸ¡ Always a different function")])]),t._v(" "),n("p",[n("strong",[t._v("ä½†ä½ åˆä¸èƒ½å°†å…¶ä»depsä¸­ç§»é™¤ï¼Œç§»é™¤äº†ä»–å°±åªèƒ½æ‹¿åˆ°textçš„åˆå§‹å€¼ï¼Œå¤±å»äº†ä»–æœ¬è¯¥æœ‰çš„åŠŸèƒ½...")])]),t._v(" "),n("h3",{attrs:{id:"useeventæ¥æ•´ä¸ªæ´»"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#useeventæ¥æ•´ä¸ªæ´»"}},[t._v("#")]),t._v(" useEventæ¥æ•´ä¸ªæ´»")]),t._v(" "),n("p",[n("span",{staticStyle:{color:"red"}},[t._v("useEventå°±æ˜¯ä¸ºäº†è§£å†³æ­¤é—®é¢˜ï¼Œæ‰€ä»¥å®ƒå¹²è„†ä¸è¦depsäº†ï¼Œä»–å°±æ˜¯ä¸€ç›´è¿”å›ä¸€ä¸ªç›¸åŒçš„å‡½æ•°å¼•ç”¨ï¼Œå“ªæ€•textå‘ç”Ÿå˜åŒ–ã€‚"),n("strong",[t._v("å½“ç„¶ï¼Œä¿è¯å®ƒä¹Ÿèƒ½æ‹¿åˆ°æœ€æ–°ã€æ­£ç¡®çš„text")])])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Chat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setText"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// âœ…Always the same function (even if 'text' change)")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" onClick "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEvent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendMessage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("SendButton onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("onClick"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("ç°åœ¨å¥½äº†")]),t._v(" "),n("ul",[n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("onClickçš„å¼•ç”¨ä½¿ç”¨æ˜¯åŒä¸€ä¸ª")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"blue"}},[t._v("ä¿è¯æ¯æ¬¡éƒ½èƒ½æ‹¿åˆ°æœ€æ–°çš„ã€æ­£ç¡®çš„text")])])]),t._v(" "),n("hr"),t._v(" "),n("p",[t._v("å½“ç„¶è¿˜æœ‰å…¶ä»–ä¸€äº›åœºæ™¯ï¼Œä½†æ˜¯å¤§è‡´éœ€æ±‚åŸç†ç›¸åŒï¼Œ"),n("strong",[t._v("å°±æ˜¯ä¸æƒ³è®©Aå› ä¸ºbå˜åŒ–è€Œæ€»æ˜¯é‡æ–°åŠ è½½ï¼Œä½†æ˜¯åˆå› ä¸ºè¦æ‹¿åˆ°bæ°å½“çš„å€¼ï¼Œæ‰€ä»¥depsä¸­å¿…é¡»b,å¯¼è‡´ä¸å¾—ä¸é‡æ–°åŠ è½½")]),t._v('ï¼Œæ‰è¿›äº†"åœˆåœˆåœ†åœ†åœˆåœˆ~"çš„é™·é˜±ã€‚')]),t._v(" "),n("h3",{attrs:{id:"å¥½æ´»å¥½æ´»ğŸ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¥½æ´»å¥½æ´»ğŸ"}},[t._v("#")]),t._v(" å¥½æ´»å¥½æ´»ğŸ")]),t._v(" "),n("p",[t._v("æ€»è€Œè¨€ä¹‹ï¼Œç”¨useEventç»™ä»–è£¹ä¸Šå°±æ˜¯é¦™ï¼Œå°±å¯ä»¥åŒäº‹è¾¾åˆ°ä¸Šé¢ä¸¤ä¸ªæ•ˆæœ")]),t._v(" "),n("ul",[n("li",[n("span",{staticStyle:{color:"red"}},[t._v("å¼•ç”¨ä¸å˜")])]),t._v(" "),n("li",[n("span",{staticStyle:{color:"red"}},[t._v("æ‹¿åˆ°æ°å½“çš„å€¼")])])]),t._v(" "),n("h2",{attrs:{id:"è¿™æ˜¯å’‹åšåˆ°çš„"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è¿™æ˜¯å’‹åšåˆ°çš„"}},[t._v("#")]),t._v(" è¿™æ˜¯å’‹åšåˆ°çš„")]),t._v(" "),n("p",[t._v("è¯´äº†è¿™ä¹ˆå¤šï¼Œæˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯å’‹åšåˆ°çš„")]),t._v(" "),n("p",[t._v("ä»–å¤§æ¦‚å°±æ˜¯è¿™ä¹ˆä¸ªå½¢çŠ¶(ä¸æ˜¯æºç å°±é•¿è¿™æ ·)")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// (!) Approximate behavior")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEvent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("handler")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" handlerRef "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// In a real implementation, this would run before layout effects")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useLayoutEffect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    handlerRef"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useCallback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// In a real implementation, this would throw if called during render")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fn "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" handlerRef"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"å…ˆå›é¡¾å‡ ä¸ªhookç›¸å…³çŸ¥è¯†ç‚¹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å…ˆå›é¡¾å‡ ä¸ªhookç›¸å…³çŸ¥è¯†ç‚¹"}},[t._v("#")]),t._v(" å…ˆå›é¡¾å‡ ä¸ªHookç›¸å…³çŸ¥è¯†ç‚¹")]),t._v(" "),n("ul",[n("li",[n("p",[n("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/hooks-reference.html#useref",target:"_blank",rel:"noopener noreferrer"}},[t._v("useRef"),n("OutboundLink")],1)]),t._v(" "),n("blockquote",[n("p",[n("span",{staticStyle:{color:"red"}},[t._v("useRefè¿”å›ä¸€ä¸ªå¯å˜çš„refå¯¹è±¡ï¼Œå…¶.currentå±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ å…¥çš„å‚æ•°(initialValue).è¿”å›refå¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…æŒç»­å­˜åœ¨")]),t._v("\nè¿™é‡Œé€šè¿‡useRefä¿å­˜å›è°ƒå‡½æ•°handleråˆ°handlerRef.currentï¼Œç„¶åå†åœ¨useCallbackä¸­ä»handlerRef.currentæ¥å–å‡½æ•°åœ¨è°ƒç”¨ï¼Œè¿™è¾¹é¿å…äº†ç›´æ¥è°ƒç”¨ï¼Œè·³å‡ºäº†é—­åŒ…é™·é˜±ã€‚å¹¶ä¸”ä¸å‡ºæ„å¤–çš„è¯handleråœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…æŒç»­å­˜åœ¨ï¼Œä¹Ÿå°±æ˜¯"),n("strong",[t._v("åªæœ‰ä¸€ä¸ªå¼•ç”¨")])])])]),t._v(" "),n("li",[n("p",[t._v("useLayoutEffect")]),t._v(" "),n("p",[t._v("è¿™ä¸ª"),n("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/hooks-reference.html#uselayouteffect",target:"_blank",rel:"noopener noreferrer"}},[t._v("useLayoutEffect"),n("OutboundLink")],1),t._v("å¯èƒ½æ²¡é‚£ä¹ˆå¸¸ç”¨ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ˜¯å•¥")]),t._v(" "),n("blockquote",[n("p",[t._v("å…¶å‡½æ•°ç­¾åä¸useEffectç›¸åŒï¼Œä½†å®ƒä¼šåœ¨æ‰€æœ‰çš„DOMå˜æ›´ä¹‹ååŒæ­¥è°ƒç”¨effectã€‚å¯ä»¥ä½¿ç”¨å®ƒæ¥è¯»å–DOMå¸ƒå±€å¹¶åŒæ­¥è§¦å‘é‡æ¸²æŸ“ã€‚åœ¨æµè§ˆå™¨æ‰§è¡Œç»˜åˆ¶ä¹‹å‰ï¼ŒuseLayoutEffectå†…éƒ¨çš„æ›´æ–°è®¡åˆ’å°†è¢«åŒæ­¥åˆ·æ–°")])])]),t._v(" "),n("li",[n("p",[t._v("useEffect")]),t._v(" "),n("p",[t._v("å›é¡¾ä¸€ä¸‹"),n("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/hooks-reference.html#useeffect",target:"_blank",rel:"noopener noreferrer"}},[t._v("useEffect"),n("OutboundLink")],1)]),t._v(" "),n("blockquote",[n("p",[n("span",{staticStyle:{color:"blue"}},[t._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œeffectå°†åœ¨æ¯è½®æ¸²æŸ“ç»“æŸåæ‰§è¡Œ")])])])]),t._v(" "),n("li",[n("p",[t._v("useLayoutEffect vs useEffect")]),t._v(" "),n("p",[t._v('ç°åœ¨æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ä¸¤è€…åŒºåˆ«ï¼ŒuseLayoutEffectæ›´"å¿«",è¿™ä¸ªå¿«ä¸æ˜¯é€Ÿåº¦æ›´å¿«ï¼Œè€Œæ˜¯æŠ¢è·‘äº†ã€‚'),n("span",{staticStyle:{color:"blue"}},[t._v(">useLayoutEffectæ˜¯åœ¨renderä¹‹å‰åŒæ­¥æ‰§è¡Œï¼ŒuseEffectåœ¨renderä¹‹åå¼‚æ­¥æ‰§è¡Œï¼Œè¿™å°±ä¿è¯useLayoutEffecté‡Œçš„å›è°ƒè‚¯å®šæ¯”useEffectæ›´æ—©è¢«è°ƒç”¨ã€è¢«æ‰§è¡Œ")])])]),t._v(" "),n("li",[n("p",[t._v("usecallback")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("æ‰§è¡Œæ—¶æœº")]),t._v(" "),n("p",[t._v("å‰é¢è¯´åˆ°")]),t._v(" "),n("blockquote",[n("p",[t._v("useCallback(fn, deps)ç›¸å½“äºusememo(() => fn, deps)")])]),t._v(" "),n("p",[t._v("æ–‡æ¡£é‡Œè¿™æ ·è¯´"),n("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/hooks-reference.html#usememo",target:"_blank",rel:"noopener noreferrer"}},[t._v("usememo"),n("OutboundLink")],1),t._v("çš„")]),t._v(" "),n("blockquote",[n("p",[t._v("è®°ä½ï¼Œ"),n("span",{staticStyle:{color:"blue"}},[t._v("ä¼ å…¥useMemoçš„å‡½æ•°ä¼šåœ¨æ¸²æŸ“æœŸé—´æ‰§è¡Œã€‚")]),t._v("è¯·ä¸è¦åœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨æ‰§è¡Œä¸æ¸²æŸ“æ— å…³çš„äº‹æƒ…ï¼Œè¯¸å¦‚å‰¯ä½œç”¨è¿™ç±»çš„æ“ä½œå±äºuseEffectçš„é€‚ç”¨èŒƒç•´ï¼Œ è€Œä¸æ˜¯useMemo")])]),t._v(" "),n("p",[t._v("ä¹Ÿå°±å®ƒæ˜¯åœ¨renderæ—¶æ‰§è¡Œçš„ï¼Œä¹Ÿå°±ä¿è¯äº†èµ‹å€¼handlerç»™handleRef.currentæ˜¯åœ¨å‰é¢å‘ç”Ÿ")])]),t._v(" "),n("li",[n("p",[t._v("è¿™é‡Œçš„ä½œç”¨")]),t._v(" "),n("p",[t._v("è¿™é‡Œè¿”å›çš„æ˜¯ä¸€ä¸ªuseCallbackåŒ…è£¹åmemoizedå‡½æ•°ï¼Œå…¶ä¸­ä»handlerRef.currentä¸­è·å–å‡½æ•°ï¼Œå¹¶ä¸”depsä¸º[]ï¼Œä¹Ÿå°±è¯´ä»–ä¸ä¼šå†æ¬¡æ›´æ–°")])])])])]),t._v(" "),n("h2",{attrs:{id:"æ‹ä¸€æ‹ğŸŒŠ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ‹ä¸€æ‹ğŸŒŠ"}},[t._v("#")]),t._v(" æ‹ä¸€æ‹ğŸŒŠ")]),t._v(" "),n("p",[t._v("å›é¡¾å®ŒçŸ¥è¯†ç‚¹æˆ‘ä»¬ä¹Ÿå°±ç¼•æ¸…äº†è¿™ä¸ªuseEventæ–¹æ³•ï¼Œä¸€å¥è¯æ€»ç»“å°±æ˜¯ï¼š"),n("span",{staticStyle:{color:"blue"}},[t._v("å®ƒæ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°handlerä½œä¸ºå‚æ•°ï¼Œ"),n("strong",[t._v("æä¾›ç»™ä½ ä¸€ä¸ªç¨³å®šçš„å‡½æ•°(å§‹ç»ˆåªæœ‰ä¸€ä¸ªå¼•ç”¨)å¹¶ä¸”è°ƒç”¨æ—¶éƒ½æ˜¯ç”¨çš„ä½ ä¼ å…¥çš„æœ€æ–°çš„å‚æ•°...args")]),t._v("--- æ¯”å¦‚å‰é¢æ¡ˆä¾‹ä¸­textï¼Œå§‹ç»ˆéƒ½æ˜¯"),n("strong",[t._v("æœ€æ–°çš„ã€æ­£ç¡®çš„ã€æ°å½“çš„")])])]),t._v(" "),n("p",[t._v("åœ¨ç»“åˆä¸€å¼€å§‹çš„æ¡ˆä¾‹ï¼Œå¤§æ¦‚æµç¨‹æ˜¯è¿™æ ·")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1882),alt:"useEventæµç¨‹"}})]),t._v(" "),n("h2",{attrs:{id:"èµ„æ–™"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#èµ„æ–™"}},[t._v("#")]),t._v(" èµ„æ–™")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://mp.weixin.qq.com/s/9hV3cYF9VWlmlBdiR1g7Zw",target:"_blank",rel:"noopener noreferrer"}},[t._v("useEventï¼šä¸€ä¸ªæ˜¾è‘—é™ä½Hookså¿ƒæ™ºè´Ÿæ‹…çš„åŸç”ŸHook"),n("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);