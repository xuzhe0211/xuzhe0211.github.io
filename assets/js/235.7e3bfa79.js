(window.webpackJsonp=window.webpackJsonp||[]).push([[235],{1563:function(t,a,s){t.exports=s.p+"assets/img/23bb981a43d448f0818f350dbe87e049~tplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.4c2b1f45.gif"},1564:function(t,a,s){t.exports=s.p+"assets/img/585a13924e9a4e68ba22a4bd1b1168af~tplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.ac6312ab.gif"},2671:function(t,a,s){"use strict";s.r(a);var n=s(46),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"前言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),n("p",[t._v("写过hybrid的同学，想必都会遇到这样的需求，如果用户安装了自己的APP，就会打开APP或跳转到App内的某个页面，如果没安装则引导用户到对应页面或应用商店下载。这里就涉及到了H5与Native之间的交互，为什么H5能够唤起APP并且跳转到对应页面？")]),t._v(" "),n("p",[t._v("就算你没写过想必也体验过，最常见的就是抖音里面的一些广告，如果你点击了广告，他判断你手机装了对应APP，那他就会去打开那个APP，如果没安装，他会帮你跳转到应用商店去下载，这个还算人性化一点的，有些直接后台给你去下载，你完全无感知。\n哈哈，是不是觉得这种技术很神奇，今天我们就一起来看看它是如何实现的～")]),t._v(" "),n("h2",{attrs:{id:"唤端体验"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#唤端体验"}},[t._v("#")]),t._v(" 唤端体验")]),t._v(" "),n("p",[t._v("实现之前我们先简单体验一下什么是唤端")]),t._v(" "),n("p",[n("img",{attrs:{src:s(1563),alt:"唤端体验"}})]),t._v(" "),n("p",[t._v("从上图中，我们可以看到在浏览器中我们点击打开知乎，系统会提示我们是否在知乎中打开，当我们点击打开时，知乎就被打开了，这就是一个简单的唤端体验。")]),t._v(" "),n("p",[n("strong",[t._v("有了这项技术我们就可以实现H5唤起APP应用了，现阶段的引流方式大都得益于这种技术，比如广告投放、用户拉新、引流等。")])]),t._v(" "),n("h2",{attrs:{id:"唤端技术"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#唤端技术"}},[t._v("#")]),t._v(" 唤端技术")]),t._v(" "),n("p",[t._v("体验过后，我们来聊一聊它的视线技术是怎么样的，唤端技术我们也称之为 deep link技术。当然,不同平台的实现方式有些不同，一般常见的有几种，分别是：")]),t._v(" "),n("ul",[n("li",[t._v("URL Scheme(通用)")]),t._v(" "),n("li",[t._v("Universal Link(IOS)")]),t._v(" "),n("li",[t._v("App Link、Chrome Intents(android)")])]),t._v(" "),n("h3",{attrs:{id:"url-scheme-通用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#url-scheme-通用"}},[t._v("#")]),t._v(" URL Scheme(通用)")]),t._v(" "),n("p",[t._v("URL Scheme 是一种通用的技术，各平台的兼容性也很好，它一般由协议名、路径、参数组成。这个一般是由Native开发的同学提供，我们前端同学在拿到这个scheme之后，就可以用来打开APP或APP内的某个页面了")]),t._v(" "),n("h4",{attrs:{id:"url-scheme组成"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#url-scheme组成"}},[t._v("#")]),t._v(" URL Scheme组成")]),t._v(" "),n("blockquote",[n("p",[t._v("[scheme:][//authority][path][?query][#fragment]")])]),t._v(" "),n("h4",{attrs:{id:"常用app的url-scheme"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#常用app的url-scheme"}},[t._v("#")]),t._v(" 常用APP的URL Scheme")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("APP")]),t._v(" "),n("th",[t._v("微信")]),t._v(" "),n("th",[t._v("支付宝")]),t._v(" "),n("th",[t._v("淘宝")]),t._v(" "),n("th",[t._v("QQ")]),t._v(" "),n("th",[t._v("知乎")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("URL Scheme")]),t._v(" "),n("td",[t._v("weixin://")]),t._v(" "),n("td",[t._v("alipay://")]),t._v(" "),n("td",[t._v("taobao://")]),t._v(" "),n("td",[t._v("mqq://")]),t._v(" "),n("td",[t._v("zhihu://")])])])]),t._v(" "),n("h4",{attrs:{id:"打开方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#打开方式"}},[t._v("#")]),t._v(" 打开方式")]),t._v(" "),n("p",[t._v("常用的有以下几种方式")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("直接通过window.location.href 跳转")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhihu://'")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("通过iframe跳转")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" iframe "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'iframe'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\niframe"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("display "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'none'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\niframe"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhihu://'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("iframe"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("直接使用a标签进行跳转")])]),t._v(" "),n("li",[n("p",[t._v("通过js bridge来打开")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("miduBridge")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'openAppByRouter'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhihu://'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])]),t._v(" "),n("h4",{attrs:{id:"判断是否成功唤起"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#判断是否成功唤起"}},[t._v("#")]),t._v(" 判断是否成功唤起")]),t._v(" "),n("p",[t._v("当用户唤起Ap失败时，我们希望可以引导用户去进行下载。那么我们怎么才能知道当前APP是否成功唤起呢？")]),t._v(" "),n("p",[t._v("我们可以监听当前页面的 visibilitychange 事件，如果页面隐藏，则表示唤端成功，否则唤端失败，跳转到应用商店。")]),t._v(" "),n("p",[t._v("ok，我们来尝试实现一下")]),t._v(" "),n("p",[t._v("首先我手机上并没有安装腾讯微博，所以也就无法唤起，我们让他跳到应用商店的应用下载页，这里就用淘宝的下载页代替一下")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("open_app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("open_app_title"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("前端唤端测试demo"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("open_btn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("open"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("打开腾讯微博"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" timer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'oopenApp'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        methods"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("watchVisibility")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'visibilitychange'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听页面visibility")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hidden"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果页面隐藏了，则表示唤起成功，这时候需要清除下下载定时器")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                timer "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 没找到腾讯微博的下载页，这里暂时以淘宝下载页代替")]),t._v("\n                    window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://apps.apple.com/cn/app/id387682726'")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("， "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'TencentWeibo://'")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("less"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token style"}},[n("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n"),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".open_app_title")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("20/"),n("span",{pre:!0,attrs:{class:"token atrule"}},[n("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@rem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".open_btn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("margin-top")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("20/"),n("span",{pre:!0,attrs:{class:"token atrule"}},[n("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@rem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("10/"),n("span",{pre:!0,attrs:{class:"token atrule"}},[n("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@rem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-radius")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("8/"),n("span",{pre:!0,attrs:{class:"token atrule"}},[n("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@rem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("background")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" salmon"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #fff"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-size")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("16/"),n("span",{pre:!0,attrs:{class:"token atrule"}},[n("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@rem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[n("img",{attrs:{src:s(1564),alt:"唤端动画"}})]),t._v(" "),n("h4",{attrs:{id:"适用性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#适用性"}},[t._v("#")]),t._v(" 适用性")]),t._v(" "),n("p",[t._v("URL Scheme 这种方式兼容性好，无论安卓或者IOS都能支持，是目前最常用的方式。从上图中我们能够看出它的一些比较明显的缺点：")]),t._v(" "),n("ol",[n("li",[n("p",[n("strong",[t._v("无法准确判断是否唤起成功，因为本质上这种方式就是打开一个链接，并且还不是普通的http链接，所以如果用户没有安装对应的app，那么尝试跳转后在浏览器中没有任何反应，通过定时器来引导用户跳转到商店，但这个定时器的时间有没有准确值，不同的手机的唤端时间也不同，我们只能大概得估计一下它的时间来实现，一般社会3000ms左右比较合适")])])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("从上图中我们可以看到会有一个弹窗提示你是否在对应APP中打开，这就可能导致用户流式")])])]),t._v(" "),n("li",[n("p",[t._v("有 RUL Scheme 劫持风险，比如有一个app也向系统注册了 zhihu:// 这个scheme，唤起流量可能会被劫持到这个app里")])]),t._v(" "),n("li",[n("p",[t._v("容易被屏蔽，app很轻松就可以拦截掉通过URL Scheme 发起的跳转，比如微信内经常看到一些被屏幕的现象")])])]),t._v(" "),n("h3",{attrs:{id:"universal-link-ios"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#universal-link-ios"}},[t._v("#")]),t._v(" Universal Link (IOS)")]),t._v(" "),n("p",[t._v("Universal Link 是在IOS 9中新增的功能，使用它可以直接通过https协议的链接来打开APP。它相比以前URL Scheme的有点在于它是使用https协议，所以如果没有唤端成功，那么就会直接打开这个网页，不需要在判断是否唤起成功了，并且使用了Universal Link，不会在弹出是否打开了弹出，对用户来说，唤端的效率更高了")]),t._v(" "),n("h4",{attrs:{id:"原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[t._v("#")]),t._v(" 原理")]),t._v(" "),n("ul",[n("li",[t._v("在App中注册自己要支持的域名")]),t._v(" "),n("li",[t._v("在自己域名的根目录下配置一个 apple-app-site-association 文件即可(具体的配置前端同学不用关注，只需要与ios同学确认好支持的域名就可)")])]),t._v(" "),n("h4",{attrs:{id:"打开方式-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#打开方式-2"}},[t._v("#")]),t._v(" 打开方式")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("openByUniversal")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打开知乎问题页")]),t._v("\n  window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://oia.zhihu.com/questions/64966868'")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// oia.zhihu.com")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),t._v(" "),n("h4",{attrs:{id:"适用性-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#适用性-2"}},[t._v("#")]),t._v(" 适用性")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("相对 URL Scheme,universal links 有一个较大优点就是他唤端时没有弹窗提示是否打开提升用户体验，可以见到一部分用户的流失")])]),t._v(" "),n("li",[n("p",[t._v("无需关心用户是否安装对应的APP，对于没有安装的用户，点击链接就会直接打开对应的页面，因为它也是http协议的路径，这样也能一定程度解决 URL Scheme 无法准确判断唤端失败的问题；")])]),t._v(" "),n("li",[n("p",[t._v("只能够在iOS上使用")])]),t._v(" "),n("li",[n("p",[t._v("只能由用户主动触发")])])]),t._v(" "),n("h3",{attrs:{id:"app-link、chrome-intents-android"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#app-link、chrome-intents-android"}},[t._v("#")]),t._v(" App Link、Chrome Intents(Android)")]),t._v(" "),n("h4",{attrs:{id:"app-link"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#app-link"}},[t._v("#")]),t._v(" App Link")]),t._v(" "),n("p",[t._v("在2015年的google I/O大会上，Android M宣布了一个新特性：App Link让用户在点击一个普通的web链接的时候可以打开指定App的指定页面，前提是这个App已经安装并且经过了验证，否则会显示一个打开确定选项的弹窗，只支持Android M以上系统")]),t._v(" "),n("p",[t._v("App Links的最大作用，就是可以避免从页面唤醒App时出现的选择浏览器选择框")]),t._v(" "),n("p",[t._v("前提是必须注册相应的Scheme，就可以实现直接打开关联的App")]),t._v(" "),n("ul",[n("li",[t._v("App Links在国内支持还不够，部分安卓浏览器并不支持跳转至App，而是直接在浏览器上打开对应页面")]),t._v(" "),n("li",[t._v("系统询问是否打开对应App时，假如用户选择“取消”并且选中了“记住此操作”，那么用户以后就无法再跳转App。")])]),t._v(" "),n("h4",{attrs:{id:"chrome-intents"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#chrome-intents"}},[t._v("#")]),t._v(" Chrome Intents")]),t._v(" "),n("ul",[n("li",[t._v("Chrome Intent 是Android设备上 Chrome浏览器中RUI方案的深层链接替代品")]),t._v(" "),n("li",[t._v("如果App已安装，则通过配置 URI SCHEME 打开APP")]),t._v(" "),n("li",[t._v("如果app未安装，配置了 fallback url 的跳转 fallback URI，没有配置的则跳转到应用市场。")])]),t._v(" "),n("p",[n("strong",[t._v("这两种方案在国内的应用都比较少")])]),t._v(" "),n("h3",{attrs:{id:"方案对比"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#方案对比"}},[t._v("#")]),t._v(" 方案对比")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("''")]),t._v(" "),n("th",[t._v("URL Scheme")]),t._v(" "),n("th",[t._v("Universal Link")]),t._v(" "),n("th",[t._v("App Link")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("< ios9")]),t._v(" "),n("td",[t._v("支持")]),t._v(" "),n("td",[t._v("不支持")]),t._v(" "),n("td",[t._v("不支持")])]),t._v(" "),n("tr",[n("td",[t._v(">= ios9")]),t._v(" "),n("td",[t._v("支持")]),t._v(" "),n("td",[t._v("支持")]),t._v(" "),n("td",[t._v("不支持")])]),t._v(" "),n("tr",[n("td",[t._v("<android 6")]),t._v(" "),n("td",[t._v("支持")]),t._v(" "),n("td",[t._v("不支持")]),t._v(" "),n("td",[t._v("不支持")])]),t._v(" "),n("tr",[n("td",[t._v(">= android 6")]),t._v(" "),n("td",[t._v("支持")]),t._v(" "),n("td",[t._v("不支持")]),t._v(" "),n("td",[t._v("支持")])]),t._v(" "),n("tr",[n("td",[t._v("是否需要HTTPS")]),t._v(" "),n("td",[t._v("不需要")]),t._v(" "),n("td",[t._v("需要")]),t._v(" "),n("td",[t._v("需要")])]),t._v(" "),n("tr",[n("td",[t._v("是否需要客户端")]),t._v(" "),n("td",[t._v("需要")]),t._v(" "),n("td",[t._v("需要")]),t._v(" "),n("td",[t._v("需要")])]),t._v(" "),n("tr",[n("td",[t._v("无对应App时的现象")]),t._v(" "),n("td",[t._v("报错/无反应")]),t._v(" "),n("td",[t._v("跳到对应页面")]),t._v(" "),n("td",[t._v("跳到对应的页面")])])])]),t._v(" "),n("h4",{attrs:{id:"uri-scheme"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#uri-scheme"}},[t._v("#")]),t._v(" URI Scheme")]),t._v(" "),n("ul",[n("li",[t._v("URI Scheme的兼容性最高，但使用体验相对较差")]),t._v(" "),n("li",[t._v("当要被唤起的APP没有安装时，这个链接就会出错，页面无反应")]),t._v(" "),n("li",[t._v("当注册多个scheme相同时候，没有办法区分")]),t._v(" "),n("li",[t._v("不支持从其他app中的UIWebView中跳转到目标app,所以IOS和Android都出现了自己独有的解决方案")])]),t._v(" "),n("h4",{attrs:{id:"universal-link"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#universal-link"}},[t._v("#")]),t._v(" Universal Link")]),t._v(" "),n("ul",[n("li",[t._v("已经安装APP，直接唤起APP；App没有安装，就会跳去对应的 web link。")]),t._v(" "),n("li",[t._v("universal Link 是从服务器上查询是哪个需要被打开，所以不会存在冲突问题")]),t._v(" "),n("li",[t._v("universal Link 支持从其他app中的 UIWebView 中跳转到目标app")]),t._v(" "),n("li",[t._v("缺点在于会记住用户的选择：在用户点击了Universal link之后，IOS会去检查用户最近一次是选择了直接打开app还是打开网站。一旦用户点击了这个选项，他就会通过safiri打开你的网站。并且在之后的操作中，默认一直延续这个选择，除非用户从你的webpage上通过点击Smart App Banner上的OPEN按钮打开。")])]),t._v(" "),n("h3",{attrs:{id:"app-link-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#app-link-2"}},[t._v("#")]),t._v(" APP Link")]),t._v(" "),n("ul",[n("li",[t._v("优点与universal link类似")]),t._v(" "),n("li",[t._v("缺点在于国内的支持相对较差，在有的浏览器或手机ROM中并不能连接至APP，而是在浏览中打开了对应链接")]),t._v(" "),n("li",[t._v("在询问是否用APP打开打开对应链接时，如果选择了』取消『并且』记住选择『被勾上，那么下次你再次想链接至APP时就不会有任何反应")])]),t._v(" "),n("h2",{attrs:{id:"推荐阅读"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#推荐阅读"}},[t._v("#")]),t._v(" 推荐阅读")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.cn/post/7097784616961966094#heading-13",target:"_blank",rel:"noopener noreferrer"}},[t._v("H5如何实现唤起APP"),n("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=e.exports}}]);