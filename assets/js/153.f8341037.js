(window.webpackJsonp=window.webpackJsonp||[]).push([[153],{1674:function(t,s){t.exports="data:image/png;base64,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"},1675:function(t,s,a){t.exports=a.p+"assets/img/9b245ca2090e406da2b5c5b199825c0a~tplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.83996041.png"},1676:function(t,s,a){t.exports=a.p+"assets/img/044aefd7381d4e4bbeb9aae8a69e09d5~tplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.279fe18e.png"},1677:function(t,s,a){t.exports=a.p+"assets/img/f3c46c8f61b2491e8d3c9ffd5bb21c0e~tplv-k3u1fbpfcp-zoom-in-crop-mark_1512_0_0_0.3c1d442a.png"},2725:function(t,s,a){"use strict";a.r(s);var n=a(46),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"项目优化前"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#项目优化前"}},[t._v("#")]),t._v(" 项目优化前")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1674),alt:"项目优化前"}})]),t._v(" "),n("p",[t._v("上面是dist文件夹的截图，里面的内容已经有30mb了，是时候该做点什么了。")]),t._v(" "),n("h2",{attrs:{id:"分析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#分析"}},[t._v("#")]),t._v(" 分析")]),t._v(" "),n("p",[t._v("想要实现优化，首先我得先知道，是什么占了这么大的空间。是图片？是库？还是其他静态资源？")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("将文件分门别类，js、css这些资源目录分别打包到对应的文件夹下")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("build"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rollupOptions"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        output"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            chunkFileNames"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'js/[name]-[hash].js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入文件名的名称")]),t._v("\n            entryFileNames"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'js/[name]-[hash].js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 包的入口文件名称")]),t._v("\n            assetFileNames"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[ext]/[name]-[hash].[ext]'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 资源文件像 字体，图片等")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("查看项目的依赖，找出大块头")]),t._v(" "),n("blockquote",[n("p",[t._v("rollup-plugin-visualizer 是一个打包体积分析插件，对应webpack中的 webpack-bundle-analyzer。配置好后运行构建命令会生成一个stats.html")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("npm i rollup"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("plugin"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("visualizer "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" visualizer "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rollup-plugin-visualizer'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nplugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("visualizer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("open"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" strue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run build"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" // 打包结果后会出现下图\n")])])]),n("p",[n("img",{attrs:{src:a(1675),alt:"打包visuallizer"}})]),t._v(" "),n("p",[t._v("从体积能看到，这里已经达到了7MB大小了，是时候该做点什么了？")])])]),t._v(" "),n("h2",{attrs:{id:"优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#优化"}},[t._v("#")]),t._v(" 优化")]),t._v(" "),n("h3",{attrs:{id:"拆分包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#拆分包"}},[t._v("#")]),t._v(" 拆分包")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),n("p",[t._v("这里有一个自己的个人见解: 如果不同模块使用的插件基本相同那就尽可能打包在同一个文件中，减少http请求，如果不同模块使用不同插件明显不同，那就分成不同模块打包。这是一个矛盾体。这里使用的是最小化拆分包。如果是前者可以直接选择返回'vendor'")])]),t._v(" "),n("p",[n("a",{attrs:{href:"https://cn.vitejs.dev/guide/build.html#chunking-strategy",target:"_blank",rel:"noopener noreferrer"}},[t._v("vite 官网"),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("rollupOptions"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  output"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("manualChunks")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("includes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node_modules"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 让每个插件都打包成独立的文件")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" id "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node_modules/"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"去除debugger"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#去除debugger"}},[t._v("#")]),t._v(" 去除debugger")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i terser -D\n")])])]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("terserOptions"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    compress"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        drop_console"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        drop_debugger"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"cdn加速"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cdn加速"}},[t._v("#")]),t._v(" CDN加速")]),t._v(" "),n("p",[t._v("内容分发网络(Content Delivery Network, 简称CDN)就是让用户从最近的服务器请求资源,提升网络请求速度。同时减少应用打包出来的包体积，利用浏览器缓存，不会变动的文件长期缓存(不建议使用第三方cdn,这里学习讨论使用)")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("npm i rollup"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("plugin"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("external"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("globals "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\nnpm i vite"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("plugin"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("html "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\n")])])]),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    <%- vuescript %>\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createHtmlPlugin "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vite-plugin-html'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nrollupOptions"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 告诉打包工具 在 external 配置的都是外部依赖项 不需要打包")]),t._v("\n    external"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    plugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("externalGlobals")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在项目中引入的变量名称：CDN包导出的名称，一般在CDN保重都是可见的")]),t._v("\n            vue"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nplugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createHtmlPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        minify"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        inject"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                vuescript"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<script src=\"https://cdn.jsdelivr.net/npm/vue@3.2.37\"><\/script>'")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),n("p",[n("img",{attrs:{src:a(1676),alt:"CDN加速"}})]),t._v(" "),n("h3",{attrs:{id:"按需导入"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#按需导入"}},[t._v("#")]),t._v(" 按需导入")]),t._v(" "),n("p",[t._v("仔细看上面那张图右下部分的模块，不知道你会不会感觉到奇怪，明明是同一个包，为什么既出现了lodash又出现了lodash-es。其实lodash-es 是 lodash 的 es modules 版本 ，是着具备 ES6 模块化的版本，体积小，而lodash是common.js版本。lodash最大的缺陷就是无法按需导入。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" _ "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lodash-es'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 你将会把整个lodash的库引入到项目")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" cloneDeep "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lodash-es'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 你将会把引入cloneDeep引入到项目")]),t._v("\n")])])]),n("p",[t._v("项目中用到lodash的地方也不多，经过手动修改一下，看现在已经看不到lodash的库了")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1677),alt:"lodash"}})]),t._v(" "),n("h3",{attrs:{id:"文件压缩"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#文件压缩"}},[t._v("#")]),t._v(" 文件压缩")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("npm install vite"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("plugin"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("compression "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// build.rollupOptions.plugins[]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("viteCompression")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    verbose"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否在控制台中输出压缩结果")]),t._v("\n    disable"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    threshold"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10240")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果体积大于阈值，将被压缩，单位为b，体积过小时请不要压缩，以免适得其反")]),t._v("\n    algorithm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gzip'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 压缩算法，可选['gzip'，' brotliccompress '，'deflate '，'deflateRaw']")]),t._v("\n    ext"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.gz'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    deleteOriginFile"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 源文件压缩后是否删除(我为了看压缩后的效果，先选择了true)")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("当请求静态资源时,服务器发现请求资源位gzip的格式时，应该设置响应头 content-encoding: gzip.")]),t._v(" "),n("p",[n("strong",[t._v("因为浏览器解压也需要时间，所以代码体积不是很大的话不建议使用gzip压缩")])]),t._v(" "),n("h3",{attrs:{id:"图片压缩"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#图片压缩"}},[t._v("#")]),t._v(" 图片压缩")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("yarn add vite"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("plugin"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("imagemin "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// or")]),t._v("\nnpm i vite"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("plugin"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("imagemin "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("D")]),t._v("\n")])])]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" viteImagemin "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vite-plugin-imagemin'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nplugin"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("viteImagemin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        gifsicle"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            optimizationLevel"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            interlaced"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        optipng"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            optimizationLevel"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        mozjpeg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            quality"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        pngquant"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            quality"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.8")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.9")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            speed"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        svgo"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            plugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'removeViewBox'")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'removeEmptyAttrs'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                active"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),n("p",[t._v("viteImagemin 在国内比较难安装，容易出现报错，可以尝试一下下面集中解决方案")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("使用 yarn 在 package.json 内配置(推荐)")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"resolutions"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bin-wrapper"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm:bin-wrapper-china"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("使用 npm,在电脑 host 文件加上如下配置即可")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[t._v("199.232")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v(".4")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v(".133")]),t._v(" raw"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("githubusercontent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com\n")])])])]),t._v(" "),n("li",[n("p",[t._v("使用 cnpm 安装(不推荐)")])])]),t._v(" "),n("h2",{attrs:{id:"填坑"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#填坑"}},[t._v("#")]),t._v(" 填坑")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("坑1")]),t._v(" "),n("p",[t._v("在优化过程中发现有什么rollupOption不生效，请检查vite版本。上述配置在vite4.0版本生效，如需升级，请前往官方迁移文档。")])]),t._v(" "),n("li",[n("p",[t._v("坑2")]),t._v(" "),n("blockquote",[n("p",[t._v('Uncaught TypeError: Failed to resolve module specifier "Vue". Relative references must start with either "/", "./", or "../".')])]),t._v(" "),n("p",[t._v("这里有可能是 vue-demi 引入了 vue，然而 rollup-plugin-external-globals 插件配置全局变量时不会处理 node_modules 下的依赖项，导致 vue-demi 还是通过 import 的方式与 node_modules 下的 vue 进行关联，而没有使用全局变量下的 vue，打包后 vue 已变成外部依赖项，vue-demi 自然无法找到 vue，所以就报错了。")]),t._v(" "),n("p",[t._v("而vue-demi是哪里来的呢，我的项目是由于element-plus引用了vue-demi，所以此时解决方案就是将vue-demi也用cdn引入。")])])]),t._v(" "),n("h2",{attrs:{id:"总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),n("p",[t._v("到了这一步，整个文件夹已经完全瘦身了。从一开始的30MB到现在的11.8MB了。我们在项目里面放置了许多json数据(因为业务原因不能上传到服务器)，json数据已经占了差不多5、6mb的原因，所以是一个单纯的项目并没有这么大。")]),t._v(" "),n("h2",{attrs:{id:"配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// vite.config.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineConfig "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vite'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createHtmlPlugin "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vite-plugin-html'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" viteImagemin "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vite-plugin-imagemin'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" externalGlobals "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rollup-plugin-external-globals'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" visualizer "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rollup-plugin-visualizer'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" viteCompression "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vite-plugin-compression'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://vitejs.dev/config/")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineConfig")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("visualizer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" open"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将下面的添加到plugin下")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createHtmlPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      minify"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      inject"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          vuescript"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<script src=\"https://cdn.jsdelivr.net/npm/vue@3.2.25\"><\/script>'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          demiScript"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<script src=\"//cdn.jsdelivr.net/npm/vue-demi@0.13.7\"><\/script>'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          elementPlusScript"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('\n            <link href="https://cdn.jsdelivr.net/npm/element-plus@2.2.22/dist/index.min.css" rel="stylesheet">\n            <script src="https://cdn.jsdelivr.net/npm/element-plus@2.2.22/dist/index.full.min.js"><\/script>\n          ')]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          echartsSciprt"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<script src=\"https://cdn.jsdelivr.net/npm/echarts@5.0.2/dist/echarts.min.js\"><\/script>'")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("viteImagemin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      gifsicle"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        optimizationLevel"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        interlaced"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      optipng"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        optimizationLevel"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      mozjpeg"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        quality"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      pngquant"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        quality"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.8")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.9")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        speed"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      svgo"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        plugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'removeViewBox'")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'removeEmptyAttrs'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            active"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  build"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    target"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'es2020'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    minify"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'terser'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rollup 配置")]),t._v("\n    rollupOptions"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      output"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        chunkFileNames"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'js/[name]-[hash].js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入文件名的名称")]),t._v("\n        entryFileNames"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'js/[name]-[hash].js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 包的入口文件名称")]),t._v("\n        assetFileNames"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[ext]/[name]-[hash].[ext]'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 资源文件像 字体，图片等")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("manualChunks")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("includes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node_modules'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vendor'")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  告诉打包工具 在external配置的 都是外部依赖项  不需要打包")]),t._v("\n      external"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'element-plus'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'echarts'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      plugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("externalGlobals")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          vue"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Vue'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'element-plus'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ElementPlus'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          echarts"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'echarts'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue-demi'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'VueDemi'")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("viteCompression")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          verbose"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否在控制台中输出压缩结果")]),t._v("\n          disable"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          threshold"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10240")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果体积大于阈值，将被压缩，单位为b，体积过小时请不要压缩，以免适得其反")]),t._v("\n          algorithm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gzip'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 压缩算法，可选['gzip'，' brotliccompress '，'deflate '，'deflateRaw']")]),t._v("\n          ext"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.gz'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          deleteOriginFile"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 源文件压缩后是否删除")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    terserOptions"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      compress"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生产环境时移除console")]),t._v("\n        drop_console"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        drop_debugger"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[n("a",{attrs:{href:"https://juejin.cn/post/7232688124416458789",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文"),n("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);