(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{2302:function(t,a,s){"use strict";s.r(a);var e=s(46),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("经常在某些文档中或文章中可以看到这样的一个返回顶部的功能，具体交互")]),t._v(" "),e("ol",[e("li",[t._v("只有滚动一定距离才会出现，返回顶部重新隐藏")]),t._v(" "),e("li",[t._v("点击返回到顶部\n比如"),e("a",{attrs:{href:"https://l-ui.com/edge/about.design.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("LuLu UI"),e("OutboundLink")],1)])]),t._v(" "),e("p",[e("img",{attrs:{src:s(798),alt:"LuLu ui"}})]),t._v(" "),e("p",[t._v("又是点击，又是滚动的，看着好像必须要借助JavaScript了，其实也可不必，经过我的一番琢磨，仅仅使用一点点CSS就可以实现交互效果")]),t._v(" "),e("h2",{attrs:{id:"粘性滚动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#粘性滚动"}},[t._v("#")]),t._v(" 粘性滚动")]),t._v(" "),e("p",[t._v("这里就需要一点点想象了。比如这里滚动到一定距离才出现，是不是有点类似CSS sticky的概念？只不过sticky是滚动到一定距离，然后就固定到某一位置")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("元素根据正常文档流进行定位，然后相对它的**最近滚动祖先(nearest scrolling ancestor)**和containing block(最近块级祖先 nearest block-level ancestor)\n，包括table-related元素，基于top、right、bottom 和left的值进行偏移。偏移值不会影响任何其他元素的位置")])]),t._v(" "),e("p",[t._v("虽然和我们需要的交互有点出入，但是仍然可以通过一定的技巧联合起来，先简单实现以下布局")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('<a class="back"></a>\n<article>\n...很多内容\n</article>\n')])])]),e("p",[t._v("这里注意需要将.back放在前面，不然没法触发粘性定位，然后给.back加上sticky定位")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(".back {\n    position: sticky;\n    display: block;\n    top: 0;\n    border-radius: 50%;\n    background: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E %3Cpath fill='%23ffffff' d='M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z'%3E%3C/path%3E %3C/svg%3E\") center no-repeat dodgerblue;\n    background-size: 50%;\n    width: 50px;\n    height:50px;\n}\n")])])]),e("p",[t._v("由于这里的top给的为0,所以返回按钮在滚动过程中是贴在顶部的：如下")]),t._v(" "),e("p",[e("img",{attrs:{src:s(799),alt:"sticky top"}})]),t._v(" "),e("p",[t._v("这时，如果把top改为一个负值会怎么样呢？")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(".back {\n    position: sticky;\n    top: -30px;\n}\n")])])]),e("p",[t._v("可以看到，按钮会在超出屏幕-30px的地方固定")]),t._v(" "),e("p",[e("img",{attrs:{src:s(800),alt:"sticky -30"}})]),t._v(" "),e("p",[t._v("接着，我们把.back向下便宜整个屏幕位置，也就是100vh")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("position: sticky;\ntop: -30px;\ntransform: translateY(100vh);\n")])])]),e("p",[t._v("这样,和我们需要的效果已经很接近了，只是最后只出现了一部分，如下。")]),t._v(" "),e("p",[e("img",{attrs:{src:s(801),alt:"stacky"}})]),t._v(" "),e("p",[t._v("原理示意如下：\n"),e("img",{attrs:{src:s(802),alt:"stacky 原理"}})]),t._v(" "),e("p",[t._v("最后，把刚才的top设置的更小一些，直到.back可以完全出现，比如设置-60px")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(".back {\n    position: sticky;\n    top: -60px;\n    transform: translateY(100vh)；\n}\n")])])]),e("p",[t._v("这样基本完成了，不过还有一些问题")]),t._v(" "),e("h2",{attrs:{id:"右下角处理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#右下角处理"}},[t._v("#")]),t._v(" 右下角处理")]),t._v(" "),e("p",[t._v("上面的实现其实还有两个布局问题需要优化")]),t._v(" "),e("ol",[e("li",[t._v("按钮本身占据了一定的空间")]),t._v(" "),e("li",[t._v("按钮一般位于右下角")])]),t._v(" "),e("p",[e("img",{attrs:{src:s(803),alt:"示意"}})]),t._v(" "),e("p",[t._v("一般为了让一个元素不占空间，可能想到的方法是设置绝对定位。但是这里由于设置了position: sticky，所以肯定不能在设置绝对定位了。除此之外，我们还可以采用浮动float,可以轻易解决以上两个问题")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(".back {\n    float:right\n}\n")])])]),e("p",[t._v("设置右浮动有两个好处，一是脱离文档流，不影响高度，二是实现右效果，实际效果如下")]),t._v(" "),e("p",[e("img",{attrs:{src:s(804),alt:"float:left"}})]),t._v(" "),e("p",[t._v("其实到了这里，还有个小问题的，当头部的文字比较多时，可以很清楚的看到有环绕效果，如下")]),t._v(" "),e("p",[e("img",{attrs:{src:s(805),alt:"右环绕效果"}})]),t._v(" "),e("p",[t._v("如何处理呢？很简单，加一个负margin就可以了")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(".back {\n    float: right;\n    margin-top: -50px; // 自身高度\n}\n")])])]),e("p",[t._v("但是又出现了新问题，底下的按钮又漏出来了")]),t._v(" "),e("p",[e("img",{attrs:{src:s(806),alt:"底部"}})]),t._v(" "),e("p",[t._v("由于top已经被sticky占用，现在改变按钮位置只能靠transform了，这里可以用calc进行计算，同时top也要相应减少自身高度")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(".back {\n    float: right;\n    margin-top: -50px;\n    top: -110px; // 60 + 50\n    transform: translateY(calc(100vh + 50px));\n}\n")])])]),e("p",[e("img",{attrs:{src:s(807),alt:"位置隐藏"}})]),t._v(" "),e("h2",{attrs:{id:"返回顶部"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#返回顶部"}},[t._v("#")]),t._v(" 返回顶部")]),t._v(" "),e("p",[t._v("返回顶部就比较容易了，一般可以通过href='#'就可以事先，当然了为了平滑的滚动，可以加上scroll-behavior:smooth")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("html, body {\n    scroll-behavior: smooth\n}\n")])])]),e("p",[t._v("实际效果如下")]),t._v(" "),e("p",[e("img",{attrs:{src:s(808),alt:"返回顶部"}})]),t._v(" "),e("p",[t._v("最后完整代码如下")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("html,body{\n  scroll-behavior: smooth;\n}\n.back{\n  position: sticky;\n  float: right;\n  top: -110px;\n  margin-top: -50px;\n  border-radius: 50%;\n  background: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E %3Cpath fill='%23ffffff' d='M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z'%3E%3C/path%3E %3C/svg%3E\") center no-repeat dodgerblue;\n  background-size: 50%;\n  width: 50px;\n  height: 50px;\n  transform: translateY(calc(100vh + 50px));\n}\n\n// HTML\n<body>\n  <a class=\"back\" href=\"#\"></a>\x3c!--添加再这里就行了--\x3e\n  <article>\n  ...很多内容\n  </article>\n</body>\n")])])]),e("h2",{attrs:{id:"总结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),e("p",[t._v("以上借助 CSS sticky 实现了一个自动显示返回按钮的小交互，本身代码量并不复杂，其实是一点点想象力，把比较相似的效果联想起来，多多尝试，可能会带来不一样的解决方案。下面总结一下实现要点：")]),t._v(" "),e("ol",[e("li",[t._v("CSS sticky可以事先粘性滚动效果，可以设置负值")]),t._v(" "),e("li",[t._v("transformY(100vh)可以偏移1屏幕高度，不影响占位")]),t._v(" "),e("li",[t._v("浮动可以脱离文档流，不影响高度")]),t._v(" "),e("li",[t._v("负的margin可以抵消浮动的环绕效果")]),t._v(" "),e("li",[t._v("scroll-behavior: smooth可以实现平滑滚动")]),t._v(" "),e("li",[t._v("兼容性取决于sticky 不兼容IE")])]),t._v(" "),e("h2",{attrs:{id:"原文"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#原文"}},[t._v("#")]),t._v(" 原文")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://mp.weixin.qq.com/s/-yJmzwBd0LW8SRnh5BEAtQ",target:"_blank",rel:"noopener noreferrer"}},[t._v("奇技淫巧 ：巧用 CSS sticky 实现返回顶部功能"),e("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports},798:function(t,a,s){t.exports=s.p+"assets/img/1.d1f6dc8e.gif"},799:function(t,a,s){t.exports=s.p+"assets/img/2.52131920.gif"},800:function(t,a,s){t.exports=s.p+"assets/img/3.932a141e.gif"},801:function(t,a,s){t.exports=s.p+"assets/img/4.7f36da96.gif"},802:function(t,a,s){t.exports=s.p+"assets/img/5.98fb40e2.gif"},803:function(t,a,s){t.exports=s.p+"assets/img/6.bac46777.jpg"},804:function(t,a,s){t.exports=s.p+"assets/img/7.d5f0aa28.gif"},805:function(t,a,s){t.exports=s.p+"assets/img/8.60b1dd3e.jpg"},806:function(t,a,s){t.exports=s.p+"assets/img/9.9075da4e.jpg"},807:function(t,a,s){t.exports=s.p+"assets/img/10.4e4d565e.gif"},808:function(t,a,s){t.exports=s.p+"assets/img/11.a1e923b0.gif"}}]);