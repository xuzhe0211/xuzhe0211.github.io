(window.webpackJsonp=window.webpackJsonp||[]).push([[332],{1469:function(t,a,s){t.exports=s.p+"assets/img/11.35b42aa6.jpg"},2623:function(t,a,s){"use strict";s.r(a);var e=s(46),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"前端安全问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前端安全问题"}},[t._v("#")]),t._v(" 前端安全问题")]),t._v(" "),e("p",[e("img",{attrs:{src:s(1469),alt:"前端安全"}})]),t._v(" "),e("h2",{attrs:{id:"跨站脚本攻击-xss"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#跨站脚本攻击-xss"}},[t._v("#")]),t._v(" 跨站脚本攻击(XSS)")]),t._v(" "),e("div",{staticClass:"custom-block danger"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("Cross-Site Scripting(跨站脚本攻击)简称xss,是一种代码注入攻击。攻击者通过在目标网站上注入恶意脚本，使之在用户的浏览器上运行。利用这些恶意脚本，攻击者可以获取用户的敏感信息如cookie、SessionID等，进而危害数据安全")]),t._v(" "),e("p",[t._v("为了和CSS区分，我们吧攻击的第一个字母改成X 于是叫做XSS")])]),t._v(" "),e("p",[t._v("一般可以通过三种方式注入恶意脚本：")]),t._v(" "),e("h3",{attrs:{id:"反射性xss攻击"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#反射性xss攻击"}},[t._v("#")]),t._v(" 反射性XSS攻击")]),t._v(" "),e("p",[t._v("顾名思义，恶意Javascript脚本属于用户发送给网站请求中的一部分，随后网站又将这部分返回给用户，恶意脚本在页面中被执行。一般发生在前后端一体的应用中，服务端逻辑会改变最终的网页代码")]),t._v(" "),e("p",[e("span",{staticStyle:{color:"orange"}},[t._v("反射性XSS的攻击步骤")])]),t._v(" "),e("ol",[e("li",[t._v("攻击者构造出特殊的URL,其中包含恶意代码")]),t._v(" "),e("li",[t._v("用户打开带有恶意代码的URL时，网站服务端将恶意代码从URL中取出，拼接在HTML中返回给浏览器")]),t._v(" "),e("li",[t._v("用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行")]),t._v(" "),e("li",[t._v("恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户行为，调用目标网站接口执行攻击者执行的操作")])]),t._v(" "),e("h3",{attrs:{id:"基于dom的xss攻击"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基于dom的xss攻击"}},[t._v("#")]),t._v(" 基于DOM的XSS攻击")]),t._v(" "),e("p",[t._v("目前更流行前后端分离的项目，反射性XSS无用武之地。但这种攻击不需要经过服务器，我们知道，网页本身的"),e("span",{staticStyle:{color:"blue"}},[t._v("Javascript")]),t._v("也可以改变"),e("span",{staticStyle:{color:"blue"}},[t._v("HTML")]),t._v("的，黑客正是利用这一点来实现插入恶意脚本的")]),t._v(" "),e("p",[e("span",{staticStyle:{color:"orange"}},[t._v("基于DOM的XSS攻击步骤")])]),t._v(" "),e("ol",[e("li",[t._v("攻击者构造出特殊的URL，其中包含恶意代码")]),t._v(" "),e("li",[t._v("用户打开带有恶意代码的URL")]),t._v(" "),e("li",[t._v("用户浏览器接收到响应后解析执行，前端Javascript取出URL中的恶意代码并执行。")]),t._v(" "),e("li",[t._v("恶意代码窃取用户数据并发送到攻击者网站，或者冒充用户行为，调用目标网站接口执行攻击者指定的操作")])]),t._v(" "),e("h3",{attrs:{id:"存储型xss攻击"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#存储型xss攻击"}},[t._v("#")]),t._v(" 存储型XSS攻击")]),t._v(" "),e("p",[t._v("又叫持久性XSS，顾名思义，黑客将恶意"),e("span",{staticStyle:{color:"blue"}},[t._v("JavaScript")]),t._v("脚本长期保存在服务端数据库中，用户一旦访问相关页面数据，恶意脚本就会被执行。常见于搜索、微博、社区贴吧评论等。")]),t._v(" "),e("p",[e("span",{staticStyle:{color:"orange"}},[t._v("存储型XSS的攻击步骤")])]),t._v(" "),e("ol",[e("li",[t._v("攻击者将恶意代码提交到目标网站的数据库中")]),t._v(" "),e("li",[t._v("用户打开目标网站时，网站服务端将恶意代码从数据库取出，拼接在HTML中返回给浏览器")]),t._v(" "),e("li",[t._v("用户浏览器收到响应后解析执行，混在其中的恶意代码也被执行")]),t._v(" "),e("li",[t._v("恶意代码窃取用户数据并发送到到攻击者网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作")])]),t._v(" "),e("h3",{attrs:{id:"这几种xss攻击类型的区别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#这几种xss攻击类型的区别"}},[t._v("#")]),t._v(" 这几种XSS攻击类型的区别")]),t._v(" "),e("ul",[e("li",[e("span",{staticStyle:{color:"blue"}},[t._v("反射性XSS")]),t._v("的恶意脚本存在URL里,"),e("span",{staticStyle:{color:"blue"}},[t._v("存储型XSS")]),t._v("的恶意代码存在数据库里")]),t._v(" "),e("li",[e("span",{staticStyle:{color:"blue"}},[t._v("反射性XSS")]),t._v("攻击常见于通过URL传递参数的功能，如网站搜索、跳转等")]),t._v(" "),e("li",[e("span",{staticStyle:{color:"blue"}},[t._v("存储型XSS")]),t._v("攻击常见于带有用户保存数据的网站功能，如论坛发帖、商品评论、用户私信等")]),t._v(" "),e("li",[t._v("而基于"),e("span",{staticStyle:{color:"blue"}},[t._v("DOM的XSS")]),t._v("攻击中,取出和执行恶意代码由浏览器端完成，属于前端"),e("span",{staticStyle:{color:"blue"}},[t._v("Javascript")]),t._v("自身的安全漏洞，其他两种XSS都属于服务端的安全漏洞")])]),t._v(" "),e("h3",{attrs:{id:"xss防范措施"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xss防范措施"}},[t._v("#")]),t._v(" XSS防范措施")]),t._v(" "),e("p",[t._v("由上面对XSS攻击的介绍我们知道,XSS攻击主要有两大步骤：")]),t._v(" "),e("ul",[e("li",[t._v("攻击者提交恶意代码")]),t._v(" "),e("li",[t._v("浏览器执行恶意代码\n所以我们可以针对这两点来指定防范措施")])]),t._v(" "),e("h4",{attrs:{id:"输入过滤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#输入过滤"}},[t._v("#")]),t._v(" 输入过滤")]),t._v(" "),e("p",[t._v("在用户提交时,由前端过滤输入，然后提交到后端，这种方法不可行，因为攻击者可以绕过前端过滤直接构造请求，提交恶意代码。一般在写入数据库前，后端对输入数据进行过滤。虽然输入侧过滤能够在某些情况下解决特定的XSS的问题，但会引入很大的不确定性和乱码问题。在防范XSS攻击时应避免此类方法")]),t._v(" "),e("h4",{attrs:{id:"预防存储型和反射性xss攻击"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#预防存储型和反射性xss攻击"}},[t._v("#")]),t._v(" 预防存储型和反射性XSS攻击")]),t._v(" "),e("ul",[e("li",[t._v("改成纯前端渲染，把代码和数据分开")]),t._v(" "),e("li",[t._v("对HTML做充分转义")])]),t._v(" "),e("h4",{attrs:{id:"预防dom型xss攻击"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#预防dom型xss攻击"}},[t._v("#")]),t._v(" 预防DOM型XSS攻击")]),t._v(" "),e("p",[t._v("DOM型XSS攻击，实际上就是网站前端Javascript代码本身不够严谨,把不可信的数据当做代码执行了。")]),t._v(" "),e("p",[t._v("在使用"),e("span",{staticStyle:{color:"blue"}},[t._v(".innerHTML、.outerHTML、document.write()")]),t._v("时要特别小心，不要把不可信的数据作为HTML插到页面上，而应尽量使用"),e("span",{staticStyle:{color:"blue"}},[t._v(".textContext、.setAttribute()")])]),t._v(" "),e("p",[t._v("如果用Vue/React技术栈，并且不使用"),e("span",{staticStyle:{color:"blue"}},[t._v("v-html/dangerouslySetInnerHTML")]),t._v("功能，就在前端render阶段避免"),e("span",{staticStyle:{color:"blue"}},[t._v("innerHTML、outerHTML")]),t._v("的XSS隐患。")]),t._v(" "),e("p",[t._v("DOM中的内联事件监听器，如"),e("span",{staticStyle:{color:"blue"}},[t._v("location、onclick、onerror、onload、onmouseover")]),t._v("等，<a>标签的href属性，Javascript的"),e("span",{staticStyle:{color:"blue"}},[t._v("eval()、setTimeout()、setInterval()")]),t._v("等，都能把字符串作为代码运行。如果不可信的数据拼接到字符中传递给这些API，很容易产生安全隐患，请务必避免")]),t._v(" "),e("div",{staticClass:"language-html extra-class"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 内联事件监听器中包含恶意代码 --\x3e")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token special-attr"}},[e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onclick")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),e("span",{pre:!0,attrs:{class:"token value javascript language-javascript"}},[e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UNTRUSTED")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token special-attr"}},[e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onerror")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),e("span",{pre:!0,attrs:{class:"token value javascript language-javascript"}},[e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UNTRUSTED")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("data:image/png,"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 链接内包含恶意代码 --\x3e")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UNTRUSTED"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token script"}},[e("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// setTimeout()/setInterval() 中调用恶意代码")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UNTRUSTED"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UNTRUSTED"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// location 调用恶意代码")]),t._v("\nlocation"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'UNTRUSTED'")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// eval() 中调用恶意代码")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("eval")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UNTRUSTED"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("h4",{attrs:{id:"content-security-policy"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#content-security-policy"}},[t._v("#")]),t._v(" Content Security Policy")]),t._v(" "),e("p",[t._v("严格的CSP在XSS的防范中可以起到以下的作用：")]),t._v(" "),e("ul",[e("li",[t._v("禁止加载外域代码,防止复杂的攻击逻辑")]),t._v(" "),e("li",[t._v("禁止外域提交，网站被攻击后，用户的数据不会泄露到外域")]),t._v(" "),e("li",[t._v("禁止内联脚本执行(规则较严格，目前发现GitHub使用)")]),t._v(" "),e("li",[t._v("禁止未授权的脚本执行(新特性，Google Map移动版在使用)")]),t._v(" "),e("li",[t._v("合理使用上报可以即使发现XSS，利于尽快修复问题")])]),t._v(" "),e("p",[e("strong",[e("span",{staticStyle:{color:"blue"}},[t._v("「使用 W3C 提出的 CSP (Content Security Policy，内容安全策略)，定义域名白名单」")])])]),t._v(" "),e("h4",{attrs:{id:"其他措施"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#其他措施"}},[t._v("#")]),t._v(" 其他措施")]),t._v(" "),e("ul",[e("li",[t._v("设置"),e("span",{staticStyle:{color:"blue"}},[t._v("Cookie 的HttpOnly")]),t._v("属性，禁止Javascript读取cookie")]),t._v(" "),e("li",[t._v("验证码: 防止脚本冒充用户提交危险操作")])]),t._v(" "),e("h2",{attrs:{id:"跨站请求伪造-csrf"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#跨站请求伪造-csrf"}},[t._v("#")]),t._v(" 跨站请求伪造(CSRF)")]),t._v(" "),e("h2",{attrs:{id:"点击劫持-clickjacking"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#点击劫持-clickjacking"}},[t._v("#")]),t._v(" 点击劫持(ClickJacking)")]),t._v(" "),e("h2",{attrs:{id:"http严格传输安全-https"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http严格传输安全-https"}},[t._v("#")]),t._v(" HTTP严格传输安全(HTTPS)")]),t._v(" "),e("div",{staticClass:"custom-block danger"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("HTTP严格传输安全(HTTPS)是一种安全功能，web服务器通过它来告诉浏览器仅用HTTPS来与之通讯，而不是使用HTTP")])]),t._v(" "),e("p",[t._v("HTTPS代表HTTP严格传输安全，")]),t._v(" "),e("h2",{attrs:{id:"cdn劫持"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cdn劫持"}},[t._v("#")]),t._v(" CDN劫持")]),t._v(" "),e("h2",{attrs:{id:"内容安全策略-csp"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#内容安全策略-csp"}},[t._v("#")]),t._v(" 内容安全策略(CSP)")]),t._v(" "),e("h2",{attrs:{id:"安全沙盒-sandbox"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安全沙盒-sandbox"}},[t._v("#")]),t._v(" 安全沙盒(Sandbox)")]),t._v(" "),e("h2",{attrs:{id:"iframe"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#iframe"}},[t._v("#")]),t._v(" Iframe")]),t._v(" "),e("h2",{attrs:{id:"资料"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#资料"}},[t._v("#")]),t._v(" 资料")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://mp.weixin.qq.com/s/v5f9_YXbNSXYZL0adb_0Rw",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端常见的安全问题及防范措施"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://blog.csdn.net/Bul1et/article/details/85091020",target:"_blank",rel:"noopener noreferrer"}},[t._v("DOM型xss深度剖析"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://blog.csdn.net/qq_41734243/article/details/106120757",target:"_blank",rel:"noopener noreferrer"}},[t._v("安全漏洞中的倚天剑——XSS跨站脚本攻击"),e("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);