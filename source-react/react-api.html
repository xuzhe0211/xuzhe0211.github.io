<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>「React 深入」一文吃透React v18全部Api | 随风</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <meta name="description" content="随风随雨又随流">
    <meta name="theme-color" content="#ffffff">
    <meta name="google-site-verification" content="Ld_AEWr30siza2LmmZ12csitRGsSj9gqqEAch0UXkTc">
    
    <link rel="preload" href="/assets/css/0.styles.3be6d54c.css" as="style"><link rel="preload" href="/assets/js/app.ff5704b6.js" as="script"><link rel="preload" href="/assets/js/3.32bc1a55.js" as="script"><link rel="preload" href="/assets/js/4.3024e0ea.js" as="script"><link rel="prefetch" href="/assets/js/10.9a16f06d.js"><link rel="prefetch" href="/assets/js/100.8dae6464.js"><link rel="prefetch" href="/assets/js/101.0ee63e30.js"><link rel="prefetch" href="/assets/js/102.a5cb0d15.js"><link rel="prefetch" href="/assets/js/103.5aa338f8.js"><link rel="prefetch" href="/assets/js/104.bdf8a758.js"><link rel="prefetch" href="/assets/js/105.1bc156bf.js"><link rel="prefetch" href="/assets/js/106.c27baf7c.js"><link rel="prefetch" href="/assets/js/107.1129e372.js"><link rel="prefetch" href="/assets/js/108.419e776c.js"><link rel="prefetch" href="/assets/js/109.a86f3f13.js"><link rel="prefetch" href="/assets/js/11.c92d8b8b.js"><link rel="prefetch" href="/assets/js/110.adb411be.js"><link rel="prefetch" href="/assets/js/111.deb38d73.js"><link rel="prefetch" href="/assets/js/112.0642ddce.js"><link rel="prefetch" href="/assets/js/113.0acf79f5.js"><link rel="prefetch" href="/assets/js/114.59d3a497.js"><link rel="prefetch" href="/assets/js/115.cfda2c63.js"><link rel="prefetch" href="/assets/js/116.00860f3c.js"><link rel="prefetch" href="/assets/js/117.31bb0135.js"><link rel="prefetch" href="/assets/js/118.3e731057.js"><link rel="prefetch" href="/assets/js/119.deeb8465.js"><link rel="prefetch" href="/assets/js/12.923d760f.js"><link rel="prefetch" href="/assets/js/120.553f579c.js"><link rel="prefetch" href="/assets/js/121.61ea13e2.js"><link rel="prefetch" href="/assets/js/122.e33bb2b1.js"><link rel="prefetch" href="/assets/js/123.79e24b0e.js"><link rel="prefetch" href="/assets/js/124.f49ba6e4.js"><link rel="prefetch" href="/assets/js/125.01ec88cd.js"><link rel="prefetch" href="/assets/js/126.d5dd3711.js"><link rel="prefetch" href="/assets/js/127.bd1b267c.js"><link rel="prefetch" href="/assets/js/128.7c260028.js"><link rel="prefetch" href="/assets/js/129.0cd9afe6.js"><link rel="prefetch" href="/assets/js/13.07ba374a.js"><link rel="prefetch" href="/assets/js/130.23fbfe9b.js"><link rel="prefetch" href="/assets/js/131.330c1df5.js"><link rel="prefetch" href="/assets/js/132.74937db1.js"><link rel="prefetch" href="/assets/js/133.496f7f59.js"><link rel="prefetch" href="/assets/js/134.5021f5a5.js"><link rel="prefetch" href="/assets/js/135.a0793e0b.js"><link rel="prefetch" href="/assets/js/136.37ed4c95.js"><link rel="prefetch" href="/assets/js/137.5614fd6e.js"><link rel="prefetch" href="/assets/js/138.219e7a9a.js"><link rel="prefetch" href="/assets/js/139.d0a8203f.js"><link rel="prefetch" href="/assets/js/14.cee0a79c.js"><link rel="prefetch" href="/assets/js/140.859f27ab.js"><link rel="prefetch" href="/assets/js/141.3b464d35.js"><link rel="prefetch" href="/assets/js/142.36c89f83.js"><link rel="prefetch" href="/assets/js/143.65876482.js"><link rel="prefetch" href="/assets/js/144.eb280322.js"><link rel="prefetch" href="/assets/js/145.80a390d4.js"><link rel="prefetch" href="/assets/js/146.d46fd68f.js"><link rel="prefetch" href="/assets/js/147.e1703fb2.js"><link rel="prefetch" href="/assets/js/148.1694f341.js"><link rel="prefetch" href="/assets/js/149.e70fc38d.js"><link rel="prefetch" href="/assets/js/15.bd6dd584.js"><link rel="prefetch" href="/assets/js/150.0b43b134.js"><link rel="prefetch" href="/assets/js/151.065b0278.js"><link rel="prefetch" href="/assets/js/152.5bda0bb1.js"><link rel="prefetch" href="/assets/js/153.f8341037.js"><link rel="prefetch" href="/assets/js/154.3cbb8933.js"><link rel="prefetch" href="/assets/js/155.eca73f7a.js"><link rel="prefetch" href="/assets/js/156.6bf44638.js"><link rel="prefetch" href="/assets/js/157.1f0d68cb.js"><link rel="prefetch" href="/assets/js/158.3935c3f1.js"><link rel="prefetch" href="/assets/js/159.2b6f9849.js"><link rel="prefetch" href="/assets/js/16.bef7fd8d.js"><link rel="prefetch" href="/assets/js/160.ea70546e.js"><link rel="prefetch" href="/assets/js/161.c021a004.js"><link rel="prefetch" href="/assets/js/162.cda27944.js"><link rel="prefetch" href="/assets/js/163.541fbc77.js"><link rel="prefetch" href="/assets/js/164.2fa1f4f2.js"><link rel="prefetch" href="/assets/js/165.155fd797.js"><link rel="prefetch" href="/assets/js/166.1d17bfbd.js"><link rel="prefetch" href="/assets/js/167.2e7b9b6c.js"><link rel="prefetch" href="/assets/js/168.c7fd3e2e.js"><link rel="prefetch" href="/assets/js/169.278a4564.js"><link rel="prefetch" href="/assets/js/17.6fb6044c.js"><link rel="prefetch" href="/assets/js/170.1699c89d.js"><link rel="prefetch" href="/assets/js/171.b09d0982.js"><link rel="prefetch" href="/assets/js/172.9ec0d737.js"><link rel="prefetch" href="/assets/js/173.dec62707.js"><link rel="prefetch" href="/assets/js/174.6a369c0d.js"><link rel="prefetch" href="/assets/js/175.8acd00f8.js"><link rel="prefetch" href="/assets/js/176.da309638.js"><link rel="prefetch" href="/assets/js/177.b17adcb7.js"><link rel="prefetch" href="/assets/js/178.245cd9fe.js"><link rel="prefetch" href="/assets/js/179.21d6efa6.js"><link rel="prefetch" href="/assets/js/18.2c626aee.js"><link rel="prefetch" href="/assets/js/180.e61696c0.js"><link rel="prefetch" href="/assets/js/181.07e757a1.js"><link rel="prefetch" href="/assets/js/182.8f5250c3.js"><link rel="prefetch" href="/assets/js/183.fdd6c228.js"><link rel="prefetch" href="/assets/js/184.06917930.js"><link rel="prefetch" href="/assets/js/185.f951ac1b.js"><link rel="prefetch" href="/assets/js/186.77228eff.js"><link rel="prefetch" href="/assets/js/187.0ce0382a.js"><link rel="prefetch" href="/assets/js/188.67074cfd.js"><link rel="prefetch" href="/assets/js/189.dc5a66d3.js"><link rel="prefetch" href="/assets/js/19.c79579c3.js"><link rel="prefetch" href="/assets/js/190.a43bad1f.js"><link rel="prefetch" href="/assets/js/191.b89a95b7.js"><link rel="prefetch" href="/assets/js/192.d902d2b5.js"><link rel="prefetch" href="/assets/js/193.6e21c360.js"><link rel="prefetch" href="/assets/js/194.9052cade.js"><link rel="prefetch" href="/assets/js/195.0b021c51.js"><link rel="prefetch" href="/assets/js/196.2de52006.js"><link rel="prefetch" href="/assets/js/197.1b78c992.js"><link rel="prefetch" href="/assets/js/198.85925b53.js"><link rel="prefetch" href="/assets/js/199.dc67e536.js"><link rel="prefetch" href="/assets/js/2.ff4b99f4.js"><link rel="prefetch" href="/assets/js/20.a545f188.js"><link rel="prefetch" href="/assets/js/200.8e44d8eb.js"><link rel="prefetch" href="/assets/js/201.93167736.js"><link rel="prefetch" href="/assets/js/202.1dc9b630.js"><link rel="prefetch" href="/assets/js/203.9d39e273.js"><link rel="prefetch" href="/assets/js/204.baad1c21.js"><link rel="prefetch" href="/assets/js/205.0da6ae35.js"><link rel="prefetch" href="/assets/js/206.c264711e.js"><link rel="prefetch" href="/assets/js/207.a0ad3a18.js"><link rel="prefetch" href="/assets/js/208.dba1756e.js"><link rel="prefetch" href="/assets/js/209.e84102bd.js"><link rel="prefetch" href="/assets/js/21.ff17fd3c.js"><link rel="prefetch" href="/assets/js/210.d3d78992.js"><link rel="prefetch" href="/assets/js/211.70341df3.js"><link rel="prefetch" href="/assets/js/212.4daebdb8.js"><link rel="prefetch" href="/assets/js/213.142ff1d8.js"><link rel="prefetch" href="/assets/js/214.b578e008.js"><link rel="prefetch" href="/assets/js/215.c410ca78.js"><link rel="prefetch" href="/assets/js/216.dbe966db.js"><link rel="prefetch" href="/assets/js/217.280fc56b.js"><link rel="prefetch" href="/assets/js/218.5ce96820.js"><link rel="prefetch" href="/assets/js/219.cb1e014d.js"><link rel="prefetch" href="/assets/js/22.e12822f2.js"><link rel="prefetch" href="/assets/js/220.764a390b.js"><link rel="prefetch" href="/assets/js/221.38dcc881.js"><link rel="prefetch" href="/assets/js/222.5c917ff3.js"><link rel="prefetch" href="/assets/js/223.f30e4a73.js"><link rel="prefetch" href="/assets/js/224.d343501e.js"><link rel="prefetch" href="/assets/js/225.71ddb707.js"><link rel="prefetch" href="/assets/js/226.fadb3c5b.js"><link rel="prefetch" href="/assets/js/227.74c37342.js"><link rel="prefetch" href="/assets/js/228.e5a4f024.js"><link rel="prefetch" href="/assets/js/229.99847b61.js"><link rel="prefetch" href="/assets/js/23.b2b0dc67.js"><link rel="prefetch" href="/assets/js/230.7053c381.js"><link rel="prefetch" href="/assets/js/231.17ca5124.js"><link rel="prefetch" href="/assets/js/232.757e0d93.js"><link rel="prefetch" href="/assets/js/233.0aa5714c.js"><link rel="prefetch" href="/assets/js/234.b57d559d.js"><link rel="prefetch" href="/assets/js/235.7e3bfa79.js"><link rel="prefetch" href="/assets/js/236.6419c0a2.js"><link rel="prefetch" href="/assets/js/237.767e3b49.js"><link rel="prefetch" href="/assets/js/238.ad6e6458.js"><link rel="prefetch" href="/assets/js/239.c24600ae.js"><link rel="prefetch" href="/assets/js/24.0bc9388b.js"><link rel="prefetch" href="/assets/js/240.0b82beb9.js"><link rel="prefetch" href="/assets/js/241.b0b77745.js"><link rel="prefetch" href="/assets/js/242.b1c257ea.js"><link rel="prefetch" href="/assets/js/243.9f6c7364.js"><link rel="prefetch" href="/assets/js/244.e811943a.js"><link rel="prefetch" href="/assets/js/245.f4b1ed14.js"><link rel="prefetch" href="/assets/js/246.f99e09a2.js"><link rel="prefetch" href="/assets/js/247.20c8d4b5.js"><link rel="prefetch" href="/assets/js/248.c16bc498.js"><link rel="prefetch" href="/assets/js/249.36276028.js"><link rel="prefetch" href="/assets/js/25.6e18367d.js"><link rel="prefetch" href="/assets/js/250.1d010fff.js"><link rel="prefetch" href="/assets/js/251.ff18c743.js"><link rel="prefetch" href="/assets/js/252.9d9fadba.js"><link rel="prefetch" href="/assets/js/253.d18592c3.js"><link rel="prefetch" href="/assets/js/254.474cfe33.js"><link rel="prefetch" href="/assets/js/255.f7cad93e.js"><link rel="prefetch" href="/assets/js/256.0572a13b.js"><link rel="prefetch" href="/assets/js/257.b26351c6.js"><link rel="prefetch" href="/assets/js/258.5559f1af.js"><link rel="prefetch" href="/assets/js/259.82bb27ad.js"><link rel="prefetch" href="/assets/js/26.2b1c4602.js"><link rel="prefetch" href="/assets/js/260.a6e74eb6.js"><link rel="prefetch" href="/assets/js/261.9abdf632.js"><link rel="prefetch" href="/assets/js/262.d10a13a9.js"><link rel="prefetch" href="/assets/js/263.6f7a03a5.js"><link rel="prefetch" href="/assets/js/264.064439c7.js"><link rel="prefetch" href="/assets/js/265.2e6032c2.js"><link rel="prefetch" href="/assets/js/266.b4896289.js"><link rel="prefetch" href="/assets/js/267.5d57e4d4.js"><link rel="prefetch" href="/assets/js/268.7a289535.js"><link rel="prefetch" href="/assets/js/269.2eb82dd4.js"><link rel="prefetch" href="/assets/js/27.3f668953.js"><link rel="prefetch" href="/assets/js/270.4786408c.js"><link rel="prefetch" href="/assets/js/271.65488b27.js"><link rel="prefetch" href="/assets/js/272.2e22be89.js"><link rel="prefetch" href="/assets/js/273.5eab00ba.js"><link rel="prefetch" href="/assets/js/274.76d7e85d.js"><link rel="prefetch" href="/assets/js/275.9c2593e6.js"><link rel="prefetch" href="/assets/js/276.590ff651.js"><link rel="prefetch" href="/assets/js/277.ea8f1a4c.js"><link rel="prefetch" href="/assets/js/278.162648dc.js"><link rel="prefetch" href="/assets/js/279.3a20dac4.js"><link rel="prefetch" href="/assets/js/28.268a84d8.js"><link rel="prefetch" href="/assets/js/280.7aff0c90.js"><link rel="prefetch" href="/assets/js/281.c4077013.js"><link rel="prefetch" href="/assets/js/282.62aa3377.js"><link rel="prefetch" href="/assets/js/283.5a9c20f4.js"><link rel="prefetch" href="/assets/js/284.b96dd41e.js"><link rel="prefetch" href="/assets/js/285.05e8798b.js"><link rel="prefetch" href="/assets/js/286.384bc776.js"><link rel="prefetch" href="/assets/js/287.988e42cf.js"><link rel="prefetch" href="/assets/js/288.e982f3b8.js"><link rel="prefetch" href="/assets/js/289.a1cdaf15.js"><link rel="prefetch" href="/assets/js/29.5ebae196.js"><link rel="prefetch" href="/assets/js/290.3bdd194a.js"><link rel="prefetch" href="/assets/js/291.ce4a6e8e.js"><link rel="prefetch" href="/assets/js/292.c572ba35.js"><link rel="prefetch" href="/assets/js/293.3a0a75e9.js"><link rel="prefetch" href="/assets/js/294.89855f28.js"><link rel="prefetch" href="/assets/js/295.432d4b6f.js"><link rel="prefetch" href="/assets/js/296.8caa722e.js"><link rel="prefetch" href="/assets/js/297.ea665063.js"><link rel="prefetch" href="/assets/js/298.7342b9ac.js"><link rel="prefetch" href="/assets/js/299.96f266a8.js"><link rel="prefetch" href="/assets/js/30.04499e5f.js"><link rel="prefetch" href="/assets/js/300.4fb17682.js"><link rel="prefetch" href="/assets/js/301.68dd904a.js"><link rel="prefetch" href="/assets/js/302.949e8678.js"><link rel="prefetch" href="/assets/js/303.8d164540.js"><link rel="prefetch" href="/assets/js/304.d13a59d0.js"><link rel="prefetch" href="/assets/js/305.df4ce6c2.js"><link rel="prefetch" href="/assets/js/306.22811eba.js"><link rel="prefetch" href="/assets/js/307.19fca2db.js"><link rel="prefetch" href="/assets/js/308.5862fa2d.js"><link rel="prefetch" href="/assets/js/309.246c6f1b.js"><link rel="prefetch" href="/assets/js/31.8f6472b2.js"><link rel="prefetch" href="/assets/js/310.579f6d83.js"><link rel="prefetch" href="/assets/js/311.6960705c.js"><link rel="prefetch" href="/assets/js/312.fce13b44.js"><link rel="prefetch" href="/assets/js/313.824e0f39.js"><link rel="prefetch" href="/assets/js/314.46fe2716.js"><link rel="prefetch" href="/assets/js/315.8f5ea1d6.js"><link rel="prefetch" href="/assets/js/316.4fb9e207.js"><link rel="prefetch" href="/assets/js/317.05ecbba7.js"><link rel="prefetch" href="/assets/js/318.5a63c924.js"><link rel="prefetch" href="/assets/js/319.7a84b7fb.js"><link rel="prefetch" href="/assets/js/32.e644fc2f.js"><link rel="prefetch" href="/assets/js/320.6f07d860.js"><link rel="prefetch" href="/assets/js/321.1424a2f3.js"><link rel="prefetch" href="/assets/js/322.8186e341.js"><link rel="prefetch" href="/assets/js/323.c365752f.js"><link rel="prefetch" href="/assets/js/324.0d0cad4d.js"><link rel="prefetch" href="/assets/js/325.6f18413d.js"><link rel="prefetch" href="/assets/js/326.922e42d6.js"><link rel="prefetch" href="/assets/js/327.9d118497.js"><link rel="prefetch" href="/assets/js/328.847a8140.js"><link rel="prefetch" href="/assets/js/329.35ac005d.js"><link rel="prefetch" href="/assets/js/33.4d924d17.js"><link rel="prefetch" href="/assets/js/330.ce14daeb.js"><link rel="prefetch" href="/assets/js/331.c954fb98.js"><link rel="prefetch" href="/assets/js/332.63354d06.js"><link rel="prefetch" href="/assets/js/333.17fe6c9d.js"><link rel="prefetch" href="/assets/js/334.05a87e8f.js"><link rel="prefetch" href="/assets/js/335.98271250.js"><link rel="prefetch" href="/assets/js/336.a2659c1b.js"><link rel="prefetch" href="/assets/js/337.b421d04f.js"><link rel="prefetch" href="/assets/js/338.521727be.js"><link rel="prefetch" href="/assets/js/339.0641a1ce.js"><link rel="prefetch" href="/assets/js/34.ec2252ab.js"><link rel="prefetch" href="/assets/js/340.e2a76919.js"><link rel="prefetch" href="/assets/js/341.22842212.js"><link rel="prefetch" href="/assets/js/342.f2391224.js"><link rel="prefetch" href="/assets/js/343.9ef8b768.js"><link rel="prefetch" href="/assets/js/344.aaebdd43.js"><link rel="prefetch" href="/assets/js/345.1aa0f979.js"><link rel="prefetch" href="/assets/js/346.dbd0ef4a.js"><link rel="prefetch" href="/assets/js/347.cb5e25bc.js"><link rel="prefetch" href="/assets/js/348.1e8c4b8a.js"><link rel="prefetch" href="/assets/js/349.94e50052.js"><link rel="prefetch" href="/assets/js/35.deadf157.js"><link rel="prefetch" href="/assets/js/350.28de7649.js"><link rel="prefetch" href="/assets/js/351.a5b1e1bb.js"><link rel="prefetch" href="/assets/js/352.daf1985e.js"><link rel="prefetch" href="/assets/js/353.c91426dd.js"><link rel="prefetch" href="/assets/js/354.2a7e28a4.js"><link rel="prefetch" href="/assets/js/355.62d6d9dc.js"><link rel="prefetch" href="/assets/js/356.f85570c0.js"><link rel="prefetch" href="/assets/js/357.da2c7602.js"><link rel="prefetch" href="/assets/js/358.38c14e29.js"><link rel="prefetch" href="/assets/js/359.50d6368b.js"><link rel="prefetch" href="/assets/js/36.2f992cb4.js"><link rel="prefetch" href="/assets/js/360.596daa7b.js"><link rel="prefetch" href="/assets/js/361.bb5aed49.js"><link rel="prefetch" href="/assets/js/362.f5f35103.js"><link rel="prefetch" href="/assets/js/363.f50065f5.js"><link rel="prefetch" href="/assets/js/364.049a964c.js"><link rel="prefetch" href="/assets/js/365.c6ce33e9.js"><link rel="prefetch" href="/assets/js/366.f76d6668.js"><link rel="prefetch" href="/assets/js/367.779a29b2.js"><link rel="prefetch" href="/assets/js/368.89f592d6.js"><link rel="prefetch" href="/assets/js/369.8c81dd4d.js"><link rel="prefetch" href="/assets/js/37.139ff2bf.js"><link rel="prefetch" href="/assets/js/370.3d7506ae.js"><link rel="prefetch" href="/assets/js/371.f7d9f883.js"><link rel="prefetch" href="/assets/js/372.c028db9b.js"><link rel="prefetch" href="/assets/js/373.e77612a2.js"><link rel="prefetch" href="/assets/js/374.d7efbd92.js"><link rel="prefetch" href="/assets/js/375.edc3192b.js"><link rel="prefetch" href="/assets/js/376.b3034ea3.js"><link rel="prefetch" href="/assets/js/377.0e20f4ad.js"><link rel="prefetch" href="/assets/js/378.54242b0f.js"><link rel="prefetch" href="/assets/js/379.e9873a9b.js"><link rel="prefetch" href="/assets/js/38.e54baa53.js"><link rel="prefetch" href="/assets/js/380.253e07df.js"><link rel="prefetch" href="/assets/js/381.20fd6e2c.js"><link rel="prefetch" href="/assets/js/382.e26669d7.js"><link rel="prefetch" href="/assets/js/383.7237a834.js"><link rel="prefetch" href="/assets/js/384.a3ca6915.js"><link rel="prefetch" href="/assets/js/385.179de6df.js"><link rel="prefetch" href="/assets/js/386.96d2dee7.js"><link rel="prefetch" href="/assets/js/387.2c7a542b.js"><link rel="prefetch" href="/assets/js/388.9f7be656.js"><link rel="prefetch" href="/assets/js/389.15bc606f.js"><link rel="prefetch" href="/assets/js/39.d9d4480d.js"><link rel="prefetch" href="/assets/js/390.58370b5c.js"><link rel="prefetch" href="/assets/js/391.0aec0437.js"><link rel="prefetch" href="/assets/js/392.be0fc3ad.js"><link rel="prefetch" href="/assets/js/393.42a0997e.js"><link rel="prefetch" href="/assets/js/394.008a90ec.js"><link rel="prefetch" href="/assets/js/395.c52347d3.js"><link rel="prefetch" href="/assets/js/396.e4ee75f3.js"><link rel="prefetch" href="/assets/js/397.58231684.js"><link rel="prefetch" href="/assets/js/398.2cf5f7b0.js"><link rel="prefetch" href="/assets/js/399.7ae92f9d.js"><link rel="prefetch" href="/assets/js/40.f331ad72.js"><link rel="prefetch" href="/assets/js/400.e8e6d413.js"><link rel="prefetch" href="/assets/js/401.63d6974b.js"><link rel="prefetch" href="/assets/js/402.4966f1a3.js"><link rel="prefetch" href="/assets/js/403.5a3c86f0.js"><link rel="prefetch" href="/assets/js/404.e606068f.js"><link rel="prefetch" href="/assets/js/405.0bac6d3a.js"><link rel="prefetch" href="/assets/js/406.7dffd606.js"><link rel="prefetch" href="/assets/js/407.aa119d21.js"><link rel="prefetch" href="/assets/js/408.c2179b52.js"><link rel="prefetch" href="/assets/js/409.363fd0d2.js"><link rel="prefetch" href="/assets/js/41.25b0f36b.js"><link rel="prefetch" href="/assets/js/410.cea7ce15.js"><link rel="prefetch" href="/assets/js/411.be6f3f32.js"><link rel="prefetch" href="/assets/js/412.99a55c8f.js"><link rel="prefetch" href="/assets/js/413.ea472c87.js"><link rel="prefetch" href="/assets/js/414.edb6aa8a.js"><link rel="prefetch" href="/assets/js/415.d37e6366.js"><link rel="prefetch" href="/assets/js/416.16186baa.js"><link rel="prefetch" href="/assets/js/417.f899b04f.js"><link rel="prefetch" href="/assets/js/418.9ffbe043.js"><link rel="prefetch" href="/assets/js/419.3230af20.js"><link rel="prefetch" href="/assets/js/42.9c168dab.js"><link rel="prefetch" href="/assets/js/420.987c80da.js"><link rel="prefetch" href="/assets/js/421.65617e5d.js"><link rel="prefetch" href="/assets/js/422.10599020.js"><link rel="prefetch" href="/assets/js/423.b43671d3.js"><link rel="prefetch" href="/assets/js/424.48e44464.js"><link rel="prefetch" href="/assets/js/425.05854d99.js"><link rel="prefetch" href="/assets/js/426.1206d3ad.js"><link rel="prefetch" href="/assets/js/427.d11ad83b.js"><link rel="prefetch" href="/assets/js/428.7075e03a.js"><link rel="prefetch" href="/assets/js/429.4f697522.js"><link rel="prefetch" href="/assets/js/43.cb23aea6.js"><link rel="prefetch" href="/assets/js/430.cb6e7b9c.js"><link rel="prefetch" href="/assets/js/431.dae66aeb.js"><link rel="prefetch" href="/assets/js/432.1b80cb2b.js"><link rel="prefetch" href="/assets/js/433.170262b1.js"><link rel="prefetch" href="/assets/js/434.a93c834a.js"><link rel="prefetch" href="/assets/js/435.10fbf75f.js"><link rel="prefetch" href="/assets/js/436.67b676c3.js"><link rel="prefetch" href="/assets/js/437.2a6664db.js"><link rel="prefetch" href="/assets/js/438.96a06be6.js"><link rel="prefetch" href="/assets/js/439.da5efae3.js"><link rel="prefetch" href="/assets/js/44.dad6bc5f.js"><link rel="prefetch" href="/assets/js/440.bb3f47e7.js"><link rel="prefetch" href="/assets/js/441.4334f8bc.js"><link rel="prefetch" href="/assets/js/442.5ee52b3e.js"><link rel="prefetch" href="/assets/js/443.b8947524.js"><link rel="prefetch" href="/assets/js/444.ad74ea19.js"><link rel="prefetch" href="/assets/js/445.bb7ac97e.js"><link rel="prefetch" href="/assets/js/446.ce17e309.js"><link rel="prefetch" href="/assets/js/447.f59aeb30.js"><link rel="prefetch" href="/assets/js/448.92589f31.js"><link rel="prefetch" href="/assets/js/449.ed6a828e.js"><link rel="prefetch" href="/assets/js/45.914fb166.js"><link rel="prefetch" href="/assets/js/450.a33f0b6f.js"><link rel="prefetch" href="/assets/js/451.e2953884.js"><link rel="prefetch" href="/assets/js/452.efa9df49.js"><link rel="prefetch" href="/assets/js/453.c2a4fcdc.js"><link rel="prefetch" href="/assets/js/454.3afea930.js"><link rel="prefetch" href="/assets/js/455.207d966b.js"><link rel="prefetch" href="/assets/js/456.e4482fd9.js"><link rel="prefetch" href="/assets/js/457.e92b76a5.js"><link rel="prefetch" href="/assets/js/458.4f18fa1f.js"><link rel="prefetch" href="/assets/js/459.b034862d.js"><link rel="prefetch" href="/assets/js/46.ea6227fb.js"><link rel="prefetch" href="/assets/js/460.1ef23852.js"><link rel="prefetch" href="/assets/js/461.e9a4d939.js"><link rel="prefetch" href="/assets/js/462.8612a52f.js"><link rel="prefetch" href="/assets/js/463.c866487c.js"><link rel="prefetch" href="/assets/js/464.cd0d4604.js"><link rel="prefetch" href="/assets/js/465.332dd76c.js"><link rel="prefetch" href="/assets/js/466.8e6d2a98.js"><link rel="prefetch" href="/assets/js/467.36acec6d.js"><link rel="prefetch" href="/assets/js/468.ad3a3850.js"><link rel="prefetch" href="/assets/js/469.ede3dc4f.js"><link rel="prefetch" href="/assets/js/47.9c48dce4.js"><link rel="prefetch" href="/assets/js/470.029cc67b.js"><link rel="prefetch" href="/assets/js/471.792b6e4e.js"><link rel="prefetch" href="/assets/js/472.8b5468e9.js"><link rel="prefetch" href="/assets/js/473.28911ce3.js"><link rel="prefetch" href="/assets/js/474.605311df.js"><link rel="prefetch" href="/assets/js/475.2c767294.js"><link rel="prefetch" href="/assets/js/476.cd114014.js"><link rel="prefetch" href="/assets/js/477.09a05037.js"><link rel="prefetch" href="/assets/js/478.a0fb568e.js"><link rel="prefetch" href="/assets/js/479.48866dc1.js"><link rel="prefetch" href="/assets/js/48.0fe79bd0.js"><link rel="prefetch" href="/assets/js/480.7e2e8702.js"><link rel="prefetch" href="/assets/js/481.11b589c2.js"><link rel="prefetch" href="/assets/js/482.fdfdec18.js"><link rel="prefetch" href="/assets/js/483.51fd70b9.js"><link rel="prefetch" href="/assets/js/484.7f0af724.js"><link rel="prefetch" href="/assets/js/485.c67ee119.js"><link rel="prefetch" href="/assets/js/486.71c71c7f.js"><link rel="prefetch" href="/assets/js/487.cca67f27.js"><link rel="prefetch" href="/assets/js/488.499899e2.js"><link rel="prefetch" href="/assets/js/489.0f6f3fa0.js"><link rel="prefetch" href="/assets/js/49.5bce96f8.js"><link rel="prefetch" href="/assets/js/490.1d13e54c.js"><link rel="prefetch" href="/assets/js/491.45cd721b.js"><link rel="prefetch" href="/assets/js/492.1f54c848.js"><link rel="prefetch" href="/assets/js/493.208a6593.js"><link rel="prefetch" href="/assets/js/494.4ac302d5.js"><link rel="prefetch" href="/assets/js/495.e8ec9acf.js"><link rel="prefetch" href="/assets/js/496.370ffb41.js"><link rel="prefetch" href="/assets/js/497.c7a7e029.js"><link rel="prefetch" href="/assets/js/498.625f852d.js"><link rel="prefetch" href="/assets/js/499.a0c96c3f.js"><link rel="prefetch" href="/assets/js/5.1244f18e.js"><link rel="prefetch" href="/assets/js/50.4278c91c.js"><link rel="prefetch" href="/assets/js/500.f161a842.js"><link rel="prefetch" href="/assets/js/501.0511efd0.js"><link rel="prefetch" href="/assets/js/502.404f07b0.js"><link rel="prefetch" href="/assets/js/503.200962a2.js"><link rel="prefetch" href="/assets/js/504.499269a4.js"><link rel="prefetch" href="/assets/js/505.dd8a5460.js"><link rel="prefetch" href="/assets/js/506.de58c7b3.js"><link rel="prefetch" href="/assets/js/507.f13689af.js"><link rel="prefetch" href="/assets/js/508.2fcd3058.js"><link rel="prefetch" href="/assets/js/509.13599f11.js"><link rel="prefetch" href="/assets/js/51.9297e3bb.js"><link rel="prefetch" href="/assets/js/510.ceccf928.js"><link rel="prefetch" href="/assets/js/511.f103e7d3.js"><link rel="prefetch" href="/assets/js/512.4f500f59.js"><link rel="prefetch" href="/assets/js/513.f9102ec7.js"><link rel="prefetch" href="/assets/js/514.95cd541c.js"><link rel="prefetch" href="/assets/js/515.894fae30.js"><link rel="prefetch" href="/assets/js/516.b6a05e0e.js"><link rel="prefetch" href="/assets/js/517.315c5a6d.js"><link rel="prefetch" href="/assets/js/518.e2e22827.js"><link rel="prefetch" href="/assets/js/519.bce5f0c8.js"><link rel="prefetch" href="/assets/js/52.f37880c1.js"><link rel="prefetch" href="/assets/js/520.6435b535.js"><link rel="prefetch" href="/assets/js/521.d348c1e8.js"><link rel="prefetch" href="/assets/js/522.499e796d.js"><link rel="prefetch" href="/assets/js/523.418beff6.js"><link rel="prefetch" href="/assets/js/524.0baff9a9.js"><link rel="prefetch" href="/assets/js/525.bf36235f.js"><link rel="prefetch" href="/assets/js/526.f02685e1.js"><link rel="prefetch" href="/assets/js/527.a99b970f.js"><link rel="prefetch" href="/assets/js/528.f1c7eabf.js"><link rel="prefetch" href="/assets/js/529.380f731d.js"><link rel="prefetch" href="/assets/js/53.c6c7b22b.js"><link rel="prefetch" href="/assets/js/530.8bf41a62.js"><link rel="prefetch" href="/assets/js/531.6d3f5873.js"><link rel="prefetch" href="/assets/js/532.9150f8f4.js"><link rel="prefetch" href="/assets/js/533.63232eb9.js"><link rel="prefetch" href="/assets/js/534.fa76477d.js"><link rel="prefetch" href="/assets/js/535.91a0e837.js"><link rel="prefetch" href="/assets/js/536.904ad6f4.js"><link rel="prefetch" href="/assets/js/537.a44b05b8.js"><link rel="prefetch" href="/assets/js/538.9943a5ea.js"><link rel="prefetch" href="/assets/js/539.1e5bf5d2.js"><link rel="prefetch" href="/assets/js/54.f591e0de.js"><link rel="prefetch" href="/assets/js/540.bdde5ab9.js"><link rel="prefetch" href="/assets/js/541.c1cdcc1d.js"><link rel="prefetch" href="/assets/js/542.c361e7b8.js"><link rel="prefetch" href="/assets/js/543.dba7d709.js"><link rel="prefetch" href="/assets/js/544.88fb4af0.js"><link rel="prefetch" href="/assets/js/545.989e2015.js"><link rel="prefetch" href="/assets/js/546.9eb22fa2.js"><link rel="prefetch" href="/assets/js/547.4dafbcb2.js"><link rel="prefetch" href="/assets/js/548.04ab571e.js"><link rel="prefetch" href="/assets/js/549.ddb0bee4.js"><link rel="prefetch" href="/assets/js/55.80f96495.js"><link rel="prefetch" href="/assets/js/550.4ef7808b.js"><link rel="prefetch" href="/assets/js/551.83e26e82.js"><link rel="prefetch" href="/assets/js/552.a776d6f5.js"><link rel="prefetch" href="/assets/js/553.13e9f8a2.js"><link rel="prefetch" href="/assets/js/554.e41a0614.js"><link rel="prefetch" href="/assets/js/555.69d9a13e.js"><link rel="prefetch" href="/assets/js/556.25e940a3.js"><link rel="prefetch" href="/assets/js/557.164e4fd3.js"><link rel="prefetch" href="/assets/js/558.e9ad897d.js"><link rel="prefetch" href="/assets/js/559.bd2f883c.js"><link rel="prefetch" href="/assets/js/56.c6f21e4d.js"><link rel="prefetch" href="/assets/js/560.b5ade97a.js"><link rel="prefetch" href="/assets/js/561.1e4ed91c.js"><link rel="prefetch" href="/assets/js/562.977abf54.js"><link rel="prefetch" href="/assets/js/563.8dd38420.js"><link rel="prefetch" href="/assets/js/564.e5626493.js"><link rel="prefetch" href="/assets/js/565.3c9a9bf7.js"><link rel="prefetch" href="/assets/js/566.9c48d10f.js"><link rel="prefetch" href="/assets/js/567.ac24341a.js"><link rel="prefetch" href="/assets/js/568.1aa6984c.js"><link rel="prefetch" href="/assets/js/569.c7d29cee.js"><link rel="prefetch" href="/assets/js/57.eb1d56ec.js"><link rel="prefetch" href="/assets/js/570.a6660390.js"><link rel="prefetch" href="/assets/js/571.84271957.js"><link rel="prefetch" href="/assets/js/572.fac89f9d.js"><link rel="prefetch" href="/assets/js/573.25bab672.js"><link rel="prefetch" href="/assets/js/574.3aafc701.js"><link rel="prefetch" href="/assets/js/575.e596368b.js"><link rel="prefetch" href="/assets/js/576.7679790e.js"><link rel="prefetch" href="/assets/js/577.9d7c7300.js"><link rel="prefetch" href="/assets/js/578.43862aa5.js"><link rel="prefetch" href="/assets/js/579.6501b0b3.js"><link rel="prefetch" href="/assets/js/58.5f0df764.js"><link rel="prefetch" href="/assets/js/580.93b09c06.js"><link rel="prefetch" href="/assets/js/581.ce3be8b9.js"><link rel="prefetch" href="/assets/js/582.2dc51924.js"><link rel="prefetch" href="/assets/js/583.89d653f8.js"><link rel="prefetch" href="/assets/js/584.2922b4dc.js"><link rel="prefetch" href="/assets/js/585.afc6c050.js"><link rel="prefetch" href="/assets/js/586.aff773fc.js"><link rel="prefetch" href="/assets/js/587.9bc6ad4e.js"><link rel="prefetch" href="/assets/js/588.9bb2f30f.js"><link rel="prefetch" href="/assets/js/589.ac36c015.js"><link rel="prefetch" href="/assets/js/59.326d8420.js"><link rel="prefetch" href="/assets/js/590.7abcf8c6.js"><link rel="prefetch" href="/assets/js/591.b8cc2f00.js"><link rel="prefetch" href="/assets/js/592.43245afa.js"><link rel="prefetch" href="/assets/js/593.e3bb4493.js"><link rel="prefetch" href="/assets/js/594.65819f6f.js"><link rel="prefetch" href="/assets/js/595.b39d13c0.js"><link rel="prefetch" href="/assets/js/596.970397c3.js"><link rel="prefetch" href="/assets/js/597.21293422.js"><link rel="prefetch" href="/assets/js/598.77cf5286.js"><link rel="prefetch" href="/assets/js/599.c8864d4f.js"><link rel="prefetch" href="/assets/js/6.830ac73f.js"><link rel="prefetch" href="/assets/js/60.ff7812a4.js"><link rel="prefetch" href="/assets/js/600.fffc79ed.js"><link rel="prefetch" href="/assets/js/601.d80284ef.js"><link rel="prefetch" href="/assets/js/602.f10ab4fd.js"><link rel="prefetch" href="/assets/js/603.b196967f.js"><link rel="prefetch" href="/assets/js/604.5313b517.js"><link rel="prefetch" href="/assets/js/605.1a1f68fb.js"><link rel="prefetch" href="/assets/js/606.cc28d341.js"><link rel="prefetch" href="/assets/js/607.00d95597.js"><link rel="prefetch" href="/assets/js/608.aae57856.js"><link rel="prefetch" href="/assets/js/609.3d4a5412.js"><link rel="prefetch" href="/assets/js/61.f943499d.js"><link rel="prefetch" href="/assets/js/610.24080179.js"><link rel="prefetch" href="/assets/js/611.7139d124.js"><link rel="prefetch" href="/assets/js/612.eb1864df.js"><link rel="prefetch" href="/assets/js/613.ded9d28a.js"><link rel="prefetch" href="/assets/js/614.acb0edb8.js"><link rel="prefetch" href="/assets/js/615.ef2a6c09.js"><link rel="prefetch" href="/assets/js/616.df6e4e3b.js"><link rel="prefetch" href="/assets/js/617.4f19cb62.js"><link rel="prefetch" href="/assets/js/618.8ab2e9df.js"><link rel="prefetch" href="/assets/js/619.00637cc7.js"><link rel="prefetch" href="/assets/js/62.638325e0.js"><link rel="prefetch" href="/assets/js/620.1b0b4cb6.js"><link rel="prefetch" href="/assets/js/621.8b370627.js"><link rel="prefetch" href="/assets/js/622.2615c03d.js"><link rel="prefetch" href="/assets/js/623.958acc26.js"><link rel="prefetch" href="/assets/js/624.e5603812.js"><link rel="prefetch" href="/assets/js/625.59a01c3d.js"><link rel="prefetch" href="/assets/js/626.f58048e3.js"><link rel="prefetch" href="/assets/js/627.87e87a88.js"><link rel="prefetch" href="/assets/js/628.e0f97481.js"><link rel="prefetch" href="/assets/js/629.52ed9186.js"><link rel="prefetch" href="/assets/js/63.5474bba6.js"><link rel="prefetch" href="/assets/js/630.c797b8cb.js"><link rel="prefetch" href="/assets/js/631.d35e30c7.js"><link rel="prefetch" href="/assets/js/632.731c602a.js"><link rel="prefetch" href="/assets/js/633.bd9bbcb6.js"><link rel="prefetch" href="/assets/js/634.a6e4fc91.js"><link rel="prefetch" href="/assets/js/635.f8e5aa9e.js"><link rel="prefetch" href="/assets/js/636.cb5d0aa9.js"><link rel="prefetch" href="/assets/js/637.bcfad99c.js"><link rel="prefetch" href="/assets/js/638.35ee32bb.js"><link rel="prefetch" href="/assets/js/639.01e21a8d.js"><link rel="prefetch" href="/assets/js/64.30628b19.js"><link rel="prefetch" href="/assets/js/640.7b2d2b86.js"><link rel="prefetch" href="/assets/js/641.c3d6d4d1.js"><link rel="prefetch" href="/assets/js/642.5c79f394.js"><link rel="prefetch" href="/assets/js/643.96db5b9d.js"><link rel="prefetch" href="/assets/js/644.2aa94e55.js"><link rel="prefetch" href="/assets/js/645.ff9620b7.js"><link rel="prefetch" href="/assets/js/646.c5baff7a.js"><link rel="prefetch" href="/assets/js/647.55212d7c.js"><link rel="prefetch" href="/assets/js/648.e54efbbd.js"><link rel="prefetch" href="/assets/js/649.5c3d2fb0.js"><link rel="prefetch" href="/assets/js/65.71816150.js"><link rel="prefetch" href="/assets/js/650.d8c7f774.js"><link rel="prefetch" href="/assets/js/651.27bee633.js"><link rel="prefetch" href="/assets/js/652.f8048b0b.js"><link rel="prefetch" href="/assets/js/653.709d6491.js"><link rel="prefetch" href="/assets/js/654.91db8d84.js"><link rel="prefetch" href="/assets/js/655.7048d384.js"><link rel="prefetch" href="/assets/js/656.cff77d15.js"><link rel="prefetch" href="/assets/js/657.31586ab9.js"><link rel="prefetch" href="/assets/js/658.d25f21ee.js"><link rel="prefetch" href="/assets/js/659.3b7b08e9.js"><link rel="prefetch" href="/assets/js/66.70128440.js"><link rel="prefetch" href="/assets/js/660.ea92cebe.js"><link rel="prefetch" href="/assets/js/661.525b3cc7.js"><link rel="prefetch" href="/assets/js/662.1d1e6748.js"><link rel="prefetch" href="/assets/js/663.336eff72.js"><link rel="prefetch" href="/assets/js/664.d6018682.js"><link rel="prefetch" href="/assets/js/665.778f5c84.js"><link rel="prefetch" href="/assets/js/666.657a68c7.js"><link rel="prefetch" href="/assets/js/667.95afe4ad.js"><link rel="prefetch" href="/assets/js/668.ecc000eb.js"><link rel="prefetch" href="/assets/js/669.28290568.js"><link rel="prefetch" href="/assets/js/67.17a8cd4b.js"><link rel="prefetch" href="/assets/js/670.e7cd9bb3.js"><link rel="prefetch" href="/assets/js/671.cf0e5261.js"><link rel="prefetch" href="/assets/js/672.41a00248.js"><link rel="prefetch" href="/assets/js/673.a43d5324.js"><link rel="prefetch" href="/assets/js/674.e8ce84c9.js"><link rel="prefetch" href="/assets/js/675.5b30e80c.js"><link rel="prefetch" href="/assets/js/676.d850673a.js"><link rel="prefetch" href="/assets/js/677.29732340.js"><link rel="prefetch" href="/assets/js/678.941bcc4a.js"><link rel="prefetch" href="/assets/js/679.78241996.js"><link rel="prefetch" href="/assets/js/68.659d8ed6.js"><link rel="prefetch" href="/assets/js/680.ab48a823.js"><link rel="prefetch" href="/assets/js/681.436a9245.js"><link rel="prefetch" href="/assets/js/682.2e55c96d.js"><link rel="prefetch" href="/assets/js/683.4d340990.js"><link rel="prefetch" href="/assets/js/684.24cee4d8.js"><link rel="prefetch" href="/assets/js/685.bfbe4a55.js"><link rel="prefetch" href="/assets/js/686.30c2b372.js"><link rel="prefetch" href="/assets/js/687.428bf5e6.js"><link rel="prefetch" href="/assets/js/688.932602b0.js"><link rel="prefetch" href="/assets/js/689.79ffd250.js"><link rel="prefetch" href="/assets/js/69.4b51d971.js"><link rel="prefetch" href="/assets/js/690.9ee2073d.js"><link rel="prefetch" href="/assets/js/691.28a15e04.js"><link rel="prefetch" href="/assets/js/692.d215f449.js"><link rel="prefetch" href="/assets/js/693.56137f50.js"><link rel="prefetch" href="/assets/js/694.935aa814.js"><link rel="prefetch" href="/assets/js/695.f8449085.js"><link rel="prefetch" href="/assets/js/696.979f6704.js"><link rel="prefetch" href="/assets/js/697.f821c698.js"><link rel="prefetch" href="/assets/js/698.c420c072.js"><link rel="prefetch" href="/assets/js/699.6045b82f.js"><link rel="prefetch" href="/assets/js/7.cb453354.js"><link rel="prefetch" href="/assets/js/70.008e75e5.js"><link rel="prefetch" href="/assets/js/700.aac16fe5.js"><link rel="prefetch" href="/assets/js/701.467fe66b.js"><link rel="prefetch" href="/assets/js/702.122f5b45.js"><link rel="prefetch" href="/assets/js/703.fef8eed8.js"><link rel="prefetch" href="/assets/js/704.282508b1.js"><link rel="prefetch" href="/assets/js/705.31048778.js"><link rel="prefetch" href="/assets/js/706.3a8b2d98.js"><link rel="prefetch" href="/assets/js/707.b02d8ecc.js"><link rel="prefetch" href="/assets/js/708.a32666cb.js"><link rel="prefetch" href="/assets/js/709.b0af4c50.js"><link rel="prefetch" href="/assets/js/71.3324454d.js"><link rel="prefetch" href="/assets/js/710.cb9fbc76.js"><link rel="prefetch" href="/assets/js/711.87b5ef21.js"><link rel="prefetch" href="/assets/js/712.3a1495ff.js"><link rel="prefetch" href="/assets/js/713.4291fb23.js"><link rel="prefetch" href="/assets/js/714.c4ef4bfa.js"><link rel="prefetch" href="/assets/js/715.5411c40f.js"><link rel="prefetch" href="/assets/js/716.558bcb23.js"><link rel="prefetch" href="/assets/js/717.81d931a9.js"><link rel="prefetch" href="/assets/js/718.c062bbdf.js"><link rel="prefetch" href="/assets/js/719.ce826421.js"><link rel="prefetch" href="/assets/js/72.80901173.js"><link rel="prefetch" href="/assets/js/720.d0a39b7d.js"><link rel="prefetch" href="/assets/js/721.acfebd27.js"><link rel="prefetch" href="/assets/js/722.384381d3.js"><link rel="prefetch" href="/assets/js/723.a0e8eea4.js"><link rel="prefetch" href="/assets/js/724.dc68d7a4.js"><link rel="prefetch" href="/assets/js/725.b7bad5b5.js"><link rel="prefetch" href="/assets/js/726.2522c4e5.js"><link rel="prefetch" href="/assets/js/727.9e5bc334.js"><link rel="prefetch" href="/assets/js/728.54bc121f.js"><link rel="prefetch" href="/assets/js/729.d3519eee.js"><link rel="prefetch" href="/assets/js/73.69475df0.js"><link rel="prefetch" href="/assets/js/730.a8363d2d.js"><link rel="prefetch" href="/assets/js/731.dad88242.js"><link rel="prefetch" href="/assets/js/732.0e273d9e.js"><link rel="prefetch" href="/assets/js/733.5df56316.js"><link rel="prefetch" href="/assets/js/734.65973254.js"><link rel="prefetch" href="/assets/js/735.70d2a754.js"><link rel="prefetch" href="/assets/js/736.aad25a62.js"><link rel="prefetch" href="/assets/js/737.6e2c4818.js"><link rel="prefetch" href="/assets/js/738.a240fd0c.js"><link rel="prefetch" href="/assets/js/739.5229b014.js"><link rel="prefetch" href="/assets/js/74.e1150ef8.js"><link rel="prefetch" href="/assets/js/740.370bd327.js"><link rel="prefetch" href="/assets/js/741.d51f2981.js"><link rel="prefetch" href="/assets/js/742.147e4f0c.js"><link rel="prefetch" href="/assets/js/743.3bbe4872.js"><link rel="prefetch" href="/assets/js/744.e30a8831.js"><link rel="prefetch" href="/assets/js/745.ed874713.js"><link rel="prefetch" href="/assets/js/746.b06fe6be.js"><link rel="prefetch" href="/assets/js/747.fee0a58e.js"><link rel="prefetch" href="/assets/js/748.5b6b1dd9.js"><link rel="prefetch" href="/assets/js/749.63eeddd7.js"><link rel="prefetch" href="/assets/js/75.f09edc3f.js"><link rel="prefetch" href="/assets/js/750.b9e661aa.js"><link rel="prefetch" href="/assets/js/751.9ffc6617.js"><link rel="prefetch" href="/assets/js/752.25665624.js"><link rel="prefetch" href="/assets/js/753.20a36692.js"><link rel="prefetch" href="/assets/js/754.4d91cf5f.js"><link rel="prefetch" href="/assets/js/755.63cf0164.js"><link rel="prefetch" href="/assets/js/756.f924cf85.js"><link rel="prefetch" href="/assets/js/757.880529a1.js"><link rel="prefetch" href="/assets/js/758.5c54c9ea.js"><link rel="prefetch" href="/assets/js/759.e907a11c.js"><link rel="prefetch" href="/assets/js/76.edd38760.js"><link rel="prefetch" href="/assets/js/760.25a88f22.js"><link rel="prefetch" href="/assets/js/761.b3f9a72e.js"><link rel="prefetch" href="/assets/js/762.f7e46ea3.js"><link rel="prefetch" href="/assets/js/763.be700e67.js"><link rel="prefetch" href="/assets/js/764.e02133f4.js"><link rel="prefetch" href="/assets/js/765.bc997b94.js"><link rel="prefetch" href="/assets/js/766.e0857398.js"><link rel="prefetch" href="/assets/js/767.85d8ef77.js"><link rel="prefetch" href="/assets/js/768.313971f2.js"><link rel="prefetch" href="/assets/js/769.b1d8359c.js"><link rel="prefetch" href="/assets/js/77.bad1e17d.js"><link rel="prefetch" href="/assets/js/770.c51c77a6.js"><link rel="prefetch" href="/assets/js/771.bced04e3.js"><link rel="prefetch" href="/assets/js/772.b363306d.js"><link rel="prefetch" href="/assets/js/773.1765d7c9.js"><link rel="prefetch" href="/assets/js/774.e64e812a.js"><link rel="prefetch" href="/assets/js/775.80ba2e01.js"><link rel="prefetch" href="/assets/js/776.264a89cf.js"><link rel="prefetch" href="/assets/js/777.640660f8.js"><link rel="prefetch" href="/assets/js/778.ce471428.js"><link rel="prefetch" href="/assets/js/779.fa84a589.js"><link rel="prefetch" href="/assets/js/78.871caac1.js"><link rel="prefetch" href="/assets/js/780.788b9350.js"><link rel="prefetch" href="/assets/js/781.baa1fd6f.js"><link rel="prefetch" href="/assets/js/782.e07dfca4.js"><link rel="prefetch" href="/assets/js/783.2b476376.js"><link rel="prefetch" href="/assets/js/784.6b40fe65.js"><link rel="prefetch" href="/assets/js/785.19de1934.js"><link rel="prefetch" href="/assets/js/786.b1910024.js"><link rel="prefetch" href="/assets/js/787.70e33999.js"><link rel="prefetch" href="/assets/js/788.7a676aa7.js"><link rel="prefetch" href="/assets/js/789.bec5efe7.js"><link rel="prefetch" href="/assets/js/79.8d41f9dc.js"><link rel="prefetch" href="/assets/js/790.c5dd47a4.js"><link rel="prefetch" href="/assets/js/791.a3fb9ec9.js"><link rel="prefetch" href="/assets/js/792.f6f28bf1.js"><link rel="prefetch" href="/assets/js/793.131d60fe.js"><link rel="prefetch" href="/assets/js/794.b2797539.js"><link rel="prefetch" href="/assets/js/795.f72bf6cb.js"><link rel="prefetch" href="/assets/js/796.f5318e9b.js"><link rel="prefetch" href="/assets/js/797.5ec81ca5.js"><link rel="prefetch" href="/assets/js/798.10a6d862.js"><link rel="prefetch" href="/assets/js/799.0b58983b.js"><link rel="prefetch" href="/assets/js/8.f8232281.js"><link rel="prefetch" href="/assets/js/80.29f002cb.js"><link rel="prefetch" href="/assets/js/800.bc35c5a2.js"><link rel="prefetch" href="/assets/js/801.6bedad40.js"><link rel="prefetch" href="/assets/js/802.8461a07c.js"><link rel="prefetch" href="/assets/js/803.595e6098.js"><link rel="prefetch" href="/assets/js/804.c8ff7677.js"><link rel="prefetch" href="/assets/js/805.502828e9.js"><link rel="prefetch" href="/assets/js/806.94964806.js"><link rel="prefetch" href="/assets/js/807.f0736b45.js"><link rel="prefetch" href="/assets/js/808.ca5c224c.js"><link rel="prefetch" href="/assets/js/809.ee75100a.js"><link rel="prefetch" href="/assets/js/81.5061f047.js"><link rel="prefetch" href="/assets/js/810.cb147b2c.js"><link rel="prefetch" href="/assets/js/811.7c43a374.js"><link rel="prefetch" href="/assets/js/812.f94931de.js"><link rel="prefetch" href="/assets/js/813.c315fb59.js"><link rel="prefetch" href="/assets/js/814.df98f474.js"><link rel="prefetch" href="/assets/js/815.b1545a3a.js"><link rel="prefetch" href="/assets/js/816.559f5d48.js"><link rel="prefetch" href="/assets/js/817.10fbbe90.js"><link rel="prefetch" href="/assets/js/818.15940c94.js"><link rel="prefetch" href="/assets/js/819.bd8da69e.js"><link rel="prefetch" href="/assets/js/82.6a318ad3.js"><link rel="prefetch" href="/assets/js/820.09a8aeac.js"><link rel="prefetch" href="/assets/js/821.7b47f642.js"><link rel="prefetch" href="/assets/js/822.bb268094.js"><link rel="prefetch" href="/assets/js/823.b5a869d6.js"><link rel="prefetch" href="/assets/js/824.702c7fe5.js"><link rel="prefetch" href="/assets/js/825.87185f83.js"><link rel="prefetch" href="/assets/js/826.06ffbcbf.js"><link rel="prefetch" href="/assets/js/827.ca37d712.js"><link rel="prefetch" href="/assets/js/83.ec14e26e.js"><link rel="prefetch" href="/assets/js/84.b45772f4.js"><link rel="prefetch" href="/assets/js/85.e93f7791.js"><link rel="prefetch" href="/assets/js/86.bfcc7e96.js"><link rel="prefetch" href="/assets/js/87.b1a0c17d.js"><link rel="prefetch" href="/assets/js/88.e827f4b8.js"><link rel="prefetch" href="/assets/js/89.3a23fcc3.js"><link rel="prefetch" href="/assets/js/9.49c28c7c.js"><link rel="prefetch" href="/assets/js/90.3e70c7d5.js"><link rel="prefetch" href="/assets/js/91.0c65c47f.js"><link rel="prefetch" href="/assets/js/92.ce986bb8.js"><link rel="prefetch" href="/assets/js/93.127730e7.js"><link rel="prefetch" href="/assets/js/94.4cdb42ca.js"><link rel="prefetch" href="/assets/js/95.27d08c91.js"><link rel="prefetch" href="/assets/js/96.2bfffb0d.js"><link rel="prefetch" href="/assets/js/97.8bb20cd6.js"><link rel="prefetch" href="/assets/js/98.b3ed5a1a.js"><link rel="prefetch" href="/assets/js/99.c6ca9d8c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3be6d54c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">随风</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/source-study/" class="nav-link">
  课程学习
</a></div><div class="nav-item"><a href="/source-vue/" class="nav-link">
  Vue源码
</a></div><div class="nav-item"><a href="/source-react/" class="nav-link router-link-active">
  React
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front End Menu" class="dropdown-title"><span class="title">Front End</span> <span class="arrow down"></span></button> <button type="button" aria-label="Front End Menu" class="mobile-dropdown-title"><span class="title">Front End</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end/Html/" class="nav-link">
  HTML-DOM
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/front-end/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Flutter/" class="nav-link">
  Flutter
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Electron/" class="nav-link">
  Electron
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Code/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Engineering/" class="nav-link">
  工程化
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Interview/" class="nav-link">
  前端面试题
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Visual/" class="nav-link">
  可视化
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Security/" class="nav-link">
  前端安全
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Log/" class="nav-link">
  前端性能监控
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="back End Menu" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="back End Menu" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/Node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/back-end/Docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/back-end/Nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/back-end/Mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/back-end/Shell/" class="nav-link">
  shell
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="tools End Menu" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="tools End Menu" class="mobile-dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/Ai/" class="nav-link">
  Ai
</a></li><li class="dropdown-item"><!----> <a href="/tools/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/VScode/" class="nav-link">
  VScode
</a></li><li class="dropdown-item"><!----> <a href="/tools/Chrome/" class="nav-link">
  Chrome
</a></li><li class="dropdown-item"><!----> <a href="/tools/Other/" class="nav-link">
  工具
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="wander End Menu" class="dropdown-title"><span class="title">随记</span> <span class="arrow down"></span></button> <button type="button" aria-label="wander End Menu" class="mobile-dropdown-title"><span class="title">随记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wander/Work/" class="nav-link">
  工作
</a></li><li class="dropdown-item"><!----> <a href="/wander/Life/" class="nav-link">
  生活
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/source-study/" class="nav-link">
  课程学习
</a></div><div class="nav-item"><a href="/source-vue/" class="nav-link">
  Vue源码
</a></div><div class="nav-item"><a href="/source-react/" class="nav-link router-link-active">
  React
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front End Menu" class="dropdown-title"><span class="title">Front End</span> <span class="arrow down"></span></button> <button type="button" aria-label="Front End Menu" class="mobile-dropdown-title"><span class="title">Front End</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end/Html/" class="nav-link">
  HTML-DOM
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/front-end/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Flutter/" class="nav-link">
  Flutter
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Electron/" class="nav-link">
  Electron
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Code/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Engineering/" class="nav-link">
  工程化
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Interview/" class="nav-link">
  前端面试题
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Visual/" class="nav-link">
  可视化
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Security/" class="nav-link">
  前端安全
</a></li><li class="dropdown-item"><!----> <a href="/front-end/Log/" class="nav-link">
  前端性能监控
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="back End Menu" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="back End Menu" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/Node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/back-end/Docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/back-end/Nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/back-end/Mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/back-end/Shell/" class="nav-link">
  shell
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="tools End Menu" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="tools End Menu" class="mobile-dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/Ai/" class="nav-link">
  Ai
</a></li><li class="dropdown-item"><!----> <a href="/tools/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/VScode/" class="nav-link">
  VScode
</a></li><li class="dropdown-item"><!----> <a href="/tools/Chrome/" class="nav-link">
  Chrome
</a></li><li class="dropdown-item"><!----> <a href="/tools/Other/" class="nav-link">
  工具
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="wander End Menu" class="dropdown-title"><span class="title">随记</span> <span class="arrow down"></span></button> <button type="button" aria-label="wander End Menu" class="mobile-dropdown-title"><span class="title">随记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wander/Work/" class="nav-link">
  工作
</a></li><li class="dropdown-item"><!----> <a href="/wander/Life/" class="nav-link">
  生活
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Source React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react原理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react-tips</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>react-hooks</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/source-react/react-ahooks1.html" class="sidebar-link">一文归纳 React Hooks 常用场景</a></li><li><a href="/source-react/react-ahooks2.html" class="sidebar-link">一文搞定常用的自定义 React Hooks</a></li><li><a href="/source-react/react-api.html" aria-current="page" class="active sidebar-link">「React 深入」一文吃透React v18全部Api</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/source-react/react-api.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/source-react/react-api.html#组件类" class="sidebar-link">组件类</a></li><li class="sidebar-sub-header"><a href="/source-react/react-api.html#工具类" class="sidebar-link">工具类</a></li><li class="sidebar-sub-header"><a href="/source-react/react-api.html#声明周期" class="sidebar-link">声明周期</a></li><li class="sidebar-sub-header"><a href="/source-react/react-api.html#react-hooks" class="sidebar-link">React-hooks</a></li><li class="sidebar-sub-header"><a href="/source-react/react-api.html#react-dom" class="sidebar-link">react-dom</a></li><li class="sidebar-sub-header"><a href="/source-react/react-api.html#最后" class="sidebar-link">最后</a></li><li class="sidebar-sub-header"><a href="/source-react/react-api.html#资料" class="sidebar-link">资料</a></li></ul></li><li><a href="/source-react/react-hooks.html" class="sidebar-link">换个角度思考React Hooks</a></li><li><a href="/source-react/react-hooks-00.html" class="sidebar-link">搞懂这12个Hooks，保证让你玩转React</a></li><li><a href="/source-react/react-hooks-01.html" class="sidebar-link">React的性能优化(useMemo和useCallback)的使用</a></li><li><a href="/source-react/react-hooks-use.html" class="sidebar-link">第一个可以在条件语句中使用的原生hook诞生了</a></li><li><a href="/source-react/react-memo.html" class="sidebar-link">React hooks中memo,usememo,useCallback的区别</a></li><li><a href="/source-react/react-useEffect.html" class="sidebar-link">useEffect和useLayoutEffect、useInsertionEffect的区别</a></li><li><a href="/source-react/react-useEvent.html" class="sidebar-link">useEvent：一个显著降低Hooks心智负担的原生Hook</a></li><li><a href="/source-react/react-vue-hooks.html" class="sidebar-link">React Hooks vs Vue Composition Api</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>名词</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Next</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>本文将会全面总结所有的React Api，包含组件类、工具类、生命周期、react-hooks、react-dom五大模块，并配带示例，帮助大家更好的掌握，如有不全、不对的地方欢迎大家指出</p> <p>在正式开始之前，一起来看看</p> <ul><li>React v18中对react-dom做了那些改动，增加了那些新的hooks?</li> <li>useRef除了获取元素的节点信息，还能做什么？</li> <li>为什么会有Children.map?它与不同的遍历有和不同</li> <li>类组件的生命周期在不同的版本是怎么变化的</li> <li>子元素如何渲染到父元素上面的</li> <li>...</li></ul> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>附上一张今天的学习图谱～</p> <p><img src="/assets/img/562c26a1f2394bd1a27c38cba266b848_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.21320f88.png" alt="学习图谱"></p> <h2 id="组件类"><a href="#组件类" class="header-anchor">#</a> 组件类</h2> <h3 id="component"><a href="#component" class="header-anchor">#</a> Component</h3> <p>在React中提供了两种形式，一种是类组件，另一种是函数式组件，而在类组件组件中需要使用Component继承，这个组件没有什么好讲的，我们可以看看源码？</p> <p>文件位置 packages/react/src/ReactBaseClasses.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Component</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context<span class="token punctuation">,</span> updater</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token operator">=</span> props<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>refs <span class="token operator">=</span> emptyObject<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>updater <span class="token operator">=</span> updater <span class="token operator">||</span> ReactNoopUpdateQueue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Component</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isReactComponent <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>可以看出Component进行一些初始化的工作，updater保存着更新组件的方法</p> <h3 id="_1-purecomponent"><a href="#_1-purecomponent" class="header-anchor">#</a> 1. PureComponent</h3> <p><span style="color:red;"><strong>PureComponent：会对props和state进行浅比较，跳过不必要的更新，提高组件性能</strong></span></p> <p>可以说PureComponent和Component基本完全一致，但PureComponent会浅比较，也就是较少render渲染的次数，所以PureComponent一般用于性能优化</p> <p>举个例子</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd-mobile'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            data<span class="token operator">:</span> <span class="token punctuation">{</span>
                number<span class="token operator">:</span> <span class="token number">0</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>数字：<span class="token punctuation">{</span>data<span class="token punctuation">.</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Button color<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
                data<span class="token punctuation">.</span>number<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>数字加<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> index<span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/9fed4f0cbef7459c8c50069b907e11ab_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.321aed00.png" alt="效果"></p> <p>可以发现，当我们点击按钮的时候，数字并没有刷新，这是因为PureComponent会比较两次的data对象，它会认为这种写法并没有改变原先的data，所以不会改变</p> <p>我们只需要</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>data <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>这样就可以解决这个问题了</p> <h4 id="与shouldcomponentupdate的关系如何"><a href="#与shouldcomponentupdate的关系如何" class="header-anchor">#</a> 与shouldComponentUpdate的关系如何</h4> <p>在生命周期中有一个shouldComponentUpdate()函数，那么它能改变PureComponent吗？</p> <p>其实是可以的，shouldComponentUpdate()如果被定义，就会对新旧props、state进行shallowEqual(浅比较)比较，新旧一旦不一致，便会触发update</p> <p>也可以这么理解：<span style="color:blue;">PureComponent通过自带的props和state的浅比较实现了ShouldComponentUpdate()，这点是Component不具备的</span></p> <p><span style="color:red;">PureComponent可能会因深层的数据不一致而产生错误的否定判断，从而导致ShouldComponentUpdate结果返回false，界面得不到更新，要谨慎使用</span></p> <h3 id="memo"><a href="#memo" class="header-anchor">#</a> memo</h3> <p>memo:结合了PureComponent纯组件和ShouldComponentUpdate功能，会对传入的props进行一次对比，然后根据第二个函数返回值来进一步判断哪些props需要更新</p> <p><span style="color:red;">要注意memo是一个高阶组件，函数式组件和类组件都可以使用</span></p> <p>memo接受两个参数</p> <ul><li><p>第一个参数: 组件本身，也就是要优化的组件</p></li> <li><p>第二个参数: (pre,next) =&gt; boolean</p> <ul><li>pre:之前的数据</li> <li>next: 现在的数据</li></ul> <p>返回一个布尔值，若为true则不更新，为false则更新</p></li></ul> <h4 id="性能优化"><a href="#性能优化" class="header-anchor">#</a> 性能优化</h4> <p>看个🌰</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd-mobile'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子组件渲染'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        大家好，我是小杜杜<span class="token operator">~</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            flag<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> flag <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Child<span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Button
                color<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span>
                onClick <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> flag<span class="token operator">:</span> <span class="token operator">!</span>flag <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token operator">&gt;</span>状态切换<span class="token punctuation">{</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index<span class="token punctuation">;</span>
</code></pre></div><p>在上述代码中，我们设置一个子组件，也就是Child和一个按钮，按钮的效果是切换flag的状态，可以看出flag和Child之间没有任何关系，那么在切换状态的时候，Child会刷新吗？</p> <p><img src="/assets/img/42bb0a9e2a75477782f80d4b93cc4e50_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.34584678.png" alt="效果"></p> <p>可以看出，在我们切换状态的时候，Child实际上也会刷新，我们肯定不希望组件做无关的刷新，那么我们加上memo来看看效果</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> HOCChild <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span>Child<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="/assets/img/429335cd0dd842028c19d65b8d147f46_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.97711e23.gif" alt="效果"></p> <p>可以看出，加上memo后，Child不会在做无关的渲染，从而达到 <strong>性能优化</strong> 的作用</p> <h4 id="第二个参数的作用"><a href="#第二个参数的作用" class="header-anchor">#</a> 第二个参数的作用</h4> <p>🌰：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> memo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd-mobile'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>number<span class="token punctuation">}</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'子组件渲染'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        大家好，我是小肚肚<span class="token operator">~</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>传递的数字<span class="token operator">:</span> <span class="token punctuation">{</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> HOCChild <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span>Child<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>pre<span class="token punctuation">.</span>number <span class="token operator">===</span> next<span class="token punctuation">.</span>number<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>next<span class="token punctuation">.</span>number <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span> 
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            flag<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            number<span class="token operator">:</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> flag<span class="token punctuation">,</span> number <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>HOCChild number <span class="token operator">=</span> <span class="token punctuation">{</span>number<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Button
                color<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> 
                onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> flag<span class="token operator">:</span> <span class="token operator">!</span>flag<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token operator">&gt;</span>状态切换<span class="token punctuation">{</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Button
                color<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span>
                style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginLeft<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">}</span> 
                onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> number<span class="token operator">:</span> number <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token operator">&gt;</span>数字加一：<span class="token punctuation">{</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/414605cc3658444d9a36938275ee7b00_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.ef14439d.gif" alt="效果"></p> <p>当数字小宇7，才会触发Child的更新，通过返回的布尔值来控制</p> <h4 id="memo的注意事项"><a href="#memo的注意事项" class="header-anchor">#</a> memo的注意事项</h4> <p>React.memo和PureComponent的区别</p> <ul><li><strong><span style="color:red;">服务对象不同：PureComponent服务于类组件，React.memo既可以服务类组件,也可以服务于函数式组件，useMemo服务于函数式组件</span></strong></li> <li><strong><span style="color:red;">针对的对象不同：PureComponent针对的是props和state，React.memo只能针对props来决定是否渲染</span></strong></li></ul> <p>这里还有个小的注意点: memo的第二个参数的返回值与shouldComponentUpdate的返回值相反的，经常会弄混，还要多多注意</p> <ul><li><span style="color:red;">memo：返回true组件不渲染，返回false组件重新渲染</span></li> <li><span style="color:red;">shouldComponentUpdate：返回true组件渲染，返回false不渲染</span></li></ul> <h3 id="forwardref"><a href="#forwardref" class="header-anchor">#</a> forwardRef</h3> <p><span style="color:blue;">forwardRef：引用传递，是一种通过组件向子组件自动传递引用ref的技术。</span>对于应用者的大多数组件没什么作用，但对于一些重复使用的组件，可能还用。</p> <p>听完介绍是不是感觉云里雾里，官方对forwardRef介绍的也很少，我们来看看转发的问题</p> <p><strong><span style="color:red;">在React中，React不允许ref通过props传递，因为ref是组件中固定存在的，在组件调用的过程中，会被特殊处理，而forwardRef就是为了解决这件事而诞生的，让ref可以通过props传递</span></strong></p> <p>举个🌰，父组件想要获取孙组件上的信息，我们直接用ref传递会怎么样</p> <p><img src="/assets/img/1102af2c9a5a4d228fad4c8b645a9995_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.742be36b.jpg" alt="ref传递"></p> <p>接下来看看利用forwardRef来转发下ref，就可以解决这个问题了</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Son</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>sonRef<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>孙组件<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p ref<span class="token operator">=</span><span class="token punctuation">{</span>sonRef<span class="token punctuation">}</span><span class="token operator">&gt;</span>大家好，我是小杜杜<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> childRef <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>子组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Son sonRef<span class="token operator">=</span><span class="token punctuation">{</span>childRef<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> ForwardRef <span class="token operator">=</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>Child childRef<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    node <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>父组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>ForwardRef ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">node</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node <span class="token operator">=</span> node<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/6d986647ea24437a9596f70da0f415cb_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.82fe16a7.jpg" alt="效果"></p> <p>如此一来就解决了不能在react组件中传递ref的问题，至于复用的组件可能会用到，目前也没思路用forwardRef干吗，就当熟悉了</p> <h3 id="fragment"><a href="#fragment" class="header-anchor">#</a> Fragment</h3> <p>在React中，组件是不允许返回多个节点的</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是小杜杜<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
           <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>React<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
           <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Vue<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
</code></pre></div><p>我们想要解决这种情况需要为此套一个容器，如&lt;div&gt;&lt;/div&gt;</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是小杜杜<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>React<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Vue<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><p><span style="color:red;">但这样做，无疑会多增加一个节点，所以在<strong>16.0后，官方推出了Fragment碎片概念，能够让一个组件返回多个元素，『React.Framengt等价于&lt;&gt;&lt;/&gt;』</strong></span></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">return</span> <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是小杜杜<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>React<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Vue<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">&gt;</span>
</code></pre></div><p>可以看到React.Fragment 实际上是没有节点的</p> <p><img src="data:image/jpeg;base64,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" alt="React.Fragment"></p> <p>另外，react中支持数组的返回，像这样</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token operator">&lt;</span>p key<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span>我是小肚肚<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p key<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>React<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p key<span class="token operator">=</span><span class="token string">&quot;3&quot;</span><span class="token operator">&gt;</span>Vue<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token punctuation">]</span>
</code></pre></div><p><span style="color:blue;">我们在进行数组遍历的时候，React都会在底层处理，在外面嵌套了一个React.Fragment</span></p> <h3 id="fragment-与-的不同"><a href="#fragment-与-的不同" class="header-anchor">#</a> Fragment 与&lt;&gt;&lt;/&gt; 的不同</h3> <p>我们都知道&lt;&gt;&lt;/&gt;是&lt;Fragment&gt;&lt;/Fragment&gt;的简写，从原则上来说是一致的，那么你知道他们又什么不同吗？</p> <p><span style="color:red;">实际上，Fragment 这个组件可以赋值 key，也就是索引，&lt;&gt;&lt;/&gt;不能赋值</span>，应用在遍历数组上，有感兴趣的同学可以试一试～</p> <h3 id="lazy"><a href="#lazy" class="header-anchor">#</a> Lazy</h3> <p><span style="color:blue;">lazy：允许你定义一个动态加载组件，这样有助于缩减bundle的体积，并延迟加载在初次渲染时未用到的组件，也就是懒加载组件(高阶
组件)</span></p> <p>lazy接收一个函数，这个函数需要动态调用import() 如</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> LazyChild <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./child'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>那么 import('./child')是一个怎样的类型呢？</p> <p>实际上lazy必须接受一个函数，并且需要返回一个Promise,并且需要resolve一个defualt一个React组件，除此之外，lazy必须配合Suspense一起使用</p> <p>举个🌰：我加入了setTimeout方便看到更好的效果</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Suspense<span class="token punctuation">,</span> lazy <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Child <span class="token keyword">from</span> <span class="token string">'./child'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> DotLoading <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd-mobile'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> LazyChild <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">res</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>Child <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            show<span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> show <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Button color<span class="token operator">=</span><span class="token string">'primary'</span> onClick <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> show<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
                渲染
            <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
            <span class="token punctuation">{</span>
                show <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span>DotLoading color<span class="token operator">=</span><span class="token string">'primary'</span><span class="token operator">/</span><span class="token operator">&gt;</span>加载中<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>LazyChild<span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>
            <span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index<span class="token punctuation">;</span>
</code></pre></div><p>Child文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> img <span class="token keyword">from</span> <span class="token string">'./img.jpeg'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'照片渲染'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>img<span class="token punctuation">}</span> width<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">200</span><span class="token punctuation">}</span> height<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">160</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index<span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/4c0e47787a5e4e02ba5472625d20ce86_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.8ede1e51.gif" alt="效果"></p> <h3 id="suspense"><a href="#suspense" class="header-anchor">#</a> Suspense</h3> <p><span style="color:blue;">Suspense:让组件等待某个异步组件操作；直到该异步组件操作结束即可渲染</span></p> <p>与上面lazy中的案例一样，两者需要配合使用，其中fallback为等待时渲染的样式</p> <p>Suspense和lazy可以用于等待照片、脚本和一些异步的情况。</p> <h3 id="profiler"><a href="#profiler" class="header-anchor">#</a> Profiler</h3> <p><span style="color:blue;">Profiler：这个组件用于性能检测，可以检测一次react组件渲染时的性能开销</span></p> <p>此组件有两个参数</p> <ul><li>id：标识Profiler的唯一性</li> <li>onRender：回调函数，用于渲染完成，参数在下面讲解</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 🌰</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Profiler <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Index
</code></pre></div><p>让我们来看看打印的是什么</p> <p><img src="/assets/img/8bd6129306444e6281987f9ee05c7668_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.918a110b.jpg" alt="Profiler"></p> <ul><li>id：Profiler树的id</li> <li>phase：mount挂载，update渲染</li> <li>actualDuration：更新 committed 花费的渲染时间</li> <li>baseDuration：渲染整颗子树需要的时间</li> <li>startTime：更新开始渲染的时间</li> <li>commitTime：更新 committed 的时间</li> <li>interactions：本次更新的 interactions 的集合</li></ul> <p>需要注意的是，这个组件应该在需要的时候去使用，虽然Profiler是一个轻量级的，但也会带来负担</p> <h3 id="strictmode"><a href="#strictmode" class="header-anchor">#</a> StrictMode</h3> <p>StrictMode：严格模式，是一种用于突出显示应用程序中潜在问题的工具</p> <p>与Fragment一样，StrictMode也不会出现在UI层面，只是会检查和警告</p> <p>可以看一下官方的示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">ExampleApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Header <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>ComponentOne <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>ComponentTwo <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>Footer <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上述代码中只会对ComponentOne和ComponentTwo进行检查
主要有以下帮助：</p> <ul><li><a href="https://reactjs.org/docs/strict-mode.html#identifying-unsafe-lifecycles" target="_blank" rel="noopener noreferrer">识别具有不安全生命周期的组件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://reactjs.org/docs/strict-mode.html#warning-about-legacy-string-ref-api-usage" target="_blank" rel="noopener noreferrer">关于旧版字符串引用 API 使用的警告<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://reactjs.org/docs/strict-mode.html#warning-about-deprecated-finddomnode-usage" target="_blank" rel="noopener noreferrer">关于不推荐使用 findDOMNode 的警告<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://reactjs.org/docs/strict-mode.html#detecting-unexpected-side-effects" target="_blank" rel="noopener noreferrer">检测意外的副作用<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://reactjs.org/docs/strict-mode.html#detecting-legacy-context-api" target="_blank" rel="noopener noreferrer">检测遗留上下文 API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://reactjs.org/docs/strict-mode.html#ensuring-reusable-state" target="_blank" rel="noopener noreferrer">确保可重用状态<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="工具类"><a href="#工具类" class="header-anchor">#</a> 工具类</h2> <h3 id="createelement"><a href="#createelement" class="header-anchor">#</a> createElement</h3> <p>JSX会被编译成React.createElement的形式，然后被babel编译</p> <p>结构：</p> <p>React.createElement(type, [props], [...children]) 共有三个参数</p> <ul><li>type:原生组件的话是标签的字符串，如div，如果是react自定义组件，则会传入组件</li> <li>[ptops]：对象，dom类中的属性，组件的props</li> <li>[...children]：其他参数，会依次排序</li></ul> <p>举个栗子</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Info</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                Hi<span class="token punctuation">,</span> 我是小肚肚
                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>欢迎<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Childrend<span class="token operator">&gt;</span>我是子组件<span class="token operator">&lt;</span><span class="token operator">/</span>Childrend<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面代码会被解释为</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Info</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
            <span class="token string">'div'</span><span class="token punctuation">,</span>
            <span class="token keyword">null</span><span class="token punctuation">,</span> 
            <span class="token string">&quot;Hi, 我是小肚肚&quot;</span>，
            React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'欢迎'</span><span class="token punctuation">)</span>， <span class="token comment">// 原生标签</span>
            React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>
                Children<span class="token punctuation">,</span> <span class="token comment">// 自定义组件</span>
                <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// 属性</span>
                <span class="token string">'我是子组件'</span> <span class="token comment">// Children文本内容</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="注意点"><a href="#注意点" class="header-anchor">#</a> 注意点</h4> <ul><li>JSX的结构实际上和React.createElement写法一致，只是用JSX更加简单、方便</li> <li>经过React.createElement的包裹，最终会形成 $$typeof = Symbol(react.element)对象，对象保存了react.element的信息</li></ul> <h3 id="cloneelement"><a href="#cloneelement" class="header-anchor">#</a> cloneElement</h3> <p><span style="color:blue;">cloneElement: 克隆并返回一个新的React元素</span></p> <p>结构：</p> <div class="language-js extra-class"><pre class="language-js"><code>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> <span class="token punctuation">[</span>props<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>children<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>React.cloneElement()几乎等同于</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>element<span class="token punctuation">.</span>type <span class="token punctuation">{</span><span class="token operator">...</span>element<span class="token punctuation">.</span>props<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>element<span class="token operator">&gt;</span>
</code></pre></div><p>举个🌰：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> children <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">cloneElement</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>大家好，我是小肚肚<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>， <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'小肚肚'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Child<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>打印下children来看看：</p> <p><img src="/assets/img/1eac481267424eba9a0115b5b2d6522c_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.814d9b45.jpg" alt="Children"></p> <p>其实是可以看到传递的name的，也就是说可以通过React.cloneElement方法去对组件进行一些赋能</p> <h3 id="createcontext"><a href="#createcontext" class="header-anchor">#</a> createContext</h3> <p><span style="color:blue;">createContext: 相信大家对这个API很熟悉，用于传递上下文。createContext会创建一个Context对象，用Provider的value来传递值，用Consumer接受value</span></p> <p>实现一个父传孙的小🌰</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Context <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Context<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>Son <span class="token punctuation">{</span><span class="token operator">...</span>value<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Context<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Son</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>大家好，我是<span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>幸运数字是：<span class="token punctuation">{</span>props<span class="token punctuation">.</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> _<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'小肚肚'</span>，
        number<span class="token operator">:</span> <span class="token number">7</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Context<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>data<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Child <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Context<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Index<span class="token punctuation">;</span>
</code></pre></div><p><img src="data:image/jpeg;base64,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" alt="效果"></p> <blockquote><p>注意：如果Consumer上一级一直没有Provider，则会引用defaultValue作为value.
只有当组件缩出的树中没有匹配到Provider时，其defaultValue参数才会生效</p></blockquote> <h3 id="children"><a href="#children" class="header-anchor">#</a> Children</h3> <p><span style="color:blue;">Children：提供处理this.props.children不透明数据结构的使用程序</span></p> <p>那么什么是不透明数据呢？</p> <p>先来看个🌰</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> children<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Child<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>大家好，我是小肚肚！<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>大家好，我是小肚肚！<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>大家好，我是小肚肚！<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Hello<span class="token operator">~</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Child<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index
</code></pre></div><p>打印children
<img src="/assets/img/ef75bab50b1a47e2b4cd5a1b75387eb3_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.64cedeff.jpg" alt="children"></p> <p>我们可以看到每个节点都打印出来了，这种情况属于透明的，但我们要是遍历看看</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>Child<span class="token operator">&gt;</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>p key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&gt;</span>大家好，我是小杜杜<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Child<span class="token operator">&gt;</span>
</code></pre></div><p><img src="/assets/img/dd56173a0c05431e8295c363b2e69d5a_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.4f032247.jpg" alt="打印"></p> <p><span style="color:red;">却发现我们遍历的三个元素被包裹了一层，这种数据被称为<strong>不透明</strong>，我们想要处理这种数据，就要依赖React.children来解决</span></p> <ul><li><p>Children.map</p> <p>Children.map:遍历，并返回一个数组，针对上面的情况，我们可以通过这个方法将数据遍历会原先的</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> React<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> <span class="token parameter">item</span><span class="token operator">=&gt;</span> item<span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/887f747c02d94a2e939cda97bb54489e_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.aa70ac58.jpg" alt="Children.map效果"></p></li> <li><p>Children.forEach</p> <p>Children.forEach:与Children.map类似,不同的是Children.forEach并不会返回值，而是停留在遍历阶段</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    React<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> <span class="token parameter">item</span><span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> children<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/assets/img/dd7219448191481d8c9c22c0b0008248_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.581d3988.jpg" alt="效果"></p></li> <li><p>Children.count</p> <p>Chilren.count: 返回Child内的总个数，等于回调传递给maip或forEach将被调用的次数，如</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> React<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
    retnrun children
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>Children.only</p> <p>Chilren.only: 验证Child是否只有一个元素，如果是，则正常返回，如果不是，则会报错</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>React<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> children
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>Children.toArray</p> <p>Chilren.toArray:以平面数组的形式返回children不透明数据结构，每个子元素都分配有键</p> <p>如果你想在你的渲染方法中操作子元素的集合，特别是如果你想this.props.children在传递它之前重新排序或者切片，还是很有用的</p> <p>在原先的例子上在加一次来看看</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'原来的数据：'</span><span class="token punctuation">,</span> <span class="token string">'children'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> React<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'扁平后的数据'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Child<span class="token operator">&gt;</span>
            <span class="token punctuation">{</span>
                <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">ele</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>p key<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ele<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span>大家好，我是小杜杜<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Child<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index
</code></pre></div><p><img src="/assets/img/916ea01d44af45f0b1aee498918b040b_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.8c69ac0e.jpg" alt="效果"></p> <p><span style="color:red;">这里需要注意key，经过Children.toArray处理后，会给原本的key添加前缀，以使的每个元素key的范围都限定在此函数如参数组的对象内</span></p></li></ul> <h3 id="createref"><a href="#createref" class="header-anchor">#</a> createRef</h3> <p><span style="color:blue;">createRef：创建一个ref对象，获取节点信息，直接举例子</span></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    node <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">}</span><span class="token operator">&gt;</span>节点信息<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index<span class="token punctuation">;</span>
</code></pre></div><p>这个有点鸡肋，因为我们可以直接从ref上获取到值，没有必要通过createRef去获取，像这样</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    node <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node <span class="token operator">=</span> node<span class="token punctuation">}</span> <span class="token operator">&gt;</span> 节点信息 <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index<span class="token punctuation">;</span>
</code></pre></div><h3 id="createfactory"><a href="#createfactory" class="header-anchor">#</a> createFactory</h3> <p><span style="color:blue;">createFactory:返回一个生成给定类型的React元素的函数</span></p> <p>接受一个参数type，这个type与creaetElement的type一样，原生组件的话是标签的字符串div，如果是react自定义组件，则会传入组件</p> <p>效果与createElement一样，但这个说是遗留的，官方建议使用creactElement，并且在使用上也会给出警告</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Child <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createFactory</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>createFactory<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span> 

<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    大家好，我是小杜杜
    <span class="token operator">&lt;</span>Child <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Index<span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/da152abddee94cfba0d3755e8ea4fa75_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.1c7f0c45.jpg" alt="React.createFactory"></p> <h3 id="isvalidelement"><a href="#isvalidelement" class="header-anchor">#</a> isValidElement</h3> <p>isValidElement：用于验证是否是React元素，是的话就返回true，否则返回false，感觉这个Api也不是特别有用，因为我们肯定知道是否是</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>React<span class="token punctuation">.</span><span class="token function">isValidElement</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>xxxxxxx<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>React<span class="token punctuation">.</span><span class="token function">isValidElement</span><span class="token punctuation">(</span><span class="token string">'大家好，我是小肚肚'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="version"><a href="#version" class="header-anchor">#</a> Version</h3> <p>查看React版本号</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>React<span class="token punctuation">.</span>version<span class="token punctuation">)</span>
</code></pre></div><p>我们可以看下在React中的文件位置，在react中有一个单独处理版本信息的位置：</p> <p>packages/shared/ReactVersion.js</p> <h2 id="声明周期"><a href="#声明周期" class="header-anchor">#</a> 声明周期</h2> <p>React的生命周期主要有两个比较大的版本，分别是v16.0和v16.4两个版本的生命周期，我们分别说下新旧的生命周期坐下对比</p> <h3 id="v16-0前"><a href="#v16-0前" class="header-anchor">#</a> v16.0前</h3> <p><img src="/assets/img/99f1eddd84e94273a098640d0d148a21_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.87af5ec3.jpg" alt="v16.0前声明周期"></p> <p>从图中，总共分为四大阶段：<span style="color:blue;">Intiazation(初始化)、Mounting(挂载)、Update(更新)、Unmounting(卸载)</span></p> <ul><li><p>Intiazation(初始化)</p> <p>在初始化阶段，我们会用到constructor()这个构造函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>super的作用，用来调用基类的构造方法(constructor()),也将父组件的props注入给子组件，供子组件读取(组件中prop只读不可变，state可变)</li> <li>初始化操作，定义this.state的初始内容</li> <li>只会执行一次</li></ul></li> <li><p>Mounting(挂载)</p> <ul><li>componentWillMount:在组件挂载到DOM前调用
<ul><li>在这里的调用的this.setState不会引起组件的重新渲染，也可以把写在这边的内容提到constructor()，所以项目很少用</li> <li>只会调用一次</li></ul></li> <li>render:渲染
<ul><li>只要props和state发生改变(无论两者的重传递和重赋值，无论值是否有变化，都可以引起组件重新render，都会重新渲染render)</li> <li>return：是必须，是一个Render元素(UI,描述组件)，不负责组件实际渲染工作，由React自身根据此元素去渲染出DOM</li> <li>render是穿函数(Pure function：返回的结果只依赖与参数，执行过程中没有副作用)，不能执行this.setState</li></ul></li> <li>componentDidMount: 组件挂载到DOM后调用</li></ul></li> <li><p>Update(更新)</p> <ul><li>componentWillReceiveProps(nextProps):调用props引起的组件更新过程中
<ul><li>nextProps:父组件传给当前组件新的props</li> <li>可以用nextProps和this.props来查明重传props是否发生变化(原因:不能保证组件重传的props有变化)</li> <li>只要props发生变化，引起调用</li></ul></li> <li>shouldComponentUpdate(nextProps, nextState):性能优化组件
<ul><li>nextProps：当前组件的props</li> <li>nextState: 当前组件的this.state</li> <li>通过比较nextProps和nextState，来判断当前组件是否有比较继续执行更新的过程
<ul><li>返回false，表示停止更新，用于减少组件的不必要渲染，性能优化</li> <li>返回true，继续执行更新</li></ul></li> <li>像componentWillReceiveProps()中执行了this.state，更新了state，但在render前(如shouldComponentUpdate, componentWillUpdate),this.state依然只想更新前的state，不然nextState及当前组件的this.state的对比就一直是true了</li></ul></li> <li>componentWillUpdate(nextProps, nextState):组件更新前调用
<ul><li>在render方法前调用</li> <li>由于组件更新就会调用，所以一般很少使用</li></ul></li> <li>render重新渲染</li> <li>componentDidUpdate(prevProps, prevState):组件更新后被调用
<ul><li>prevprops:组件更新前的props</li> <li>prevState:组件更新前的state</li> <li>可以操作组件更新的DOM</li></ul></li></ul></li> <li><p>Unmounting(卸载)</p> <ul><li>componentWillUnmount: 组件被卸载前调用
<ul><li>可以在这里执行一些清理工作，比如清楚组件中使用的定时器，清楚componentDidMount中手动创建的DOM元素等，以避免引起内存泄漏</li></ul></li></ul></li></ul> <h3 id="react-v16-4"><a href="#react-v16-4" class="header-anchor">#</a> React v16.4</h3> <p><img src="/assets/img/93f9eb88f8824ba2ab44897471225596_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.3d1ac4fc.jpg" alt="V16.4生命周期"></p> <p>与v16.0的生命周期对比</p> <p><span style="color:red;">新增了getDerivedStateFromProps 和getSnapshotBeforeUpdate</span></p> <p><span style="color:red;">取消了componentWillMount、componentWillReceiveProps、componentWillupdate</span></p> <ul><li><p>getDerivedStateFromProps</p> <p>getDerivedStateFromProps(prevProps, prevState):组件创建和更新时调用的方法</p> <ul><li>prevProps：组件更新前的props</li> <li>prevState：组件更新前的state</li></ul> <blockquote><p>注意：在React v16.3中，在创建和更新时，只能是由父组件引发才会调用这个函数，在React v16.4改为无论是Mounting还是Updating，也无论是什么引起的Updating，全部都会调用</p></blockquote> <p>有点类似于componentWillReceiveProps，不同的是getDerivedStateFromProps是一个静态函数，也就是这个函数不能通过this访问到class的属性，当然也不推荐使用</p> <p>如果props传入的内容不需要影响到你的state，那么就需要返回一个null，这个返回值是必须的，所以尽量将其写到函数的末尾。</p> <p>在组件创建时和更新时的render方法之前调用，它应该返回一个对象来更新状态，或者返回null来不更新任何内容。</p> <p><span style="color:red;"><strong>getDerivedStateFromProps 的存在只有一个目的：让组件在 props 变化时更新 state。</strong></span></p> <p><a href="https://www.runoob.com/react/react-ref-getderivedstatefromprops.html" target="_blank" rel="noopener noreferrer">demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>getSnapshotBeforeUpdate(prevProps, prevState): Updating时的函数，在render之后调用</p> <ul><li>prevProps: 组件更新前的props</li> <li>prevState： 组件更新前的state</li></ul> <p>可以读取，但是无法使用DOM的时候，在组件可以在可能更前之前从DOM获取一些信息(例如滚动位置)</p> <p><strong>返回的任何指都将作为参数传递给componentDidUpdate（)</strong></p> <p><a href="https://www.runoob.com/react/react-ref-getsnapshotbeforeupdate.html" target="_blank" rel="noopener noreferrer">demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h3 id="注意"><a href="#注意" class="header-anchor">#</a> 注意</h3> <p>在17.0的版本，官方彻底废除 componentWillMount、componentWillReceiveProps、componentWillUpdate</p> <p><span style="color:red;">如果还想使用的话可以使用：UNSAFE_componentWillMount()、UNSAFE_componentWillReceiveProps()、UNSAFE_componentWillUpdate()</span></p> <p>对了，如果在面试的时候可能会问道有关生命周期的问题，建议各位小伙伴，将以上的生命周期都可说一说，然后做个对比，这样的话，效果肯定不错～</p> <h2 id="react-hooks"><a href="#react-hooks" class="header-anchor">#</a> React-hooks</h2> <p>react-hooks是React 16.8的产物，给函数式组件赋上了生命周期，再经过三年多的时间，函数式组件已经逐渐取代了类组件，可以说是React开发者必备的技术</p> <p>同时在React v18中又出现了一些hooks，今天我们将一起详细的看看，确保你能迅速掌握～</p> <h3 id="react-v16-8中的hooks"><a href="#react-v16-8中的hooks" class="header-anchor">#</a> React v16.8中的hooks</h3> <h4 id="usestate"><a href="#usestate" class="header-anchor">#</a> useState</h4> <p><span style="color:blue;">usestate: 定义变量，可以理解为他是类组件中的this.state</span></p> <p>使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>state：目的是提供给UI，作为渲染视图的数据源</li> <li>setState: 改变state的函数，可以理解为this.setState</li> <li>initialState: 初始默认值</li></ul> <p>两种写法的🌰</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd-mobile'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>number<span class="token punctuation">,</span> setNumber<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>数字： <span class="token punctuation">{</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Button
            color<span class="token operator">=</span><span class="token string">'primary'</span>
            onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>number <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第一种</span>
        <span class="token operator">&gt;</span>
        点击加<span class="token number">1</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Button
            color<span class="token operator">=</span><span class="token string">'primary'</span>
            style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginLeft<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
            onClick <span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">setNumber</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> value <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第二种</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
            点击加<span class="token number">2</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index
</code></pre></div><p><img src="data:image/gif;base64,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" alt="效果"></p> <h5 id="注意点-2"><a href="#注意点-2" class="header-anchor">#</a> 注意点</h5> <p><strong><span style="color:red;">useState有点类似于PureComponent,会进行一个比较浅的比较，如果是对象的时候直接传入并不会更新，这点一定要切记</span></strong>，如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd-mobile'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>number<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>数字：<span class="token punctuation">{</span>state<span class="token punctuation">.</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Button
        color<span class="token operator">=</span><span class="token string">'primary'</span>
        onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            state<span class="token punctuation">.</span>number<span class="token operator">++</span>
            <span class="token function">setState</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
        点击
        <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index
</code></pre></div><p><img src="data:image/gif;base64,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" alt="效果"></p> <h4 id="useeffect"><a href="#useeffect" class="header-anchor">#</a> useEffect</h4> <p>useEffect:副作用，你可以理解为是类组件的生命周期，也是我们最常用的钩子</p> <p>那么什么是副作用呢？<span style="color:blue;">副作用(Side Effect):是指function做了和本身运算返回值无关的事，如请求数据、修改全局变量，打印、数据获取、设置订阅以及手动更改React 组件中的DOM都属于副作用操作都算是副作用</span></p> <p>我们直接演示下它的用法例子🌰：</p> <ul><li><p>不断执行</p> <p>当useEffect不设立第二个参数时，无论什么情况，都会执行</p></li> <li><p>模拟初始化和卸载</p> <p>我么可以利用useEffect弄挂载和卸载阶段，通常我们用于监听addEventListener和removeEventListener的使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token comment">// import { Button } from 'antd-mobile'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'挂载'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'卸载'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'render'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>大家好，我是小肚肚<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>flag<span class="token punctuation">,</span> setFlag<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button
            color<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span>
            onClick <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token function">setFlag</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>v<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
            <span class="token punctuation">{</span>flag <span class="token operator">?</span> <span class="token string">'卸载'</span> <span class="token operator">:</span> <span class="token string">'挂载'</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>flag <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>Child <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index<span class="token punctuation">;</span>
<span class="token comment">// render 、挂载；卸载</span>
</code></pre></div><p><img src="/assets/img/12a7e4b40008436daf0d7ebe45aa2c78_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.31d3b6c8.gif" alt="效果"></p></li> <li><p>根据依赖值改变</p> <p>我们可以设置useEffect的第二个值来改变</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd-mobile'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span> number<span class="token punctuation">,</span> setNumber <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span> count<span class="token punctuation">,</span> setCount <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'count改变才会执行'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>number<span class="token operator">:</span> <span class="token punctuation">{</span>number<span class="token punctuation">}</span>   count<span class="token operator">:</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Button
    color<span class="token operator">=</span><span class="token string">'primary'</span>
    onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setNumber</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> v <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&gt;</span>
    number点击加<span class="token number">1</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Button
    color<span class="token operator">=</span><span class="token string">'primary'</span>
    style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginLeft<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
    onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> v <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&gt;</span>
    count点击加<span class="token number">1</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Index
</code></pre></div><p><img src="/assets/img/3ca2332ae29e4419978b2a778182f216_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.a6f0cc6e.gif" alt="效果"></p></li></ul> <h4 id="usecontext"><a href="#usecontext" class="header-anchor">#</a> useContext</h4> <p><span style="color:blue;">useContext：上下文，类似于Context,其本意就是设置全局共享数据，使所有组件可跨层级实现共享</span></p> <p>useContent的参数一般是由createContext的创建，通过CountContext.Provider包裹的组件，才能通过useContent获取对应的值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> createContext<span class="token punctuation">,</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd-mobile'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> CountContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>CountContext<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        子组件获取到的count<span class="token operator">:</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>Son<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Son</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>CountContext<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginTop<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        孙组件获取到的count<span class="token operator">:</span>  <span class="token punctuation">{</span>count<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>父组件<span class="token operator">:</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Button
            color<span class="token operator">=</span><span class="token string">'primary'</span>
            onClick<span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span> v <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
            点击加<span class="token number">1</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>CountContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Child <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>CountContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index<span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/c40ffff952f743e1b391af4da39e376e_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.cf0f31c1.gif" alt="效果"></p> <h3 id="usereducer"><a href="#usereducer" class="header-anchor">#</a> useReducer</h3> <p><span style="color:blue;">useReducer：它类似于redux功能的api</span></p> <p>结构</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialArg<span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>state: 更新后的state值</li> <li>dispatch: 可以理解为useState的setState一样的效果</li> <li>reducer：可以理解为redux的reducer</li> <li>initialArl: 初始值</li> <li>init: 惰性初始化</li></ul> <p>直接来看🌰</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useReducer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd-mobile'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>action<span class="token operator">?.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token string">'add'</span><span class="token operator">:</span>
                <span class="token keyword">return</span> state <span class="token operator">+</span> action<span class="token operator">?.</span>payload
            <span class="token keyword">case</span> <span class="token string">'sub'</span><span class="token operator">:</span>
                <span class="token keyword">return</span> state <span class="token operator">+</span> action<span class="token operator">?.</span>payload
            <span class="token keyword">default</span><span class="token operator">:</span>
                <span class="token keyword">return</span> state
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>count：<span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Button
      color<span class="token operator">=</span><span class="token string">'primary'</span>
      onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'add'</span><span class="token punctuation">,</span> payload<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&gt;</span>
      加<span class="token number">1</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Button
      color<span class="token operator">=</span><span class="token string">'primary'</span>
      style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginLeft<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
      onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'sub'</span><span class="token punctuation">,</span> payload<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&gt;</span>
      减<span class="token number">1</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">export</span> <span class="token keyword">default</span> Index
</code></pre></div><p><img src="/assets/img/26fc08702a3446b28ae23143fd2696fb_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.f697e091.gif" alt="效果"></p> <p><a href="https://www.cnblogs.com/liangtao999/p/15968018.html" target="_blank" rel="noopener noreferrer">useReducer与useContext组合实现跨组件的状态管理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="usememo"><a href="#usememo" class="header-anchor">#</a> useMemo</h4> <p>useMemo:与memo的理念上差不多，都是判断是否满足当前的限定条件来决定是否执行callback函数，而useMemo的第二个参数是一个数组，通过这个数组来判定是否更新回掉函数</p> <p>当一个父组件中调用了一个子组件的时候，父组件的state发生变化，会导致父组件更新，而子组件虽然没有发生改变，但也会进行更新</p> <p>简单的理解一下，当一个页面内容非常复杂，模块非常多的时候，函数式组件会<strong>从头到尾更新</strong>，只要一处改变，所有的模块都会进行刷新，这种情况显然是没有必要的</p> <p>我们的理想装填是各个模块只进行自己的更新，不要相互去影响，那么此时useMemo是最佳的解决方案</p> <p><span style="color:red;">这里要尤其注意一点，只要父组件的状态更新，无论有没有对自组件进行操作，子组件都会进行更新，useMemo就是为了防止这点而出现的</span></p> <p>为了更好的理解useMemo，我们来看下面一个小栗子🌰：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// usePow.js</span>
<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">list<span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">list<span class="token operator">:</span>number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index

<span class="token comment">// Index.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd-mobile'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> usePow <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/components'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Index<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span>any<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>flag<span class="token punctuation">,</span> setFlag<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">usePow</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>数字：<span class="token punctuation">{</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Button color<span class="token operator">=</span><span class="token string">'primary'</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token function">setFlag</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>v<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>切换<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>切换状态：<span class="token punctuation">{</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index
</code></pre></div><p>我们简单的写了个 usePow，我们通过 usePow 给所传入的数字平方, 用切换状态的按钮表示函数内部的状态，我们来看看此时的效果：</p> <p><img src="data:image/gif;base64,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" alt="效果"></p> <p>我们发现了一个问题，为什么点击切换按钮也会触发console.log(1)呢？</p> <p>这样明显增加了性能开销，我们的理想状态肯定不希望做无关的渲染，所以我们做自定义 hooks的时候一定要注意，需要减少性能开销,我们为组件加入 useMemo试试：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useMemo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">list<span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token operator">:</span>number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index<span class="token punctuation">;</span>
</code></pre></div><p><img src="data:image/gif;base64,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" alt="效果">
发现此时就已经解决了这个问题，不会在做相关的渲染了</p> <h4 id="usecallback"><a href="#usecallback" class="header-anchor">#</a> useCallback</h4> <p><span style="color:red;">useCallback与useMemo及其类似，可以说一模一样，唯一不同的是usememo返回的是函数运行的结果，而useCallback返回的是函数</span></p> <blockquote><p>注意：这个函数是父组件传递子组件的一个函数，防止做无关的刷新，其次，这个组件必须配合memo，否则不但不会提升性能，还有可能减低性能</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useCallback <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd-mobile'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> MockMemo<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span>any<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>show<span class="token punctuation">,</span> setShow<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>display<span class="token operator">:</span> <span class="token string">'flex'</span><span class="token punctuation">,</span> justifyContent<span class="token operator">:</span> <span class="token string">'flex-start'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>TestButton title<span class="token operator">=</span><span class="token string">&quot;普通点击&quot;</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>TestButton title<span class="token operator">=</span><span class="token string">&quot;useCallback点击&quot;</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span>add<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginTop<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>count<span class="token operator">:</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>Button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token function">setShow</span><span class="token punctuation">(</span><span class="token operator">!</span>show<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> 切换<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> TestButton <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token operator">:</span>any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> <span class="token operator">&lt;</span>Button color<span class="token operator">=</span><span class="token string">'primary'</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>onClick<span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>title <span class="token operator">===</span> <span class="token string">'useCallback点击'</span> <span class="token operator">?</span> <span class="token punctuation">{</span>
        marginLeft<span class="token operator">:</span> <span class="token number">20</span>
        <span class="token punctuation">}</span> <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> MockMemo<span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/5c00efe7071b40c583a3d167d073a979_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.6e328728.gif" alt="效果"></p> <p>我们可以看到，当点击切换按钮的时候，没有经过 useCallback封装的函数会再次刷新，而经过 useCallback包裹的函数不会被再次刷新</p> <p>有很多小伙伴有个误区，就是useCallback不能单独使用，必须要配合memo吗？</p> <p>其实是这样的，你可以单独使用useCallback，但只用useCallback起不到优化的作用，反而会增加性能消耗</p> <p>想之前讲的，React.memo会通过浅比较里面的props，如果没有memo，那么使用的useCallback也就毫无意义</p> <p>因为useCallback本身是需要开销的，所以反而会增加性能的消耗</p> <h4 id="useref"><a href="#useref" class="header-anchor">#</a> useRef</h4> <p><span style="color:blue;">useRef：可以获取当前元素的所有属性，并且返回一个可变的ref对象，并且这个对象只有current属性，可设置initialValue</span></p> <p>结构</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> refContainer <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span>
</code></pre></div><p><strong>有许多小伙伴只知道useRef可以获取对应元素的属性，但useRef还具备一个功能，就是缓存数据</strong>，接下来一起看看：</p> <ul><li><p>通过useRef获取对应的属性值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Index<span class="token operator">:</span> React<span class="token punctuation">.</span>Fc<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> scrollRef <span class="token operator">=</span> useRef<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>clientHeight<span class="token punctuation">,</span> clientWidth<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>scrollTop<span class="token punctuation">,</span> setScrollTop<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>scrollHeight<span class="token punctuation">,</span> setScrollHeight<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">onScroll</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>scrollRef<span class="token operator">?.</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> clientHeight <span class="token operator">=</span> scrollRef<span class="token operator">?.</span>current<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span> <span class="token comment">//可视区域高度</span>
            <span class="token keyword">let</span> scrollTop <span class="token operator">=</span> scrollRef<span class="token operator">?.</span>current<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span> <span class="token comment">// 滚动条滚动高度</span>
            <span class="token keyword">let</span> scrollHeight <span class="token operator">=</span> scrollRef<span class="token operator">?.</span>current<span class="token punctuation">.</span>scrollHeight<span class="token punctuation">;</span> <span class="token comment">// 滚动内容高度</span>
            <span class="token function">setClientHeight</span><span class="token punctuation">(</span>clientHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setScrollTop</span><span class="token punctuation">(</span>scrollTop<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setScrollHeight</span><span class="token punctuation">(</span>scrollHeight<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div <span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>可视区域高度：<span class="token punctuation">{</span>clientHeight<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>滚动条滚动高度：<span class="token punctuation">{</span>scrollTop<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>滚动内容高度：<span class="token punctuation">{</span>scrollHeight<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>height<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> overflowY<span class="token operator">:</span> <span class="token string">'auto'</span><span class="token punctuation">}</span><span class="token punctuation">}</span> ref<span class="token operator">=</span><span class="token punctuation">{</span>scrollRef<span class="token punctuation">}</span> onScroll<span class="token operator">=</span><span class="token punctuation">{</span>onScroll<span class="token punctuation">}</span> <span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>height<span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index
</code></pre></div><p><img src="/assets/img/ce0221becc3940ec8610783afa66f5dc_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.60898a6f.gif" alt="效果"></p> <p>从上述可知，我们可以通过useRef来获取对应元素的相关属性，以此来做一些操作</p></li> <li><p>缓存数据</p> <p>react-redux的源码中，在hooks推出后，react-hooks用大量的 useMemo重做了Provide等核心模块，其中就是运用 useRef 来缓存数据，并且所运用的 useRef()没有一个是绑定在dom元素上的，都是做数据缓存用的</p> <p>简单来看一下</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 缓存数据</span>
    <span class="token comment">/* react-redux 用userRef 来缓存 merge之后的 props */</span> 
    <span class="token keyword">const</span> lastChildProps <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
    
    <span class="token comment">// lastWrapperProps 用 useRef 来存放组件真正的 props信息 </span>
    <span class="token keyword">const</span> lastWrapperProps <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span>wrapperProps<span class="token punctuation">)</span> 
    
    <span class="token comment">//是否储存props是否处于正在更新状态 </span>
    <span class="token keyword">const</span> renderIsScheduled <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>

    <span class="token comment">//更新数据</span>
    <span class="token keyword">function</span> <span class="token function">captureWrapperProps</span><span class="token punctuation">(</span> 
        <span class="token parameter">lastWrapperProps<span class="token punctuation">,</span> 
        lastChildProps<span class="token punctuation">,</span> 
        renderIsScheduled<span class="token punctuation">,</span> 
        wrapperProps<span class="token punctuation">,</span> 
        actualChildProps<span class="token punctuation">,</span> 
        childPropsFromStoreUpdate<span class="token punctuation">,</span> 
        notifyNestedSubs</span> 
    <span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        lastWrapperProps<span class="token punctuation">.</span>current <span class="token operator">=</span> wrapperProps 
        lastChildProps<span class="token punctuation">.</span>current <span class="token operator">=</span> actualChildProps 
        renderIsScheduled<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token boolean">false</span> 
    <span class="token punctuation">}</span>
</code></pre></div><p>我们看到 react-redux 用重新赋值的方法，改变了缓存的数据源，减少了不必要的更新，如过采取useState势必会重新渲染。</p> <p><span style="color:red;"><strong>有的时候我们需要使用useMemo、useCallbackApi，我们控制变量的值用useState 有可能会导致拿到的是旧值，并且如果他们更新会带来整个组件重新执行</strong>，这种情况下，我们使用useRef将会是一个非常不错的选择</span></p></li></ul> <h4 id="useimperativehandle"><a href="#useimperativehandle" class="header-anchor">#</a> useImperativeHandle</h4> <p><span style="color:green;">useImperativeHandle: 可以让你在使用ref时自定义暴漏给父组件的实例值</span></p> <p><strong>这个api我觉得十分有用的，建议掌握，来看看使用的场景</strong></p> <p>在一个页面很复杂的时候，我们会将这个页面进行模块化，这样会分成很多个模块，有的时候我们需要再 最外层的组件上 控制其他组件的方法，希望最外层点击的事件，同事执行子组件的事件，这时就需要useImperativeHandle 的帮助</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 结构</span>
<span class="token function">useImperativeHandle</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> createHandle<span class="token punctuation">,</span> <span class="token punctuation">[</span>deps<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>ref: useRef所创建的ref</li> <li>createHandle: 处理的函数，返回值作为暴漏给父组件的ref对象</li> <li>deps: 依赖项，依赖项更改行程新的ref对象
🌰</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useImperativeHandle<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Button<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd-mobile'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">cRef</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">useImperativeHandle</span><span class="token punctuation">(</span>cRef<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        add
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> v <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginBottom<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>点击次数<span class="token operator">:</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Button color<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">&gt;</span>加<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>大家好，我是小杜杜<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>注意<span class="token operator">:</span>是在父组件上的按钮，控制子组件的加<span class="token number">1</span>哦～<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Button
      color<span class="token operator">=</span><span class="token string">'primary'</span>
      onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  ref<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&gt;</span>
      父节点上的加<span class="token number">1</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Child cRef<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index
</code></pre></div><p><img src="/assets/img/76e810c5966a49c2bd9ce8f505f5b18c_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.9190fa9e.gif" alt="效果"></p> <h4 id="uselayouteffect"><a href="#uselayouteffect" class="header-anchor">#</a> useLayoutEffect</h4> <p><span style="color:blue;">useLayoutEffect：与useEffect基本一致，不同的地方是，useLayoutEffect是同步的</span></p> <blockquote><p>要注意的是useLayoutEffect在DOM更新之后，浏览器绘制之前，这样做的好处是可以更加方便的修改DOM,获取Dom信息，这样浏览器只会绘制一次，所以useLayoutEffect在useEffect之前执行</p></blockquote> <p>如果useEffect的话，useEffect执行在浏览器绘制视图之后，如果在此时改变DOM，有可能回到浏览器再次回流和重绘</p> <p>除此之外useLayoutEffect的callback中代码执行会阻塞浏览器绘制</p> <p>举个🌰</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useLayoutEffect<span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Button<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd-mobile'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> time <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'useEffect'</span><span class="token punctuation">,</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> time<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">useLayoutEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'useLayoutEffect'</span><span class="token punctuation">,</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> time<span class="token punctuation">.</span>current<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>count<span class="token operator">:</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Button
            color<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span>
            onClick <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token operator">=&gt;</span> v <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                time<span class="token punctuation">.</span>current <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index
</code></pre></div><p><img src="/assets/img/3c5ed88f799b44b197e4d8d2dd1a0456_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.2e1b3e0c.gif" alt="效果"></p> <h4 id="usedebugvalue"><a href="#usedebugvalue" class="header-anchor">#</a> useDebugValue</h4> <p><span style="color:blue;">useDebugValue: 可用于在React开发者工具中显示自定义hook的标签</span></p> <p>官方并不推荐你想每个自动以Hook添加debug值，当它作为共享库的一部分时才有价值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">useFriendStatus</span><span class="token punctuation">(</span><span class="token parameter">friendID</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>isOnline<span class="token punctuation">,</span> setIsOnline<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ...</span>

  <span class="token comment">// 在开发者工具中的这个 Hook 旁边显示标签  </span>
  <span class="token comment">// e.g. &quot;FriendStatus: Online&quot;  useDebugValue(isOnline ? 'Online' : 'Offline');</span>
  <span class="token keyword">return</span> isOnline<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://blog.csdn.net/rock_23/article/details/121410514" target="_blank" rel="noopener noreferrer">demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="react-v18中的hooks"><a href="#react-v18中的hooks" class="header-anchor">#</a> React v18中的hooks</h3> <h4 id="usesyncexternalstore"><a href="#usesyncexternalstore" class="header-anchor">#</a> useSyncExternalStore</h4> <p><span style="color:blue;">useSyncExternalStore:是一个推荐用于读取和订阅外部数据源的hook，其方式与选择性的hydration和时间切片等并发渲染功能兼容</span></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 结构</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">useSyncExternalStore</span><span class="token punctuation">(</span>subscribe<span class="token punctuation">,</span> getSnapshot<span class="token punctuation">[</span><span class="token punctuation">,</span> getServerSnapshot<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>subscribe: 订阅函数，用于注册一个回调函数，当存储值发生更改时被调用。此外，useSyncExternalStore会通过带有记忆性的getSnapshot来判别数据是否发生变化，如果发生变化，那么会强制更新数据</li> <li>getSnapshot:返回当前存储值的函数。必须返回缓存的值。如果getSnapshot连续多次调用，则必须返回相同的确切值，除非中间有存储值更新</li> <li>getServerSnapshot:返回服务端(hydration模式下)渲染期间使用的存储值函数</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useSyncExternalStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> combinReducers<span class="token punctuation">,</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">reduer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">'ADD'</span><span class="token operator">:</span>
            <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'DEL'</span><span class="token operator">:</span>
            <span class="token keyword">return</span> state <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span> 
            <span class="token keyword">return</span> state<span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 注册reducer，并创建store</span>
<span class="token keyword">const</span> rootReducer <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>count<span class="token operator">:</span> reducer<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>rootReducer<span class="token punctuation">,</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 订阅</span>
    <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">useSyncExternalStore</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>subscribe<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>state<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'ADD'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>加<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'DEL'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>减<span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index<span class="token punctuation">;</span>
</code></pre></div><p><img src="data:image/gif;base64,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" alt="效果"></p> <p>从上述代码可以看出，当点击按钮后，会触发store.subscribe(订阅函数),执行getSnapshot后得到新的count，如果count发生变化，则会触发更新</p> <h4 id="usetransition"><a href="#usetransition" class="header-anchor">#</a> useTransition</h4> <p><span style="color:blue;">useTransition:返回一个状态值表示过渡人物的等待状态，以及一个启动该过渡任务的函数</span></p> <p>那么什么是过渡任务？</p> <p>在一些场景中，如：输入框、tab切换、按钮等，这些任务需要视图上立刻做出响应，这些任务可以称之为立即更新的任务</p> <p>但是有的事后，更新任务并不是那么紧急，或者说要去请求数据等，导致新的状态不能立马更新，需要用一个loading...的等待装填，这类任务就是过渡任务</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 结构</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>isPending<span class="token punctuation">,</span> startTrastion<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useTransition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>isPending: 过渡状态的标志，为true时是等待装填</li> <li>startTrastion: 可以将里面的任务变成过渡任务</li></ul> <p>大家可能对上面的描述存在着一些疑问,我们直接举例子🌰来说明</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>isPending<span class="token punctuation">,</span> startTrastion<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useStateTransition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>input<span class="token punctuation">,</span> setInput<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>list<span class="token punctuation">,</span> setList<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>大家好<span class="token punctuation">,</span>我是小肚肚<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        输入框：<span class="token operator">&lt;</span>input
        value <span class="token operator">=</span> <span class="token punctuation">{</span>input<span class="token punctuation">}</span>
        onChange <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">setInput</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">startTrastion</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setList</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>isPending <span class="token operator">?</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>加载中<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
            list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index<span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/3a1c6c97b8f742dab5d2e76f56e52223_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.8a7a0792.gif" alt="useTransition"></p> <p>实际上，我们在Input输入内容是，会进行增加，假设我们在startTrastion中请求一个接口，在接口请求的时候，isPending会为true，就会有一个loading的状态，请求完之后，isPending变为false渲染列表</p> <h4 id="usedeferredvalue"><a href="#usedeferredvalue" class="header-anchor">#</a> useDeferredValue</h4> <p><span style="color:blue;">useDeferredValue:接受一个值，并返回该值的新副本，该副本将推迟到更紧急的更新之后</span></p> <p>如果当前渲染是一个紧急更新的结果，比如用户输入，React将返回之前的值，然后在紧急渲染完成后渲染新的值。</p> <p>也就是说useDeferredValue可以让状态 滞后派生</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 结构</span>
<span class="token keyword">const</span> deferredValue <span class="token operator">=</span> <span class="token function">useDeferredValue</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>value: 可变的值，如useState创建的值</li> <li>deferredValue:延迟状态</li></ul> <p>这个感觉和useTransition优点相似，还是以输入框的模式，举个例子🌰</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useDeferredValue <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">getList</span> <span class="token operator">=</span> <span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> defaultValue <span class="token operator">=</span> <span class="token function">useDeferredValue</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'deferredValue'</span><span class="token punctuation">,</span> defaultValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>大家好，我是小杜杜<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            输入框：<span class="token operator">&lt;</span>input onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setValue</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span><span class="token punctuation">{</span>deferredValue <span class="token operator">?</span> <span class="token function">getList</span><span class="token punctuation">(</span>deferredValue<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index<span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/7fba0464083c44bf985446b79c2dd55a_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.1d9a6f38.gif" alt="deferredValue效果"></p> <h4 id="和usetransition对比"><a href="#和usetransition对比" class="header-anchor">#</a> 和useTransition对比</h4> <p>根据上面两个实例我们看看useDeferredValue 和useTransition做个对比看看</p> <ul><li>相同点:useDeferredValue和useTransition一样，都是过渡更新任务</li> <li>不同点： useTransition给的是一个状态，而useDeferredValue给的是一个值</li></ul> <h4 id="useinsertioneffect"><a href="#useinsertioneffect" class="header-anchor">#</a> useInsertionEffect</h4> <p><span style="color:blue;">useInsertionEffect：与useEffect一样，但它在所有DOM突变之前同步出发</span></p> <p>我们来看看useInsertionEffect对比useEffect和useLayoutEffect在执行顺序上有什么区别，🌰</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'useEffect'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token function">useLayoutEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'useLayoutEffect'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token function">useInsertionEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'useInsertionEffect'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="data:image/jpeg;base64,UklGRp4bAABXRUJQVlA4WAoAAAAgAAAAEQQAgwAASUNDUMgHAAAAAAfIYXBwbAIgAABtbnRyUkdCIFhZWiAH2QACABkACwAaAAthY3NwQVBQTAAAAABhcHBsAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWFwcGwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAtkZXNjAAABCAAAAG9kc2NtAAABeAAABYpjcHJ0AAAHBAAAADh3dHB0AAAHPAAAABRyWFlaAAAHUAAAABRnWFlaAAAHZAAAABRiWFlaAAAHeAAAABRyVFJDAAAHjAAAAA5jaGFkAAAHnAAAACxiVFJDAAAHjAAAAA5nVFJDAAAHjAAAAA5kZXNjAAAAAAAAABRHZW5lcmljIFJHQiBQcm9maWxlAAAAAAAAAAAAAAAUR2VuZXJpYyBSR0IgUHJvZmlsZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbWx1YwAAAAAAAAAfAAAADHNrU0sAAAAoAAABhGRhREsAAAAkAAABrGNhRVMAAAAkAAAB0HZpVk4AAAAkAAAB9HB0QlIAAAAmAAACGHVrVUEAAAAqAAACPmZyRlUAAAAoAAACaGh1SFUAAAAoAAACkHpoVFcAAAASAAACuGtvS1IAAAAWAAACym5iTk8AAAAmAAAC4GNzQ1oAAAAiAAADBmhlSUwAAAAeAAADKHJvUk8AAAAkAAADRmRlREUAAAAsAAADaml0SVQAAAAoAAADlnN2U0UAAAAmAAAC4HpoQ04AAAASAAADvmphSlAAAAAaAAAD0GVsR1IAAAAiAAAD6nB0UE8AAAAmAAAEDG5sTkwAAAAoAAAEMmVzRVMAAAAmAAAEDHRoVEgAAAAkAAAEWnRyVFIAAAAiAAAEfmZpRkkAAAAoAAAEoGhySFIAAAAoAAAEyHBsUEwAAAAsAAAE8HJ1UlUAAAAiAAAFHGVuVVMAAAAmAAAFPmFyRUcAAAAmAAAFZABWAWEAZQBvAGIAZQBjAG4A/QAgAFIARwBCACAAcAByAG8AZgBpAGwARwBlAG4AZQByAGUAbAAgAFIARwBCAC0AcAByAG8AZgBpAGwAUABlAHIAZgBpAGwAIABSAEcAQgAgAGcAZQBuAOgAcgBpAGMAQx6lAHUAIABoAOwAbgBoACAAUgBHAEIAIABDAGgAdQBuAGcAUABlAHIAZgBpAGwAIABSAEcAQgAgAEcAZQBuAOkAcgBpAGMAbwQXBDAEMwQwBDsETAQ9BDgEOQAgBD8EQAQ+BEQEMAQ5BDsAIABSAEcAQgBQAHIAbwBmAGkAbAAgAGcA6QBuAOkAcgBpAHEAdQBlACAAUgBWAEIAwQBsAHQAYQBsAOEAbgBvAHMAIABSAEcAQgAgAHAAcgBvAGYAaQBskBp1KABSAEcAQoJyX2ljz4/wx3y8GAAgAFIARwBCACDVBLhc0wzHfABHAGUAbgBlAHIAaQBzAGsAIABSAEcAQgAtAHAAcgBvAGYAaQBsAE8AYgBlAGMAbgD9ACAAUgBHAEIAIABwAHIAbwBmAGkAbAXkBegF1QXkBdkF3AAgAFIARwBCACAF2wXcBdwF2QBQAHIAbwBmAGkAbAAgAFIARwBCACAAZwBlAG4AZQByAGkAYwBBAGwAbABnAGUAbQBlAGkAbgBlAHMAIABSAEcAQgAtAFAAcgBvAGYAaQBsAFAAcgBvAGYAaQBsAG8AIABSAEcAQgAgAGcAZQBuAGUAcgBpAGMAb2ZukBoAUgBHAEJjz4/wZYdO9k4AgiwAIABSAEcAQgAgMNcw7TDVMKEwpDDrA5MDtQO9A7kDugPMACADwAPBA78DxgOvA7sAIABSAEcAQgBQAGUAcgBmAGkAbAAgAFIARwBCACAAZwBlAG4A6QByAGkAYwBvAEEAbABnAGUAbQBlAGUAbgAgAFIARwBCAC0AcAByAG8AZgBpAGUAbA5CDhsOIw5EDh8OJQ5MACAAUgBHAEIAIA4XDjEOSA4nDkQOGwBHAGUAbgBlAGwAIABSAEcAQgAgAFAAcgBvAGYAaQBsAGkAWQBsAGUAaQBuAGUAbgAgAFIARwBCAC0AcAByAG8AZgBpAGkAbABpAEcAZQBuAGUAcgBpAQ0AawBpACAAUgBHAEIAIABwAHIAbwBmAGkAbABVAG4AaQB3AGUAcgBzAGEAbABuAHkAIABwAHIAbwBmAGkAbAAgAFIARwBCBB4EMQRJBDgEOQAgBD8EQAQ+BEQEOAQ7BEwAIABSAEcAQgBHAGUAbgBlAHIAaQBjACAAUgBHAEIAIABQAHIAbwBmAGkAbABlBkUGRAZB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" alt="useInsertionEffect"></p> <p><span style="color:red;">可以看到顺序上 useInsertionEffect &gt; useLayoutEffect &gt; useEffect</span></p> <blockquote><p>特别注意一点, useInsertionEffect 应仅限于『css-in-js』库使用。优先考虑使用useEffect 或useLayoutEffect来替代</p></blockquote> <p>模拟一下 useInsertionEffect</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useInsertionEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">useInsertionEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> style <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        style<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        .css-in-js {
            color: blue;
        }
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;css-in-js&quot;</span><span class="token operator">&gt;</span>大家好，我是小肚肚<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="data:image/jpeg;base64,UklGRpwdAABXRUJQVlA4WAoAAAAgAAAAJQMAZQAASUNDUMgHAAAAAAfIYXBwbAIgAABtbnRyUkdCIFhZWiAH2QACABkACwAaAAthY3NwQVBQTAAAAABhcHBsAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWFwcGwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAtkZXNjAAABCAAAAG9kc2NtAAABeAAABYpjcHJ0AAAHBAAAADh3dHB0AAAHPAAAABRyWFlaAAAHUAAAABRnWFlaAAAHZAAAABRiWFlaAAAHeAAAABRyVFJDAAAHjAAAAA5jaGFkAAAHnAAAACxiVFJDAAAHjAAAAA5nVFJDAAAHjAAAAA5kZXNjAAAAAAAAABRHZW5lcmljIFJHQiBQcm9maWxlAAAAAAAAAAAAAAAUR2VuZXJpYyBSR0IgUHJvZmlsZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbWx1YwAAAAAAAAAfAAAADHNrU0sAAAAoAAABhGRhREsAAAAkAAABrGNhRVMAAAAkAAAB0HZpVk4AAAAkAAAB9HB0QlIAAAAmAAACGHVrVUEAAAAqAAACPmZyRlUAAAAoAAACaGh1SFUAAAAoAAACkHpoVFcAAAASAAACuGtvS1IAAAAWAAACym5iTk8AAAAmAAAC4GNzQ1oAAAAiAAADBmhlSUwAAAAeAAADKHJvUk8AAAAkAAADRmRlREUAAAAsAAADaml0SVQAAAAoAAADlnN2U0UAAAAmAAAC4HpoQ04AAAASAAADvmphSlAAAAAaAAAD0GVsR1IAAAAiAAAD6nB0UE8AAAAmAAAEDG5sTkwAAAAoAAAEMmVzRVMAAAAmAAAEDHRoVEgAAAAkAAAEWnRyVFIAAAAiAAAEfmZpRkkAAAAoAAAEoGhySFIAAAAoAAAEyHBsUEwAAAAsAAAE8HJ1UlUAAAAiAAAFHGVuVVMAAAAmAAAFPmFyRUcAAAAmAAAFZABWAWEAZQBvAGIAZQBjAG4A/QAgAFIARwBCACAAcAByAG8AZgBpAGwARwBlAG4AZQByAGUAbAAgAFIARwBCAC0AcAByAG8AZgBpAGwAUABlAHIAZgBpAGwAIABSAEcAQgAgAGcAZQBuAOgAcgBpAGMAQx6lAHUAIABoAOwAbgBoACAAUgBHAEIAIABDAGgAdQBuAGcAUABlAHIAZgBpAGwAIABSAEcAQgAgAEcAZQBuAOkAcgBpAGMAbwQXBDAEMwQwBDsETAQ9BDgEOQAgBD8EQAQ+BEQEMAQ5BDsAIABSAEcAQgBQAHIAbwBmAGkAbAAgAGcA6QBuAOkAcgBpAHEAdQBlACAAUgBWAEIAwQBsAHQAYQBsAOEAbgBvAHMAIABSAEcAQgAgAHAAcgBvAGYAaQBskBp1KABSAEcAQoJyX2ljz4/wx3y8GAAgAFIARwBCACDVBLhc0wzHfABHAGUAbgBlAHIAaQBzAGsAIABSAEcAQgAtAHAAcgBvAGYAaQBsAE8AYgBlAGMAbgD9ACAAUgBHAEIAIABwAHIAbwBmAGkAbAXkBegF1QXkBdkF3AAgAFIARwBCACAF2wXcBdwF2QBQAHIAbwBmAGkAbAAgAFIARwBCACAAZwBlAG4AZQByAGkAYwBBAGwAbABnAGUAbQBlAGkAbgBlAHMAIABSAEcAQgAtAFAAcgBvAGYAaQBsAFAAcgBvAGYAaQBsAG8AIABSAEcAQgAgAGcAZQBuAGUAcgBpAGMAb2ZukBoAUgBHAEJjz4/wZYdO9k4AgiwAIABSAEcAQgAgMNcw7TDVMKEwpDDrA5MDtQO9A7kDugPMACADwAPBA78DxgOvA7sAIABSAEcAQgBQAGUAcgBmAGkAbAAgAFIARwBCACAAZwBlAG4A6QByAGkAYwBvAEEAbABnAGUAbQBlAGUAbgAgAFIARwBCAC0AcAByAG8AZgBpAGUAbA5CDhsOIw5EDh8OJQ5MACAAUgBHAEIAIA4XDjEOSA4nDkQOGwBHAGUAbgBlAGwAIABSAEcAQgAgAFAAcgBvAGYAaQBsAGkAWQBsAGUAaQBuAGUAbgAgAFIARwBCAC0AcAByAG8AZgBpAGkAbABpAEcAZQBuAGUAcgBpAQ0AawBpACAAUgBHAEIAIABwAHIAbwBmAGkAbABVAG4AaQB3AGUAcgBzAGEAbABuAHkAIABwAHIAbwBmAGkAbAAgAFIARwBCBB4EMQRJBDgEOQAgBD8EQAQ+BEQEOAQ7BEwAIABSAEcAQgBHAGUAbgBlAHIAaQBjACAAUgBHAEIAIABQAHIAbwBmAGkAbABlBkUGRAZB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" alt="效果"></p> <h4 id="useid"><a href="#useid" class="header-anchor">#</a> useId</h4> <p><span style="color:blue;">useId: 是一个用于生成横跨服务器和客户端的稳定的唯一ID的同事避免hydration不匹配的hook</span></p> <p>这个牵扯到SSR的问题，我打算之后单独写一章，来详细讲讲，所以这里就介绍一下使用即可</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">useId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 例子🌰</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> userId <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">useId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                大家好，我是小肚肚
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index
</code></pre></div><p><img src="/assets/img/bff8dd2e73d447e4939f41072772ed85_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.60ff13d3.jpg" alt="效果"></p> <h3 id="自定义hooks"><a href="#自定义hooks" class="header-anchor">#</a> 自定义hooks</h3> <p>自定义hooks是在react-hooks基础上的一个扩展，可以根据业务、需求去制定相应的hooks,将常用的逻辑进行封装，从而具备复用性</p> <p>关于自定义hooks的内容可以看看我之前的文章：<a href="https://juejin.cn/post/7101486767336849421" target="_blank" rel="noopener noreferrer">搞懂这12个Hooks，保证让你玩转React<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>里面通过分析ahooks源码，讲解了很多不错的自定义hooks，如：useCreation、useReactive、useEventListener等的实现，相信一定能够帮助到各位，感兴趣的可以支持下～</p> <h2 id="react-dom"><a href="#react-dom" class="header-anchor">#</a> react-dom</h2> <p><span style="color:blue;">react-dom: 这个包提供了用户DOM的特定方法。这个包在React v18中还做了很大的改动，接下来我们逐个看看</span></p> <h3 id="createportal"><a href="#createportal" class="header-anchor">#</a> createPortal</h3> <p><span style="color:blue;">createPortal:在Portal中提供了一种将子节点渲染到已DOM节点中的方式，该节点存在于DOM组件的层次结构之外</span></p> <p><strong>也就是说createPortal可以把当前组件或element元素的子节点，渲染到组件之外的其他地方</strong></p> <p>来看看createPortal(child, container)的入参</p> <ul><li>child：任何可渲染的子元素</li> <li>container：是一个DOM元素</li></ul> <p>看着概念可能并不是很好理解，我们来举个🌰</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span><span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDom <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>newDom<span class="token punctuation">,</span> setNewDom<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setNewDom</span><span class="token punctuation">(</span>ReactDom<span class="token punctuation">.</span><span class="token function">createPortal</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> ref<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span><span class="token operator">&gt;</span>同级的节点<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            这层的节点
            <span class="token punctuation">{</span>newDom<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">Index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Child<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>大家好，我是小杜杜<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Child<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Index<span class="token punctuation">;</span>
</code></pre></div><p>要注意下Child:
<img src="/assets/img/2f8d35a22bfb4d619294efba52923b91_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.9d098cc1.jpg" alt="React.createPortal"></p> <p>我们传入的children被createPortal包裹后，children的节点位置会如何？</p> <p><img src="/assets/img/f3e92824e6d5438bbc1e9b438224fddf_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.c071f9b6.jpg" alt="React.createPortal结果"></p> <p>发现，我们处理的数newDom的数据到了同级的节点处，那么这个Api该如何应用呢？</p> <p>我们可以处理一些顶层元素，如：Modal弹框组件，Modal组件在内部中书写，挂载到外层的容器（如body），此时这个Api就非常有用</p> <h3 id="flushsync"><a href="#flushsync" class="header-anchor">#</a> flushSync</h3> <p><span style="color:blue;">flushSync：可以将回调函数中的更新任务，放到一个较高级的优先级中，适用于强制刷新，同时确保了DOM会被立即更新</span></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Button<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./antd-mobile'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> flushSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            number<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">const</span> <span class="token punctuation">{</span> number <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>数字<span class="token operator">:</span> <span class="token punctuation">{</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> 
        <span class="token operator">&lt;</span>Button
            color<span class="token operator">=</span><span class="token string">'primary'</span>
            onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> number<span class="token operator">:</span> <span class="token number">1</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> number<span class="token operator">:</span> <span class="token number">2</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> number<span class="token operator">:</span> <span class="token number">3</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
            点击 
        <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>   
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们看看点击按钮会打印出什么？</p> <p><img src="data:image/gif;base64,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" alt="效果"></p> <p>这个不难理解，因为this.setState会进行批量更新，所以打印出的是3 接下来，我们用flushSync处理下number: 2 来看看是什么效果：</p> <div class="language-js extra-class"><pre class="language-js"><code>onClick <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>number<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        React<span class="token punctuation">.</span><span class="token function">flushSync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>number<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>number<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><img src="data:image/gif;base64,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" alt="React.flushSync效果"></p> <p>可以发现flushSync会优先执行，并且强制刷新，所以会改变number值为2， 然后1和3在批量处理，更新为3</p> <h3 id="render"><a href="#render" class="header-anchor">#</a> render</h3> <p>render: 这个是我们在react-dom中最常用的api，用于渲染一个react元素</p> <p>我们通常在根部使用</p> <div class="language-js extra-class"><pre class="language-js"><code>ReactDom<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><h4 id="createroot"><a href="#createroot" class="header-anchor">#</a> createRoot</h4> <p>在React v18中，render函数已经被creaetRoot所替代</p> <p>creaetRoot会控制你传入的容器节点的内容。当调用render时，里面的任何现有DOM元素都会被替换。后面的调用使用React的DOM Diffing算法进行有效更新</p> <p>并且createRoot不修改容器节点(只修改容器的子节点)。可以在不覆盖现有子节点的情况下将组件插入现有 DOM 节点。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> StrictMode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRoot <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span>rootElement<span class="token punctuation">)</span><span class="token punctuation">;</span>

root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>StrictMode<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Main <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>StrictMode<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="hydrate"><a href="#hydrate" class="header-anchor">#</a> hydrate</h3> <p><span style="color:blue;">hydrate：服务端显然用hydrate与render()相同，但它用于在ReactDOMServer渲染的容器中对HTML的内容进行hydrate操作</span></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">hydrate</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> conttainer<span class="token punctuation">[</span><span class="token punctuation">,</span> callback<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="hydrateroot"><a href="#hydrateroot" class="header-anchor">#</a> hydrateRoot()</h4> <p>hydrate 在React v18也被替代为hydrateRoot();</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">hydrateRoot</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> element<span class="token punctuation">[</span><span class="token punctuation">,</span> optiions<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="finddomnode"><a href="#finddomnode" class="header-anchor">#</a> findDOMNode</h3> <p>findDOMNode：用于访问组件DOM元素节点（应急方案），官方推荐使用ref</p> <p>需要注意的是：</p> <ul><li>findDOMNode只能用到挂载的组件上</li> <li>findDOMNode只能用于类组件，不能用于函数式组件</li> <li>如果组件渲染为null或者为false，那么findDOMNode返回的值也是null</li> <li>如果是多个子节点Fragment的情况，findDOMNode会返回第一个非空子节点对应的 DOM 节点。</li> <li>在严格模式下这个方法已经被弃用</li></ul> <p>举个例子🌰：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd-mobile'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span>
 

<span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>大家好，我是小杜杜<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> 
      <span class="token operator">&lt;</span>Button
        color<span class="token operator">=</span><span class="token string">'primary'</span>
        onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ReactDOM<span class="token punctuation">.</span><span class="token function">findDOMNode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">&gt;</span>
        获取容器
      <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>    
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Index<span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/d870212ce4a94f43ba040f384564d74d_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.1782e4d5.gif" alt="效果"></p> <h3 id="unstable-batchedupdates"><a href="#unstable-batchedupdates" class="header-anchor">#</a> unstable_batchedUpdates</h3> <p><span style="color:blue;">unstable_batchedUpdates:用于手动批量更新state， 可以指定多个setState合并为一个更新请求</span></p> <p>那么这块手动合并，用在什么情况下呢？来看看下面的场景：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd-mobile'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span>
 
<span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token operator">=</span><span class="token punctuation">{</span>
      number<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> number <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>padding<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>数字<span class="token operator">:</span> <span class="token punctuation">{</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> 
      <span class="token operator">&lt;</span>Button
        color<span class="token operator">=</span><span class="token string">'primary'</span>
        onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> number<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> number<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> number<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">&gt;</span>
        点击 
      <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>    
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Index
</code></pre></div><p><img src="data:image/jpeg;base64,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" alt="效果未使用"></p> <p>此时的场景只会执行一次，并且渲染一次，渲染时为1</p> <p>那么我们打破React的机制，比如说使用setTimeout绕过，再来看看会打印出什么：</p> <div class="language-js extra-class"><pre class="language-js"><code>      <span class="token operator">&lt;</span>Button
        color<span class="token operator">=</span><span class="token string">'primary'</span>
        onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> number<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> number<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> number<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">&gt;</span>
        点击 
      <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>  
</code></pre></div><p><img src="data:image/jpeg;base64,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" alt="setState setTimeout"></p> <p>那么我们现在想在setTimeout实现React的事件机制该怎么办？就需要用到unstable_batchedUpdates来解决这类问题</p> <div class="language-js extra-class"><pre class="language-js"><code>      <span class="token operator">&lt;</span>Button
        color<span class="token operator">=</span><span class="token string">'primary'</span>
        onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            ReactDOM<span class="token punctuation">.</span><span class="token function">unstable_batchedUpdates</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> number<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token punctuation">)</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> number<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token punctuation">)</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> number<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">&gt;</span>
        点击 
      <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span> 
</code></pre></div><p><img src="/assets/img/09a2ffb14bd5466d871292f271ca0eab_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.96611628.gif" alt="效果"></p> <h2 id="最后"><a href="#最后" class="header-anchor">#</a> 最后</h2> <p><a href="https://reactjs.org/docs/react-api.html" target="_blank" rel="noopener noreferrer">react 官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://juejin.cn/post/7118937685653192735" target="_blank" rel="noopener noreferrer">「React 进阶」 React 全部 Hooks 使用大全 （包含 React v18 版本 ）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>其他react 好文</p> <ul><li><a href="https://juejin.cn/editor/drafts/7101481981212524552" target="_blank" rel="noopener noreferrer">搞懂这12个Hooks，保证让你玩转React<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/7103345085089054727" target="_blank" rel="noopener noreferrer">作为一名React，我是这样理解HOC的！<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/7116326409961734152" target="_blank" rel="noopener noreferrer">「React深入」一文吃透虚拟DOM和diff算法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/7121551701731409934/" target="_blank" rel="noopener noreferrer">花三个小时，完全掌握分片渲染和虚拟列表～<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="资料"><a href="#资料" class="header-anchor">#</a> 资料</h2> <p><a href="https://juejin.cn/post/7124486630483689485#heading-0" target="_blank" rel="noopener noreferrer">原文<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://juejin.cn/post/6844904137344155661" target="_blank" rel="noopener noreferrer">你真的了解浅比较么？PureComponent 和 shouldeComponentUpdate 解析<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/source-react/react-ahooks2.html" class="prev">
        一文搞定常用的自定义 React Hooks
      </a></span> <span class="next"><a href="/source-react/react-hooks.html">
        换个角度思考React Hooks
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ff5704b6.js" defer></script><script src="/assets/js/3.32bc1a55.js" defer></script><script src="/assets/js/4.3024e0ea.js" defer></script>
  </body>
</html>
