<!DOCTYPE html>
<!-- saved from url=(0040)https://blog.51cto.com/u_3409716/2904210 -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
        <title>React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客</title>
    <meta name="keywords" content="React的性能优化(useMemo和useCallback)的使用,其他博客,51CTO博客">
<meta name="description" content="React的性能优化(useMemo和useCallback)的使用，一、业务场景React是一个用于构建用户界面的javascript的库，主要负责将数据转换为视图，保证数据和视图的统一，react在每次数据更新的时候都会重新render来保证数据和视图的统一，但是当父组件内部数据的变化，在父组件下挂载的所有子组件也会重新渲染，因为react默认会全部渲染所有的组件，包括子组件的子组件，这就造成不必要的浪费。1、使用类定义一个父组件exportdefaultclassParentextendsReact.Component{state={">    <meta name="applicable-device" content="pc">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="msvalidate.01" content="91C5324FE68C0A46FA65F3FEC225EA65">
    <link rel="canonical" href="https://blog.51cto.com/u_3409716/2904210">
    <link type="favicon" rel="shortcut icon" href="https://blog.51cto.com/favicon.ico">
        <script src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/push.js"></script><script src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/hm.js"></script><script type="application/ld+json">{"@context":"https://ziyuan.baidu.com/contexts/cambrian.jsonld","@id":"https://blog.51cto.com/u_3409716/2904210","appid":"1576672126670053","title":"React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客","images":[],"description":"一、业务场景React是一个用于构建用户界面的javascript的库，主要负责将数据转换为视图，保证数据和视图的统一，react在每次数据更新的时候都会重新render来保证数据和视图的统一，但是当父组件内部数据的变化，在父组件下挂载的所","pubDate":"2021-06-15T15:55:15","upDate":"2021-06-15T15:55:15"}</script>
        <link href="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/copybtn.css_v=d1eca929ec" rel="stylesheet">    <script>var userId=""</script>
    <script async="" src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/googletagmanager.js"></script>
    <script>
        var HOME_URL = 'https://home.51cto.com/';
        var STATICPATH = 'https://static1.51cto.com/edu/';
    </script>
    <script src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/vip.js_v=13232bead2"></script><script src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/statisticsdb.js" charset="utf-8"></script><style></style></head>

<body><script src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/bl.js" crossorigin=""></script>
<script>
    !(function(c,b,d,a){c[a]||(c[a]={});c[a].config={
        pid:"b5hfowf5rl@95fdd72b343c07d",
        appType:"web",
        imgUrl:"https://arms-retcode.aliyuncs.com/r.png?",
        sendResource:true,
        enableLinkTrace:true,
        behavior:true,
        useFmp:true,
        environment:'prod',
        release:'0.5'
    };
        with(b)with(body)with(insertBefore(createElement("script"),firstChild))setAttribute("crossorigin","",src=d)
    })(window,document,"https://retcode.alicdn.com/retcode/bl.js","__bl");
        window.addEventListener('load', function (e) {
        __bl.setConfig({
                ignore: {
                    ignoreUrls: [
                        function (str) {
                            if (str && str.indexOf('.51cto.com') >= 0) {
                                if (/Mobile|iP(hone|ad)|Android|BlackBerry|IEMobile/.test(navigator.userAgent) && Math.random()<0.3) {
                                    return false;
                                }
                                return true;
                            }
                        return false;
                    }],
                ignoreErrors: [
                    /^Script error\.?/,
                    function (str) {
                        if (str && str.indexOf('Unkown error') >= 0) return true;
                        return false;
                    }],
                ignoreResErrors: [
                    /https:\/\/gg.51cto.com/,
                    /hm.baidu.com\/hm.js/,
                    function (str) {
                        if (str && str.indexOf('hm.baidu.com/hm.js') >= 0) return true;
                        return false;
                    }]
            }
        });
    });
</script><img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/share_default.jpg" border="0" style="width:0; height:0; position:absolute;">
<div class="Content-box" style="min-height: 1060px;">
    
<div class="Content detail-content-new">
    <!--关注-->
    <div class="fixtitle" style="display: block;">
        <div class="clearfix Page">
            <h3 class="fl title">React的性能优化(useMemo和useCallback)的使用</h3>
            <div class="messbox fr">
                                                            <a id="checkFollow1_3399716" class="follow-1 checkFollow on">关注</a>
                                                    <a href="https://blog.51cto.com/u_3409716" class="name" target="_blank" title="kuangshp">kuangshp</a>
                <strong>
                    <a href="https://blog.51cto.com/u_3409716" class="avatar" target="_blank">
                        <img class="is-vip-img is-vip-img-4" data-uid="3399716" src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/de51b4f0711b421ed9714fea6e1ec5e8.jpg">
                    </a>
                </strong>
            </div>
        </div>
    </div>

    <!--左边悬浮操作项-->
    <aside class="action-aside action-aside-left">
        <div class="inner">
            <ul><li class="directoryBtn"><strong><a href="javascript:;" class="arrowing"><i class="iconblog bloggengduo"></i></a><span>目录</span></strong></li>
                                    <li>
                        <strong class="appreciate-btn  appreciate-open ">
                            <a href="javascript:;"><i class="iconblog blogshang"></i></a>
                            <span>打赏</span>
                        </strong>
                    </li>
                                <li>
                    <strong class="is-praise  " type="1" blog_id="2904210" userid="3399716">
                        <a href="javascript:;"><i></i></a>
                        <span><b class="praise-num"></b>赞</span>
                    </strong>
                </li>
                <li>
                    <strong class="favorites-opt ">
                        <a href="javascript:;"><i></i></a>
                        <span><b class="favorites-num"></b>收藏</span>
                    </strong>
                </li>
                <li>
                    <strong class="Topraise">
                        <a href="javascript:;"><i class="iconblog blogpinglun"></i></a>
                        <span><b class="comments_num"></b>评论</span>
                    </strong>
                </li>
                <li class="share">
                    <strong class="">
                        <a href="javascript:;"><i class="iconblog blogfen"></i></a>
                        <span>分享</span>
                    </strong>
                    <div class="bdsharebuttonbox">
                        <div class="ins">
                            <a class="bds_tsina" data-cmd="tsina" rel="nofollow"><i class="iconblog blogfenxiangweibo"></i>微博</a>
                            <a class="bds_sqq" data-cmd="sqq" rel="nofollow"><i class="iconblog blogfenxiangqq"></i>QQ</a>
                            <a class="bds_weixin" data-cmd="weixin" rel="nofollow"><i class="iconblog blogfenxiangweixin"></i>微信</a>
                            <img src="https://blog.51cto.com/u_3409716/2904210">
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </aside>

    <!--大模块引入-->
    <div class="clearfix Page" id="page_center" style="position:relative;">
                
<aside class="detail-content-directory common-content-directory">
     <!-- 文章目录 -->
     <section class="common-section common-spacing table-contents" style="background:none">
        <div class="clearfix common-sub-title">
            <strong title="文章目录">文章目录</strong>
            <i class="iconblog blogquxiao18" id="closeDirectory"></i>
        </div>
        <div class="directory">
            <ul class="directory-list directory-list-left">
                                                                   <li class="lv1">
                            <div class="title" title="
一、业务场景">
                                <span data-id="#h0">
                                                                        
一、业务场景                                </span>
                            </div>
                        </li>
                                                                                            <li class="lv1">
                            <div class="title" title="
一、类组件中使用shouldComponentUpdate生命周期钩子函数">
                                <span data-id="#h1">
                                                                        
一、类组件中使用shouldComponentUpdate生命周期钩子函数                                </span>
                            </div>
                        </li>
                                                                                            <li class="lv1">
                            <div class="title" title="
二、使用PureComponet语法糖">
                                <span data-id="#h2">
                                                                        
二、使用PureComponet语法糖                                </span>
                            </div>
                        </li>
                                                                                            <li class="lv1">
                            <div class="title" title="
三、memo的使用">
                                <span data-id="#h3">
                                                                        
三、memo的使用                                </span>
                            </div>
                        </li>
                                                                                            <li class="lv1">
                            <div class="title" title="
四、useMemo和useCallback的认识">
                                <span data-id="#h4">
                                                                        
四、useMemo和useCallback的认识                                </span>
                            </div>
                        </li>
                                                                                            <li class="lv1">
                            <div class="title" title="
五、useMemo的使用(我们依赖借用子组件更新的来做)">
                                <span data-id="#h5">
                                                                        
五、useMemo的使用(我们依赖借用子组件更新的来做)                                </span>
                            </div>
                        </li>
                                                                                            <li class="lv1 on">
                            <div class="title" title="
六、useCallback的使用">
                                <span data-id="#h6">
                                                                        
六、useCallback的使用                                </span>
                            </div>
                        </li>
                                                        <div class="arrow" style="top: 4543px;"></div></ul>
        </div>
    </section>
</aside>                <section class="detail-content-left">
    <style>
    .hljs-center{
        text-align: center;
    }
    .hljs-right{
        text-align: right;
    }
    #result{
        overflow: auto;
    }
    .detail-content-left s{
        text-decoration: line-through;
    }
    .cto-mermaid{
        text-align: center;
    }
    .cto-mermaid svg{
        max-width: 100%;
    }
    #result img{
        height: auto;
    }
</style>

<article class="common-section common-spacing mb30 article-detail">
    <div class="title">
        <h1>React的性能优化(useMemo和useCallback)的使用</h1>
                                <span class="original">原创</span>
    </div>
    <div class="messbox">
        <p class="clearfix mess-line1">
            <a class="fl" href="https://blog.51cto.com/u_3409716">kuangshp</a>
            <time class="fl" pubdate="2021-06-15 15:55:15">2021-06-15 15:55:15</time>
                        <span class="fr" id="copyright-btn">©著作权</span>
        </p>
        <p class="clearfix mess-tag">
                        <strong class="fl">
                <em class="fl">文章标签</em>
                                    <a href="https://blog.51cto.com/topic/react.html" class="fl" target="_blank">react</a>
                                    <a href="https://blog.51cto.com/topic/qianduanjishu.html" class="fl" target="_blank">前端技术</a>
                            </strong>
                                    <strong class="fl">
                <em class="fl">文章分类</em>
                                <a href="https://blog.51cto.com/nav/web1" class="fl" target="_blank">其他</a>
                                <a href="https://blog.51cto.com/nav/web" class="fl" target="_blank">前端开发</a>
                            </strong>
                    <strong class="fl"><em class="fl">阅读数</em><b class="fl">489</b></strong></p>
    </div>
        <div class="copytext" id="copytext">
        ©著作权归作者所有：来自51CTO博客作者kuangshp的原创作品，请联系作者获取转载授权，否则将追究法律责任<br><a href="https://blog.51cto.com/u_3409716/2904210">React的性能优化(useMemo和useCallback)的使用</a><br><a href="https://blog.51cto.com/u_3409716/2904210">https://blog.51cto.com/u_3409716/2904210</a>    </div>
    <div class="article-content-wrap">
                    <div class="artical-content-bak main-content editor-side-new">
                <div class="con editor-preview-side" id="result"><div class="markdown_views prism-atom-one-dark">
                    <h2>
<a></a>一、业务场景</h2> 
<blockquote> 
 <p><code>React</code>是一个用于构建用户界面的<code>javascript</code>的库，主要负责将数据转换为视图，保证数据和视图的统一，<code>react</code>在每次数据更新的时候都会重新<code>render</code>来保证数据和视图的统一，但是当父组件<strong>内部数据</strong>的变化，在父组件下挂载的所有子组件也会重新渲染，因为<code>react</code>默认会全部渲染所有的组件，包括子组件的子组件，这就造成不必要的浪费。</p> 
</blockquote> 
<ul><li> <p>1、使用类定义一个父组件</p> <div class="code-toolbar"><div class="hljs-cto"><button data-clipboard-target="#code_id_0" class="copy_btn disable">登录后复制</button><div class="code-toolbar"><pre class=" prettyprint language-javascript" tabindex="0"><code class="prism has-numbering language-javascript" id="code_id_0"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        我是父组件
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>点击按钮<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Child <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><ul class="pre-numbering" style=""><li>1.</li><li>2.</li><li>3.</li><li>4.</li><li>5.</li><li>6.</li><li>7.</li><li>8.</li><li>9.</li><li>10.</li><li>11.</li><li>12.</li><li>13.</li><li>14.</li></ul></pre><div class="toolbar"></div></div></div><div class="toolbar"></div></div> </li>
<li> <p>2、定义一个子组件</p> <div class="code-toolbar"><div class="hljs-cto"><button data-clipboard-target="#code_id_1" class="copy_btn disable">登录后复制</button><div class="code-toolbar"><pre class=" prettyprint language-javascript" tabindex="0"><code class="prism has-numbering language-javascript" id="code_id_1"><span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是子组件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        我是子组件
        <span class="token operator">&lt;</span>Grandson <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><ul class="pre-numbering" style=""><li>1.</li><li>2.</li><li>3.</li><li>4.</li><li>5.</li><li>6.</li><li>7.</li><li>8.</li><li>9.</li><li>10.</li><li>11.</li></ul></pre><div class="toolbar"></div></div></div><div class="toolbar"></div></div> </li>
<li> <p>3、定义一个孙子组件</p> <div class="code-toolbar"><div class="hljs-cto"><button data-clipboard-target="#code_id_2" class="copy_btn disable">登录后复制</button><div class="code-toolbar"><pre class=" prettyprint language-javascript" tabindex="0"><code class="prism has-numbering language-javascript" id="code_id_2"><span class="token keyword">class</span> <span class="token class-name">Grandson</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'孙子组件'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>孙子组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><ul class="pre-numbering" style=""><li>1.</li><li>2.</li><li>3.</li><li>4.</li><li>5.</li><li>6.</li></ul></pre><div class="toolbar"></div></div></div><div class="toolbar"></div></div> </li>
<li> <p>4、上面几个组件是比较标准的<code>react</code>的类组件,函数组件也是类似的，当你在父组件中点击按钮，其实你仅仅是想改变父组件内的<code>count</code>的值，但是你会发现每次点击的时候子组件和孙组件也会重新渲染，因为<code>react</code>并不知道是不是要渲染子组件，需要我们自己去判断。</p> </li>
</ul><h2>
<a></a>一、类组件中使用<code>shouldComponentUpdate</code>生命周期钩子函数</h2> 
<ul><li> <p>1、在子组件中使用<code>shouldComponentUpdate</code>来判断是否要更新，</p> 
  <blockquote> 
   <p>其实就是根据<code>this.props</code>和函数参数中的<code>nextProps</code>中的参数来对比，如果返回<code>false</code>就不更新，如果返回<code>ture</code>就表示需要更新当前组件</p> 
  </blockquote> <div class="code-toolbar"><div class="hljs-cto"><button data-clipboard-target="#code_id_3" class="copy_btn disable">登录后复制</button><div class="code-toolbar"><pre class=" prettyprint language-javascript" tabindex="0"><code class="prism has-numbering language-javascript" id="code_id_3"><span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">shouldComponentUpdate</span> <span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nextProps<span class="token punctuation">.</span>count <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code><ul class="pre-numbering" style=""><li>1.</li><li>2.</li><li>3.</li><li>4.</li><li>5.</li><li>6.</li><li>7.</li><li>8.</li><li>9.</li><li>10.</li><li>11.</li></ul></pre><div class="toolbar"></div></div></div><div class="toolbar"></div></div> <p>**注意点:**这里的<code>count</code>是要父组件给当前组件传递的参数(就是你要监听变化的的来更新当前组件),如果你写一个<code>nextProps.name === this.props.name</code>其实，父组件并没有给当前组件传递<code>name</code>那么下面都是返回<code>false</code>组件不更新</p> </li>
<li> <p>2、当子组件没更新，那么孙组件同样的不更新数据</p> </li>
</ul><h2>
<a></a>二、使用<code>PureComponet</code>语法糖</h2> 
<blockquote> 
 <p>其实<code>PureComponet</code>就是一个语法糖，只是官方在底层帮你实现了<code>shouldComponentUpdate</code>方法而已，使用的时候只需要子类继承这个类就可以</p> 
</blockquote> 
<ul><li> <p>1、子组件中继承</p> <div class="code-toolbar"><div class="hljs-cto"><button data-clipboard-target="#code_id_4" class="copy_btn disable">登录后复制</button><div class="code-toolbar"><pre class=" prettyprint language-javascript" tabindex="0"><code class="prism has-numbering language-javascript" id="code_id_4"><span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是子组件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        我是子组件
        <span class="token operator">&lt;</span>Grandson <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><ul class="pre-numbering" style=""><li>1.</li><li>2.</li><li>3.</li><li>4.</li><li>5.</li><li>6.</li><li>7.</li><li>8.</li><li>9.</li><li>10.</li><li>11.</li></ul></pre><div class="toolbar"></div></div></div><div class="toolbar"></div></div> </li>
<li> <p>2、在父组件中使用</p> <div class="code-toolbar"><div class="hljs-cto"><button data-clipboard-target="#code_id_5" class="copy_btn disable">登录后复制</button><div class="code-toolbar"><pre class=" prettyprint language-typescript" tabindex="0"><code class="prism has-numbering language-typescript" id="code_id_5">// 下面这种情况不会重新渲染子组件
&lt;Child/&gt;
// 下面这种情况下会重新渲染子组件
&lt;Child count={this.state.count}/&gt;
</code><ul class="pre-numbering" style=""><li>1.</li><li>2.</li><li>3.</li><li>4.</li></ul></pre><div class="toolbar"></div></div></div><div class="toolbar"></div></div> </li>
</ul><h2>
<a></a>三、<code>memo</code>的使用</h2> 
<blockquote> 
 <p>当你子组件是类组件的时候可以使用<code>shouldComponentUpdate</code>钩子函数或类组件继承<code>PureComponent</code>来实现不渲染子组件，但是对于函数组件来说是不能用这两个方法的，因此<code>react</code>官方给函数组件提供了<code>memo</code>来对函数组件包装下，实现不必要的渲染。</p> 
</blockquote> 
<ul><li> <p>1、组件定义(这里也可以使用类组件)</p> <div class="code-toolbar"><div class="hljs-cto"><button data-clipboard-target="#code_id_6" class="copy_btn disable">登录后复制</button><div class="code-toolbar"><pre class=" prettyprint language-javascript" tabindex="0"><code class="prism has-numbering language-javascript" id="code_id_6"><span class="token keyword">function</span> <span class="token function">Child</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是子组件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      子组件
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Parent</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      我是父组件<span class="token operator">-</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>点击按钮<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Child <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code><ul class="pre-numbering" style=""><li>1.</li><li>2.</li><li>3.</li><li>4.</li><li>5.</li><li>6.</li><li>7.</li><li>8.</li><li>9.</li><li>10.</li><li>11.</li><li>12.</li><li>13.</li><li>14.</li><li>15.</li><li>16.</li><li>17.</li><li>18.</li><li>19.</li></ul></pre><div class="toolbar"></div></div></div><div class="toolbar"></div></div> </li>
<li> <p>2、这里我们父组件内部改变<code>count</code>并没有传递给子组件，但是子组件一样的重新渲染了，这并不是我们希望看到的，因为需要对子组件包装下</p> <div class="code-toolbar"><div class="hljs-cto"><button data-clipboard-target="#code_id_7" class="copy_btn disable">登录后复制</button><div class="code-toolbar"><pre class=" prettyprint language-javascript" tabindex="0"><code class="prism has-numbering language-javascript" id="code_id_7"><span class="token keyword">function</span> <span class="token function">Child</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是子组件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      子组件
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> ChildMemo <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>Child<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Parent</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      我是父组件<span class="token operator">-</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>点击按钮<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* 这种情况下不会渲染子组件 */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>ChildMemo <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* 这种情况下会渲染子组件 */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>ChildMemo count<span class="token operator">=</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code><ul class="pre-numbering" style=""><li>1.</li><li>2.</li><li>3.</li><li>4.</li><li>5.</li><li>6.</li><li>7.</li><li>8.</li><li>9.</li><li>10.</li><li>11.</li><li>12.</li><li>13.</li><li>14.</li><li>15.</li><li>16.</li><li>17.</li><li>18.</li><li>19.</li><li>20.</li><li>21.</li><li>22.</li><li>23.</li></ul></pre><div class="toolbar"></div></div></div><div class="toolbar"></div></div> </li>
</ul><h2>
<a></a>四、<code>useMemo</code>和<code>useCallback</code>的认识</h2> 
<ul><li> <p>1、<code>useMemo</code>和<code>useCallback</code>都是具有缓存作用的，只是他们缓存对象不一样，一个是属性，一个是缓存函数，特点都是，当缓存依赖的没变，去获取还是获取曾经的缓存</p> </li>
<li> <p>2、<code>useMemo</code>是对函数组件中的属性包装，返回一个具有缓存效果的新的属性，当依赖的属性没变化的时候，这个返回新属性就会从缓存中获取之前的。</p> </li>
<li> <p>3、<code>useCallback</code>是对函数组件中的方法缓存，返回一个被缓存的方法</p> </li>
</ul><h2>
<a></a>五、<code>useMemo</code>的使用(我们依赖借用子组件更新的来做)</h2> 
<ul><li> <p>1、根据上面的方式我们在父组件更新数据，观察子组件变化</p> <div class="code-toolbar"><div class="hljs-cto"><button data-clipboard-target="#code_id_8" class="copy_btn disable">登录后复制</button><div class="code-toolbar"><pre class=" prettyprint language-javascript" tabindex="0"><code class="prism has-numbering language-javascript" id="code_id_8"><span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'重新渲染子组件'</span><span class="token punctuation">,</span> props<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>子组件<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> ChildMemo <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>Child<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Parent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>number<span class="token punctuation">,</span> setNumber<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> count<span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token function-variable function">btnHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setNumber</span><span class="token punctuation">(</span>number<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>number<span class="token punctuation">}</span><span class="token operator">-</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>btnHandler<span class="token punctuation">}</span><span class="token operator">&gt;</span>按钮<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>ChildMemo userInfo<span class="token operator">=</span><span class="token punctuation">{</span>userInfo<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code><ul class="pre-numbering" style=""><li>1.</li><li>2.</li><li>3.</li><li>4.</li><li>5.</li><li>6.</li><li>7.</li><li>8.</li><li>9.</li><li>10.</li><li>11.</li><li>12.</li><li>13.</li><li>14.</li><li>15.</li><li>16.</li><li>17.</li><li>18.</li><li>19.</li><li>20.</li><li>21.</li><li>22.</li><li>23.</li><li>24.</li><li>25.</li><li>26.</li><li>27.</li></ul></pre><div class="toolbar"></div></div></div><div class="toolbar"></div></div> <p>上面发现我们仅仅是更新了<code>number</code>的值，传递给子组件的对象值并没有变化，但是每次子组件都重新更新了，虽然我们在子组件上用了<code>React.memo</code>包装还是不行，这是因为在父组件中每次重新渲染，对于对象来说会是重新一个新的对象了。因此子组件要重新更新，</p> </li>
<li> <p>2、使用<code>useMemo</code>对属性的包装</p> <div class="code-toolbar"><div class="hljs-cto"><button data-clipboard-target="#code_id_9" class="copy_btn disable">登录后复制</button><div class="code-toolbar"><pre class=" prettyprint language-javascript" tabindex="0"><code class="prism has-numbering language-javascript" id="code_id_9"><span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> count<span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><ul class="pre-numbering" style=""><li>1.</li><li>2.</li><li>3.</li><li>4.</li><li>5.</li><li>6.</li></ul></pre><div class="toolbar"></div></div></div><div class="toolbar"></div></div> <p>使用<code>useMemo</code>包装后的对象，重新返回一个具有缓存效果的新对象，第二个参数表示依赖性，或者叫观察对象，当被观察的没变化，返回的就是缓存对象，如果被观察的变化了，那么就会返回新的，现在不管你怎么更新<code>number</code>的值，子组件都不会重新更新了</p> </li>
<li> <p>3、注意点:<code>useMemo</code>要配合<code>React.memo</code>来使用，不然传递到子组件也是不生效的</p> </li>
</ul><h2>
<a></a>六、<code>useCallback</code>的使用</h2> 
<p>前面介绍了，<code>useCallback</code>是对一个方法的包装，返回一个具有缓存的方法，常见的使用场景是，父组件要传递一个方法给子组件</p> 
<ul><li> <p>1、在不使用<code>useCallback</code>的时候</p> <div class="code-toolbar"><div class="hljs-cto"><button data-clipboard-target="#code_id_10" class="copy_btn disable">登录后复制</button><div class="code-toolbar"><pre class=" prettyprint language-javascript" tabindex="0"><code class="prism has-numbering language-javascript" id="code_id_10"><span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'渲染了子组件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> onClick <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>onClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>点击按钮获取值<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> ChildMemo <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>Child<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Parent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>text<span class="token punctuation">,</span> updateText<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> textRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'当前的值'</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      我是父组件
      <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> value<span class="token operator">=</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">updateText</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>ChildMemo onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code><ul class="pre-numbering" style=""><li>1.</li><li>2.</li><li>3.</li><li>4.</li><li>5.</li><li>6.</li><li>7.</li><li>8.</li><li>9.</li><li>10.</li><li>11.</li><li>12.</li><li>13.</li><li>14.</li><li>15.</li><li>16.</li><li>17.</li><li>18.</li><li>19.</li><li>20.</li><li>21.</li><li>22.</li><li>23.</li><li>24.</li></ul></pre><div class="toolbar"></div></div></div><div class="toolbar"></div></div> <p>结果是每次输入框输入值的时候，子组件就会重新渲染一次，其实子组件中仅仅是一个按钮，要获取最终输入的值，每次父组件输入值的时候，子组件就更新，很耗性能的</p> </li>
<li> <p>2、使用<code>useCallback</code>来包装一个方法</p> <div class="code-toolbar"><div class="hljs-cto"><button data-clipboard-target="#code_id_11" class="copy_btn disable">登录后复制</button><div class="code-toolbar"><pre class=" prettyprint language-javascript" tabindex="0"><code class="prism has-numbering language-javascript" id="code_id_11"><span class="token keyword">const</span> <span class="token function-variable function">Parent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>text<span class="token punctuation">,</span> updateText<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> textRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// useCallback又依赖了textRef的变化，因此可以获取到最新的数据</span>
  <span class="token keyword">const</span> handleSubmit <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'当前输入框的值:'</span><span class="token punctuation">,</span> textRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>textRef<span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token comment">// 当text的值变化的时候就会给textRef的current重新赋值</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    textRef<span class="token punctuation">.</span>current <span class="token operator">=</span> text<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>text<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">return</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      我是父组件
      <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> value<span class="token operator">=</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">updateText</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>ChildMemo onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code><ul class="pre-numbering" style=""><li>1.</li><li>2.</li><li>3.</li><li>4.</li><li>5.</li><li>6.</li><li>7.</li><li>8.</li><li>9.</li><li>10.</li><li>11.</li><li>12.</li><li>13.</li><li>14.</li><li>15.</li><li>16.</li><li>17.</li><li>18.</li><li>19.</li><li>20.</li><li>21.</li><li>22.</li></ul></pre><div class="toolbar"></div></div></div><div class="toolbar"></div></div> </li>
</ul></div>
                </div>
            </div>
		
        <div id="asideoffset"></div>
        <div class="clearfix label-list">

<!--            <span>本文包含：</span>-->
<!--          -->
<!--            <a href="" target="_blank"></a>-->

        </div>
    </div>
    <div class="action-box">
        <ul>
                        <li>
                <strong class="appreciate-btn  appreciate-open ">
                    <a href="javascript:;"><i class="iconblog blogshang"></i></a>
                    <span>打赏</span>
                </strong>
            </li>
                        <li>
                <strong class="is-praise  " type="1" blog_id="2904210" userid="3399716">
                    <a href="javascript:;"><i></i></a>
                    <span><b class="praise-num"></b>赞</span>
                </strong>
            </li>
            <li>
                <strong class="favorites-opt ">
                    <a href="javascript:;"><i></i></a>
                    <span><b class="favorites-num"></b>收藏</span>
                </strong>
            </li>
            <li>
                <strong class="Topraise">
                    <a href="javascript:;"><i class="iconblog blogpinglun"></i></a>
                    <span><b class="comments_num"></b>评论</span>
                </strong>
            </li>
            <li class="share">
                <strong class="">
                    <a href="javascript:;"><i class="iconblog blogfen"></i></a>
                    <span>分享</span>
                </strong>
                <div class="bdsharebuttonbox">
                    <div class="ins">
                        <a class="bds_tsina" data-cmd="tsina" rel="nofollow"><i class="iconblog blogfenxiangweibo"></i>微博</a>
                        <a class="bds_sqq" data-cmd="sqq" rel="nofollow"><i class="iconblog blogfenxiangqq"></i>QQ</a>
                        <a class="bds_weixin" data-cmd="weixin" rel="nofollow"><i class="iconblog blogfenxiangweixin"></i>微信</a>
                        <img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/qr-url">
                    </div>
                </div>
            </li>
                        <li>
                <strong class="article-report">
                    <a href="javascript:;"><i class="iconblog blogjubaobeifen report-icon" style="font-size: 23px"></i></a>
                    <span>举报</span>
                </strong>
            </li>
                    </ul>
    </div>
    <div class="clearfix lists">
                 <p class="fl"><span>上一篇：</span><a href="https://blog.51cto.com/u_3409716/2904209">使用工具更加规范你的react项目</a></p>
                            <p class="fr"><span>下一篇：</span><a href="https://blog.51cto.com/u_3409716/2904211">使用redux-toolkit简化react中redux的操作</a></p>
                
    </div>
    <div class="text-aticle">

    </div>
</article>
<!-- 蒙层 -->
<div class="Mask"></div>

<div class="report-dialog-root">
    <div class="report-dialog-container">
        <p class="report-dialog-title">举报文章</p>
        <div class="report-type-container model-split_top" data-type="0" id="report-specific-type">
            <p class="report-type-tit">请选择举报类型</p>
            <div class="report-type-enmu">
                <span class="report-type-item type-item_first" data-type="1">内容侵权</span>
                <span class="report-type-item type-item_first item-split" data-type="2">涉嫌营销</span>
                <span class="report-type-item type-item_first item-split" data-type="3">内容抄袭</span>
                <span class="report-type-item type-item_first item-split" data-type="4">违法信息</span>
                <span class="report-type-item type-item_first item-split" data-type="5">其他</span>
            </div>
        </div>
        <div class="report-type-container model-split_top report-hide-model" id="report-specific-reasons" data-type="0">
            <p class="report-type-tit">具体原因</p>
            <div class="report-type-enmu">
                <span class="report-type-item type-item_second" data-type="1">包含不真实信息</span>
                <span class="report-type-item type-item_second item-split" data-type="2">涉及个人隐私</span>
            </div>
        </div>
        <div class="report-type-container model-split_top report-hide-model" id="report-original-link">
            <p class="report-type-tit">原文链接（必填）</p>
            <input type="text" placeholder="请输入被侵权的原文链接" class="report-orgin_input">
        </div>
        <div class="report-type-container model-split_top textarea-content">
            <p class="report-type-tit">补充说明</p>
            <textarea maxlength="200" class="report-reason_textarea" placeholder="请详细描述您的举报内容" id="report-more-info"></textarea>
            <p class="report-textarea-tip"><span class="tip-left">0</span><span>/200</span></p>
        </div>
        <div class="report-type-container">
            <p class="report-type-tit">上传截图</p>
            <div class="report-img-container">
                <i class="iconblog blogtianjiabeifen report-add-icon"></i>
                <input type="file" accept="image/jpg,image/jpeg,image/png" name="file" class="repot-btn-select" onchange="selectImg(this)">
            </div>
            <p class="report-img_rule">格式支持JPEG/PNG/JPG，图片不超过1.9M</p>
            <div class="report-img-show">
                <img src="https://blog.51cto.com/u_3409716/2904210" alt="" id="report-img">
                <div class="report-img-close">
                    <i class="iconblog bloga-shanchutupian report-close-icon"></i>
                </div>
            </div>
        </div>
        <div class="report-btn-container">
            <button class="report-btn-cancel">取消</button>
            <button class="report-btn-concert">确认</button>
        </div>
        <div class="report-warm-tip report-hide-model">
            已经收到您得举报信息，我们会尽快审核
        </div>
    </div>
</div>
<script>
  var writeMessage= "©著作权归作者所有：来自51CTO博客作者kuangshp的原创作品，请联系作者获取转载授权，否则将追究法律责任\r\nReact的性能优化(useMemo和useCallback)的使用\r\nhttps:\/\/blog.51cto.com\/u_3409716\/2904210";
  var copyData='\r\n-----------------------------------\r\n'+writeMessage

 function copy(value, cb) {
  // 动态创建 textarea 标签
  const textarea = document.createElement('textarea')
  // 将该 textarea 设为 readonly 防止 iOS 下自动唤起键盘，同时将 textarea 移出可视区域
  textarea.readOnly = 'readonly'
  textarea.style.position = 'absolute'
  textarea.style.left = '-9999px'
  // 将要 copy 的值赋给 textarea 标签的 value 属性
  textarea.value = value
  // 将 textarea 插入到 body 中
  document.body.appendChild(textarea)
  // 选中值并复制
  textarea.select()
  textarea.setSelectionRange(0, textarea.value.length)
  document.execCommand('Copy')
  document.body.removeChild(textarea)
  if (cb && Object.prototype.toString.call(cb) === '[object Function]') {
    cb()
  }
  
}


  $('#result').on('copy', function (event) {
    if (!window.getSelection) {
      return
    }
    let copyString = window.getSelection().toString()
    if(isCodeCopy){
        return
    }
    if (copyString.length < 200) {
       copy(copyString)
      return
    }
    copyString=copyString+copyData
    copy(copyString)

  })
  $('#markdownContent').on('copy', function (event) {
    if (!window.getSelection) {
      return
    }
  
    let copyString = window.getSelection().toString()
     if(isCodeCopy){
        return
    }
    if (copyString.length < 200) {
      copy(copyString)
      return
    }
    copyString=copyString+copyData
    copy(copyString)
    

  })
    var is_old = "1"
    if(is_old == 0) {
        var reg=/<(h[1-4])([^>]*)>/g;
        var htmlData = CtoEditor.ctoEditor.mixins[0].data().markdownIt.render("\u003Cdiv class=\u0022markdown_views prism-atom-one-dark\u0022\u003E\n                    \u003Ch2\u003E\n\u003Ca\u003E\u003C\/a\u003E一、业务场景\u003C\/h2\u003E \n\u003Cblockquote\u003E \n \u003Cp\u003E\u003Ccode\u003EReact\u003C\/code\u003E是一个用于构建用户界面的\u003Ccode\u003Ejavascript\u003C\/code\u003E的库，主要负责将数据转换为视图，保证数据和视图的统一，\u003Ccode\u003Ereact\u003C\/code\u003E在每次数据更新的时候都会重新\u003Ccode\u003Erender\u003C\/code\u003E来保证数据和视图的统一，但是当父组件\u003Cstrong\u003E内部数据\u003C\/strong\u003E的变化，在父组件下挂载的所有子组件也会重新渲染，因为\u003Ccode\u003Ereact\u003C\/code\u003E默认会全部渲染所有的组件，包括子组件的子组件，这就造成不必要的浪费。\u003C\/p\u003E \n\u003C\/blockquote\u003E \n\u003Cul\u003E\u003Cli\u003E \u003Cp\u003E1、使用类定义一个父组件\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Eexport\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Edefault\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Eclass\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EParent\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Eextends\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EReact\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003EComponent\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  state \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    count\u003Cspan class=\u0022token punctuation\u0022\u003E:\u003C\/span\u003E \u003Cspan class=\u0022token number\u0022\u003E0\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n  \u003Cspan class=\u0022token function\u0022\u003Erender\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n        我是父组件\n        \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ebutton onClick\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Ethis\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003EsetState\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E:\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Ethis\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Estate\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Ecount\u003Cspan class=\u0022token operator\u0022\u003E++\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E点击按钮\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ebutton\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n        \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EChild \u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n    \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E2、定义一个子组件\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Eclass\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EChild\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Eextends\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EReact\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003EComponent\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token function\u0022\u003Erender\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027我是子组件\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n    \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n        我是子组件\n        \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EGrandson \u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n    \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E3、定义一个孙子组件\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Eclass\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EGrandson\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Eextends\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EReact\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003EComponent\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token function\u0022\u003Erender\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027孙子组件\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n    \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E孙子组件\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E4、上面几个组件是比较标准的\u003Ccode\u003Ereact\u003C\/code\u003E的类组件,函数组件也是类似的，当你在父组件中点击按钮，其实你仅仅是想改变父组件内的\u003Ccode\u003Ecount\u003C\/code\u003E的值，但是你会发现每次点击的时候子组件和孙组件也会重新渲染，因为\u003Ccode\u003Ereact\u003C\/code\u003E并不知道是不是要渲染子组件，需要我们自己去判断。\u003C\/p\u003E \u003C\/li\u003E\n\u003C\/ul\u003E\u003Ch2\u003E\n\u003Ca\u003E\u003C\/a\u003E一、类组件中使用\u003Ccode\u003EshouldComponentUpdate\u003C\/code\u003E生命周期钩子函数\u003C\/h2\u003E \n\u003Cul\u003E\u003Cli\u003E \u003Cp\u003E1、在子组件中使用\u003Ccode\u003EshouldComponentUpdate\u003C\/code\u003E来判断是否要更新，\u003C\/p\u003E \n  \u003Cblockquote\u003E \n   \u003Cp\u003E其实就是根据\u003Ccode\u003Ethis.props\u003C\/code\u003E和函数参数中的\u003Ccode\u003EnextProps\u003C\/code\u003E中的参数来对比，如果返回\u003Ccode\u003Efalse\u003C\/code\u003E就不更新，如果返回\u003Ccode\u003Eture\u003C\/code\u003E就表示需要更新当前组件\u003C\/p\u003E \n  \u003C\/blockquote\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Eclass\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EChild\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Eextends\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EReact\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003EComponent\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token function\u0022\u003EshouldComponentUpdate\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003EnextProps\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E nextState\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003EnextProps\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Ethis\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Eprops\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n    \u003Cspan class=\u0022token keyword\u0022\u003Eif\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003EnextProps\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Ecount \u003Cspan class=\u0022token operator\u0022\u003E===\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Ethis\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Eprops\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n      \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token boolean\u0022\u003Efalse\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n    \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Eelse\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n      \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token boolean\u0022\u003Etrue\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n    \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n  \u003Cspan class=\u0022token operator\u0022\u003E...\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003Cp\u003E**注意点:**这里的\u003Ccode\u003Ecount\u003C\/code\u003E是要父组件给当前组件传递的参数(就是你要监听变化的的来更新当前组件),如果你写一个\u003Ccode\u003EnextProps.name === this.props.name\u003C\/code\u003E其实，父组件并没有给当前组件传递\u003Ccode\u003Ename\u003C\/code\u003E那么下面都是返回\u003Ccode\u003Efalse\u003C\/code\u003E组件不更新\u003C\/p\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E2、当子组件没更新，那么孙组件同样的不更新数据\u003C\/p\u003E \u003C\/li\u003E\n\u003C\/ul\u003E\u003Ch2\u003E\n\u003Ca\u003E\u003C\/a\u003E二、使用\u003Ccode\u003EPureComponet\u003C\/code\u003E语法糖\u003C\/h2\u003E \n\u003Cblockquote\u003E \n \u003Cp\u003E其实\u003Ccode\u003EPureComponet\u003C\/code\u003E就是一个语法糖，只是官方在底层帮你实现了\u003Ccode\u003EshouldComponentUpdate\u003C\/code\u003E方法而已，使用的时候只需要子类继承这个类就可以\u003C\/p\u003E \n\u003C\/blockquote\u003E \n\u003Cul\u003E\u003Cli\u003E \u003Cp\u003E1、子组件中继承\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Eclass\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EChild\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Eextends\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EReact\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003EPureComponent\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token function\u0022\u003Erender\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027我是子组件\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n    \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n        我是子组件\n        \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EGrandson \u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n    \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E2、在父组件中使用\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-typescript\u0022\u003E\u003Cspan class=\u0022token comment\u0022\u003E\/\/ 下面这种情况不会重新渲染子组件\u003C\/span\u003E\n\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EChild\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n\u003Cspan class=\u0022token comment\u0022\u003E\/\/ 下面这种情况下会重新渲染子组件\u003C\/span\u003E\n\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EChild count\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\u003Cspan class=\u0022token keyword\u0022\u003Ethis\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Estate\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003C\/li\u003E\n\u003C\/ul\u003E\u003Ch2\u003E\n\u003Ca\u003E\u003C\/a\u003E三、\u003Ccode\u003Ememo\u003C\/code\u003E的使用\u003C\/h2\u003E \n\u003Cblockquote\u003E \n \u003Cp\u003E当你子组件是类组件的时候可以使用\u003Ccode\u003EshouldComponentUpdate\u003C\/code\u003E钩子函数或类组件继承\u003Ccode\u003EPureComponent\u003C\/code\u003E来实现不渲染子组件，但是对于函数组件来说是不能用这两个方法的，因此\u003Ccode\u003Ereact\u003C\/code\u003E官方给函数组件提供了\u003Ccode\u003Ememo\u003C\/code\u003E来对函数组件包装下，实现不必要的渲染。\u003C\/p\u003E \n\u003C\/blockquote\u003E \n\u003Cul\u003E\u003Cli\u003E \u003Cp\u003E1、组件定义(这里也可以使用类组件)\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Efunction\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EChild\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027我是子组件\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      子组件\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\n\u003Cspan class=\u0022token keyword\u0022\u003Efunction\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EParent\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E[\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E setCount\u003Cspan class=\u0022token punctuation\u0022\u003E]\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EuseState\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token number\u0022\u003E0\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      我是父组件\u003Cspan class=\u0022token operator\u0022\u003E-\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ebutton onClick\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003EsetCount\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Ecount \u003Cspan class=\u0022token operator\u0022\u003E+\u003C\/span\u003E \u003Cspan class=\u0022token number\u0022\u003E1\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E点击按钮\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ebutton\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EChild \u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E2、这里我们父组件内部改变\u003Ccode\u003Ecount\u003C\/code\u003E并没有传递给子组件，但是子组件一样的重新渲染了，这并不是我们希望看到的，因为需要对子组件包装下\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Efunction\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EChild\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027我是子组件\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      子组件\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\n\u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E ChildMemo \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E React\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Ememo\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003EChild\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n\u003Cspan class=\u0022token keyword\u0022\u003Efunction\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EParent\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E[\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E setCount\u003Cspan class=\u0022token punctuation\u0022\u003E]\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EuseState\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token number\u0022\u003E0\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      我是父组件\u003Cspan class=\u0022token operator\u0022\u003E-\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ebutton onClick\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003EsetCount\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Ecount \u003Cspan class=\u0022token operator\u0022\u003E+\u003C\/span\u003E \u003Cspan class=\u0022token number\u0022\u003E1\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E点击按钮\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ebutton\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\u003Cspan class=\u0022token comment\u0022\u003E\/* 这种情况下不会渲染子组件 *\/\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EChildMemo \u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\u003Cspan class=\u0022token comment\u0022\u003E\/* 这种情况下会渲染子组件 *\/\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EChildMemo count\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003C\/li\u003E\n\u003C\/ul\u003E\u003Ch2\u003E\n\u003Ca\u003E\u003C\/a\u003E四、\u003Ccode\u003EuseMemo\u003C\/code\u003E和\u003Ccode\u003EuseCallback\u003C\/code\u003E的认识\u003C\/h2\u003E \n\u003Cul\u003E\u003Cli\u003E \u003Cp\u003E1、\u003Ccode\u003EuseMemo\u003C\/code\u003E和\u003Ccode\u003EuseCallback\u003C\/code\u003E都是具有缓存作用的，只是他们缓存对象不一样，一个是属性，一个是缓存函数，特点都是，当缓存依赖的没变，去获取还是获取曾经的缓存\u003C\/p\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E2、\u003Ccode\u003EuseMemo\u003C\/code\u003E是对函数组件中的属性包装，返回一个具有缓存效果的新的属性，当依赖的属性没变化的时候，这个返回新属性就会从缓存中获取之前的。\u003C\/p\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E3、\u003Ccode\u003EuseCallback\u003C\/code\u003E是对函数组件中的方法缓存，返回一个被缓存的方法\u003C\/p\u003E \u003C\/li\u003E\n\u003C\/ul\u003E\u003Ch2\u003E\n\u003Ca\u003E\u003C\/a\u003E五、\u003Ccode\u003EuseMemo\u003C\/code\u003E的使用(我们依赖借用子组件更新的来做)\u003C\/h2\u003E \n\u003Cul\u003E\u003Cli\u003E \u003Cp\u003E1、根据上面的方式我们在父组件更新数据，观察子组件变化\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token function-variable function\u0022\u003EChild\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Eprops\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027重新渲染子组件\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E props\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E子组件\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E ChildMemo \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E React\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Ememo\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003EChild\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n\n\u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token function-variable function\u0022\u003EParent\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E[\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E setCount\u003Cspan class=\u0022token punctuation\u0022\u003E]\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EuseState\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token number\u0022\u003E0\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E[\u003C\/span\u003Enumber\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E setNumber\u003Cspan class=\u0022token punctuation\u0022\u003E]\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003EuseState\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token number\u0022\u003E0\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E userInfo \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    age\u003Cspan class=\u0022token punctuation\u0022\u003E:\u003C\/span\u003E count\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E\n    name\u003Cspan class=\u0022token punctuation\u0022\u003E:\u003C\/span\u003E \u003Cspan class=\u0022token string\u0022\u003E\u0027hello\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token function-variable function\u0022\u003EbtnHandler\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    \u003Cspan class=\u0022token function\u0022\u003EsetNumber\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Enumber\u003Cspan class=\u0022token operator\u0022\u003E+\u003C\/span\u003E\u003Cspan class=\u0022token number\u0022\u003E1\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003Enumber\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E-\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ebutton onClick\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003EbtnHandler\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E按钮\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ebutton\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EChildMemo userInfo\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003EuserInfo\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003Cp\u003E上面发现我们仅仅是更新了\u003Ccode\u003Enumber\u003C\/code\u003E的值，传递给子组件的对象值并没有变化，但是每次子组件都重新更新了，虽然我们在子组件上用了\u003Ccode\u003EReact.memo\u003C\/code\u003E包装还是不行，这是因为在父组件中每次重新渲染，对于对象来说会是重新一个新的对象了。因此子组件要重新更新，\u003C\/p\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E2、使用\u003Ccode\u003EuseMemo\u003C\/code\u003E对属性的包装\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E userInfo \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EuseMemo\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    age\u003Cspan class=\u0022token punctuation\u0022\u003E:\u003C\/span\u003E count\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E\n    name\u003Cspan class=\u0022token punctuation\u0022\u003E:\u003C\/span\u003E \u003Cspan class=\u0022token string\u0022\u003E\u0027hello\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E[\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E]\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003Cp\u003E使用\u003Ccode\u003EuseMemo\u003C\/code\u003E包装后的对象，重新返回一个具有缓存效果的新对象，第二个参数表示依赖性，或者叫观察对象，当被观察的没变化，返回的就是缓存对象，如果被观察的变化了，那么就会返回新的，现在不管你怎么更新\u003Ccode\u003Enumber\u003C\/code\u003E的值，子组件都不会重新更新了\u003C\/p\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E3、注意点:\u003Ccode\u003EuseMemo\u003C\/code\u003E要配合\u003Ccode\u003EReact.memo\u003C\/code\u003E来使用，不然传递到子组件也是不生效的\u003C\/p\u003E \u003C\/li\u003E\n\u003C\/ul\u003E\u003Ch2\u003E\n\u003Ca\u003E\u003C\/a\u003E六、\u003Ccode\u003EuseCallback\u003C\/code\u003E的使用\u003C\/h2\u003E \n\u003Cp\u003E前面介绍了，\u003Ccode\u003EuseCallback\u003C\/code\u003E是对一个方法的包装，返回一个具有缓存的方法，常见的使用场景是，父组件要传递一个方法给子组件\u003C\/p\u003E \n\u003Cul\u003E\u003Cli\u003E \u003Cp\u003E1、在不使用\u003Ccode\u003EuseCallback\u003C\/code\u003E的时候\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token function-variable function\u0022\u003EChild\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Eprops\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027渲染了子组件\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E onClick \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E props\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ebutton onClick\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003EonClick\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E点击按钮获取值\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ebutton\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\n\u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E ChildMemo \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E React\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Ememo\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003EChild\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n\n\u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token function-variable function\u0022\u003EParent\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E[\u003C\/span\u003Etext\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E updateText\u003Cspan class=\u0022token punctuation\u0022\u003E]\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EuseState\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E textRef \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EuseRef\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Etext\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token function-variable function\u0022\u003EhandleSubmit\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027当前的值\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E text\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      我是父组件\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Einput type\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0022text\u0022\u003C\/span\u003E value\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003Etext\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E onChange\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Ee\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EupdateText\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Ee\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Etarget\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Evalue\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EChildMemo onClick\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003EhandleSubmit\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003Cp\u003E结果是每次输入框输入值的时候，子组件就会重新渲染一次，其实子组件中仅仅是一个按钮，要获取最终输入的值，每次父组件输入值的时候，子组件就更新，很耗性能的\u003C\/p\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E2、使用\u003Ccode\u003EuseCallback\u003C\/code\u003E来包装一个方法\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token function-variable function\u0022\u003EParent\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E[\u003C\/span\u003Etext\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E updateText\u003Cspan class=\u0022token punctuation\u0022\u003E]\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EuseState\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E textRef \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EuseRef\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n\n  \u003Cspan class=\u0022token comment\u0022\u003E\/\/ useCallback又依赖了textRef的变化，因此可以获取到最新的数据\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E handleSubmit \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EuseCallback\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027当前输入框的值:\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E textRef\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Ecurrent\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E[\u003C\/span\u003EtextRef\u003Cspan class=\u0022token punctuation\u0022\u003E]\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\n  \u003Cspan class=\u0022token comment\u0022\u003E\/\/ 当text的值变化的时候就会给textRef的current重新赋值\u003C\/span\u003E\n  \u003Cspan class=\u0022token function\u0022\u003EuseEffect\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    textRef\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Ecurrent \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E text\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E[\u003C\/span\u003Etext\u003Cspan class=\u0022token punctuation\u0022\u003E]\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      我是父组件\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Einput type\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0022text\u0022\u003C\/span\u003E value\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003Etext\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E onChange\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Ee\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EupdateText\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Ee\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Etarget\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Evalue\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EChildMemo onClick\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003EhandleSubmit\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003C\/li\u003E\n\u003C\/ul\u003E\u003C\/div\u003E\n                ");
        var num=0
        htmlData= htmlData.replace(reg,function(val){
                var userData=' id="h'+Number(num++)+'" '
                val=val=val.replace(/”/,'"').replace(/“/,'"')
                if(/<(h[1-4]) [^>]{0,}id=[^>]+>/.test(val)){
                    var text=val.match(/\sid=(["\']).*?\1/)[0]
                    val=val.replace(text,userData)  
                }else{
                    var text = val.match(/<(h[1-4])/)[0]
                    val = val.replace(/<(h[1-4])/,text+' '+userData)
                }
                return val
        })
        $('#markdownContent').html(htmlData)
        // $('#markdownContent').html(CtoEditor.ctoEditor.mixins[0].data().markdownIt.render("\u003Cdiv class=\u0022markdown_views prism-atom-one-dark\u0022\u003E\n                    \u003Ch2\u003E\n\u003Ca\u003E\u003C\/a\u003E一、业务场景\u003C\/h2\u003E \n\u003Cblockquote\u003E \n \u003Cp\u003E\u003Ccode\u003EReact\u003C\/code\u003E是一个用于构建用户界面的\u003Ccode\u003Ejavascript\u003C\/code\u003E的库，主要负责将数据转换为视图，保证数据和视图的统一，\u003Ccode\u003Ereact\u003C\/code\u003E在每次数据更新的时候都会重新\u003Ccode\u003Erender\u003C\/code\u003E来保证数据和视图的统一，但是当父组件\u003Cstrong\u003E内部数据\u003C\/strong\u003E的变化，在父组件下挂载的所有子组件也会重新渲染，因为\u003Ccode\u003Ereact\u003C\/code\u003E默认会全部渲染所有的组件，包括子组件的子组件，这就造成不必要的浪费。\u003C\/p\u003E \n\u003C\/blockquote\u003E \n\u003Cul\u003E\u003Cli\u003E \u003Cp\u003E1、使用类定义一个父组件\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Eexport\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Edefault\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Eclass\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EParent\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Eextends\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EReact\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003EComponent\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  state \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    count\u003Cspan class=\u0022token punctuation\u0022\u003E:\u003C\/span\u003E \u003Cspan class=\u0022token number\u0022\u003E0\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n  \u003Cspan class=\u0022token function\u0022\u003Erender\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n        我是父组件\n        \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ebutton onClick\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Ethis\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003EsetState\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E:\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Ethis\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Estate\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Ecount\u003Cspan class=\u0022token operator\u0022\u003E++\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E点击按钮\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ebutton\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n        \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EChild \u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n    \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E2、定义一个子组件\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Eclass\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EChild\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Eextends\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EReact\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003EComponent\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token function\u0022\u003Erender\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027我是子组件\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n    \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n        我是子组件\n        \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EGrandson \u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n    \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E3、定义一个孙子组件\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Eclass\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EGrandson\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Eextends\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EReact\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003EComponent\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token function\u0022\u003Erender\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027孙子组件\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n    \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E孙子组件\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E4、上面几个组件是比较标准的\u003Ccode\u003Ereact\u003C\/code\u003E的类组件,函数组件也是类似的，当你在父组件中点击按钮，其实你仅仅是想改变父组件内的\u003Ccode\u003Ecount\u003C\/code\u003E的值，但是你会发现每次点击的时候子组件和孙组件也会重新渲染，因为\u003Ccode\u003Ereact\u003C\/code\u003E并不知道是不是要渲染子组件，需要我们自己去判断。\u003C\/p\u003E \u003C\/li\u003E\n\u003C\/ul\u003E\u003Ch2\u003E\n\u003Ca\u003E\u003C\/a\u003E一、类组件中使用\u003Ccode\u003EshouldComponentUpdate\u003C\/code\u003E生命周期钩子函数\u003C\/h2\u003E \n\u003Cul\u003E\u003Cli\u003E \u003Cp\u003E1、在子组件中使用\u003Ccode\u003EshouldComponentUpdate\u003C\/code\u003E来判断是否要更新，\u003C\/p\u003E \n  \u003Cblockquote\u003E \n   \u003Cp\u003E其实就是根据\u003Ccode\u003Ethis.props\u003C\/code\u003E和函数参数中的\u003Ccode\u003EnextProps\u003C\/code\u003E中的参数来对比，如果返回\u003Ccode\u003Efalse\u003C\/code\u003E就不更新，如果返回\u003Ccode\u003Eture\u003C\/code\u003E就表示需要更新当前组件\u003C\/p\u003E \n  \u003C\/blockquote\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Eclass\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EChild\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Eextends\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EReact\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003EComponent\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token function\u0022\u003EshouldComponentUpdate\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003EnextProps\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E nextState\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003EnextProps\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Ethis\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Eprops\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n    \u003Cspan class=\u0022token keyword\u0022\u003Eif\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003EnextProps\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Ecount \u003Cspan class=\u0022token operator\u0022\u003E===\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Ethis\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Eprops\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n      \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token boolean\u0022\u003Efalse\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n    \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Eelse\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n      \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token boolean\u0022\u003Etrue\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n    \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n  \u003Cspan class=\u0022token operator\u0022\u003E...\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003Cp\u003E**注意点:**这里的\u003Ccode\u003Ecount\u003C\/code\u003E是要父组件给当前组件传递的参数(就是你要监听变化的的来更新当前组件),如果你写一个\u003Ccode\u003EnextProps.name === this.props.name\u003C\/code\u003E其实，父组件并没有给当前组件传递\u003Ccode\u003Ename\u003C\/code\u003E那么下面都是返回\u003Ccode\u003Efalse\u003C\/code\u003E组件不更新\u003C\/p\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E2、当子组件没更新，那么孙组件同样的不更新数据\u003C\/p\u003E \u003C\/li\u003E\n\u003C\/ul\u003E\u003Ch2\u003E\n\u003Ca\u003E\u003C\/a\u003E二、使用\u003Ccode\u003EPureComponet\u003C\/code\u003E语法糖\u003C\/h2\u003E \n\u003Cblockquote\u003E \n \u003Cp\u003E其实\u003Ccode\u003EPureComponet\u003C\/code\u003E就是一个语法糖，只是官方在底层帮你实现了\u003Ccode\u003EshouldComponentUpdate\u003C\/code\u003E方法而已，使用的时候只需要子类继承这个类就可以\u003C\/p\u003E \n\u003C\/blockquote\u003E \n\u003Cul\u003E\u003Cli\u003E \u003Cp\u003E1、子组件中继承\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Eclass\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EChild\u003C\/span\u003E \u003Cspan class=\u0022token keyword\u0022\u003Eextends\u003C\/span\u003E \u003Cspan class=\u0022token class-name\u0022\u003EReact\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003EPureComponent\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token function\u0022\u003Erender\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027我是子组件\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n    \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n        我是子组件\n        \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EGrandson \u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n    \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E2、在父组件中使用\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-typescript\u0022\u003E\u003Cspan class=\u0022token comment\u0022\u003E\/\/ 下面这种情况不会重新渲染子组件\u003C\/span\u003E\n\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EChild\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n\u003Cspan class=\u0022token comment\u0022\u003E\/\/ 下面这种情况下会重新渲染子组件\u003C\/span\u003E\n\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EChild count\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\u003Cspan class=\u0022token keyword\u0022\u003Ethis\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Estate\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003C\/li\u003E\n\u003C\/ul\u003E\u003Ch2\u003E\n\u003Ca\u003E\u003C\/a\u003E三、\u003Ccode\u003Ememo\u003C\/code\u003E的使用\u003C\/h2\u003E \n\u003Cblockquote\u003E \n \u003Cp\u003E当你子组件是类组件的时候可以使用\u003Ccode\u003EshouldComponentUpdate\u003C\/code\u003E钩子函数或类组件继承\u003Ccode\u003EPureComponent\u003C\/code\u003E来实现不渲染子组件，但是对于函数组件来说是不能用这两个方法的，因此\u003Ccode\u003Ereact\u003C\/code\u003E官方给函数组件提供了\u003Ccode\u003Ememo\u003C\/code\u003E来对函数组件包装下，实现不必要的渲染。\u003C\/p\u003E \n\u003C\/blockquote\u003E \n\u003Cul\u003E\u003Cli\u003E \u003Cp\u003E1、组件定义(这里也可以使用类组件)\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Efunction\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EChild\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027我是子组件\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      子组件\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\n\u003Cspan class=\u0022token keyword\u0022\u003Efunction\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EParent\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E[\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E setCount\u003Cspan class=\u0022token punctuation\u0022\u003E]\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EuseState\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token number\u0022\u003E0\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      我是父组件\u003Cspan class=\u0022token operator\u0022\u003E-\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ebutton onClick\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003EsetCount\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Ecount \u003Cspan class=\u0022token operator\u0022\u003E+\u003C\/span\u003E \u003Cspan class=\u0022token number\u0022\u003E1\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E点击按钮\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ebutton\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EChild \u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E2、这里我们父组件内部改变\u003Ccode\u003Ecount\u003C\/code\u003E并没有传递给子组件，但是子组件一样的重新渲染了，这并不是我们希望看到的，因为需要对子组件包装下\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Efunction\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EChild\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027我是子组件\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      子组件\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\n\u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E ChildMemo \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E React\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Ememo\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003EChild\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n\u003Cspan class=\u0022token keyword\u0022\u003Efunction\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EParent\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E[\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E setCount\u003Cspan class=\u0022token punctuation\u0022\u003E]\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EuseState\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token number\u0022\u003E0\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      我是父组件\u003Cspan class=\u0022token operator\u0022\u003E-\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ebutton onClick\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003EsetCount\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Ecount \u003Cspan class=\u0022token operator\u0022\u003E+\u003C\/span\u003E \u003Cspan class=\u0022token number\u0022\u003E1\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E点击按钮\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ebutton\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\u003Cspan class=\u0022token comment\u0022\u003E\/* 这种情况下不会渲染子组件 *\/\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EChildMemo \u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\u003Cspan class=\u0022token comment\u0022\u003E\/* 这种情况下会渲染子组件 *\/\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EChildMemo count\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003C\/li\u003E\n\u003C\/ul\u003E\u003Ch2\u003E\n\u003Ca\u003E\u003C\/a\u003E四、\u003Ccode\u003EuseMemo\u003C\/code\u003E和\u003Ccode\u003EuseCallback\u003C\/code\u003E的认识\u003C\/h2\u003E \n\u003Cul\u003E\u003Cli\u003E \u003Cp\u003E1、\u003Ccode\u003EuseMemo\u003C\/code\u003E和\u003Ccode\u003EuseCallback\u003C\/code\u003E都是具有缓存作用的，只是他们缓存对象不一样，一个是属性，一个是缓存函数，特点都是，当缓存依赖的没变，去获取还是获取曾经的缓存\u003C\/p\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E2、\u003Ccode\u003EuseMemo\u003C\/code\u003E是对函数组件中的属性包装，返回一个具有缓存效果的新的属性，当依赖的属性没变化的时候，这个返回新属性就会从缓存中获取之前的。\u003C\/p\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E3、\u003Ccode\u003EuseCallback\u003C\/code\u003E是对函数组件中的方法缓存，返回一个被缓存的方法\u003C\/p\u003E \u003C\/li\u003E\n\u003C\/ul\u003E\u003Ch2\u003E\n\u003Ca\u003E\u003C\/a\u003E五、\u003Ccode\u003EuseMemo\u003C\/code\u003E的使用(我们依赖借用子组件更新的来做)\u003C\/h2\u003E \n\u003Cul\u003E\u003Cli\u003E \u003Cp\u003E1、根据上面的方式我们在父组件更新数据，观察子组件变化\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token function-variable function\u0022\u003EChild\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Eprops\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027重新渲染子组件\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E props\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E子组件\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E ChildMemo \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E React\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Ememo\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003EChild\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n\n\u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token function-variable function\u0022\u003EParent\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E[\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E setCount\u003Cspan class=\u0022token punctuation\u0022\u003E]\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EuseState\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token number\u0022\u003E0\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E[\u003C\/span\u003Enumber\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E setNumber\u003Cspan class=\u0022token punctuation\u0022\u003E]\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003EuseState\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token number\u0022\u003E0\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E userInfo \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    age\u003Cspan class=\u0022token punctuation\u0022\u003E:\u003C\/span\u003E count\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E\n    name\u003Cspan class=\u0022token punctuation\u0022\u003E:\u003C\/span\u003E \u003Cspan class=\u0022token string\u0022\u003E\u0027hello\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token function-variable function\u0022\u003EbtnHandler\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    \u003Cspan class=\u0022token function\u0022\u003EsetNumber\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Enumber\u003Cspan class=\u0022token operator\u0022\u003E+\u003C\/span\u003E\u003Cspan class=\u0022token number\u0022\u003E1\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003Enumber\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E-\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ebutton onClick\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003EbtnHandler\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E按钮\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ebutton\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EChildMemo userInfo\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003EuserInfo\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003Cp\u003E上面发现我们仅仅是更新了\u003Ccode\u003Enumber\u003C\/code\u003E的值，传递给子组件的对象值并没有变化，但是每次子组件都重新更新了，虽然我们在子组件上用了\u003Ccode\u003EReact.memo\u003C\/code\u003E包装还是不行，这是因为在父组件中每次重新渲染，对于对象来说会是重新一个新的对象了。因此子组件要重新更新，\u003C\/p\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E2、使用\u003Ccode\u003EuseMemo\u003C\/code\u003E对属性的包装\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E userInfo \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EuseMemo\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    age\u003Cspan class=\u0022token punctuation\u0022\u003E:\u003C\/span\u003E count\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E\n    name\u003Cspan class=\u0022token punctuation\u0022\u003E:\u003C\/span\u003E \u003Cspan class=\u0022token string\u0022\u003E\u0027hello\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E[\u003C\/span\u003Ecount\u003Cspan class=\u0022token punctuation\u0022\u003E]\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003Cp\u003E使用\u003Ccode\u003EuseMemo\u003C\/code\u003E包装后的对象，重新返回一个具有缓存效果的新对象，第二个参数表示依赖性，或者叫观察对象，当被观察的没变化，返回的就是缓存对象，如果被观察的变化了，那么就会返回新的，现在不管你怎么更新\u003Ccode\u003Enumber\u003C\/code\u003E的值，子组件都不会重新更新了\u003C\/p\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E3、注意点:\u003Ccode\u003EuseMemo\u003C\/code\u003E要配合\u003Ccode\u003EReact.memo\u003C\/code\u003E来使用，不然传递到子组件也是不生效的\u003C\/p\u003E \u003C\/li\u003E\n\u003C\/ul\u003E\u003Ch2\u003E\n\u003Ca\u003E\u003C\/a\u003E六、\u003Ccode\u003EuseCallback\u003C\/code\u003E的使用\u003C\/h2\u003E \n\u003Cp\u003E前面介绍了，\u003Ccode\u003EuseCallback\u003C\/code\u003E是对一个方法的包装，返回一个具有缓存的方法，常见的使用场景是，父组件要传递一个方法给子组件\u003C\/p\u003E \n\u003Cul\u003E\u003Cli\u003E \u003Cp\u003E1、在不使用\u003Ccode\u003EuseCallback\u003C\/code\u003E的时候\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token function-variable function\u0022\u003EChild\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Eprops\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027渲染了子组件\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E onClick \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E props\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ebutton onClick\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003EonClick\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E点击按钮获取值\u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ebutton\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\n\u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E ChildMemo \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E React\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Ememo\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003EChild\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n\n\u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token function-variable function\u0022\u003EParent\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E[\u003C\/span\u003Etext\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E updateText\u003Cspan class=\u0022token punctuation\u0022\u003E]\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EuseState\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E textRef \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EuseRef\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Etext\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token function-variable function\u0022\u003EhandleSubmit\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027当前的值\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E text\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      我是父组件\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Einput type\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0022text\u0022\u003C\/span\u003E value\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003Etext\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E onChange\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Ee\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EupdateText\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Ee\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Etarget\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Evalue\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EChildMemo onClick\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003EhandleSubmit\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003Cp\u003E结果是每次输入框输入值的时候，子组件就会重新渲染一次，其实子组件中仅仅是一个按钮，要获取最终输入的值，每次父组件输入值的时候，子组件就更新，很耗性能的\u003C\/p\u003E \u003C\/li\u003E\n\u003Cli\u003E \u003Cp\u003E2、使用\u003Ccode\u003EuseCallback\u003C\/code\u003E来包装一个方法\u003C\/p\u003E \u003Cpre\u003E\u003Ccode class=\u0022prism language-javascript\u0022\u003E\u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token function-variable function\u0022\u003EParent\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E[\u003C\/span\u003Etext\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E updateText\u003Cspan class=\u0022token punctuation\u0022\u003E]\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EuseState\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E textRef \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EuseRef\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n\n  \u003Cspan class=\u0022token comment\u0022\u003E\/\/ useCallback又依赖了textRef的变化，因此可以获取到最新的数据\u003C\/span\u003E\n  \u003Cspan class=\u0022token keyword\u0022\u003Econst\u003C\/span\u003E handleSubmit \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EuseCallback\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    console\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003E\u003Cspan class=\u0022token function\u0022\u003Elog\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0027当前输入框的值:\u0027\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E textRef\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Ecurrent\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E[\u003C\/span\u003EtextRef\u003Cspan class=\u0022token punctuation\u0022\u003E]\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\n  \u003Cspan class=\u0022token comment\u0022\u003E\/\/ 当text的值变化的时候就会给textRef的current重新赋值\u003C\/span\u003E\n  \u003Cspan class=\u0022token function\u0022\u003EuseEffect\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\n    textRef\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Ecurrent \u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E text\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E,\u003C\/span\u003E \u003Cspan class=\u0022token punctuation\u0022\u003E[\u003C\/span\u003Etext\u003Cspan class=\u0022token punctuation\u0022\u003E]\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E;\u003C\/span\u003E\n  \n  \u003Cspan class=\u0022token keyword\u0022\u003Ereturn\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      我是父组件\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003Einput type\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token string\u0022\u003E\u0022text\u0022\u003C\/span\u003E value\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003Etext\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E onChange\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Ee\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E \u003Cspan class=\u0022token operator\u0022\u003E=\u0026gt;\u003C\/span\u003E \u003Cspan class=\u0022token function\u0022\u003EupdateText\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E(\u003C\/span\u003Ee\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Etarget\u003Cspan class=\u0022token punctuation\u0022\u003E.\u003C\/span\u003Evalue\u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n      \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003EChildMemo onClick\u003Cspan class=\u0022token operator\u0022\u003E=\u003C\/span\u003E\u003Cspan class=\u0022token punctuation\u0022\u003E{\u003C\/span\u003EhandleSubmit\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n    \u003Cspan class=\u0022token operator\u0022\u003E\u0026lt;\u003C\/span\u003E\u003Cspan class=\u0022token operator\u0022\u003E\/\u003C\/span\u003Ediv\u003Cspan class=\u0022token operator\u0022\u003E\u0026gt;\u003C\/span\u003E\n  \u003Cspan class=\u0022token punctuation\u0022\u003E)\u003C\/span\u003E\n\u003Cspan class=\u0022token punctuation\u0022\u003E}\u003C\/span\u003E\n\u003C\/code\u003E\u003C\/pre\u003E \u003C\/li\u003E\n\u003C\/ul\u003E\u003C\/div\u003E\n                "))
        var bucketObj = CtoEditor.analysisChart
        bucketObj.searchChartDom()
    }
</script>
<!-- <script id="MathJax-script" async src="https://cdn.bootcss.com/mathjax/3.0.5/es5/tex-mml-chtml.js"></script> -->
      
    

<article class="common-section common-spacing mb30 comment-box" id="comment">
    <div class="comment-textarea clearfix">
        <div class="avatar">
            <a href="https://blog.51cto.com/" class="header-img" target="_blank">
                <img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/noavatar_middle.gif">
            </a>
        </div>
        <div class="textarea-box">
            <div class="textarea-show clearfix">
                <span>提问和评论都可以，用心的回复会被更多人看到</span>
                <strong>评论</strong>
            </div>
            <div class="textarea-hide">
                <div class="top">
                    <textarea class="textareadiv textareadiv-publish" name="" id="textareadiv-publish" placeholder="提问和评论都可以，用心的回复会被更多人看到和认可" maxlength="500"></textarea>
                </div>
                <div class="bot clearfix">
                    <strong class="fr publish-btn" flag="1" id="publish-btn">发布评论</strong>
                </div>
            </div>
        </div>
    </div>
    <div class="comment-num" style="display:none;">
        <strong>全部评论</strong>
        <span>(<b id="CommentNum"></b>)</span>
        <span class="fr sort" type="up_num" order="0"><i class="iconblog blogzuire"></i>最热</span>
        <span class="fr sort on" type="create_time" order="0"><i class="iconblog blogzuixinblogzuixin"></i>最新</span>
    </div>
    <div class="comment-List-box"></div>   
    <script id="commentListScript" type="text/html">
        {{each list value index}}
        <div class="floor-1">       
            <div class="comment-List clearfix" id="{{value.id}}">
                <div class="avatar">
                    <a href="{{value.location_url}}"><img src="{{value.avatar}}" alt=""></a>
                    {{if value.is_vip == 1}}
                    <i class="vip-icon vip-icon-4" title="51CTO VIP会员"></i>
                    {{/if}}
                </div>
                <div class="comment-detail">
                    <h3 class="clearfix">
                        <a href="{{value.location_url}}" class="fl">{{value.nickname}}</a>
                        {{if value.is_author == 1}}
                        <span class="tag fl">博主</span>
                        {{/if}}
                        <span class="time fr">{{value.create_time}}</span></h3>
                    <div class="content">{{value.content}}</div>
                    <div class="action clearfix">
                        {{if value.is_reply == 1}}
                        <span class="reply"><i class="iconblog blogpinglun2"></i>回复</span>
                        {{/if}}
                        <span class="vote {{value.is_praise ==1 ? 'on' : ''}}"><i class="iconblog blogzan2"></i>点赞<b num="{{value.up_num}}">{{value.up_num>0 ? value.up_num : ''}}</b></span>
                        {{if value.is_delete == 1}}
                        <span class="delete"><i class="iconblog blogshan"></i>删除</span>
                        {{/if}}
                    </div>
                </div>
                <input type="hidden"  class="first_pid" value="{{value.id}}">
                <input type="hidden"  class="parent_id" value="{{value.id}}">
                <input type="hidden"  class="reply_uid" value="{{value.user_id}}">
            </div>
            <div class="floor-2">
                {{if value.children.total > 0}}
                    {{each value.children.list item key}}               
                    <div class="comment-List clearfix" id="{{item.id}}" {{if key>3}}style="display:none;"{{/if}}>
                        <div class="avatar">
                            <a href=""><img src="{{item.avatar}}" alt=""></a>
                            {{if item.is_vip == 1}}
                            <i class="vip-icon vip-icon-4" title="51CTO VIP会员"></i>
                            {{/if}}
                        </div>
                        <div class="comment-detail">
                            <h3 class="clearfix">
                                <a href="" class="fl">{{item.nickname}}</a>
                                {{if item.is_author == 1}}
                                <span class="tag fl">博主</span>
                                {{/if}}
                                <i class="fl">回复了</i>
                                <b class="other fl">{{item.reply_nickname}}</b>
                                
                                <span class="time fr">{{item.create_time}}</span>
                            </h3>                                                
                            {{if item.is_reply_content>0}}
                            <div class="reply-content">{{item.reply_content}}</div>
                            {{/if}}
                            <div class="content">{{item.content}}</div>
                            <div class="action clearfix">
                                {{if item.is_reply == 1}}
                                <span class="reply"><i class="iconblog blogpinglun2"></i>回复</span>
                                {{/if}}
                                <span class="vote {{item.is_praise ==1 ? 'on' : ''}}"><i class="iconblog blogzan2"></i>点赞<b num="{{item.up_num}}">{{item.up_num>0 ? item.up_num : ''}}</b></span>
                                {{if item.is_delete == 1}}
                                <span class="delete"><i class="iconblog blogshan"></i>删除</span>
                                {{/if}}
                            </div>
                        </div>
                        <input type="hidden"  class="first_pid" value="{{item.first_pid}}">
                        <input type="hidden"  class="parent_id" value="{{item.id}}">
                        <input type="hidden"  class="reply_uid" value="{{item.user_id}}">
                    </div>
                    {{if key == 3}}
                    <div class="more-toggle">查看更多回复<i class="iconblog blogchuangzuolanhufan"></i></div>
                    {{/if}}
                    {{/each}}
                {{/if}}
            </div>
        </div>
        {{/each}} 
        {{if total>0}} 
        {{@pagination}} 
        {{/if}}          
    </script>
</article>
<script>
    var cid = '0';
    var fid = '0';
    var page = '1';
</script>
      
    
    <section class="common-section common-spacing mb30">
        <div class="clearfix common-sub-title">
            <h2>相关文章</h2>
        </div>
        <ul class="recommend-about">
                            <li>
                    <div class="about-aticle-list">
                        <a href="https://blog.51cto.com/u_15127671/4224544?b=totalstatistic" data-report-query="xiangguantuijian&amp;01" target="_blank">
                                                        <h3>React Hook中的性能优化：memo、useCallback、useMemo</h3>
                            <p> 一、起因：在React中子组件默认随父组件更新而更新。&nbsp;二、memo：使用React.memo高阶组件包裹子组件，当props不变时该子组件不会重新渲染。import { memo } from "react";function Child() {   return &lt;di...</p>
                        </a>
                        <!-- 标签页 -->
                                                    <div class="tag-box">
                                                                    <span class="tag-item">
                                         回调函数                                    </span>
                                                                    <span class="tag-item">
                                         数组                                    </span>
                                                                    <span class="tag-item">
                                         css                                    </span>
                                                                    <span class="tag-item">
                                         函数返回值                                    </span>
                                                                    <span class="tag-item">
                                         技术                                    </span>
                                                            </div>
                                                                    </div>

                </li>
                            <li>
                    <div class="about-aticle-list">
                        <a href="https://blog.51cto.com/u_15127649/4403112?b=totalstatistic" data-report-query="xiangguantuijian&amp;02" target="_blank">
                                                        <h3>react中 useMemo与useCallback使用</h3>
                            <p> 记录学习的文章，参考&nbsp;回顾在介绍一下这两个hooks的作用之前，我们先来回顾一下react中的性能优化。在hooks诞生之前，如果组件包含内部state，我们都是基于class的形式来创建组件。当时我们也知道，react中，性能的...</p>
                        </a>
                        <!-- 标签页 -->
                                                    <div class="tag-box">
                                                                    <span class="tag-item">
                                         缓存                                    </span>
                                                                    <span class="tag-item">
                                         github                                    </span>
                                                                    <span class="tag-item">
                                         i++                                    </span>
                                                                    <span class="tag-item">
                                         性能优化                                    </span>
                                                                    <span class="tag-item">
                                         值传递                                    </span>
                                                            </div>
                                                                    </div>

                </li>
                            <li>
                    <div class="about-aticle-list">
                        <a href="https://blog.51cto.com/u_15127582/3626548?b=totalstatistic" data-report-query="xiangguantuijian&amp;03" target="_blank">
                                                            <div class="pic">
                                    <img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/fafe0db496de62ba3ad0e994c3b34ece.png" alt="">
                                    <!-- 此处是什么意思？ -->
                                                                    </div>
                                                        <h3>介绍React.memo, useMemo 和 useCallback</h3>
                            <p> 什么是 React.memo ？React.memo&nbsp;和&nbsp;React.PureComponent&nbsp;类似，&nbsp;React.PureComponent&nbsp;在类组件中使用，而React.memo&nbsp;在函数组件中使用看下面两个例子，有两个计数器组件，两个计数器的数据都来源于父组件...</p>
                        </a>
                        <!-- 标签页 -->
                                                    <div class="tag-box">
                                                                    <span class="tag-item">
                                         ide                                    </span>
                                                                    <span class="tag-item">
                                         数据                                    </span>
                                                                    <span class="tag-item">
                                         子树                                    </span>
                                                                    <span class="tag-item">
                                         使用场景                                    </span>
                                                                    <span class="tag-item">
                                         数组                                    </span>
                                                            </div>
                                                                    </div>

                </li>
                            <li>
                    <div class="about-aticle-list">
                        <a href="https://blog.51cto.com/u_15127504/4661108?b=totalstatistic" data-report-query="xiangguantuijian&amp;04" target="_blank">
                                                            <div class="pic">
                                    <img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/2d0ca3e9ef14af88b0902ff6cb444cf5.png" alt="">
                                    <!-- 此处是什么意思？ -->
                                                                    </div>
                                                        <h3>React Hooks &amp; useCallback &amp; useMemo</h3>
                            <p> React Hooks &amp; useCallback &amp; useMemoReact Hooks, useCallback, useMemo, React, js,React Hooks &amp; useCallback &amp; useMemo​bug  const [unmount, setUnmount] = useState(false);  const w...</p>
                        </a>
                        <!-- 标签页 -->
                                                    <div class="tag-box">
                                                                    <span class="tag-item">
                                         React Hooks                                    </span>
                                                                    <span class="tag-item">
                                         React                                    </span>
                                                                    <span class="tag-item">
                                         js                                    </span>
                                                                    <span class="tag-item">
                                         useMemo                                    </span>
                                                                    <span class="tag-item">
                                         useCallback                                    </span>
                                                            </div>
                                                                    </div>

                </li>
                            <li>
                    <div class="about-aticle-list">
                        <a href="https://blog.51cto.com/u_15127542/4257837?b=totalstatistic" data-report-query="xiangguantuijian&amp;05" target="_blank">
                                                            <div class="pic">
                                    <img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/fcf105d189e1f968f72e2c8c2a519d38.gif" alt="">
                                    <!-- 此处是什么意思？ -->
                                                                    </div>
                                                        <h3>React Hooks之memo useMemo useCallback</h3>
                            <p> 一 memo useMemo与useCallback关系:useCallback和useMemo的参数跟useEffect一致，他们之间最大的区别有是useEffect可用于处理副作用，而前两个hooks不能。useMemo和useCallback都会在组件第一次渲染的时候执行，之后...</p>
                        </a>
                        <!-- 标签页 -->
                                                    <div class="tag-box">
                                                                    <span class="tag-item">
                                         React                                    </span>
                                                                    <span class="tag-item">
                                         缓存                                    </span>
                                                                    <span class="tag-item">
                                         javascript                                    </span>
                                                                    <span class="tag-item">
                                         使用指南                                    </span>
                                                            </div>
                                                                    </div>

                </li>
                            <li>
                    <div class="about-aticle-list">
                        <a href="https://blog.51cto.com/u_15064655/4347316?b=totalstatistic" data-report-query="xiangguantuijian&amp;06" target="_blank">
                                                        <h3>React总结2：useMemo 与 useCallback 得使用，组件优化方案</h3>
                            <p> 前面　　先了解一下在react中的class类组件中的性能优化方面，主要集中于一下两点　　　　1.调用setState时，就会触发组件重新渲染，无论前后state是否改变　　　　2.父组件更新，子组件也会自动更新　　　　解...</p>
                        </a>
                        <!-- 标签页 -->
                                                    <div class="tag-box">
                                                                    <span class="tag-item">
                                         缓存                                    </span>
                                                                    <span class="tag-item">
                                         函数式                                    </span>
                                                                    <span class="tag-item">
                                         数据                                    </span>
                                                                    <span class="tag-item">
                                         i++                                    </span>
                                                                    <span class="tag-item">
                                         性能优化                                    </span>
                                                            </div>
                                                                    </div>

                </li>
                            <li>
                    <div class="about-aticle-list">
                        <a href="https://blog.51cto.com/u_15087086/2598915?b=totalstatistic" data-report-query="xiangguantuijian&amp;07" target="_blank">
                                                            <div class="pic">
                                    <img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/38c33d3e26be71138944c63da90b1246.png" alt="">
                                    <!-- 此处是什么意思？ -->
                                                                    </div>
                                                        <h3>React.memo - React.useCallback - React.useMemo</h3>
                            <p> React 核心开发团队一直都致力于提高 React 渲染速度。React 16 就引入了 React.memo（16.6.0），React.useCallback 与 React.useMemo（React Hooks 特性 16.8.0）都是用于优化 React 组件性能。React.memoReact.me...</p>
                        </a>
                        <!-- 标签页 -->
                                                    <div class="tag-box">
                                                                    <span class="tag-item">
                                         React                                    </span>
                                                            </div>
                                                                    </div>

                </li>
                            <li>
                    <div class="about-aticle-list">
                        <a href="https://blog.51cto.com/u_15069485/4072187?b=totalstatistic" data-report-query="xiangguantuijian&amp;08" target="_blank">
                                                            <div class="pic">
                                    <img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/d293b07ef33821b5625ecdad7fac1a96.png" alt="">
                                    <!-- 此处是什么意思？ -->
                                                                    </div>
                                                        <h3>[React] useCallback + useMemo to avoid re-render</h3>
                            <p> With React hooks it's common to write callback functions in our component body. Event handlers are a common example of this. Most of the time they work great, however, when you're passing those event...</p>
                        </a>
                        <!-- 标签页 -->
                                                    <div class="tag-box">
                                                                    <span class="tag-item">
                                         sed                                    </span>
                                                                    <span class="tag-item">
                                         ide                                    </span>
                                                                    <span class="tag-item">
                                         其他                                    </span>
                                                            </div>
                                                                    </div>

                </li>
                            <li>
                    <div class="about-aticle-list">
                        <a href="https://blog.51cto.com/u_15060462/3594908?b=totalstatistic" data-report-query="xiangguantuijian&amp;09" target="_blank">
                                                        <h3>React函数式组件值之useMemo()和useCallback()</h3>
                            <p> 一、基础用法useMemo可以保证依赖的值未发生改变的时候，不触发值改变。useCallback可以保证依赖的值未发生改变的时候，不触发函数引用的改变。1 //当count变化，sum的值会改变2 const sum = useMemo(() =&gt;...</p>
                        </a>
                        <!-- 标签页 -->
                                                    <div class="tag-box">
                                                                    <span class="tag-item">
                                         缓存                                    </span>
                                                                    <span class="tag-item">
                                         数组                                    </span>
                                                                    <span class="tag-item">
                                         初始化                                    </span>
                                                                    <span class="tag-item">
                                         传递函数                                    </span>
                                                                    <span class="tag-item">
                                         应用场景                                    </span>
                                                            </div>
                                                                    </div>

                </li>
                            <li>
                    <div class="about-aticle-list">
                        <a href="https://blog.51cto.com/u_15127647/4216782?b=totalstatistic" data-report-query="xiangguantuijian&amp;10" target="_blank">
                                                            <div class="pic">
                                    <img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/5deeaed5303f1213a087199a0fba5ee9.jpeg" alt="">
                                    <!-- 此处是什么意思？ -->
                                                                    </div>
                                                        <h3>useCallback和useMemo源码分析</h3>
                            <p> 欢迎关注前端早茶，与广东靓仔携手共同进阶前端早茶专注前端，一起结伴同行，紧跟业界发展步伐~公众号作者：广东靓仔使用感觉useCallback和useMemo两者很像，前者返回一个memorized的回调函数，后者返回一个me...</p>
                        </a>
                        <!-- 标签页 -->
                                                    <div class="tag-box">
                                                                    <span class="tag-item">
                                         回调函数                                    </span>
                                                                    <span class="tag-item">
                                         数组                                    </span>
                                                                    <span class="tag-item">
                                         公众号                                    </span>
                                                                    <span class="tag-item">
                                         源码分析                                    </span>
                                                                    <span class="tag-item">
                                         加载                                    </span>
                                                            </div>
                                                                    </div>

                </li>
                            <li>
                    <div class="about-aticle-list">
                        <a href="https://blog.51cto.com/u_15127582/3626542?b=totalstatistic" data-report-query="xiangguantuijian&amp;11" target="_blank">
                                                        <h3>useCallback优化React Hooks程序性能</h3>
                            <p> useCallback使用场景是：有一个父组件，其中包含子组件，子组件接收一个函数作为props；通常而言，如果父组件更新了，子组件也会执行更新；import React, { useMemo, useCallback } from "react"let Counter = (...</p>
                        </a>
                        <!-- 标签页 -->
                                                    <div class="tag-box">
                                                                    <span class="tag-item">
                                         使用场景                                    </span>
                                                                    <span class="tag-item">
                                         react                                    </span>
                                                            </div>
                                                                    </div>

                </li>
                            <li>
                    <div class="about-aticle-list">
                        <a href="https://blog.51cto.com/xutongbao/3202990?b=totalstatistic" data-report-query="xiangguantuijian&amp;12" target="_blank">
                                                        <h3>使用useMemo优化性能</h3>
                            <p> 使用useMemo优化性能：import React, { Suspense, useMemo } from 'react'import { Switch, Route } from 'react-router-dom'import { connect } from 'react-redux'import Loading from '../../../components/...</p>
                        </a>
                        <!-- 标签页 -->
                                                    <div class="tag-box">
                                                                    <span class="tag-item">
                                         useMemo                                    </span>
                                                            </div>
                                                                    </div>

                </li>
                            <li>
                    <div class="about-aticle-list">
                        <a href="https://blog.51cto.com/nanjke/2845733?b=totalstatistic" data-report-query="xiangguantuijian&amp;13" target="_blank">
                                                        <h3>React useMemo和useCallback都是为了提升性能的hooks（各自应用场景思考）</h3>
                            <p> 一、共同点： 而 useMemo 和 useCallback 可以用来解决函数组件更新过程中的性能问题。 useMemo 和 useCallback 都会在组件第一次渲染的时候执行，之后会在其依赖的变量发生改变是再次执行。...</p>
                        </a>
                        <!-- 标签页 -->
                                                    <div class="tag-box">
                                                                    <span class="tag-item">
                                         React教程                                    </span>
                                                                    <span class="tag-item">
                                         React学习                                    </span>
                                                            </div>
                                                                    </div>

                </li>
                            <li>
                    <div class="about-aticle-list">
                        <a href="https://blog.51cto.com/u_15127611/3541847?b=totalstatistic" data-report-query="xiangguantuijian&amp;14" target="_blank">
                                                        <h3>useMemo优化React Hooks程序性能（九）</h3>
                            <p> useMemo主要用来解决使用React hooks产生的无用渲染的性能问题。使用function的形式来声明组件，失去了shouldCompnentUpdate（在组件更新之前）这个生命周期，也就是说我们没有办法通过组件更新前条件来决定组件是...</p>
                        </a>
                        <!-- 标签页 -->
                                                    <div class="tag-box">
                                                                    <span class="tag-item">
                                         React Hooks                                    </span>
                                                                    <span class="tag-item">
                                         html                                    </span>
                                                                    <span class="tag-item">
                                         业务逻辑                                    </span>
                                                                    <span class="tag-item">
                                         生命周期                                    </span>
                                                            </div>
                                                                    </div>

                </li>
                            <li>
                    <div class="about-aticle-list">
                        <a href="https://blog.51cto.com/u_15069498/3945724?b=totalstatistic" data-report-query="xiangguantuijian&amp;15" target="_blank">
                                                        <h3>React：使用useMemo的问题</h3>
                            <p> const [searchDate, setSearchDate] = useState&lt;any&gt;({})const searchFormList = useMemo&lt;SearchFormItem[]&gt;(    () =&gt; {        return [        {            placeholder: '请选择日期',  ...</p>
                        </a>
                        <!-- 标签页 -->
                                                    <div class="tag-box">
                                                                    <span class="tag-item">
                                         React                                    </span>
                                                                    <span class="tag-item">
                                         缓存                                    </span>
                                                                    <span class="tag-item">
                                         自动更新                                    </span>
                                                                    <span class="tag-item">
                                         IT                                    </span>
                                                            </div>
                                                                    </div>

                </li>
                            <li>
                    <div class="about-aticle-list">
                        <a href="https://blog.51cto.com/u_15069443/4383035?b=totalstatistic" data-report-query="xiangguantuijian&amp;16" target="_blank">
                                                        <h3>结合高阶函数聊聊useMemo和useCallback</h3>
                            <p> Hook 是&nbsp;react&nbsp;16.8 的新增特性。它可以让你在不编写 class 的情况下使用 state 以及其他的&nbsp;react&nbsp;特性。useCallback和useMemo是其中的两个 hooks，本文旨在通过解决一个需求，结合高阶函数，深入理解useCallbac...</p>
                        </a>
                        <!-- 标签页 -->
                                                    <div class="tag-box">
                                                                    <span class="tag-item">
                                         缓存                                    </span>
                                                                    <span class="tag-item">
                                         高阶函数                                    </span>
                                                                    <span class="tag-item">
                                         数组                                    </span>
                                                                    <span class="tag-item">
                                         性能优化                                    </span>
                                                                    <span class="tag-item">
                                         解决方案                                    </span>
                                                            </div>
                                                                    </div>

                </li>
                            <li>
                    <div class="about-aticle-list">
                        <a href="https://blog.51cto.com/u_13162410/4809333?b=totalstatistic" data-report-query="xiangguantuijian&amp;17" target="_blank">
                                                        <h3>学会使用useMemo和useCallback对你没坏处</h3>
                            <p> 什么是useMemo？   useMemo的行为类似Vue中的计算属性，可以检测某个值的变化，根据变化值计算新值。useMemo会缓存计算结果，如果检测值没有发生变化，即使组件重新渲染，也不会重新计算，...</p>
                        </a>
                        <!-- 标签页 -->
                                                    <div class="tag-box">
                                                                    <span class="tag-item">
                                         javascript                                    </span>
                                                                    <span class="tag-item">
                                         react                                    </span>
                                                                    <span class="tag-item">
                                         hooks                                    </span>
                                                                    <span class="tag-item">
                                         缓存                                    </span>
                                                                    <span class="tag-item">
                                         数组                                    </span>
                                                            </div>
                                                                    </div>

                </li>
                            <li>
                    <div class="about-aticle-list">
                        <a href="https://blog.51cto.com/u_15082397/4379680?b=totalstatistic" data-report-query="xiangguantuijian&amp;18" target="_blank">
                                                        <h3>React Hooks的memo和useCallback</h3>
                            <p> import React, { useState } from 'react';const Child = (props) =&gt; {  console.log(props, 'child-props');  return &lt;input type="number" /&gt;;};const Parent = () =&gt; {  const [count, set...</p>
                        </a>
                        <!-- 标签页 -->
                                                    <div class="tag-box">
                                                                    <span class="tag-item">
                                         React                                    </span>
                                                                    <span class="tag-item">
                                         缓存                                    </span>
                                                                    <span class="tag-item">
                                         其他                                    </span>
                                                            </div>
                                                                    </div>

                </li>
                            <li>
                    <div class="about-aticle-list">
                        <a href="https://blog.51cto.com/u_15127631/4169352?b=totalstatistic" data-report-query="" target="_blank">
                                                        <h3>react中useCallback使用</h3>
                            <p> import React ,{useState,useCallback,memo} from 'react'const Child = memo((props) =&gt;{    console.log('child run ...');    return(        &lt;&gt;            &lt;h1&gt;hello&lt;/h1&gt;     ...</p>
                        </a>
                        <!-- 标签页 -->
                                                    <div class="tag-box">
                                                                    <span class="tag-item">
                                         其他                                    </span>
                                                            </div>
                                                                    </div>

                </li>
                    </ul>
    </section>

   
</section>        
<aside class="detail-content-right">
    <!--右上角统计-->
    <section class="common-section common-spacing mb24 user-intr">
    <div class="user-content">
				<div class="top">
					<div class="avatar">
						<div class="avatar-img">
							<a href="https://blog.51cto.com/u_3409716" target="_blank">
								<img class="is-vip-img is-vip-img-4" data-uid="3399716" src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/de51b4f0711b421ed9714fea6e1ec5e8.jpg">
							</a>
						</div>
					</div>
					<div class="clearfix username">
						<a href="https://blog.51cto.com/u_3409716" target="_blank"><span class="blog-user" title="kuangshp" style="max-width: 272px;">kuangshp</span></a>
						<div class="icon">
							<ul class="clearfix detail-list">
                                                                								                                																                                							</ul>
						</div>
					</div>
				</div>
				<div class="bottom" id="userStat">
					<div class="num-name num-top">
						<ul class="first-num">                           
                                <li>
                                    <div class="num"><a href="https://blog.51cto.com/u_3409716/original" target="_blank">419</a></div>
                                    <div class="label-name"><a href="https://blog.51cto.com/u_3409716/original" target="_blank">原创</a></div>
                                </li>
                                <li>
                                    <div class="num">313.8<span>万</span></div>
                                    <div class="label-name">人气</div>
                                </li>
                                <li>
                                    <div class="num"><a href="https://blog.51cto.com/u_3409716/followers" target="_blank">3<span></span></a></div>
                                    <div class="label-name"><a href="https://blog.51cto.com/u_3409716/followers" target="_blank">粉丝</a></div>
                                </li>
                                <li>
                                    <div class="num">0<span></span></div>
                                    <div class="label-name">评论</div>
                                </li>
                            
						</ul>
					</div>
                    <div class="lines"></div>
					<div class="num-name num-bottom">
						<ul>
                            <li>
								<div class="num"><a href="https://blog.51cto.com/u_3409716/translate" target="_blank">0</a></div>
								<div class="label-name"><a href="https://blog.51cto.com/u_3409716/translate" target="_blank">翻译</a></div>
							</li>
							<li>
								<div class="num"><a href="https://blog.51cto.com/u_3409716/reproduce" target="_blank">1</a></div>
								<div class="label-name"><a href="https://blog.51cto.com/u_3409716/reproduce" target="_blank">转载</a></div>
							</li>
							<li>
								<div class="num"><a href="https://blog.51cto.com/u_3409716/following" target="_blank">0</a></div>
								<div class="label-name"><a href="https://blog.51cto.com/u_3409716/following" target="_blank">关注</a></div>
							</li>
							<li>
								<div class="num">3</div>
								<div class="label-name">收藏</div>
							</li>
							<div class="clear"></div>
						</ul>
					</div>
                    </div>
                                <div class="operating clearfix ">
                                                                        <a id="checkFollow2_3399716" class="follow-1 checkFollow on">关注</a>
                                                                <button class="sx" data="https://home.51cto.com/space?uid=3399716" id="ToSx"><a href="javascript:;" rel="nofollow"><i class="iconblog blogsixin"></i>私信</a></button>
                </div>
			</div>
    </section>

    <!-- 其他近期文章 -->
    
    <!-- 近期评论 -->
    
    <!-- 近期文章 -->
    <section class="common-section common-spacing mb24">
        <div class="clearfix common-sub-title">
            <h2 title="近期文章">近期文章</h2>
        </div>
        <ul class="common-list">
                        <li>
                <a href="https://blog.51cto.com/u_3409716/4558860" target="_blank" title="gorm中多表关联的使用">1.gorm中多表关联的使用</a>
            </li>
                        <li>
                <a href="https://blog.51cto.com/u_3409716/4537384" target="_blank" title="使用node获取本地ip及空闲的端口号">2.使用node获取本地ip及空闲的端口号</a>
            </li>
                        <li>
                <a href="https://blog.51cto.com/u_3409716/4398521" target="_blank" title="consul在node中的实现">3.consul在node中的实现</a>
            </li>
                        <li>
                <a href="https://blog.51cto.com/u_3409716/4313614" target="_blank" title="关于go语言中protobuf高级使用">4.关于go语言中protobuf高级使用</a>
            </li>
                        <li>
                <a href="https://blog.51cto.com/u_3409716/4253761" target="_blank" title="关于go项目代码规范">5.关于go项目代码规范</a>
            </li>
                    </ul>
        <div id="Datelist">
            <div class="common-list-lines"></div>
            
            
            <div class="otherYear">
                <div class="clearfix years">
                    
                        <a href="https://blog.51cto.com/u_3409716/article/year2021">2021年   421篇</a>
                    
                </div>
            </div>
            
            </div>
    </section>

    <!-- 热门文章 -->
    
    <!-- 热评好文 -->
    
    <!--七日热门-->
        <section class="common-section common-spacing mb24">
        <div class="clearfix common-sub-title">
            <h2 title="七日热门">七日热门</h2>
        </div>
        <ul class="common-list common-list-dot">
                        <li>
                <a href="https://blog.51cto.com/13137233/3414266" target="_blank" title="前端开发-认识前端开发-0226" class="title">前端开发-认识前端开发-0226</a>
            </li>
                        <li>
                <a href="https://blog.51cto.com/11839738/1914872" target="_blank" title="前端开发" class="title">前端开发</a>
            </li>
                        <li>
                <a href="https://blog.51cto.com/15080022/4364100" target="_blank" title="前端开发" class="title">前端开发</a>
            </li>
                        <li>
                <a href="https://blog.51cto.com/15303890/3128352" target="_blank" title="前端开发" class="title">前端开发</a>
            </li>
                        <li>
                <a href="https://blog.51cto.com/15064631/4383126" target="_blank" title="前端开发" class="title">前端开发</a>
            </li>
                        <li>
                <a href="https://blog.51cto.com/koala87/1627316" target="_blank" title="Bootstrap前端开发" class="title">Bootstrap前端开发</a>
            </li>
                        <li>
                <a href="https://blog.51cto.com/14207158/2352582" target="_blank" title="前端开发基础" class="title">前端开发基础</a>
            </li>
                        <li>
                <a href="https://blog.51cto.com/itcjf/3313010" target="_blank" title="腾讯-前端开发" class="title">腾讯-前端开发</a>
            </li>
                        <li>
                <a href="https://blog.51cto.com/15285978/3597418" target="_blank" title="前端开发课程" class="title">前端开发课程</a>
            </li>
                        <li>
                <a href="https://blog.51cto.com/15473389/4860320" target="_blank" title="Vue前端开发" class="title">Vue前端开发</a>
            </li>
                    </ul>
    </section>
    
    <!-- 分类列表 -->
    
    <!--相关标签-->
        <section class="common-section common-spacing mb24">
        <div class="clearfix common-sub-title">
            <h2 title="相关标签">相关标签</h2>
            <a href="https://blog.51cto.com/topic/all" target="_blank" class="fr more">全部</a>
        </div>
        <div class="label-list">
                            <a href="https://blog.51cto.com/topic/javazhongdexingnengyouhua.html" class="tag-text" target="_blank">java中的性能优化</a>
                            <a href="https://blog.51cto.com/topic/mysqlldexingnengyouhua.html" class="tag-text" target="_blank">mysqll的性能优化</a>
                            <a href="https://blog.51cto.com/topic/mysqldexingnengyouhua.html" class="tag-text" target="_blank">mysql的性能优化</a>
                            <a href="https://blog.51cto.com/topic/react-native-xingnengyouhua.html" class="tag-text" target="_blank">react native 性能优化</a>
                            <a href="https://blog.51cto.com/topic/react-nativxingnengyouhua.html" class="tag-text" target="_blank">react nativ性能优化</a>
                            <a href="https://blog.51cto.com/topic/react-readerdeyouhua.html" class="tag-text" target="_blank">react reader的优化</a>
                            <a href="https://blog.51cto.com/topic/react-redux-xingnengyouhua.html" class="tag-text" target="_blank">react redux 性能优化</a>
                            <a href="https://blog.51cto.com/topic/react-xingnengyouhua.html" class="tag-text" target="_blank">react 性能优化</a>
                            <a href="https://blog.51cto.com/topic/reactqianduanxingnengyouhua.html" class="tag-text" target="_blank">react前端性能优化</a>
                            <a href="https://blog.51cto.com/topic/reactxingnengyouhua-zhihu.html" class="tag-text" target="_blank">react性能优化 知乎</a>
                    </div>
    </section>
    
    <!-- 文章目录 -->
            <section class="common-section common-spacing table-contents common-content-directory fix-table">
            <div class="clearfix common-sub-title">
                <strong title="文章目录">文章目录</strong>
            </div>
            <div class="directory">
                <ul class="directory-list">
                                                                    <li class="lv1">
                            <div class="title" title="
一、业务场景">
                                <span data-id="#h0">
                                                                        
一、业务场景                                </span>
                            </div>
                        </li>
                                                                                            <li class="lv1">
                            <div class="title" title="
一、类组件中使用shouldComponentUpdate生命周期钩子函数">
                                <span data-id="#h1">
                                                                        
一、类组件中使用shouldComponentUpdate生命周期钩子函数                                </span>
                            </div>
                        </li>
                                                                                            <li class="lv1">
                            <div class="title" title="
二、使用PureComponet语法糖">
                                <span data-id="#h2">
                                                                        
二、使用PureComponet语法糖                                </span>
                            </div>
                        </li>
                                                                                            <li class="lv1">
                            <div class="title" title="
三、memo的使用">
                                <span data-id="#h3">
                                                                        
三、memo的使用                                </span>
                            </div>
                        </li>
                                                                                            <li class="lv1">
                            <div class="title" title="
四、useMemo和useCallback的认识">
                                <span data-id="#h4">
                                                                        
四、useMemo和useCallback的认识                                </span>
                            </div>
                        </li>
                                                                                            <li class="lv1">
                            <div class="title" title="
五、useMemo的使用(我们依赖借用子组件更新的来做)">
                                <span data-id="#h5">
                                                                        
五、useMemo的使用(我们依赖借用子组件更新的来做)                                </span>
                            </div>
                        </li>
                                                                                            <li class="lv1">
                            <div class="title" title="
六、useCallback的使用">
                                <span data-id="#h6">
                                                                        
六、useCallback的使用                                </span>
                            </div>
                        </li>
                                                            </ul>
            </div>
            <div class="table-contents">

            </div>
        </section>
    </aside>
    </div>

    <!--返回顶部-->
    <aside class="action-aside action-aside-right">
        <ul>
            <li class="scrollTop" style="display: list-item;">
                <strong class="ScrollWindowTop">
                    <a href="javascript:;"><i class="iconblog blogzhi"></i></a>
                    <span>返回顶部</span>
                </strong>
            </li>
        </ul>
    </aside>
</div>

<div class="imgViewDom disnone" style="display: none;">
    <div class="img-content"></div>
</div>

<div class="zhiCustomBtn" style="display:none;" id="hide-zhiCustomBtn"></div>

    <script src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/shCores.js"></script>

<script>
    var codeArr = $('.editor-preview-side pre code')
    if(codeArr.length > 0) {
        $.each(codeArr, function(index, item) {
            var parent = $(this).parent('pre')
            var classStr = $(this).attr('class') || parent.attr('class')
            if(classStr && classStr.indexOf('language-') != -1) return
            $(this).addClass('language-html') && parent.addClass('language-html')
        })
    }


    $(document).ready(function() {
        addPreNumber()
        //  代码高亮
        mdPrism.highlightAll();
        // 代码添加行号
        // prenumber(['hljs-cto', 'code-toolbar'])
        if(is_old != 0) {
            prenumber(['code-toolbar'])
        }
    })
    var tipStatus = '1'
    if( tipStatus == '1') {
        $('#zanTip').show()
    } else {
        $('#zanTip').hide()
    }
    var totalWidth = $('.detail-list').outerWidth(true)+$('.dbk').outerWidth(true)
    var usernameWidth = $('.username').outerWidth(true)
    var cha = usernameWidth-totalWidth-10+'px'
    $('.blog-user').css('max-width', cha)
    var BLOG_URL = 'https://blog.51cto.com/';
    var praise_url = 'https://blog.51cto.com/praise/praise'
    addReply_url = 'https://blog.51cto.com/addBlogComment'
    removeUrl = 'https://blog.51cto.com/delBlogComment'
    blog_id = '2904210'
    pv_log_info = {
        'pv_type':'blog',
        'user_id':'3399716',
        'blog_id':'2904210'
    };
    is_comment = '0'
    comment_list = 'https://blog.51cto.com/getBlogCommentList'
    index_url = 'https://blog.51cto.com/u_3409716';
    uc_url = 'https://ucenter.51cto.com/'
    blog_url = 'https://blog.51cto.com/'
    img_url = 'https://static1.51cto.com/edu/blog/'
    i_user_id = ''
    c_user_id ='3399716'
    collect_url = 'https://blog.51cto.com/collect/add'
    is_old = '1'
    nicknameurl = 'https://blog.51cto.com/u_3409716'
    nickname = 'kuangshp'
    myself = window.location.href,
    shareimgUrl = 'https://blog.51cto.com/qr/qr-url?url=https%3A%2F%2Fblog.51cto.com%2Fu_3409716%2F2904210';
        function FollowBtnSucc(e){//1:未关注,2:已关注,3:互相关注
        if(e==2||e==3){
            $('#zanTip').hide()
            $.post('/index/wxbind',{uid:userId},function(res){
                if(res.data.wxBind == 0){//没绑定
                    if(getCookie('follow1'))return false;
                    box1()
                }else{
                    if(getCookie('follow2'))return false;
                    box2()
                }
            },'json')
        } else if(e == 1) {
            $('#zanTip').show()
        }
    }
    FollowBtn = new Follow($('#checkFollow1_3399716'),'3399716','1',['on','in','mutual','off']);
    FollowBtn.success=FollowBtnSucc;
    FollowBtn = new Follow($('#checkFollow2_3399716'),'3399716','1',['on','in','mutual','off']);
    FollowBtn.success=FollowBtnSucc;
        if(is_old==1 || is_old==2){
        // SyntaxHighlighter.all();
        insertCodeElement("<div class=\"markdown_views prism-atom-one-dark\">\n                    <h2>\n<a><\/a>\u4e00\u3001\u4e1a\u52a1\u573a\u666f<\/h2> \n<blockquote> \n <p><code>React<\/code>\u662f\u4e00\u4e2a\u7528\u4e8e\u6784\u5efa\u7528\u6237\u754c\u9762\u7684<code>javascript<\/code>\u7684\u5e93\uff0c\u4e3b\u8981\u8d1f\u8d23\u5c06\u6570\u636e\u8f6c\u6362\u4e3a\u89c6\u56fe\uff0c\u4fdd\u8bc1\u6570\u636e\u548c\u89c6\u56fe\u7684\u7edf\u4e00\uff0c<code>react<\/code>\u5728\u6bcf\u6b21\u6570\u636e\u66f4\u65b0\u7684\u65f6\u5019\u90fd\u4f1a\u91cd\u65b0<code>render<\/code>\u6765\u4fdd\u8bc1\u6570\u636e\u548c\u89c6\u56fe\u7684\u7edf\u4e00\uff0c\u4f46\u662f\u5f53\u7236\u7ec4\u4ef6<strong>\u5185\u90e8\u6570\u636e<\/strong>\u7684\u53d8\u5316\uff0c\u5728\u7236\u7ec4\u4ef6\u4e0b\u6302\u8f7d\u7684\u6240\u6709\u5b50\u7ec4\u4ef6\u4e5f\u4f1a\u91cd\u65b0\u6e32\u67d3\uff0c\u56e0\u4e3a<code>react<\/code>\u9ed8\u8ba4\u4f1a\u5168\u90e8\u6e32\u67d3\u6240\u6709\u7684\u7ec4\u4ef6\uff0c\u5305\u62ec\u5b50\u7ec4\u4ef6\u7684\u5b50\u7ec4\u4ef6\uff0c\u8fd9\u5c31\u9020\u6210\u4e0d\u5fc5\u8981\u7684\u6d6a\u8d39\u3002<\/p> \n<\/blockquote> \n<ul><li> <p>1\u3001\u4f7f\u7528\u7c7b\u5b9a\u4e49\u4e00\u4e2a\u7236\u7ec4\u4ef6<\/p> <pre><code class=\"prism language-javascript\"><span class=\"token keyword\">export<\/span> <span class=\"token keyword\">default<\/span> <span class=\"token keyword\">class<\/span> <span class=\"token class-name\">Parent<\/span> <span class=\"token keyword\">extends<\/span> <span class=\"token class-name\">React<span class=\"token punctuation\">.<\/span>Component<\/span> <span class=\"token punctuation\">{<\/span>\n  state <span class=\"token operator\">=<\/span> <span class=\"token punctuation\">{<\/span>\n    count<span class=\"token punctuation\">:<\/span> <span class=\"token number\">0<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token punctuation\">}<\/span>\n  <span class=\"token function\">render<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token punctuation\">{<\/span>\n    <span class=\"token keyword\">return<\/span><span class=\"token punctuation\">(<\/span>\n      <span class=\"token operator\">&lt;<\/span>div<span class=\"token operator\">&gt;<\/span>\n        \u6211\u662f\u7236\u7ec4\u4ef6\n        <span class=\"token operator\">&lt;<\/span>button onClick<span class=\"token operator\">=<\/span><span class=\"token punctuation\">{<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=&gt;<\/span> <span class=\"token keyword\">this<\/span><span class=\"token punctuation\">.<\/span><span class=\"token function\">setState<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">{<\/span>count<span class=\"token punctuation\">:<\/span> <span class=\"token keyword\">this<\/span><span class=\"token punctuation\">.<\/span>state<span class=\"token punctuation\">.<\/span>count<span class=\"token operator\">++<\/span><span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">}<\/span><span class=\"token operator\">&gt;<\/span>\u70b9\u51fb\u6309\u94ae<span class=\"token operator\">&lt;<\/span><span class=\"token operator\">\/<\/span>button<span class=\"token operator\">&gt;<\/span>\n        <span class=\"token operator\">&lt;<\/span>Child <span class=\"token operator\">\/<\/span><span class=\"token operator\">&gt;<\/span>\n      <span class=\"token operator\">&lt;<\/span><span class=\"token operator\">\/<\/span>div<span class=\"token operator\">&gt;<\/span>\n    <span class=\"token punctuation\">)<\/span>\n  <span class=\"token punctuation\">}<\/span>\n<span class=\"token punctuation\">}<\/span>\n<\/code><\/pre> <\/li>\n<li> <p>2\u3001\u5b9a\u4e49\u4e00\u4e2a\u5b50\u7ec4\u4ef6<\/p> <pre><code class=\"prism language-javascript\"><span class=\"token keyword\">class<\/span> <span class=\"token class-name\">Child<\/span> <span class=\"token keyword\">extends<\/span> <span class=\"token class-name\">React<span class=\"token punctuation\">.<\/span>Component<\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token function\">render<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token punctuation\">{<\/span>\n    console<span class=\"token punctuation\">.<\/span><span class=\"token function\">log<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'\u6211\u662f\u5b50\u7ec4\u4ef6'<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n    <span class=\"token keyword\">return<\/span> <span class=\"token punctuation\">(<\/span>\n      <span class=\"token operator\">&lt;<\/span>div<span class=\"token operator\">&gt;<\/span>\n        \u6211\u662f\u5b50\u7ec4\u4ef6\n        <span class=\"token operator\">&lt;<\/span>Grandson <span class=\"token operator\">\/<\/span><span class=\"token operator\">&gt;<\/span>\n      <span class=\"token operator\">&lt;<\/span><span class=\"token operator\">\/<\/span>div<span class=\"token operator\">&gt;<\/span>\n    <span class=\"token punctuation\">)<\/span>\n  <span class=\"token punctuation\">}<\/span>\n<span class=\"token punctuation\">}<\/span>\n<\/code><\/pre> <\/li>\n<li> <p>3\u3001\u5b9a\u4e49\u4e00\u4e2a\u5b59\u5b50\u7ec4\u4ef6<\/p> <pre><code class=\"prism language-javascript\"><span class=\"token keyword\">class<\/span> <span class=\"token class-name\">Grandson<\/span> <span class=\"token keyword\">extends<\/span> <span class=\"token class-name\">React<span class=\"token punctuation\">.<\/span>Component<\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token function\">render<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token punctuation\">{<\/span>\n    console<span class=\"token punctuation\">.<\/span><span class=\"token function\">log<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'\u5b59\u5b50\u7ec4\u4ef6'<\/span><span class=\"token punctuation\">)<\/span>\n    <span class=\"token keyword\">return<\/span><span class=\"token punctuation\">(<\/span><span class=\"token operator\">&lt;<\/span>div<span class=\"token operator\">&gt;<\/span>\u5b59\u5b50\u7ec4\u4ef6<span class=\"token operator\">&lt;<\/span><span class=\"token operator\">\/<\/span>div<span class=\"token operator\">&gt;<\/span><span class=\"token punctuation\">)<\/span>\n  <span class=\"token punctuation\">}<\/span>\n<span class=\"token punctuation\">}<\/span>\n<\/code><\/pre> <\/li>\n<li> <p>4\u3001\u4e0a\u9762\u51e0\u4e2a\u7ec4\u4ef6\u662f\u6bd4\u8f83\u6807\u51c6\u7684<code>react<\/code>\u7684\u7c7b\u7ec4\u4ef6,\u51fd\u6570\u7ec4\u4ef6\u4e5f\u662f\u7c7b\u4f3c\u7684\uff0c\u5f53\u4f60\u5728\u7236\u7ec4\u4ef6\u4e2d\u70b9\u51fb\u6309\u94ae\uff0c\u5176\u5b9e\u4f60\u4ec5\u4ec5\u662f\u60f3\u6539\u53d8\u7236\u7ec4\u4ef6\u5185\u7684<code>count<\/code>\u7684\u503c\uff0c\u4f46\u662f\u4f60\u4f1a\u53d1\u73b0\u6bcf\u6b21\u70b9\u51fb\u7684\u65f6\u5019\u5b50\u7ec4\u4ef6\u548c\u5b59\u7ec4\u4ef6\u4e5f\u4f1a\u91cd\u65b0\u6e32\u67d3\uff0c\u56e0\u4e3a<code>react<\/code>\u5e76\u4e0d\u77e5\u9053\u662f\u4e0d\u662f\u8981\u6e32\u67d3\u5b50\u7ec4\u4ef6\uff0c\u9700\u8981\u6211\u4eec\u81ea\u5df1\u53bb\u5224\u65ad\u3002<\/p> <\/li>\n<\/ul><h2>\n<a><\/a>\u4e00\u3001\u7c7b\u7ec4\u4ef6\u4e2d\u4f7f\u7528<code>shouldComponentUpdate<\/code>\u751f\u547d\u5468\u671f\u94a9\u5b50\u51fd\u6570<\/h2> \n<ul><li> <p>1\u3001\u5728\u5b50\u7ec4\u4ef6\u4e2d\u4f7f\u7528<code>shouldComponentUpdate<\/code>\u6765\u5224\u65ad\u662f\u5426\u8981\u66f4\u65b0\uff0c<\/p> \n  <blockquote> \n   <p>\u5176\u5b9e\u5c31\u662f\u6839\u636e<code>this.props<\/code>\u548c\u51fd\u6570\u53c2\u6570\u4e2d\u7684<code>nextProps<\/code>\u4e2d\u7684\u53c2\u6570\u6765\u5bf9\u6bd4\uff0c\u5982\u679c\u8fd4\u56de<code>false<\/code>\u5c31\u4e0d\u66f4\u65b0\uff0c\u5982\u679c\u8fd4\u56de<code>ture<\/code>\u5c31\u8868\u793a\u9700\u8981\u66f4\u65b0\u5f53\u524d\u7ec4\u4ef6<\/p> \n  <\/blockquote> <pre><code class=\"prism language-javascript\"><span class=\"token keyword\">class<\/span> <span class=\"token class-name\">Child<\/span> <span class=\"token keyword\">extends<\/span> <span class=\"token class-name\">React<span class=\"token punctuation\">.<\/span>Component<\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token function\">shouldComponentUpdate<\/span> <span class=\"token punctuation\">(<\/span>nextProps<span class=\"token punctuation\">,<\/span> nextState<span class=\"token punctuation\">)<\/span> <span class=\"token punctuation\">{<\/span>\n    console<span class=\"token punctuation\">.<\/span><span class=\"token function\">log<\/span><span class=\"token punctuation\">(<\/span>nextProps<span class=\"token punctuation\">,<\/span> <span class=\"token keyword\">this<\/span><span class=\"token punctuation\">.<\/span>props<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n    <span class=\"token keyword\">if<\/span> <span class=\"token punctuation\">(<\/span>nextProps<span class=\"token punctuation\">.<\/span>count <span class=\"token operator\">===<\/span> <span class=\"token keyword\">this<\/span><span class=\"token punctuation\">.<\/span>props<span class=\"token punctuation\">.<\/span>count<span class=\"token punctuation\">)<\/span> <span class=\"token punctuation\">{<\/span>\n      <span class=\"token keyword\">return<\/span> <span class=\"token boolean\">false<\/span><span class=\"token punctuation\">;<\/span>\n    <span class=\"token punctuation\">}<\/span> <span class=\"token keyword\">else<\/span> <span class=\"token punctuation\">{<\/span>\n      <span class=\"token keyword\">return<\/span> <span class=\"token boolean\">true<\/span><span class=\"token punctuation\">;<\/span>\n    <span class=\"token punctuation\">}<\/span>\n  <span class=\"token punctuation\">}<\/span>\n  <span class=\"token operator\">...<\/span>\n<span class=\"token punctuation\">}<\/span>\n<\/code><\/pre> <p>**\u6ce8\u610f\u70b9:**\u8fd9\u91cc\u7684<code>count<\/code>\u662f\u8981\u7236\u7ec4\u4ef6\u7ed9\u5f53\u524d\u7ec4\u4ef6\u4f20\u9012\u7684\u53c2\u6570(\u5c31\u662f\u4f60\u8981\u76d1\u542c\u53d8\u5316\u7684\u7684\u6765\u66f4\u65b0\u5f53\u524d\u7ec4\u4ef6),\u5982\u679c\u4f60\u5199\u4e00\u4e2a<code>nextProps.name === this.props.name<\/code>\u5176\u5b9e\uff0c\u7236\u7ec4\u4ef6\u5e76\u6ca1\u6709\u7ed9\u5f53\u524d\u7ec4\u4ef6\u4f20\u9012<code>name<\/code>\u90a3\u4e48\u4e0b\u9762\u90fd\u662f\u8fd4\u56de<code>false<\/code>\u7ec4\u4ef6\u4e0d\u66f4\u65b0<\/p> <\/li>\n<li> <p>2\u3001\u5f53\u5b50\u7ec4\u4ef6\u6ca1\u66f4\u65b0\uff0c\u90a3\u4e48\u5b59\u7ec4\u4ef6\u540c\u6837\u7684\u4e0d\u66f4\u65b0\u6570\u636e<\/p> <\/li>\n<\/ul><h2>\n<a><\/a>\u4e8c\u3001\u4f7f\u7528<code>PureComponet<\/code>\u8bed\u6cd5\u7cd6<\/h2> \n<blockquote> \n <p>\u5176\u5b9e<code>PureComponet<\/code>\u5c31\u662f\u4e00\u4e2a\u8bed\u6cd5\u7cd6\uff0c\u53ea\u662f\u5b98\u65b9\u5728\u5e95\u5c42\u5e2e\u4f60\u5b9e\u73b0\u4e86<code>shouldComponentUpdate<\/code>\u65b9\u6cd5\u800c\u5df2\uff0c\u4f7f\u7528\u7684\u65f6\u5019\u53ea\u9700\u8981\u5b50\u7c7b\u7ee7\u627f\u8fd9\u4e2a\u7c7b\u5c31\u53ef\u4ee5<\/p> \n<\/blockquote> \n<ul><li> <p>1\u3001\u5b50\u7ec4\u4ef6\u4e2d\u7ee7\u627f<\/p> <pre><code class=\"prism language-javascript\"><span class=\"token keyword\">class<\/span> <span class=\"token class-name\">Child<\/span> <span class=\"token keyword\">extends<\/span> <span class=\"token class-name\">React<span class=\"token punctuation\">.<\/span>PureComponent<\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token function\">render<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token punctuation\">{<\/span>\n    console<span class=\"token punctuation\">.<\/span><span class=\"token function\">log<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'\u6211\u662f\u5b50\u7ec4\u4ef6'<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n    <span class=\"token keyword\">return<\/span> <span class=\"token punctuation\">(<\/span>\n      <span class=\"token operator\">&lt;<\/span>div<span class=\"token operator\">&gt;<\/span>\n        \u6211\u662f\u5b50\u7ec4\u4ef6\n        <span class=\"token operator\">&lt;<\/span>Grandson <span class=\"token operator\">\/<\/span><span class=\"token operator\">&gt;<\/span>\n      <span class=\"token operator\">&lt;<\/span><span class=\"token operator\">\/<\/span>div<span class=\"token operator\">&gt;<\/span>\n    <span class=\"token punctuation\">)<\/span>\n  <span class=\"token punctuation\">}<\/span>\n<span class=\"token punctuation\">}<\/span>\n<\/code><\/pre> <\/li>\n<li> <p>2\u3001\u5728\u7236\u7ec4\u4ef6\u4e2d\u4f7f\u7528<\/p> <pre><code class=\"prism language-typescript\"><span class=\"token comment\">\/\/ \u4e0b\u9762\u8fd9\u79cd\u60c5\u51b5\u4e0d\u4f1a\u91cd\u65b0\u6e32\u67d3\u5b50\u7ec4\u4ef6<\/span>\n<span class=\"token operator\">&lt;<\/span>Child<span class=\"token operator\">\/<\/span><span class=\"token operator\">&gt;<\/span>\n<span class=\"token comment\">\/\/ \u4e0b\u9762\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4f1a\u91cd\u65b0\u6e32\u67d3\u5b50\u7ec4\u4ef6<\/span>\n<span class=\"token operator\">&lt;<\/span>Child count<span class=\"token operator\">=<\/span><span class=\"token punctuation\">{<\/span><span class=\"token keyword\">this<\/span><span class=\"token punctuation\">.<\/span>state<span class=\"token punctuation\">.<\/span>count<span class=\"token punctuation\">}<\/span><span class=\"token operator\">\/<\/span><span class=\"token operator\">&gt;<\/span>\n<\/code><\/pre> <\/li>\n<\/ul><h2>\n<a><\/a>\u4e09\u3001<code>memo<\/code>\u7684\u4f7f\u7528<\/h2> \n<blockquote> \n <p>\u5f53\u4f60\u5b50\u7ec4\u4ef6\u662f\u7c7b\u7ec4\u4ef6\u7684\u65f6\u5019\u53ef\u4ee5\u4f7f\u7528<code>shouldComponentUpdate<\/code>\u94a9\u5b50\u51fd\u6570\u6216\u7c7b\u7ec4\u4ef6\u7ee7\u627f<code>PureComponent<\/code>\u6765\u5b9e\u73b0\u4e0d\u6e32\u67d3\u5b50\u7ec4\u4ef6\uff0c\u4f46\u662f\u5bf9\u4e8e\u51fd\u6570\u7ec4\u4ef6\u6765\u8bf4\u662f\u4e0d\u80fd\u7528\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u7684\uff0c\u56e0\u6b64<code>react<\/code>\u5b98\u65b9\u7ed9\u51fd\u6570\u7ec4\u4ef6\u63d0\u4f9b\u4e86<code>memo<\/code>\u6765\u5bf9\u51fd\u6570\u7ec4\u4ef6\u5305\u88c5\u4e0b\uff0c\u5b9e\u73b0\u4e0d\u5fc5\u8981\u7684\u6e32\u67d3\u3002<\/p> \n<\/blockquote> \n<ul><li> <p>1\u3001\u7ec4\u4ef6\u5b9a\u4e49(\u8fd9\u91cc\u4e5f\u53ef\u4ee5\u4f7f\u7528\u7c7b\u7ec4\u4ef6)<\/p> <pre><code class=\"prism language-javascript\"><span class=\"token keyword\">function<\/span> <span class=\"token function\">Child<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token punctuation\">{<\/span>\n  console<span class=\"token punctuation\">.<\/span><span class=\"token function\">log<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'\u6211\u662f\u5b50\u7ec4\u4ef6'<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token keyword\">return<\/span> <span class=\"token punctuation\">(<\/span>\n    <span class=\"token operator\">&lt;<\/span>div<span class=\"token operator\">&gt;<\/span>\n      \u5b50\u7ec4\u4ef6\n    <span class=\"token operator\">&lt;<\/span><span class=\"token operator\">\/<\/span>div<span class=\"token operator\">&gt;<\/span>\n  <span class=\"token punctuation\">)<\/span>\n<span class=\"token punctuation\">}<\/span>\n\n<span class=\"token keyword\">function<\/span> <span class=\"token function\">Parent<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token keyword\">const<\/span> <span class=\"token punctuation\">[<\/span>count<span class=\"token punctuation\">,<\/span> setCount<span class=\"token punctuation\">]<\/span> <span class=\"token operator\">=<\/span> <span class=\"token function\">useState<\/span><span class=\"token punctuation\">(<\/span><span class=\"token number\">0<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token keyword\">return<\/span> <span class=\"token punctuation\">(<\/span>\n    <span class=\"token operator\">&lt;<\/span>div<span class=\"token operator\">&gt;<\/span>\n      \u6211\u662f\u7236\u7ec4\u4ef6<span class=\"token operator\">-<\/span><span class=\"token punctuation\">{<\/span>count<span class=\"token punctuation\">}<\/span>\n      <span class=\"token operator\">&lt;<\/span>button onClick<span class=\"token operator\">=<\/span><span class=\"token punctuation\">{<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span><span class=\"token operator\">=&gt;<\/span><span class=\"token function\">setCount<\/span><span class=\"token punctuation\">(<\/span>count <span class=\"token operator\">+<\/span> <span class=\"token number\">1<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">}<\/span><span class=\"token operator\">&gt;<\/span>\u70b9\u51fb\u6309\u94ae<span class=\"token operator\">&lt;<\/span><span class=\"token operator\">\/<\/span>button<span class=\"token operator\">&gt;<\/span>\n      <span class=\"token operator\">&lt;<\/span>Child <span class=\"token operator\">\/<\/span><span class=\"token operator\">&gt;<\/span>\n    <span class=\"token operator\">&lt;<\/span><span class=\"token operator\">\/<\/span>div<span class=\"token operator\">&gt;<\/span>\n  <span class=\"token punctuation\">)<\/span>\n<span class=\"token punctuation\">}<\/span>\n<\/code><\/pre> <\/li>\n<li> <p>2\u3001\u8fd9\u91cc\u6211\u4eec\u7236\u7ec4\u4ef6\u5185\u90e8\u6539\u53d8<code>count<\/code>\u5e76\u6ca1\u6709\u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6\uff0c\u4f46\u662f\u5b50\u7ec4\u4ef6\u4e00\u6837\u7684\u91cd\u65b0\u6e32\u67d3\u4e86\uff0c\u8fd9\u5e76\u4e0d\u662f\u6211\u4eec\u5e0c\u671b\u770b\u5230\u7684\uff0c\u56e0\u4e3a\u9700\u8981\u5bf9\u5b50\u7ec4\u4ef6\u5305\u88c5\u4e0b<\/p> <pre><code class=\"prism language-javascript\"><span class=\"token keyword\">function<\/span> <span class=\"token function\">Child<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token punctuation\">{<\/span>\n  console<span class=\"token punctuation\">.<\/span><span class=\"token function\">log<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'\u6211\u662f\u5b50\u7ec4\u4ef6'<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token keyword\">return<\/span> <span class=\"token punctuation\">(<\/span>\n    <span class=\"token operator\">&lt;<\/span>div<span class=\"token operator\">&gt;<\/span>\n      \u5b50\u7ec4\u4ef6\n    <span class=\"token operator\">&lt;<\/span><span class=\"token operator\">\/<\/span>div<span class=\"token operator\">&gt;<\/span>\n  <span class=\"token punctuation\">)<\/span>\n<span class=\"token punctuation\">}<\/span>\n\n<span class=\"token keyword\">const<\/span> ChildMemo <span class=\"token operator\">=<\/span> React<span class=\"token punctuation\">.<\/span><span class=\"token function\">memo<\/span><span class=\"token punctuation\">(<\/span>Child<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n<span class=\"token keyword\">function<\/span> <span class=\"token function\">Parent<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token keyword\">const<\/span> <span class=\"token punctuation\">[<\/span>count<span class=\"token punctuation\">,<\/span> setCount<span class=\"token punctuation\">]<\/span> <span class=\"token operator\">=<\/span> <span class=\"token function\">useState<\/span><span class=\"token punctuation\">(<\/span><span class=\"token number\">0<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token keyword\">return<\/span> <span class=\"token punctuation\">(<\/span>\n    <span class=\"token operator\">&lt;<\/span>div<span class=\"token operator\">&gt;<\/span>\n      \u6211\u662f\u7236\u7ec4\u4ef6<span class=\"token operator\">-<\/span><span class=\"token punctuation\">{<\/span>count<span class=\"token punctuation\">}<\/span>\n      <span class=\"token operator\">&lt;<\/span>button onClick<span class=\"token operator\">=<\/span><span class=\"token punctuation\">{<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span><span class=\"token operator\">=&gt;<\/span><span class=\"token function\">setCount<\/span><span class=\"token punctuation\">(<\/span>count <span class=\"token operator\">+<\/span> <span class=\"token number\">1<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">}<\/span><span class=\"token operator\">&gt;<\/span>\u70b9\u51fb\u6309\u94ae<span class=\"token operator\">&lt;<\/span><span class=\"token operator\">\/<\/span>button<span class=\"token operator\">&gt;<\/span>\n      <span class=\"token punctuation\">{<\/span><span class=\"token comment\">\/* \u8fd9\u79cd\u60c5\u51b5\u4e0b\u4e0d\u4f1a\u6e32\u67d3\u5b50\u7ec4\u4ef6 *\/<\/span><span class=\"token punctuation\">}<\/span>\n      <span class=\"token operator\">&lt;<\/span>ChildMemo <span class=\"token operator\">\/<\/span><span class=\"token operator\">&gt;<\/span>\n      <span class=\"token punctuation\">{<\/span><span class=\"token comment\">\/* \u8fd9\u79cd\u60c5\u51b5\u4e0b\u4f1a\u6e32\u67d3\u5b50\u7ec4\u4ef6 *\/<\/span><span class=\"token punctuation\">}<\/span>\n      <span class=\"token operator\">&lt;<\/span>ChildMemo count<span class=\"token operator\">=<\/span><span class=\"token punctuation\">{<\/span>count<span class=\"token punctuation\">}<\/span><span class=\"token operator\">\/<\/span><span class=\"token operator\">&gt;<\/span>\n    <span class=\"token operator\">&lt;<\/span><span class=\"token operator\">\/<\/span>div<span class=\"token operator\">&gt;<\/span>\n  <span class=\"token punctuation\">)<\/span>\n<span class=\"token punctuation\">}<\/span>\n<\/code><\/pre> <\/li>\n<\/ul><h2>\n<a><\/a>\u56db\u3001<code>useMemo<\/code>\u548c<code>useCallback<\/code>\u7684\u8ba4\u8bc6<\/h2> \n<ul><li> <p>1\u3001<code>useMemo<\/code>\u548c<code>useCallback<\/code>\u90fd\u662f\u5177\u6709\u7f13\u5b58\u4f5c\u7528\u7684\uff0c\u53ea\u662f\u4ed6\u4eec\u7f13\u5b58\u5bf9\u8c61\u4e0d\u4e00\u6837\uff0c\u4e00\u4e2a\u662f\u5c5e\u6027\uff0c\u4e00\u4e2a\u662f\u7f13\u5b58\u51fd\u6570\uff0c\u7279\u70b9\u90fd\u662f\uff0c\u5f53\u7f13\u5b58\u4f9d\u8d56\u7684\u6ca1\u53d8\uff0c\u53bb\u83b7\u53d6\u8fd8\u662f\u83b7\u53d6\u66fe\u7ecf\u7684\u7f13\u5b58<\/p> <\/li>\n<li> <p>2\u3001<code>useMemo<\/code>\u662f\u5bf9\u51fd\u6570\u7ec4\u4ef6\u4e2d\u7684\u5c5e\u6027\u5305\u88c5\uff0c\u8fd4\u56de\u4e00\u4e2a\u5177\u6709\u7f13\u5b58\u6548\u679c\u7684\u65b0\u7684\u5c5e\u6027\uff0c\u5f53\u4f9d\u8d56\u7684\u5c5e\u6027\u6ca1\u53d8\u5316\u7684\u65f6\u5019\uff0c\u8fd9\u4e2a\u8fd4\u56de\u65b0\u5c5e\u6027\u5c31\u4f1a\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u4e4b\u524d\u7684\u3002<\/p> <\/li>\n<li> <p>3\u3001<code>useCallback<\/code>\u662f\u5bf9\u51fd\u6570\u7ec4\u4ef6\u4e2d\u7684\u65b9\u6cd5\u7f13\u5b58\uff0c\u8fd4\u56de\u4e00\u4e2a\u88ab\u7f13\u5b58\u7684\u65b9\u6cd5<\/p> <\/li>\n<\/ul><h2>\n<a><\/a>\u4e94\u3001<code>useMemo<\/code>\u7684\u4f7f\u7528(\u6211\u4eec\u4f9d\u8d56\u501f\u7528\u5b50\u7ec4\u4ef6\u66f4\u65b0\u7684\u6765\u505a)<\/h2> \n<ul><li> <p>1\u3001\u6839\u636e\u4e0a\u9762\u7684\u65b9\u5f0f\u6211\u4eec\u5728\u7236\u7ec4\u4ef6\u66f4\u65b0\u6570\u636e\uff0c\u89c2\u5bdf\u5b50\u7ec4\u4ef6\u53d8\u5316<\/p> <pre><code class=\"prism language-javascript\"><span class=\"token keyword\">const<\/span> <span class=\"token function-variable function\">Child<\/span> <span class=\"token operator\">=<\/span> <span class=\"token punctuation\">(<\/span>props<span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=&gt;<\/span> <span class=\"token punctuation\">{<\/span>\n  console<span class=\"token punctuation\">.<\/span><span class=\"token function\">log<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'\u91cd\u65b0\u6e32\u67d3\u5b50\u7ec4\u4ef6'<\/span><span class=\"token punctuation\">,<\/span> props<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token keyword\">return<\/span> <span class=\"token punctuation\">(<\/span>\n    <span class=\"token operator\">&lt;<\/span>div<span class=\"token operator\">&gt;<\/span>\u5b50\u7ec4\u4ef6<span class=\"token operator\">&lt;<\/span><span class=\"token operator\">\/<\/span>div<span class=\"token operator\">&gt;<\/span>\n  <span class=\"token punctuation\">)<\/span>\n<span class=\"token punctuation\">}<\/span>\n<span class=\"token keyword\">const<\/span> ChildMemo <span class=\"token operator\">=<\/span> React<span class=\"token punctuation\">.<\/span><span class=\"token function\">memo<\/span><span class=\"token punctuation\">(<\/span>Child<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n\n<span class=\"token keyword\">const<\/span> <span class=\"token function-variable function\">Parent<\/span> <span class=\"token operator\">=<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=&gt;<\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token keyword\">const<\/span> <span class=\"token punctuation\">[<\/span>count<span class=\"token punctuation\">,<\/span> setCount<span class=\"token punctuation\">]<\/span> <span class=\"token operator\">=<\/span> <span class=\"token function\">useState<\/span><span class=\"token punctuation\">(<\/span><span class=\"token number\">0<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token keyword\">const<\/span> <span class=\"token punctuation\">[<\/span>number<span class=\"token punctuation\">,<\/span> setNumber<span class=\"token punctuation\">]<\/span><span class=\"token operator\">=<\/span><span class=\"token function\">useState<\/span><span class=\"token punctuation\">(<\/span><span class=\"token number\">0<\/span><span class=\"token punctuation\">)<\/span>\n  <span class=\"token keyword\">const<\/span> userInfo <span class=\"token operator\">=<\/span> <span class=\"token punctuation\">{<\/span>\n    age<span class=\"token punctuation\">:<\/span> count<span class=\"token punctuation\">,<\/span>\n    name<span class=\"token punctuation\">:<\/span> <span class=\"token string\">'hello'<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token punctuation\">}<\/span>\n\n  <span class=\"token keyword\">const<\/span> <span class=\"token function-variable function\">btnHandler<\/span> <span class=\"token operator\">=<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=&gt;<\/span> <span class=\"token punctuation\">{<\/span>\n    <span class=\"token function\">setNumber<\/span><span class=\"token punctuation\">(<\/span>number<span class=\"token operator\">+<\/span><span class=\"token number\">1<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token punctuation\">}<\/span>\n  <span class=\"token keyword\">return<\/span> <span class=\"token punctuation\">(<\/span>\n    <span class=\"token operator\">&lt;<\/span>div<span class=\"token operator\">&gt;<\/span>\n      <span class=\"token punctuation\">{<\/span>number<span class=\"token punctuation\">}<\/span><span class=\"token operator\">-<\/span><span class=\"token punctuation\">{<\/span>count<span class=\"token punctuation\">}<\/span>\n      <span class=\"token operator\">&lt;<\/span>button onClick<span class=\"token operator\">=<\/span><span class=\"token punctuation\">{<\/span>btnHandler<span class=\"token punctuation\">}<\/span><span class=\"token operator\">&gt;<\/span>\u6309\u94ae<span class=\"token operator\">&lt;<\/span><span class=\"token operator\">\/<\/span>button<span class=\"token operator\">&gt;<\/span>\n      <span class=\"token operator\">&lt;<\/span>ChildMemo userInfo<span class=\"token operator\">=<\/span><span class=\"token punctuation\">{<\/span>userInfo<span class=\"token punctuation\">}<\/span><span class=\"token operator\">\/<\/span><span class=\"token operator\">&gt;<\/span>\n    <span class=\"token operator\">&lt;<\/span><span class=\"token operator\">\/<\/span>div<span class=\"token operator\">&gt;<\/span>\n  <span class=\"token punctuation\">)<\/span>\n<span class=\"token punctuation\">}<\/span>\n<\/code><\/pre> <p>\u4e0a\u9762\u53d1\u73b0\u6211\u4eec\u4ec5\u4ec5\u662f\u66f4\u65b0\u4e86<code>number<\/code>\u7684\u503c\uff0c\u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6\u7684\u5bf9\u8c61\u503c\u5e76\u6ca1\u6709\u53d8\u5316\uff0c\u4f46\u662f\u6bcf\u6b21\u5b50\u7ec4\u4ef6\u90fd\u91cd\u65b0\u66f4\u65b0\u4e86\uff0c\u867d\u7136\u6211\u4eec\u5728\u5b50\u7ec4\u4ef6\u4e0a\u7528\u4e86<code>React.memo<\/code>\u5305\u88c5\u8fd8\u662f\u4e0d\u884c\uff0c\u8fd9\u662f\u56e0\u4e3a\u5728\u7236\u7ec4\u4ef6\u4e2d\u6bcf\u6b21\u91cd\u65b0\u6e32\u67d3\uff0c\u5bf9\u4e8e\u5bf9\u8c61\u6765\u8bf4\u4f1a\u662f\u91cd\u65b0\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\u4e86\u3002\u56e0\u6b64\u5b50\u7ec4\u4ef6\u8981\u91cd\u65b0\u66f4\u65b0\uff0c<\/p> <\/li>\n<li> <p>2\u3001\u4f7f\u7528<code>useMemo<\/code>\u5bf9\u5c5e\u6027\u7684\u5305\u88c5<\/p> <pre><code class=\"prism language-javascript\"><span class=\"token keyword\">const<\/span> userInfo <span class=\"token operator\">=<\/span> <span class=\"token function\">useMemo<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=&gt;<\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token keyword\">return<\/span> <span class=\"token punctuation\">{<\/span>\n    age<span class=\"token punctuation\">:<\/span> count<span class=\"token punctuation\">,<\/span>\n    name<span class=\"token punctuation\">:<\/span> <span class=\"token string\">'hello'<\/span><span class=\"token punctuation\">,<\/span>\n  <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">;<\/span>\n<span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token punctuation\">[<\/span>count<span class=\"token punctuation\">]<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n<\/code><\/pre> <p>\u4f7f\u7528<code>useMemo<\/code>\u5305\u88c5\u540e\u7684\u5bf9\u8c61\uff0c\u91cd\u65b0\u8fd4\u56de\u4e00\u4e2a\u5177\u6709\u7f13\u5b58\u6548\u679c\u7684\u65b0\u5bf9\u8c61\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793a\u4f9d\u8d56\u6027\uff0c\u6216\u8005\u53eb\u89c2\u5bdf\u5bf9\u8c61\uff0c\u5f53\u88ab\u89c2\u5bdf\u7684\u6ca1\u53d8\u5316\uff0c\u8fd4\u56de\u7684\u5c31\u662f\u7f13\u5b58\u5bf9\u8c61\uff0c\u5982\u679c\u88ab\u89c2\u5bdf\u7684\u53d8\u5316\u4e86\uff0c\u90a3\u4e48\u5c31\u4f1a\u8fd4\u56de\u65b0\u7684\uff0c\u73b0\u5728\u4e0d\u7ba1\u4f60\u600e\u4e48\u66f4\u65b0<code>number<\/code>\u7684\u503c\uff0c\u5b50\u7ec4\u4ef6\u90fd\u4e0d\u4f1a\u91cd\u65b0\u66f4\u65b0\u4e86<\/p> <\/li>\n<li> <p>3\u3001\u6ce8\u610f\u70b9:<code>useMemo<\/code>\u8981\u914d\u5408<code>React.memo<\/code>\u6765\u4f7f\u7528\uff0c\u4e0d\u7136\u4f20\u9012\u5230\u5b50\u7ec4\u4ef6\u4e5f\u662f\u4e0d\u751f\u6548\u7684<\/p> <\/li>\n<\/ul><h2>\n<a><\/a>\u516d\u3001<code>useCallback<\/code>\u7684\u4f7f\u7528<\/h2> \n<p>\u524d\u9762\u4ecb\u7ecd\u4e86\uff0c<code>useCallback<\/code>\u662f\u5bf9\u4e00\u4e2a\u65b9\u6cd5\u7684\u5305\u88c5\uff0c\u8fd4\u56de\u4e00\u4e2a\u5177\u6709\u7f13\u5b58\u7684\u65b9\u6cd5\uff0c\u5e38\u89c1\u7684\u4f7f\u7528\u573a\u666f\u662f\uff0c\u7236\u7ec4\u4ef6\u8981\u4f20\u9012\u4e00\u4e2a\u65b9\u6cd5\u7ed9\u5b50\u7ec4\u4ef6<\/p> \n<ul><li> <p>1\u3001\u5728\u4e0d\u4f7f\u7528<code>useCallback<\/code>\u7684\u65f6\u5019<\/p> <pre><code class=\"prism language-javascript\"><span class=\"token keyword\">const<\/span> <span class=\"token function-variable function\">Child<\/span> <span class=\"token operator\">=<\/span> <span class=\"token punctuation\">(<\/span>props<span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=&gt;<\/span> <span class=\"token punctuation\">{<\/span>\n  console<span class=\"token punctuation\">.<\/span><span class=\"token function\">log<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'\u6e32\u67d3\u4e86\u5b50\u7ec4\u4ef6'<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token keyword\">const<\/span> <span class=\"token punctuation\">{<\/span> onClick <span class=\"token punctuation\">}<\/span> <span class=\"token operator\">=<\/span> props<span class=\"token punctuation\">;<\/span>\n  <span class=\"token keyword\">return<\/span> <span class=\"token punctuation\">(<\/span>\n    <span class=\"token operator\">&lt;<\/span>button onClick<span class=\"token operator\">=<\/span><span class=\"token punctuation\">{<\/span>onClick<span class=\"token punctuation\">}<\/span><span class=\"token operator\">&gt;<\/span>\u70b9\u51fb\u6309\u94ae\u83b7\u53d6\u503c<span class=\"token operator\">&lt;<\/span><span class=\"token operator\">\/<\/span>button<span class=\"token operator\">&gt;<\/span>\n  <span class=\"token punctuation\">)<\/span>\n<span class=\"token punctuation\">}<\/span>\n\n<span class=\"token keyword\">const<\/span> ChildMemo <span class=\"token operator\">=<\/span> React<span class=\"token punctuation\">.<\/span><span class=\"token function\">memo<\/span><span class=\"token punctuation\">(<\/span>Child<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n\n<span class=\"token keyword\">const<\/span> <span class=\"token function-variable function\">Parent<\/span> <span class=\"token operator\">=<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=&gt;<\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token keyword\">const<\/span> <span class=\"token punctuation\">[<\/span>text<span class=\"token punctuation\">,<\/span> updateText<span class=\"token punctuation\">]<\/span> <span class=\"token operator\">=<\/span> <span class=\"token function\">useState<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">''<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token keyword\">const<\/span> textRef <span class=\"token operator\">=<\/span> <span class=\"token function\">useRef<\/span><span class=\"token punctuation\">(<\/span>text<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token keyword\">const<\/span> <span class=\"token function-variable function\">handleSubmit<\/span> <span class=\"token operator\">=<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=&gt;<\/span> <span class=\"token punctuation\">{<\/span>\n    console<span class=\"token punctuation\">.<\/span><span class=\"token function\">log<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'\u5f53\u524d\u7684\u503c'<\/span><span class=\"token punctuation\">,<\/span> text<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token punctuation\">}<\/span>\n  <span class=\"token keyword\">return<\/span><span class=\"token punctuation\">(<\/span>\n    <span class=\"token operator\">&lt;<\/span>div<span class=\"token operator\">&gt;<\/span>\n      \u6211\u662f\u7236\u7ec4\u4ef6\n      <span class=\"token operator\">&lt;<\/span>input type<span class=\"token operator\">=<\/span><span class=\"token string\">\"text\"<\/span> value<span class=\"token operator\">=<\/span><span class=\"token punctuation\">{<\/span>text<span class=\"token punctuation\">}<\/span> onChange<span class=\"token operator\">=<\/span><span class=\"token punctuation\">{<\/span><span class=\"token punctuation\">(<\/span>e<span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=&gt;<\/span> <span class=\"token function\">updateText<\/span><span class=\"token punctuation\">(<\/span>e<span class=\"token punctuation\">.<\/span>target<span class=\"token punctuation\">.<\/span>value<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">}<\/span><span class=\"token operator\">\/<\/span><span class=\"token operator\">&gt;<\/span>\n      <span class=\"token operator\">&lt;<\/span>ChildMemo onClick<span class=\"token operator\">=<\/span><span class=\"token punctuation\">{<\/span>handleSubmit<span class=\"token punctuation\">}<\/span><span class=\"token operator\">\/<\/span><span class=\"token operator\">&gt;<\/span>\n    <span class=\"token operator\">&lt;<\/span><span class=\"token operator\">\/<\/span>div<span class=\"token operator\">&gt;<\/span>\n  <span class=\"token punctuation\">)<\/span>\n<span class=\"token punctuation\">}<\/span>\n<\/code><\/pre> <p>\u7ed3\u679c\u662f\u6bcf\u6b21\u8f93\u5165\u6846\u8f93\u5165\u503c\u7684\u65f6\u5019\uff0c\u5b50\u7ec4\u4ef6\u5c31\u4f1a\u91cd\u65b0\u6e32\u67d3\u4e00\u6b21\uff0c\u5176\u5b9e\u5b50\u7ec4\u4ef6\u4e2d\u4ec5\u4ec5\u662f\u4e00\u4e2a\u6309\u94ae\uff0c\u8981\u83b7\u53d6\u6700\u7ec8\u8f93\u5165\u7684\u503c\uff0c\u6bcf\u6b21\u7236\u7ec4\u4ef6\u8f93\u5165\u503c\u7684\u65f6\u5019\uff0c\u5b50\u7ec4\u4ef6\u5c31\u66f4\u65b0\uff0c\u5f88\u8017\u6027\u80fd\u7684<\/p> <\/li>\n<li> <p>2\u3001\u4f7f\u7528<code>useCallback<\/code>\u6765\u5305\u88c5\u4e00\u4e2a\u65b9\u6cd5<\/p> <pre><code class=\"prism language-javascript\"><span class=\"token keyword\">const<\/span> <span class=\"token function-variable function\">Parent<\/span> <span class=\"token operator\">=<\/span> <span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=&gt;<\/span> <span class=\"token punctuation\">{<\/span>\n  <span class=\"token keyword\">const<\/span> <span class=\"token punctuation\">[<\/span>text<span class=\"token punctuation\">,<\/span> updateText<span class=\"token punctuation\">]<\/span> <span class=\"token operator\">=<\/span> <span class=\"token function\">useState<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">''<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token keyword\">const<\/span> textRef <span class=\"token operator\">=<\/span> <span class=\"token function\">useRef<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n\n  <span class=\"token comment\">\/\/ useCallback\u53c8\u4f9d\u8d56\u4e86textRef\u7684\u53d8\u5316\uff0c\u56e0\u6b64\u53ef\u4ee5\u83b7\u53d6\u5230\u6700\u65b0\u7684\u6570\u636e<\/span>\n  <span class=\"token keyword\">const<\/span> handleSubmit <span class=\"token operator\">=<\/span> <span class=\"token function\">useCallback<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=&gt;<\/span> <span class=\"token punctuation\">{<\/span>\n    console<span class=\"token punctuation\">.<\/span><span class=\"token function\">log<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'\u5f53\u524d\u8f93\u5165\u6846\u7684\u503c:'<\/span><span class=\"token punctuation\">,<\/span> textRef<span class=\"token punctuation\">.<\/span>current<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token punctuation\">[<\/span>textRef<span class=\"token punctuation\">]<\/span><span class=\"token punctuation\">)<\/span>\n\n  <span class=\"token comment\">\/\/ \u5f53text\u7684\u503c\u53d8\u5316\u7684\u65f6\u5019\u5c31\u4f1a\u7ed9textRef\u7684current\u91cd\u65b0\u8d4b\u503c<\/span>\n  <span class=\"token function\">useEffect<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">(<\/span><span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=&gt;<\/span> <span class=\"token punctuation\">{<\/span>\n    textRef<span class=\"token punctuation\">.<\/span>current <span class=\"token operator\">=<\/span> text<span class=\"token punctuation\">;<\/span>\n  <span class=\"token punctuation\">}<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token punctuation\">[<\/span>text<span class=\"token punctuation\">]<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">;<\/span>\n  \n  <span class=\"token keyword\">return<\/span><span class=\"token punctuation\">(<\/span>\n    <span class=\"token operator\">&lt;<\/span>div<span class=\"token operator\">&gt;<\/span>\n      \u6211\u662f\u7236\u7ec4\u4ef6\n      <span class=\"token operator\">&lt;<\/span>input type<span class=\"token operator\">=<\/span><span class=\"token string\">\"text\"<\/span> value<span class=\"token operator\">=<\/span><span class=\"token punctuation\">{<\/span>text<span class=\"token punctuation\">}<\/span> onChange<span class=\"token operator\">=<\/span><span class=\"token punctuation\">{<\/span><span class=\"token punctuation\">(<\/span>e<span class=\"token punctuation\">)<\/span> <span class=\"token operator\">=&gt;<\/span> <span class=\"token function\">updateText<\/span><span class=\"token punctuation\">(<\/span>e<span class=\"token punctuation\">.<\/span>target<span class=\"token punctuation\">.<\/span>value<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">}<\/span><span class=\"token operator\">\/<\/span><span class=\"token operator\">&gt;<\/span>\n      <span class=\"token operator\">&lt;<\/span>ChildMemo onClick<span class=\"token operator\">=<\/span><span class=\"token punctuation\">{<\/span>handleSubmit<span class=\"token punctuation\">}<\/span><span class=\"token operator\">\/<\/span><span class=\"token operator\">&gt;<\/span>\n    <span class=\"token operator\">&lt;<\/span><span class=\"token operator\">\/<\/span>div<span class=\"token operator\">&gt;<\/span>\n  <span class=\"token punctuation\">)<\/span>\n<span class=\"token punctuation\">}<\/span>\n<\/code><\/pre> <\/li>\n<\/ul><\/div>\n                ", '#result');
    }

  function insertCodeElement(content, container){
    if(content.indexOf('<code>') != -1) return
    container = container || document;
    // 创建一个 div 来放置获取到的内容，这样就可以把 content 字符串内容转换成 dom
    // 方便我们对这个 dom 进行操作（只是创建 div，并没有插入到文档，他只存在于内存中）
    var parent = document.createElement('div');
    parent.innerHTML = content;
    if($('.am-engine').length===0){
        // 找到 parent 中的所有 pre 标签，并遍历
       var $pres = $(parent).find('pre');
       $pres.each(function(index, el) {
            var $el = $(el),
            html = $el.html(),
            code = document.createElement('code'),
            elClass = $el.attr('class');
            if(!elClass) {return};
            // 获取 pre 标签中，class 属性中包含的本段代码所有的编程语言
            var language = elClass.substring(6, elClass.indexOf(';'));
            code.className = 'language-' + language;
            code.innerHTML = html;
            $el.html(code);
        });
        }else{
        var $pres = $(parent).find('pre');
        let cardData=$(parent).find('.card-activated')
        $pres.each(function(index,el){
            var  $el = $(el),
            html = $el.html(),
            code = document.createElement('div');
            code.className = 'language-';
            code.innerHTML = html;
            $el.html(code);
            $(el).css("padding",'15px 0 17px 0')     
            })
        }
        
        $(container).html(parent.innerHTML);

        // 最后，调用 Prism 的方法来高亮代码
        // Prism.highlightAll();
    }
</script>

</div>
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
<![endif]-->
<header class="home-top" style="display: none;">
    <div class="Page">
        <div class="top-box">
            <div class="item-lf"><a class="top" href="https://www.51cto.com/" target="_blank" rel="nofollow">51CTO首页</a></div>
            <div class="item-lf">
                <a href="https://blog.51cto.com/" target="_blank">博客</a>
            </div>
            <div class="item-lf">
                <a class="subweb" href="https://edu.51cto.com/?utm_source=hometop" data-id="2" target="_blank" rel="nofollow">学堂</a>
            </div>
            <div class="item-lf">
                <a class="subweb" href="https://e.51cto.com/?utm_platform=pc&amp;utm_medi-um=51cto&amp;utm_source=zhuzhan&amp;utm_content=sy_topbar" data-id="3" target="_blank" rel="nofollow">精培</a>
            </div>
            <div class="item-lf">
                <a class="subweb" href="https://b.51cto.com/index?utm_source=hometop" data-id="4" target="_blank" rel="nofollow">企业培训</a>
            </div>
            <div class="item-lf">
                <a class="subweb" href="https://x.51cto.com/?www" data-id="5" target="_blank" rel="nofollow">CTO训练营</a>
            </div>
            <div class="item-lf">
                <a class="subweb" href="https://ost.51cto.com/openharmony?utm_source=hometop" data-id="6" target="_blank" rel="nofollow">鸿蒙技术社区</a>
            </div>
            <div class="item-lf">
                <a href="http://wot.51cto.com/act/wot2021/dev?www1" target="_blank" rel="nofollow">WOT技术大会</a>
            </div>
            <div class="item-lf hot">
                <a href="https://metacon.51cto.com/?utm_source=blogtop" target="_blank" rel="nofollow">元宇宙大会   </a><div class="hot-div" style="left:60px">
                      <span>HOT</span>
                  </div>
            </div>

            <div class="top-right">
                <div class="item-rt"><span class="subweb" data-id="8">移动端</span></div>
                <div class="item-rt"><span class="subweb" data-id="7">公众号矩阵</span></div>
                <div class="item-rt collection">收藏本站</div>
                <div class="item-rt"><a href="http://so.51cto.com/?keywords=&amp;sort=time" target="_blank" class="search-top" rel="nofollow"><i class="iconblog blogsou"></i></a></div>
            </div>
        </div>
    </div>
    <div class="nav-more-container" style="height: 0px;">
        <div class="Page nav-contant-box" style="height: 0px; z-index: 0;">
            <div class="nav-contant nav-contant1" data-id="1" style="height: 0px; z-index: 0;">
                <a href="https://blog.51cto.com/" target="_blank">博客</a>
            </div>
            <div class="nav-contant nav-contant2" data-id="2" style="height: 0px; z-index: 0;">
                <a href="https://edu.51cto.com/courselist/index-zh5.html?utm_source=hometop" target="_blank" rel="nofollow">免费课程</a>
                <a href="https://edu.51cto.com/ranking/index.html?utm_source=hometop" target="_blank" rel="nofollow">课程排行</a>
                <a href="https://e.51cto.com/ncamp/list?utm_platform=pc&amp;utm_medium=51cto&amp;utm_source=zhuzhan&amp;utm_content=sy_topbar&amp;rtm_frd=13" target="_blank" rel="nofollow">直播课</a>
                <a href="https://e.51cto.com/rk/?utm_platform=pc&amp;utm_medi-um=51cto&amp;utm_source=zhuzhan&amp;utm_content=sy_topbar&amp;rtm_frd=14" target="_blank" rel="nofollow">软考学堂</a>
            </div>
            <div class="nav-contant nav-contant3" data-id="3" style="height: 0px; z-index: 0;">
                <a href="https://e.51cto.com/?utm_platform=pc&amp;utm_medi-um=51cto&amp;utm_source=zhuzhan&amp;utm_content=sy_topbar" target="_blank" rel="nofollow">精品班</a>
                <a href="https://e.51cto.com/wejob/list?pid=5&amp;utm_platform=pc&amp;utm_medium=51cto&amp;utm_source=zhuzhan&amp;utm_content=sy_topbar&amp;rtm_frd=41" target="_blank" rel="nofollow">厂商认证</a>
                <a href="https://e.51cto.com/wejob/list?pid=1&amp;utm_platform=pc&amp;utm_medium=51cto&amp;utm_source=zhuzhan&amp;utm_content=sy_topbar&amp;rtm_frd=42" target="_blank" rel="nofollow">IT技术</a>
                <a href="https://e.51cto.com/rk/?utm_platform=pc&amp;utm_medium=51cto&amp;utm_source=zhuzhan&amp;utm_content=sy_xyzq_rightwzl&amp;rtm_frd=07&amp;utm_medium=51cto&amp;utm_source=zhuzhan&amp;utm_content=sy_topbar&amp;rtm_frd=43" target="_blank" rel="nofollow">2022年软考</a>
                <a href="https://e.51cto.com/wejob/list?pid=33&amp;utm_platform=pc&amp;utm_medium=51cto&amp;utm_source=zhuzhan&amp;utm_content=sy_topbar&amp;rtm_frd=44" target="_blank" rel="nofollow">PMP项目管理</a>
            </div>
            <div class="nav-contant nav-contant4" data-id="4" style="height: 0px; z-index: 0;">
                <a href="https://b.51cto.com/index?utm_source=hometop" target="_blank" rel="nofollow">在线学习</a>
                <a href="https://b.edu.51cto.com/site/home" target="_blank" rel="nofollow">企业服务</a>
            </div>
            <div class="nav-contant nav-contant5" data-id="5" style="height: 0px; z-index: 0;">
                <a href="https://x.51cto.com/?www" target="_blank" rel="nofollow">CTO训练营</a>
                <a href="https://x.51cto.com/act/cto/tl" target="_blank" rel="nofollow">技术经理研习营</a>
                <a href="https://x.51cto.com/act/cto/leatech2021?www1" target="_blank" rel="nofollow">LeaTech峰会</a>
            </div>
            <div class="nav-contant nav-contant6" data-id="6" style="height: 0px; z-index: 0;">
                <a href="https://ost.51cto.com/postlist" target="_blank" rel="nofollow">文章</a>
                <a href="https://ost.51cto.com/resource" target="_blank" rel="nofollow">资源</a>
                <a href="https://ost.51cto.com/answerlist" target="_blank" rel="nofollow">问答</a>
                <a href="https://ost.51cto.com/study" target="_blank" rel="nofollow">鸿蒙课堂</a>
                <a href="https://ost.51cto.com/column" target="_blank" rel="nofollow">专栏</a>
                <a href="https://ost.51cto.com/activity" target="_blank" rel="nofollow">直播</a>
            </div>
            <div class="nav-contant nav-contant7" data-id="7" style="height: 0px; z-index: 0;">
                <div class="ewmbox">
                    <div class="imgbox"><img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/ewm_4.jpeg" alt=""></div>
                    <span class="txt">51CTO</span>
                </div>
                <div class="ewmbox">
                    <div class="imgbox"><img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/ewm_1.png" alt=""></div>
                    <span class="txt">51CTO鸿蒙技术社区</span>
                </div>
                <div class="ewmbox">
                    <div class="imgbox"><img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/ewm_2.jpeg" alt=""></div>
                    <span class="txt">51CTO技术栈</span>
                </div>
                <div class="ewmbox">
                    <div class="imgbox"><img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/ewm_3.jpeg" alt=""></div>
                    <span class="txt">51CTO官微</span>
                </div>
                <div class="ewmbox">
                    <div class="imgbox"><img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/ewm_5.jpeg" alt=""></div>
                    <span class="txt">51CTO学堂</span>
                </div>
                <div class="ewmbox">
                    <div class="imgbox"><img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/blog.jpg" alt=""></div>
                    <span class="txt">51CTO博客</span>
                </div>
                <div class="ewmbox">
                    <div class="imgbox"><img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/ewm_10.jpg" alt=""></div>
                    <span class="txt">CTO训练营</span>
                </div>
                <div class="ewmbox">
                    <div class="imgbox"><img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/ewm_6.jpg" alt=""></div>
                    <span class="txt">鸿蒙技术社区订阅号</span>
                </div>
            </div>
            <div class="nav-contant nav-contant8" data-id="8" style="height: 0px; z-index: 0;">
                <div class="ewmbox">
                    <div class="imgbox"><img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/ewm_8.jpg" alt=""></div>
                    <span class="txt">51CTO学堂APP</span>
                </div>
                <div class="ewmbox">
                    <div class="imgbox"><img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/ewm_qy.png" alt=""></div>
                    <span class="txt">51CTO学堂企业版APP</span>
                </div>
                <div class="ewmbox">
                    <div class="imgbox"><img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/video.png" alt=""></div>
                    <span class="txt">鸿蒙技术社区视频号</span>
                </div>
            </div>
        </div>
    </div>
</header>
<div class="Header" style="height: 61px; top: 0px; display: none;">
  <div class="Page clearfix ">
      <div class="Logo"><a href="https://blog.51cto.com/"><img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/logonew5.png" alt="51CTO博客" width="202" title="51CTO博客"><h2>51CTO博客</h2></a></div>
      <ul class="Navigates fl commonhide">
      <li><a href="https://blog.51cto.com/">首页</a>
        <div class="spam-classifications" style="display:none;">
          <div class="spam-classifications-content">
          <div class="classification-ipc" id="classification-ipc"></div> <div class="classification-primary-list-box" id="classification-primary-list-box"></div>

          </div>
        </div>
      </li>
      <li><a href="https://blog.51cto.com/nav/following">关注</a></li>
        <li><a href="https://blog.51cto.com/ranking">热榜</a></li>
      <li class="">
        <a href="https://blog.51cto.com/cloumn/index" target="_blank">订阅专栏</a>
      </li>
      
                  </ul>
    <ul class="Navigates Navigates-right fr">
      <li class="more maps">
        <a href="javascript:void(0);" class="menu"></a>
        <div>
          <div class="ins">

            <a href="https://edu.51cto.com/" target="_blank">学堂</a>
            <a href="https://e.51cto.com/" target="_blank" rel="nofollow">精培</a>
            <a href="https://harmonyos.51cto.com/?blogdaohang" target="_blank">鸿蒙社区</a>
            <a href="http://x.51cto.com/" target="_blank" rel="nofollow">CTO训练营</a>
            <a href="http://www.51cto.com/" target="_blank">51CTO</a>
              <a href="https://blog.51cto.com/class-blog/index" target="_blank">班级博客</a>
          </div>
        </div>
      </li>
              <li class="logins">
			    <a href="https://home.51cto.com/index?from_service=blog&amp;scene=login1&amp;reback=https://blog.51cto.com/u_3409716/2904210" target="_self" class="clearfix" rel="nofollow"><span class="fl">登录</span><b class="fgline fl"></b><span class="fl">注册</span></a>
        </li>
                        <li class="mRead commonhide">
            <a href="javascript:;" rel="nofollow"></a>
            <div>
              <div class="ins">
                  <div class="towD-box">
                      <img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/blog_qr.png">
                      <p>手机随时阅读</p>
                  </div>
                  <div class="towD-box">
                      <img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/5a45016915218bb53e32af17b14a8822.jpg">
                      <p>新人专享大礼包￥24</p>
                  </div>
                </div>
            </div>
        </li>
                  <li class="write commonhide"><a href="javascript:;" id="toPublish" onclick="Login({scene:&#39;write1&#39;})" rel="nofollow">写文章</a></li>
                <li class="search commonhide">

          <form class="fr form-search" method="get" action="https://blog.51cto.com/search/result" target="_blank">
            <input type="text" name="q" placeholder="大家都在搜索..." id="TopSearchInput" autocomplete="off">
            <button id="TopSearchBtn"></button>
          </form>
                    <div class="focusSelect focusSelect_his" style="display: none;">

              <div class="searchHistoryList" style="display: none;">
                <div class="clearfix hishead">搜索历史
                  <span class="clearhis"><i class="iconblog blogshanchu18 "></i>清空</span>
                </div>
                <div class="hisitem-wrap"></div>
              </div>

              <div class="hotList" style="display: none;">
                <div class="clearfix hishead">热门搜索</div>
                <div class="hot-wrap"></div>
              </div>

          </div>

          <div class="focusSelect focusSelect_key" style="display: none;">
            <div class="keyitem-wrap">

            </div>
            <div class="clearfix checkSearchResult">
              <span>查看【</span>
              <span class="checkKey"></span>
              <span>】的结果</span></div>
          </div>


        </li>
          </ul>
    <div class="clear"></div>
  </div>
<div class="search-mask" style="display: none;"></div></div>
<script>
    var isLogin = '0';
    var userId = '';
    var imgpath = 'https://s4.51cto.com/';
    var BLOG_URL = 'https://blog.51cto.com/';
    var YII_ENV = 'prod';
    var router = 'blog/index'
    localStorage.removeItem('userDraft')
    $('.want-write').click(function(){
        localStorage.removeItem('userDraft')
    })

</script>
   <style type="text/css">
  .Header{
    top:30px;
  }
  </style>
<script src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/share.js_v=c369668739"></script>
<script type="text/javascript" src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/count_v2.php"></script>
<!-- if publish show -->
<div class="Footer">
  <div class="Page ">
    <div class="fl">
      <a href="https://blog.51cto.com/" class="Logo"><img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/logonew4.png" alt="51CTO博客" width="214" title="51CTO博客"></a>
      <p class="copy">Copyright © 2005-2022 <a href="http://www.51cto.com/" target="_blank">51CTO.COM</a>
          版权所有 京ICP证060544号</p>
    </div>

    <dl class="foot_ab fr">
      <dt>关于我们</dt>
      <dd>
        <table class="aboutList">
              <tbody><tr>
                  <td><a href="https://blog.51cto.com/51ctoblog" target="_blank">官方博客</a></td>
                  <td><a href="https://blog.51cto.com/51ctoblog/2643377" target="_blank">意见反馈</a></td>
                  <td><a href="http://www.51cto.com/about/aboutus.html" target="_blank">了解我们</a></td>
                  <td><a href="https://blog.51cto.com/nav" target="_blank">全部文章</a></td>
              </tr>
              <tr>
                  <td><a href="javascript:;" class="zhiCustomBtn">在线客服</a></td>
                  <td><a href="http://www.51cto.com/about/map.html" target="_blank">网站地图</a></td>
                  <td><a href="https://blog.51cto.com/topic/all" target="_blank">热门标签</a></td>
              </tr>
          </tbody></table>
      </dd>
    </dl>


    <dl class="foot_link fr">
      <dt>友情链接</dt>
      <dd>

        <table class="aboutList-2">
            <tbody><tr>
                <td><a href="https://harmonyos.51cto.com/?blogsitemap" target="_blank">51CTO鸿蒙社区</a></td>
                <td><a href="https://edu.51cto.com/" target="_blank">51CTO学堂</a></td>
            </tr>
            <tr>
              <td><a href="http://www.51cto.com/" target="_blank">51CTO</a></td>

            </tr>
        </tbody></table>
      </dd>
    </dl>

  </div>
</div>
<div class="right-fixadv"><div class="ins"><span></span><a href="https://blog.51cto.com/blog-contest/index#part4" target="_blank"><img src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/an5.png" alt=""></a></div></div>
<script>
  $('.right-fixadv').click(function(e){
    $.ajax({
        url:'https://blog.51cto.com/blog-contest/record',
        type: 'GET',
        dataType: 'json',
        data:{type:9},
        success: function(res) {},
    });
  })
</script>

<script>
  var uid = '';
  var BLOG_URL = 'https://blog.51cto.com/';
</script>

<script src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/time-on-page.js" charset="utf-8"></script>
  <script src="./React的性能优化(useMemo和useCallback)的使用_kuangshp的技术博客_51CTO博客_files/entrance.js" id="zhichiScript" class="zhiCustomBtn" data-args="manual=true"></script>
  <script>
      var zhiManager = (getzhiSDKInstance());
      zhiManager.on("load", function() {
          zhiManager.initBtnDOM();
      });
      zhiManager.set('title','欢迎咨询');
      zhiManager.set('powered',false);
      zhiManager.set('color','4285f4');
      zhiManager.set('customBtn', 'true');
      zhiManager.set('size',{'width':360,'height':500});
      zhiManager.set('userinfo', {'partnerId':'','uname':'','params':{'用户名':''}});
      zhiManager.set('customMargin', 20);
      zhiManager.set('preVisitArgs',{'preVisitUrl': document.referrer?document.referrer:''});
      zhiManager.set('curVisitArgs',{'curVisitUrl': location.href,curVisitTitle:document.title,});
  </script>




<script>
    (function(){
        var wh=$(window).height(),fh=$('.Footer').outerHeight(true),hh=$('.Header').outerHeight(true)
        $('.Content-box').css({'min-height': wh-fh-hh})
    })()
</script>


<div style="background: url(&quot;https://static1.51cto.com/edu/blog/images/bg50.png&quot;) repeat; position: fixed; left: 0px; top: 0px; width: 100%; height: 100%; z-index: 10000000; display: none;"><div style="z-index:10000001;width:50px;height:50px;background:url(https://static1.51cto.com/edu/blog/images/loading2.gif) no-repeat center;background-size:50px 50px;position:absolute;left:50%;top:50%;margin-left:-25px;margin-top:-25px;"></div></div><div id="zhichiBtnBox" style="position: fixed; z-index: 2147483583; box-shadow: rgba(15, 66, 76, 0.25) 0px 0px 14px 0px; width: 60px; height: 60px; border-radius: 50%; background-color: rgb(66, 133, 244); background-image: url(&quot;//www.sobot.com/chat/frame/imgs/icon.png&quot;); background-repeat: no-repeat; background-position: 18px -58px; right: 40px; bottom: 20px; display: none;"><a hidefocus="" id="zhichiBtn" style="position:relative;text-decoration: none; outline: none; font-family: Microsoft Yahei, Arial, Helvetica; color: #fff; font-size: 16px; display: inline-block; margin: 0; padding: 0; border: none; line-height:43px; float:none;width:100%;height:100%;border-radius:50%;"><span class="zc-advice-icon-btn-title" style="box-shadow: rgba(107, 113, 114, 0.15) 0px 2px 4px 0px; border: 1px solid rgb(235, 239, 240); font-family: &quot;Microsoft Yahei&quot;, Arial, Helvetica; color: rgb(85, 85, 86); font-size: 13px; margin: 0px; text-align: right; background: rgb(255, 255, 255); position: absolute; top: 15px; right: 70px; text-overflow: ellipsis; white-space: nowrap; word-break: normal; display: none; border-radius: 3px; padding: 0px 5px; height: 30px; line-height: 30px;">欢迎咨询</span></a><i style="position:absolute;top:0px;right:0px;padding:1px;line-height:20px;text-align:center;color:#fff;font-weight:bold;height:18px;min-width:18px;background-color:#ed5c5c;border-radius:18px;font-size:12px;display:none;font-style:normal;" id="zhichiCount"></i></div></body></html>