---
autoGroup-2: ESLint
title: ESLintå¼€å§‹ï¼Œè¯´é€æˆ‘å¦‚æœåœ¨å›¢é˜Ÿé¡¹ç›®ä¸­åŸºäºVueåšä»£ç æ ¡éªŒ
---
:::tip
æœ€è¿‘é‡åˆ°äº†ä¸€ä¸ªè€é¡¹ç›®ï¼Œæ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯è¿™ä¸ªé¡¹ç›®é›†å‰åç«¯çš„ä»£ç äºä¸€èµ·ï¼Œè€Œåç«¯ä¹Ÿä¼šå»ä¿®æ”¹å‰ç«¯ä»£ç ï¼Œæ‰€ä»¥å°±å‡ºç°äº†åç«¯ç”¨IntelliJ IDEAæ¥å¼€å‘å‰ç«¯é¡¹ç›®ï¼Œè€Œå‰ç«¯ç”¨VSCodeæ¥å¼€å‘å‰ç«¯é¡¹ç›®ã€‚äºæ˜¯ï¼Œå‡ºç°äº†ä»£ç è§„èŒƒçš„é—®é¢˜ï¼Œæ‰€ä»¥æ•´ç†äº†ä¸€ä¸‹å‰ç«¯ä»£ç æ ¡éªŒä»¥åŠåœ¨Vueé¡¹ç›®ä¸­çš„å®è·µ
:::

é˜…è¯»å®Œè¿™ç¯‡æ–‡æ¡£ï¼Œå¯æ”¶è·
- èƒ½å¤Ÿè‡ªå·±äº²æ‰‹å†™å‡ºä¸€å¥—ESLinté…ç½®;
- ä¼šçŸ¥é“ä¸šç•Œéƒ½æœ‰å“ªäº›æ³¨æ˜çš„JSä»£ç è§„èŒƒï¼Œç†Ÿè¯»ä»–ä»¬å¯ä»¥è®©ä½ å†™å‡ºæ›´è§„èŒƒçš„ä»£ç ;
- vue-cliåœ¨åˆå§‹åŒ–ä¸€ä¸ªåŒ…å«ä»£ç æ£€æŸ¥çš„é¡¹ç›®æ—¶éƒ½åšäº†ä»€ä¹ˆ;
- Prettieræ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿå¦‚ä½•ä¸ESLinté…åˆä½¿ç”¨;
- EditorConfigåˆæ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ä½¿ç”¨;
- å¦‚ä½•åœ¨VSCodeä¸­é€šè¿‡æ’ä»¶æ¥ååŠ©ä»£ç æ ¡éªŒå·¥ä½œ;
- å¦‚æœä¿è¯pushåˆ°è¿œç¨‹ä»“åº“ä¸­çš„ä»£ç æ˜¯ç¬¦åˆè§„èŒƒçš„ï¼›

## ESLintæ˜¯ä»€ä¹ˆ
ESLintæ˜¯ä¸€ä¸ªé›†ä»£ç å®¡æŸ¥å’Œä¿®å¤çš„å·¥å…·ï¼Œå®ƒçš„æ ¸å¿ƒåŠŸèƒ½æ˜¯é€šè¿‡é…ç½®ä¸€ä¸ªä¸ªè§„åˆ™æ¥é™åˆ¶ä»£ç çš„åˆæ³•æ€§å’Œé£æ ¼ã€‚

### é…ç½®è§£æå™¨å’Œè§£æå‚æ•°
ESLintçš„è§£æå™¨ï¼Œæ—©æœŸçš„æ—¶å€™ç”¨çš„æ˜¯[Esprima](https://esprima.org/),åé¢åŸºäºEsprima v1.2.2ç‰ˆæœ¬å¼€å‘äº†ä¸€ä¸ªæ–°çš„è§£æå™¨[Espree](https://github.com/eslint/espree),å¹¶ä¸”æŠŠå®ƒå½“åšé»˜è®¤è§£æå™¨ã€‚

é™¤äº†ä½¿ç”¨ESLintè‡ªå¸¦çš„è§£æå™¨å¤–ï¼Œè¿˜å¯ä»¥æŒ‡å®šå…¶ä»–è§£æå™¨:
- @babel/eslint-parser:ä½¿Babelå’ŒESLintå…¼å®¹,å¯¹ä¸€äº›Babelè¯­æ³•æä¾›æ”¯æŒ
- @typescript-eslint/parserï¼šTSLintè¢«å¼ƒç”¨åï¼ŒTypescriptæä¾›äº†æ­¤è§£æå™¨ç”¨äºå°†å…¶ä¸ESTreeå…¼å®¹ï¼Œä½¿ESLintå¯¹TypeScriptè¿›è¡Œæ”¯æŒã€‚

ä¸ºé¡¹ç›®æŒ‡å®šæŸä¸ªé€‰æ‹©å™¨çš„åŸåˆ™æ˜¯ä»€ä¹ˆï¼Ÿ
- å¦‚æœä½ çš„é¡¹ç›®ç”¨åˆ°äº†æ¯”è¾ƒæ–°çš„ESè¯­æ³•ï¼Œæ¯”å¦‚ES2021çš„Promise.any(),é‚£å°±å¯ä»¥æŒ‡å®š@babel/eslint-parserä¸ºè§£æå™¨;
- å¦‚æœé¡¹ç›®æ˜¯åŸºäºTSå¼€å‘çš„ï¼Œé‚£å°±ä½¿ç”¨@typescript-eslint/parser

é™¤äº†æŒ‡å®šè§£æå™¨parserå¤–ï¼Œè¿˜å¯ä»¥é¢å¤–é…ç½®è§£æå™¨å‚æ•°paserOptions

```
{
    // ESLinté»˜è®¤è§£æå™¨ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæˆåˆ«çš„
    parser: "espree",
    parserOptions: {
        // æŒ‡å®šè¦ä½¿ç”¨çš„ESMAScriptç‰ˆæœ¬ï¼Œé»˜è®¤5
        ecmaVersion: 5, 
        // è®¾ç½®ä¸ºscript(é»˜è®¤)æˆ–module(å¦‚æœä½ çš„ä»£ç æ˜¯ECMAScriptæ¨¡å—)
        sourceType: "script",
        // è¿™æ˜¯ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºä½ æƒ³ä½¿ç”¨çš„é¢å¤–çš„è¯­è¨€ç‰¹æ€§ï¼Œæ‰€æœ‰é€‰é¡¹é»˜è®¤éƒ½æ˜¯false
        ecmafeatures: {
            // æ˜¯å¦å…è®¸åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ä½¿ç”¨ return è¯­å¥
            globalReturn: false,
            // æ˜¯å¦å¯ç”¨å…¨å±€ strict æ¨¡å¼ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰
            impliedStrict: false,
            // æ˜¯å¦å¯ç”¨JSX
            jsx: false,
            // æ˜¯å¦å¯ç”¨å¯¹å®éªŒæ€§çš„objectRest/spreadPropertiesçš„æ”¯æŒ
            experimentalObjectRestSpread: false
        }
    }
}
```

### æŒ‡å®šç¯å¢ƒenv
æŒ‡å®šä¸åŒçš„ç¯å¢ƒå¯ä»¥ç»™å¯¹åº”ç¯å¢ƒä¸‹æä¾›é¢„è®¾çš„å…¨å±€å˜é‡ã€‚æ¯”å¦‚è¯´åœ¨Browserç¯å¢ƒä¸‹ï¼Œå¯ä»¥ä½¿ç”¨windowå…¨å±€å˜é‡ï¼›åœ¨nodeç¯å¢ƒä¸‹ï¼Œå¯ä»¥ä½¿ç”¨processå…¨å±€å˜é‡ç­‰ï¼›

ESLintä¸­å¯é…ç½®çš„ç¯å¢ƒæ¯”è¾ƒå¤šï¼Œè¿™é‡Œæœ‰ä»½å®Œæ•´çš„åˆ—è¡¨ï¼Œä¸‹é¢åˆ—å‡ºå‡ ä¸ªæ¯”è¾ƒå¸¸è§çš„ï¼š

- browserï¼šæµè§ˆå™¨å…¨å±€å˜é‡
- node: Nodeå…¨å±€å˜é‡å’Œä½œç”¨åŸŸ
- es6: es6ä¸­é™¤äº†æ¨¡å—ä¹‹å¤–çš„å…¶ä»–ç‰¹æ€§,åŒæ—¶å°†è‡ªåŠ¨è®¾ç½®parserOptions.ecmaVersionå‚æ•°ä¸º6ï¼Œä¾æ¬¡ç±»æ¨ES2017æ˜¯7ï¼Œè€ŒES2021æ˜¯12ï¼›
    - es2017ï¼šparserOptions.ecmaVersion ä¸º 8ï¼›
    - es2020ï¼šparserOptions.ecmaVersion ä¸º 11ï¼›
    - es2021ï¼šparserOptions.ecmaVersion ä¸º 12ï¼›
é…ç½®æ–¹å¼
```
{
    env: {
        browser: true,
        node: true,
        es6: true,
        commonjs: true,
        mocha: true,
        jquery: true,
    }
}
```
å¯ä»¥æŒ‡å®šå¤šä¸ªç¯å¢ƒå¹¶ä¸æ„å‘³ç€é…ç½®çš„ç¯å¢ƒè¶Šå¤šçº¦å¥½ï¼Œå®é™…é…ç½®çš„æ—¶å€™è¿˜æ˜¯å¾—ä¾æ®å½“å‰é¡¹ç›®çš„ç¯å¢ƒæ¥é€‰æ‹©

### é…ç½®å…¨å±€å˜é‡globals
ESLintçš„ä¸€äº›æ ¸å¿ƒè§„åˆ™ä¾èµ–äºå¯¹ä»£ç åœ¨è¿è¡Œæ—¶å¯ç”¨çš„å…¨å±€å˜é‡çš„äº†è§£ã€‚ç”±äºè¿™äº›åœ¨ä¸åŒç¯å¢ƒä¹‹é—´å¯èƒ½ä¼šæœ‰å¾ˆå¤§å·®å¼‚ï¼Œå¹¶ä¸”åœ¨è¿è¡Œæ—¶ä¼šè¿›è¡Œä¿®æ”¹ï¼Œå› æ­¤ESLintä¸ä¼šå‡è®¾ä½ çš„æ‰§è¡Œç¯å¢ƒä¸­å­˜åœ¨å“ªäº›å…¨å±€å˜é‡.

å¦‚æœä½ æƒ³ä½¿ç”¨è¿™äº›å…¨å±€å˜é‡ï¼Œé‚£å°±å¯ä»¥é€šè¿‡globalsæ¥æŒ‡å®šã€‚æ¯”å¦‚åœ¨react.eslintrc.jsé‡Œå°±æŠŠspyOnDevã€spyOnProdç­‰å˜é‡æŒ‚è½½äº†globalä¸‹ä½œä¸ºå…¨å±€å˜é‡
```
{
    globals: {
        spyOnDev: true,
        spyOnProd: true
    }
}
```
å¯¹äºå®ƒçš„å€¼éœ€è¦ç‰¹åˆ«è¯´æ˜ï¼š
- falseã€readableã€readonlyè¿™ä¸‰ä¸ªæ˜¯ç­‰ä»·çš„ï¼Œè¡¨ç¤ºå˜é‡åªå¯è¯»ä¸å¯å†™ï¼›
- trueã€writeableã€writableè¿™ä¸‰ä¸ªæ˜¯ç­‰ä»·çš„ï¼Œè¡¨ç¤ºå˜é‡å¯è¯»ç§‘å

### é…ç½®æ‰©å±•extends

å®é™…é¡¹ç›®ä¸­é…ç½®è§„åˆ™çš„æ—¶å€™,ä¸å¯èƒ½å›¢é˜Ÿä¸€æ¡ä¸€æ¡çš„å»å•†è®®é…ç½®ï¼Œå¤ªè´¹ç»ç†äº†ã€‚é€šå¸¸çš„åšæ³•æ˜¯ä½¿ç”¨ä¸šå†…å¤§å®¶æ™®éä½¿ç”¨çš„ã€éµå¾ªçš„ç¼–ç è§„èŒƒï¼›ç„¶åé€šè¿‡extendså»å¼•å…¥è¿™äº›è§„èŒƒã€‚extendsé…ç½®çš„æ—¶å€™æ¥å—å­—ç¬¦ä¸²æˆ–è€…æ•°ç»„
```
{
    extends: [
        'eslint:recommended',
        'plugin:vue/essential',
        'eslint-config-standard', // å¯ä»¥ç¼©å†™æˆ 'standard'
        '@vue/prettier',
        './node_modules/coding-standard/.eslintrc-es6'
    ]
}
```
**ä»ä¸Šé¢çš„çš„é…ç½®ï¼Œå¯ä»¥çŸ¥é“extendsæ”¯æŒçš„é…ç½®ç±»å‹å¯ä»¥æ˜¯ä¸€ä¸‹å‡ ç§**

- eslintå¼€å¤´çš„:æ˜¯ESLintå®˜æ–¹æ‰©å±•;
- pluginå¼€å¤´çš„:æ˜¯æ’ä»¶ç±»å‹æ‰©å±•,æ¯”å¦‚plugin:vue/essential;
- eslint-configå¼€å¤´çš„:æ¥è‡ªnpmåŒ…ï¼Œä½¿ç”¨æ—¶å¯ä»¥çœç•¥å‰ç¼€eslint-config-,æ¯”å¦‚ä¸Šé¢çš„å¯ä»¥ç›´æ¥å†™æˆstandardï¼›
- @å¼€å¤´: æ‰©å±•å’Œeslint-configä¸€æ ·ï¼Œåªæ˜¯åœ¨npmåŒ…ä¸Šé¢åŠ äº†ä¸€å±‚ä½œç”¨åŸŸscope
- ä¸€ä¸ªæ‰§è¡Œé…ç½®æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„æˆ–è€…ç»å¯¹è·¯å¾„

**æœ‰å“ªäº›å¸¸ç”¨çš„ã€æ¯”è¾ƒè‘—åçš„æ‰©å±•å¯ä»¥è¢«extendså¼•å…¥å‘¢**

- [eslint:recommended](https://eslint.org/docs/rules/: https://link.juejin.cn?target=https%3A%2F%2Feslint.org%2Fdocs%2Frules%2F):ESLintå†…ç½®çš„æ¨èè§„åˆ™ï¼Œå³ESLint Rulesåˆ—è¡¨ä¸­æ‰“äº†é’©çš„å“ªäº›è§„åˆ™
- [eslint:all](
https://eslint.org/docs/rules/: https://link.juejin.cn?target=https%3A%2F%2Feslint.org%2Fdocs%2Frules%2F): ESLintå†…ç½®çš„æ‰€æœ‰è§„åˆ™
- [eslint-config-standard](
https://github.com/standard/eslint-config-standard: https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fstandard%2Feslint-config-standard)ï¼šstandard çš„ JS è§„èŒƒï¼›
- [eslint-config-prettier](https://github.com/prettier/eslint-config-prettier: https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fprettier%2Feslint-config-prettier)ï¼šå…³é—­å’Œ ESLint ä¸­ä»¥åŠå…¶ä»–æ‰©å±•ä¸­æœ‰å†²çªçš„è§„åˆ™ï¼›
- [eslint-config-airbnb-base](https://github.com/airbnb/javascript/tree/master/packages/eslint-config-airbnb-base: https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fairbnb%2Fjavascript%2Ftree%2Fmaster%2Fpackages%2Feslint-config-airbnb-base)ï¼šairbab çš„ JS è§„èŒƒï¼›
- [eslint-config-alloy](
https://github.com/AlloyTeam/eslint-config-alloy: https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAlloyTeam%2Feslint-config-alloy)ï¼šè…¾è®¯ AlloyTeam å‰ç«¯å›¢é˜Ÿå‡ºå“ï¼Œå¯ä»¥å¾ˆå¥½çš„é’ˆå¯¹ä½ é¡¹ç›®çš„æŠ€æœ¯æ ˆè¿›è¡Œé…ç½®é€‰æ‹©ï¼Œæ¯”å¦‚å¯ä»¥é€‰ Reactã€Vueï¼ˆç°å·²æ”¯æŒ Vue 3.0ï¼‰ã€TypeScript ç­‰ï¼›


### ä½¿ç”¨æ’ä»¶plugins

#### ESLintæä¾›æ’ä»¶æ˜¯å¹²å˜›ç”¨çš„
ESLintè™½ç„¶å¯ä»¥å®šä¹‰å¾ˆå¤šçš„rulesï¼Œä»¥åŠé€šè¿‡extendsæ¥å¼•å…¥æ›´å¤šçš„è§„åˆ™ï¼Œä½†æ˜¯è¯´åˆ°åº•åªæ˜¯æ£€æŸ¥JSè¯­æ³•ã€‚å¦‚æœéœ€è¦æ£€æŸ¥Vueä¸­çš„templateæˆ–è€…Reactä¸­çš„JSXï¼Œå°±æŸæ‰‹æ— ç­–äº†ï¼Œæ‰€ä»¥å¼•å…¥æ’ä»¶çš„ç›®çš„æ˜¯ä¸ºäº†å¢å¼ºESLintçš„æ£€æŸ¥èƒ½åŠ›å’ŒèŒƒå›´

#### å¦‚ä½•é…ç½®æ’ä»¶
ESLintç›¸å…³çš„æ’ä»¶å‘½åå½¢å¼æœ‰ä¸¤ç§:ä¸å¸¦å‘½åç©ºé—´çš„å’Œå¸¦å‘½åç©ºé—´çš„ï¼Œæ¯”å¦‚ï¼š
- eslint-plugin-å¼€å‘çš„å¯ä»¥çœç•¥è¿™éƒ¨åˆ†å‰ç¼€
- @/å¼€å¤´çš„ï¼›

```
{
    plugins: [
        'jquery',          // æ˜¯æŒ‡ eslint-plugin-jquery
        '@jquery/jquery',  // æ˜¯æŒ‡ @jquery/eslint-plugin-jquery
        '@foobar',         // æ˜¯æŒ‡ @foobar/eslint-plugin
    ]
}
```
å½“éœ€è¦åŸºäºæ’ä»¶è¿›è¡Œextendså’Œrulesçš„é…ç½®çš„æ—¶å€™ï¼Œéœ€è¦åŠ ä¸Šæ’ä»¶çš„å¼•ç”¨,æ¯”å¦‚
```
{
    plugins: [
        'jquery',   // eslint-plugin-jquery
        '@foo/foo', // @foo/eslint-plugin-foo
        '@bar,      // @bar/eslint-plugin
    ],
    extends: [
        'plugin:jquery/recommended',
        'plugin:@foo/foo/recommended',
        'plugin:@bar/recommended'
    ],
    rules: {
        'jquery/a-rule': 'error',
        '@foo/foo/some-rule': 'error',
        '@bar/another-rule': 'error'
    },
}
```
### é…ç½®è§„åˆ™rules
ESLintæä¾›äº†å¤§é‡å†…ç½®çš„è§„åˆ™ï¼Œè¿™é‡Œæ˜¯å®ƒçš„è§„åˆ™åˆ—è¡¨[ESLint Rules](https://eslint.org/docs/rules/: https://link.juejin.cn?target=https%3A%2F%2Feslint.org%2Fdocs%2Frules%2F),é™¤æ­¤ä¹‹å¤–ä½ è¿˜å¯ä»¥é€šè¿‡æ’ä»¶æ¥æ·»åŠ æ›´å¤šçš„è§„åˆ™

**è§„åˆ™æ ¡éªŒè¯´æ˜ï¼Œæœ‰3ä¸ªæŠ¥é”™ç­‰çº§**
- offæˆ–0ï¼šå…³é—­å¯¹è¯¥è§„åˆ™æ ¡éªŒ
- warnæˆ–1ï¼šå¯åŠ¨è§„åˆ™ï¼Œä¸æ»¡è¶³æŠ›å‡ºè­¦å‘Šï¼Œä¸”ä¸ä¼šé€€å‡ºç¼–è¯‘è¿›ç¨‹
- erroræˆ–2ï¼šå¯åŠ¨è§„åˆ™ï¼Œä¸æ»¡è¶³æŠ›å‡ºé”™è¯¯ï¼Œä¸”ä¼šé€€å‡ºç¼–è¯‘è¿›ç¨‹

é€šå¸¸è´µå¤©æ³½å€¼éœ€è¦é…ç½®å¼€å¯è¿˜æ˜¯å…³é—­å³å¯ï¼›ä½†æ˜¯ä¹Ÿæœ‰äº›è§„åˆ™å¯ä»¥ä¼ å…¥å±æ€§æ¯”å¦‚ï¼š
```
{
    rules: {
        'quotes': ['error', 'single'], // å¦‚æœä¸æ˜¯å•å¼•å·ï¼Œåˆ™æŠ¥é”™
        'one-val': ['error', {
            'var': 'always', // æ¯ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­ï¼Œåªå…è®¸1ä¸ªvalç”Ÿå‘½
            'let': 'never', // æ¯ä¸ªå—ä½œç”¨åŸŸä¸­ï¼Œå…è®¸å¤šä¸ªletå£°æ˜
            'const': 'never', // æ¯ä¸ªå—ä½œç”¨åŸŸä¸­ï¼Œå…è®¸å¤šä¸ªconstå£°æ˜
        }]
    }
}
```
å¦‚ä½•çŸ¥é“æŸä¸ªæ‰©å±•æœ‰å“ªäº›è§„åˆ™å¯ä»¥é…ç½®ï¼Œä»¥åŠæ¯ä¸ªè§„åˆ™å…·ä½“é™åˆ¶ï¼Ÿè¿™é‡Œç›´æ¥ç»™æˆ‘ä¸šå†…è‘—åä¸”ä½¿ç”¨æ¯”è¾ƒå¤šçš„è§„åˆ™åˆ—è¡¨çš„å®½æ•è¿æ¥

- ESLint rulesï¼Œè¿™æ•´ä¸ªåˆ—è¡¨å¯¹åº” eslint:allï¼Œè€Œæ‰“é’© âœ”ï¸ çš„æ˜¯ eslint:recommenmedï¼›
- Prettier rules
- standard rules
- airbnb rules
- AlloyTeam vue rules

#### è§„åˆ™ä¼˜å…ˆçº§
- å¦‚æœ extends é…ç½®çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆæœ€ç»ˆä¼šå°†æ‰€æœ‰è§„åˆ™é¡¹è¿›è¡Œåˆå¹¶ï¼Œå‡ºç°å†²çªçš„æ—¶å€™ï¼Œåé¢çš„ä¼šè¦†ç›–å‰é¢çš„ï¼›
- é€šè¿‡ rules å•ç‹¬é…ç½®çš„è§„åˆ™ä¼˜å…ˆçº§æ¯” extends é«˜ï¼›

### å…¶ä»–é…ç½®

#### é…ç½®å½“å‰ç›®å½•ä¸ºroot

ESLintæ£€æµ‹é…ç½®æ–‡ä»¶æ­¥éª¤
1. å†è¦æ£€æµ‹çš„æ–‡ä»¶åŒä¸€ç›®å½•é‡Œå¯»æ‰¾.eslintrc.*å’Œpackage.json;
2. ç´§æ¥ç€åœ¨çˆ¶çº§ç›®å½•é‡Œå¯»æ‰¾ï¼Œä¸€ç›´åˆ°æ–‡ä»¶ç³»ç»Ÿçš„æ ¹ç›®å½•ï¼›
3. å¦‚æœåœ¨å‰ä¸¤æ­¥å‘ç°æœ‰ rootï¼štrue çš„é…ç½®ï¼Œåœæ­¢åœ¨çˆ¶çº§ç›®å½•ä¸­å¯»æ‰¾ .eslintrcï¼›
4. å¦‚æœä»¥ä¸Šæ­¥éª¤éƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™å›é€€åˆ°ç”¨æˆ·ä¸»ç›®å½• ~/.eslintrc ä¸­è‡ªå®šä¹‰çš„é»˜è®¤é…ç½®ï¼›

é€šå¸¸æˆ‘ä»¬éƒ½ä¹ æƒ¯æŠŠ ESLint é…ç½®æ–‡ä»¶æ”¾åˆ°é¡¹ç›®æ ¹ç›®å½•ï¼Œå› æ­¤å¯ä»¥ä¸ºäº†é¿å… ESLint æ ¡éªŒçš„æ—¶å€™å¾€çˆ¶çº§ç›®å½•æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ ä¸Š root: trueã€‚

```
{
    root: true
}
```

#### æ·»åŠ å…±äº«æ•°æ®

ESLintæ”¯æŒåœ¨é…ç½®æ–‡ä»¶æ·»åŠ å…±äº«è®¾ç½®ï¼Œä½ å¯ä»¥æ·»åŠ settingså¯¹è±¡åˆ°é…ç½®æ–‡ä»¶ï¼Œå®ƒå°†æä¾›ç»™æ¯ä¸€ä¸ªå°†è¢«æ‰§è¡Œçš„è§„åˆ™.å¦‚æœä½ æƒ³æ·»åŠ çš„è‡ªå®šä¹‰è§„åˆ™è€Œä¸”ä½¿å®ƒä»¬å¯ä»¥è®¿é—®åˆ°ç›¸åŒçš„ä¿¡æ¯ï¼Œè¿™å°†ä¼šå¾ˆæœ‰ç”¨ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“é…ç½®
```
{
    settings: {
        sharedData: 'Hello'
    }
}
```
å‚è€ƒï¼šESLinté…ç½®æ–‡ä»¶.eslintrcå‚æ•°è¯´æ˜

### é’ˆå¯¹ä¸ªåˆ«æ–‡ä»¶è®¾ç½®æ–°çš„æ£€æŸ¥è§„åˆ™
æ¯”å¦‚webpackçš„ä¸­åŒ…å«äº†æŸäº›è¿è¡Œæ—¶çš„JSæ–‡ä»¶ï¼Œè€Œè¿™äº›æ–‡ä»¶åªæ˜¯æ³¡åœ¨æµè§ˆå™¨ç«¯çš„ï¼Œæ‰€ä»¥éœ€è¦é’ˆå¯¹è¿™éƒ¨åˆ†æ–‡ä»¶è¿›è¡Œå·®å¼‚åŒ–é…ç½®
```
overrides: [
    {
        files: ["lib/**/*.runtime.js", "hot/*.js"],
        env: {
            es6: false,
            browser: true
        },
            globals: {
            Promise: false
        },
        parserOptions: {
            ecmaVersion: 5
        }
    }
]
```
## å¦‚ä½•æ ¡éªŒ

ä¸Šé¢ç»†è¯´äº†ESLintçš„å„ç§é…ç½®é¡¹ï¼Œä»¥åŠé’ˆå¯¹Vueå¦‚ä½•è¿›è¡Œå·®å¼‚é…ç½®çš„è¯´æ˜ã€‚

ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•é…ç½®ï¼Œä½†æ˜¯ä½ çŸ¥é“è¿™äº›é…ç½®éƒ½æ˜¯é…ç½®åˆ°å¸¦é‚£é‡Œäº†å˜›ï¼Ÿ

### é…ç½®æ–¹å¼

ESLintæ”¯æŒ3ä¸­é…ç½®æ–¹å¼
- å‘½ä»¤è¡Œï¼š ä¸æ¨èï¼Œä¸åšä»‹ç»ï¼›
- å•æ–‡ä»¶å†…çš„æ³¨é‡Šï¼šä¸æ¨èï¼Œä¸åšä»‹ç»
- é…ç½®æ–‡ä»¶ï¼šé…ç½®æ–‡ä»¶çš„ç±»å‹å¯ä»¥æ˜¯å¥½å‡ ç§ï¼Œæ¯”å¦‚ï¼š.jsã€.ymlã€jsonç­‰ã€‚æ¨èä½¿ç”¨.eslintrc.js;

```
# å®‰è£…eslint
npm i eslint -D

# åˆå§‹åŒ–ä¸€ä¸ªé…ç½®æ–‡ä»¶
npx eslint --lint
```
æœ€åä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆä¸€ä¸ª .eslintrc.js æ–‡ä»¶ã€‚è¿™é‡Œå°±ä¸æŠŠä»£ç è´´å‡ºæ¥äº†ï¼Œæ²¡å‚è€ƒæ„ä¹‰ã€‚

ä¸Šé¢æˆ‘ä»¬çŸ¥é“äº†å¯ä»¥å°†é…ç½®ç»Ÿä¸€å†™åˆ°ä¸€ä¸ªé…ç½®æ–‡ä»¶é‡Œï¼Œä½†æ˜¯ä½ çŸ¥é“è¯¥å¦‚ä½•å»è§¦å‘è¿™ä¸ªé…ç½®æ–‡ä»¶çš„æ ¡éªŒè§„åˆ™å˜›ï¼Ÿ

### æ£€éªŒå•ä¸ªæ–‡ä»¶
```
// æ ¡éªŒa.js å’Œb.js
npx eslint a.js b.js

// æ ¡éªŒsrcå’Œscriptsç›®å½•
npx eslint src scripts
```

### æ ¡éªŒåˆ«çš„ç±»å‹çš„æ–‡ä»¶
é€šå¸¸ESLintåªèƒ½æ ¡éªŒJSæ–‡ä»¶ã€‚æ¯”å¦‚éœ€è¦æ£€éªŒ.vueæ–‡ä»¶ï¼Œå…‰é…ç½®vueæ’ä»¶å’Œvue-eslint-parseè§£æå™¨æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦è®©ESLintåœ¨æŸ¥æ‰¾æ–‡ä»¶çš„æ—¶å€™æ‰¾åˆ°.vueæ–‡ä»¶ã€‚

å¯ä»¥é€šè¿‡--extæ¥æŒ‡å®šå…·ä½“éœ€è¦æ ¡éªŒçš„æ–‡ä»¶
```
npx eslint --ext .js,.jsx,.vue src
```
### è‡ªåŠ¨ä¿®å¤éƒ¨åˆ†æ ¡éªŒé”™è¯¯çš„ä»£ç 

rulesåˆ—è¡¨é¡¹ä¸­è¡¨ç¤ºäº†ä¸€ä¸ªæ‰³æ‰‹ ğŸ”§å›¾æ¡ˆçš„è§„åˆ™å°±æ˜¯è¡¨ç¤ºè¯¥è§„åˆ™æ˜¯å¯ä»¥é€šè¿‡ESLintå·¥å…·è‡ªåŠ¨ä¿®å¤ä»£ç çš„ã€‚å¦‚æœè‡ªåŠ¨ä¿®å¤å‘¢ã€‚é€šè¿‡--fixå³å¯ã€‚æ¯”å¦‚å¯¹äºESLint Rulesé‡Œçš„è¿™ä¸ªsemiè§„åˆ™ï¼Œå®ƒå°±æ˜¯å¸¦æ‰³æ‰‹å›¾æ¡ˆçš„ã€‚

å¯¹äºå¦‚ä¸‹a.jsä»£ç 
```
const num = 12
```
å½“åœ¨é…ç½®æ–‡ä»¶é…ç½®äº†'semi': [2, 'always']å è¿è¡Œå‘½ä»¤
```
npx eslint --fix a.js
```
æ ¡éªŒç›´æ¥å°±é€šè¿‡äº†ï¼Œä¸”ä¼šè‡ªåŠ¨ä¿®å¤ä»£ç ï¼Œåœ¨ä»£ç æœ«å°¾è‡ªåŠ¨åŠ ä¸Šåˆ†å·ã€‚

### æŠŠæ ¡éªŒå‘½ä»¤åŠ åˆ°package.json
æ ¡éªŒå‘½ä»¤å¾ˆé•¿ï¼Œä¹Ÿéš¾è®°ï¼Œä¹ æƒ¯ä¸Šä¼šæŠŠè¿™äº›å‘½ä»¤ç›´æ¥åŠ åˆ°package.jsoné‡Œ
```
{
    "scripts": {
        "lint": "npx eslint --ext .js,.jsx,.vue src",
        "lint:fix": "npx eslint --fix --ext .js,.jsx,.vue src",
    }
}
```

### è¿‡æ»¤ä¸€äº›ä¸éœ€è¦æ ¡éªŒçš„æ–‡ä»¶
å¯¹äºä¸€äº›å…¬å…±çš„JSã€æµ‹è¯•è„šæœ¬æˆ–è€…ç‰¹å®šç›®å½•ä¸‹çš„æ–‡ä»¶ä¹ æƒ¯ä¸Šæ˜¯ä¸éœ€è¦æ ¡éªŒçš„ï¼Œå› æ­¤å¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•é€šè¿‡åˆ›å»ºä¸€ä¸ª.eslintignore æ–‡ä»¶æ¥é…ç½®ï¼Œå‘Šè¯‰ ESLint æ ¡éªŒçš„æ—¶å€™å¿½ç•¥å®ƒä»¬ï¼š
```
public/
src/main.js
```
é™¤äº†.eslingignoreä¸­æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•,ESLintæ€»æ˜¯å¿½ç•¥/node_modules/å’Œ/bower_component/ä¸­çš„æ–‡ä»¶;å› æ­¤å¯¹äºä¸€äº›ç›®å‰è§£å†³ä¸äº†çš„è§„åˆ™æŠ¥é”™ï¼Œä½†æ˜¯æœ‰æ€¥äºæ‰“åŒ…ä¸Šçº¿ï¼Œåœ¨ä¸å½±å“è¿è¡Œçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨.eslintignoreæ–‡ä»¶å°†å…¶æš‚æ—¶å¿½ç•¥

## åœ¨Vueé¡¹ç›®ä¸­å®è·µ

ä¸Šé¢æŠŠ ESLint çš„å‡ ä¹æ‰€æœ‰çš„é…ç½®å‚æ•°å’Œæ ¡éªŒæ–¹å¼éƒ½è¯¦ç»†çš„ä»‹ç»äº†ä¸€éï¼Œä½†æ˜¯å¦‚æœæƒ³åœ¨é¡¹ç›®ä¸­è½åœ°ï¼Œä»…ä»…é ä¸Šé¢çš„çŸ¥è¯†è¿˜æ˜¯ä¸å¤Ÿçš„ã€‚ä¸‹é¢å°†ç»†è¯´å¦‚ä½•åœ¨ Vue ä¸­è½åœ°ä»£ç æ ¡éªŒã€‚

å…³äºå¦‚ä½•åœ¨ Vue ä¸­è½åœ°ä»£ç æ ¡éªŒï¼Œä¸€èˆ¬æ˜¯æœ‰ 2 ç§æƒ…å†µï¼š

- é€šè¿‡ vue-cli åˆå§‹åŒ–é¡¹ç›®çš„æ—¶å€™å·²ç»é€‰æ‹©äº†å¯¹åº”çš„æ ¡éªŒé…ç½®
- å¯¹äºä¸€ä¸ªç©ºçš„ Vue é¡¹ç›®ï¼Œæƒ³æ¥å…¥ä»£ç æ ¡éªŒ

å…¶å®è¿™ 2 ç§æƒ…å†µæœ€ç»ˆçš„æ ¡éªŒçš„æ ¸å¿ƒé…ç½®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯åˆšå¼€å§‹çš„æ—¶å€™å®‰è£…çš„åŒ…æœ‰æ‰€åŒºåˆ«ã€‚ä¸‹é¢é€šè¿‡åˆ†æ vue-cli é…ç½®çš„ä»£ç æ ¡éªŒï¼Œæ¥çœ‹çœ‹å®ƒåˆ°åº•åšäº†å“ªäº›äº‹æƒ…ï¼Œé€šè¿‡å®ƒå®‰è£…çš„åŒ…ä»¥åŠåŒ…çš„ä½œç”¨ï¼Œæˆ‘ä»¬å°±ä¼šçŸ¥é“å¦‚ä½•åœ¨ç©ºé¡¹ç›®ä¸­é…ç½®ä»£ç æ ¡éªŒäº†ã€‚

### é€šè¿‡vue-cliåˆå§‹åŒ–çš„é¡¹ç›®

å¦‚æœä½ çš„é¡¹ç›®æœ€åˆæ˜¯é€šè¿‡vue-cliæ–°å»ºçš„ï¼Œé‚£ä¹ˆåœ¨æ–°å»ºçš„æ—¶å€™ä¼šè®©ä½ é€‰
- æ˜¯å¦æ”¯æŒeslint
- æ˜¯å¦å¼€å¯ä¿å­˜æ ¡éªŒ
- æ˜¯å¦æ”¯æŒæäº¤å‰æ ¡éªŒ

å¦‚æœéƒ½å¼€å¯äº†è¯ï¼Œä¼šå®‰è£…å¦‚ä¸‹å‡ ä¸ªåŒ…ï¼š

- eslintï¼šå‰é¢ 2 å¤§ç« èŠ‚ä»‹ç»çš„å°±æ˜¯è¿™ç©æ„ï¼ŒESLint å‡ºå“ï¼Œæ˜¯ä»£ç æ ¡éªŒçš„åŸºç¡€åŒ…ï¼Œä¸”æä¾›äº†å¾ˆå¤šå†…ç½®çš„ Rulesï¼Œæ¯”å¦‚ eslint:recommended ç»å¸¸è¢«ä½œä¸ºé¡¹ç›®çš„ JS æ£€æŸ¥è§„èŒƒè¢«å¼•å…¥ï¼›
- babel-eslintï¼šä¸€ä¸ªå¯¹ Babel è§£æå™¨çš„åŒ…è£…ï¼Œä½¿å…¶èƒ½å¤Ÿä¸ ESLint å…¼å®¹ï¼›
- lint-stagedï¼šè¯·çœ‹åé¢ pre-commit éƒ¨åˆ†ï¼›
- @vue/cli-plugin-eslint
- eslint-plugin-vue

ä¸‹é¢é‡ç‚¹ä»‹ç» @vue/cli-plugin-eslint å’Œ eslint-plugin-vueï¼Œè¯´ä¸‹è¿™ 2 ä¸ªåŒ…æ˜¯å¹²å˜›çš„ã€‚

#### @vue/cli-plugin-eslint

è¿™ä¸ªåŒ…å®ƒä¸»è¦å¹²äº†2ä»¶äº‹æƒ…

**ç¬¬ä¸€ä»¶äº‹**

å¾€package.jsoné‡Œæ³¨å†Œäº†ä¸€ä¸ªå‘½ä»¤
```
{
    "scripts": {
        "lint": "vue-cli-service lint"
    }
}
```
æ‰§è¡Œè¿™ä¸ªå‘½ä»¤åï¼Œå®ƒä¼šå»æ£€æŸ¥å’Œä¿®å¤éƒ¨åˆ†å¯ä»¥ä¿®å¤çš„é—®é¢˜ã€‚é»˜è®¤æŸ¥æ‰¾çš„æ–‡ä»¶æ˜¯srcå’Œtestsç›®å½•ä¸‹æ‰€æœ‰çš„.js,.jsx,.vueæ–‡ä»¶ï¼Œä»¥åŠé¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰€æœ‰çš„JSæ–‡ä»¶(æ¯”å¦‚ä¹Ÿä¼šæ£€æŸ¥.eslintrc.js)

å½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰çš„ä¼ å…¥å‚æ•°å’Œæ ¡éªŒæ–‡ä»¶
```
vue-cli-service lint [options] [...files]

```
æ”¯æŒçš„å‚æ•°å¦‚ä¸‹ï¼š

- --no-fix: ä¸ä¼šä¿®å¤ errors å’Œ warningsï¼›
- --max-errors [limit]ï¼šæŒ‡å®šå¯¼è‡´å‡ºç° npm ERR é”™è¯¯çš„æœ€å¤§ errors æ•°é‡ï¼›

**ç¬¬äºŒä»¶äº‹**

å¢åŠ äº†ä»£ç ä¿å­˜è§¦å‘æ ¡éªŒçš„åŠŸèƒ½ lintOnSaveï¼Œè¿™ä¸ªåŠŸèƒ½é»˜è®¤æ˜¯å¼€å¯çš„ã€‚å¦‚æœæƒ³è¦å…³é—­è¿™ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥åœ¨ vue.config.js é‡Œé…ç½®ï¼Œä¹ æƒ¯ä¸Šåªå¼€å¯ development ç¯å¢ƒä¸‹çš„ä»£ç ä¿å­˜æ ¡éªŒåŠŸèƒ½ï¼š

```
module.exports = {
    lintOnSave: process.env.NODE_ENV === 'development',
}
```
intOnSave å‚æ•°è¯´æ˜ï¼š

- true æˆ–è€… warningï¼šå¼€å¯ä¿å­˜æ ¡éªŒï¼Œä¼šå°† errors çº§åˆ«çš„é”™è¯¯åœ¨ç»ˆç«¯ä¸­ä»¥ WARNING çš„å½¢å¼æ˜¾ç¤ºã€‚é»˜è®¤çš„ï¼ŒWARNING å°†ä¸ä¼šå¯¼è‡´ç¼–è¯‘å¤±è´¥ï¼›
- falseï¼šä¸å¼€å¯ä¿å­˜æ ¡éªŒï¼›
- errorï¼šå¼€å¯ä¿å­˜æ ¡éªŒï¼Œä¼šå°† errors çº§åˆ«çš„é”™è¯¯åœ¨ç»ˆç«¯ä¸­ä»¥ ERROR çš„å½¢å¼å‡ºç°ï¼Œä¼šå¯¼è‡´ç¼–è¯‘å¤±è´¥ï¼ŒåŒæ—¶æµè§ˆå™¨é¡µé¢å˜é»‘ï¼Œæ˜¾ç¤º Failed to compileã€‚

#### eslint-plugin-vue

**eslint-plugin-vue æ˜¯å¯¹ .vue æ–‡ä»¶è¿›è¡Œä»£ç æ ¡éªŒçš„æ’ä»¶ã€‚**

é’ˆå¯¹è¿™ä¸ªæ’ä»¶ï¼Œå®ƒæä¾›äº†è¿™å‡ ä¸ªæ‰©å±•
- plugin:vue/base: åŸºç¡€
- plugin:vue/essential: é¢„é˜²é”™è¯¯çš„(ç”¨äºVue2.x)
- plugin: vue/recommended: æ¨èçš„ï¼Œæœ€å°åŒ–ä»»æ„é€‰æ‹©å’Œè®¤çŸ¥å¼€é”€(ç”¨äºvue2.x)
- plugin: vue/strongly-recommended: å¼ºçƒˆæ¨èï¼Œæé«˜å¯è¯»æ€§(ç”¨äºVue2.x)
- plugin: vue/vue3-essential:ï¼ˆç”¨äºvue3.xï¼‰
- plugin: vue/vue3-recommended:(ç”¨äºvue3.x)
- plugin: vue/vue3-strongly-recommended:(ç”¨äºVue3.x)
å„æ‰©å±•è§„åˆ™åˆ—è¡¨:vue rules

**çœ‹åˆ°è¿™ä¹ˆä¸€å †çš„æ‰©å±•ï¼Œæ˜¯ä¸æ˜¯éƒ½ä¸çŸ¥é“é€‰é‚£ä¸ªäº†**

ä»£ç è§„èŒƒçš„ä¸œè¥¿ï¼ŒåŸåˆ™è¿˜æ˜¯å¾—ç”±å„è‡ªçš„å›¢é˜Ÿå»ç£¨åˆå•†è®®ä¸€å¥—é€‚åˆå¤§å®¶çš„è§„åˆ™ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ ç”¨çš„æ˜¯vue2,æˆ‘è¿™é‡Œæ¨è2å¥—extendsé…ç½®
```
{
  // vueå®˜æ–¹ç¤ºä¾‹ä¸Šçš„é…ç½®
  extends: ['eslint:recommended', 'plugin:vue/recommended'],

  // æˆ–è€…ä½¿ç”¨AlloyTeamå›¢é˜Ÿé‚£å¥—
  extends: ['alloy', 'alloy/vue']
}
```
#### é…ç½®å’Œæ’ä»¶å¯¹åº”çš„è§£æå™¨
å¦‚æœæ˜¯vue2.xé¡¹ç›®ï¼Œé…ç½®äº†eslint-plugin-vueæ’ä»¶å’Œextendsåï¼Œtemplateæ ¡éªŒè¿˜æ˜¯ä¼šå¤±æ•ˆï¼Œå› ä¸ºä¸ç®¡æ˜¯ESLinté»˜è®¤çš„è§£æå™¨Espreeè¿˜æ˜¯babel-eslintéƒ½ä¼šèƒ½è§£æJSï¼Œæ— æ³•è§£ætemplateçš„å†…å®¹

è€Œvue-eslint-parseråªèƒ½è§£ætemplateçš„å†…å®¹ï¼Œä½†æ˜¯ä¸ä¼šè§£æJSï¼Œå› æ­¤è¿˜éœ€è¦å¯¹è§£æå™¨åšå¦‚ä¸‹é…ç½®
```
{
  parser: 'vue-eslint-parser',
  parseOptions: {
    parser: 'babel-eslint',
    ecmaVersion: 12,
    sourceType: 'module'
  },
  extends: [
    'eslint: recommended',
    'plugin: vue/commended'
  ]
}
```
å‚è€ƒï¼šeslint-plugin-vue faq

### è®©Prettierç®¡æ§ä»£ç é£æ ¼
é’ˆå¯¹Prettierä¸å¾—ä¸æå‡ºä¸€ä¸‹ç–‘é—®ï¼Ÿ
- Prettieræ˜¯ä»€ä¹ˆï¼Ÿ
- ä¸ºä»€ä¹ˆæœ‰äº†ESLint,è¿˜éœ€è¦å¼•å…¥Prettierï¼Ÿä»–ä¸¤ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«
- å¦‚æœé…ç½®Prettier
- Prettierå¦‚ä½•å’ŒESLintç»“åˆä½¿ç”¨

#### Prettieræ˜¯ä»€ä¹ˆ
ç”¨å®ƒè‡ªå·±çš„è¯æ¥è¯´ï¼šæˆ‘æ˜¯ä¸€ä¸ªè‡ªä»¥ä¸ºæ˜¯çš„**ä»£ç æ ¼å¼åŒ–**å·¥å…·ï¼Œè€Œä¸”æˆ‘æ”¯æŒçš„æ–‡ä»¶ç±»å‹å¾ˆå¤šï¼Œæ¯”å¦‚
- javacript(åŒ…æ‹¬å®éªŒä¸­çš„ç‰¹æ€§)
- jsx
- Vue
- Typescript
- CSã€Lessã€SCSS
- HTML
- JSON
- Markdown
ä»¥åŠè¿˜æœ‰ä¸€äº›å…¶ä»–ç±»å‹çš„æ–‡ä»¶
##### Prettierå¯¹æ¯”ESLint
æˆ‘ä»¬çŸ¥é“ESLintè´Ÿè´£äº†å¯¹ä»£ç çš„æ ¡éªŒåŠŸèƒ½ï¼Œå¹¶ä¸”ä¸»è¦æä¾›äº†2ç±»è§„åˆ™
- æ£€æŸ¥æ ¼å¼åŒ–çš„è§„åˆ™
- æ£€æŸ¥ä»£ç è´¨é‡çš„è§„åˆ™
è¯´åˆ°åº•ESLintå°±æ˜¯é€šè¿‡ä¸€æ¡æ¡çš„è§„åˆ™å»é™åˆ¶ä»£ç çš„è§„åˆ™ï¼Œä½†æ˜¯è¿™äº›è§„åˆ™æ¯•ç«Ÿæ˜¯æœ‰é™çš„ï¼Œè€Œä¸”æ›´é‡è¦çš„æ˜¯è¿™äº›è§„åˆ™ç»ˆç‚¹å¹¶ä¸æ˜¯åœ¨ä»£ç é£æ ¼ä¸Šï¼Œæ‰€ä»¥å•å‡­ESLintå¹¶ä¸èƒ½å®Œå…¨çš„åŒæ„ä»£ç é£æ ¼ã€‚

è¿™ä¸ªæ—¶å€™å°±éœ€è¦å¼•å…¥Prettieräº†ï¼Œå› ä¸ºå®ƒå¹²çš„äº‹å°±æ˜¯ç›´è§‚ä»£ç æ ¼å¼åŒ–ï¼Œä¸ç®¡ä»£ç è´¨é‡
> Prettier:åœ¨ä»£ç é£æ ¼è¿™ä¸€å—ï¼Œæˆ‘ä¸€ç›´æ‹¿æçš„æ­»æ­»çš„
##### å¦‚ä½•é…ç½®Prettier
åˆå§‹åŒ–æ“ä½œï¼š
```
# å®‰è£…åŒ…
npm i prettier -D

# æ–°å»º.prettierrc.js
echo module.exports = {} > .prettierrc.js

# æ–°å»º.prettierignore
echo > .prettierignore
```
Prettieræ”¯æŒé…ç½®å‚æ•°ä¸å¯¹ï¼Œæ€»å…±æ‰21ä¸ªï¼Œè¿™é‡Œæ˜¯æ‰€æœ‰å‚æ•°çš„è¯´æ˜[prettier options](https://prettier.io/docs/en/options.html#print-width)

æ‰€æœ‰çš„å‚æ•°éƒ½æœ‰é»˜è®¤å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´å³ä½¿ä½ æ²¡æœ‰é…ç½®.prettierrc.js,å½“ä½ ç”¨Prettierå»æ ¼å¼åŒ–ä»£ç çš„æ—¶å€™å…¨éƒ¨éƒ½ä¼šèµ°é»˜è®¤è®¾ç½®ã€‚é’ˆå¯¹ä¸ªåˆ«å‚æ•°ï¼Œä½ ä¸æƒ³ç”¨é»˜è®¤è®¾ç½®çš„è¯ï¼Œå°±å¯ä»¥åœ¨.prettierrc.jsé…ç½®å…·ä½“æƒ³è¦çš„å€¼

å¦‚ä¸‹ï¼ŒæŠŠé¡¹ç›®ä¸­ä¼šç”¨åˆ°çš„å‚æ•°è¿›è¡Œä¸€ä¸ªè¯´æ˜
```
module.exports = {
    printWidth: 80,                    //ï¼ˆé»˜è®¤å€¼ï¼‰å•è¡Œä»£ç è¶…å‡º 80 ä¸ªå­—ç¬¦è‡ªåŠ¨æ¢è¡Œ
    tabWidth: 2,                       //ï¼ˆé»˜è®¤å€¼ï¼‰ä¸€ä¸ª tab é”®ç¼©è¿›ç›¸å½“äº 2 ä¸ªç©ºæ ¼
    useTabs: true,                     // è¡Œç¼©è¿›ä½¿ç”¨ tab é”®ä»£æ›¿ç©ºæ ¼
    semi: false,                       //ï¼ˆé»˜è®¤å€¼ï¼‰è¯­å¥çš„æœ«å°¾åŠ ä¸Šåˆ†å·
    singleQuote: true,                 // ä½¿ç”¨å•å¼•å·
    quoteProps: 'as-needed',           //ï¼ˆé»˜è®¤å€¼ï¼‰ä»…ä»…å½“å¿…é¡»çš„æ—¶å€™æ‰ä¼šåŠ ä¸ŠåŒå¼•å·
    jsxSingleQuote: true,              // åœ¨ JSX ä¸­ä½¿ç”¨å•å¼•å·
    trailingComma: 'all',              // åœ¨å¤šè¡Œçš„é€—å·åˆ†éš”çš„å¥æ³•ç»“æ„çš„æœ€åä¸€è¡Œçš„æœ«å°¾åŠ ä¸Šé€—å·
    bracketSpacing: true,              //ï¼ˆé»˜è®¤å€¼ï¼‰åœ¨æ‹¬å·å’Œå¯¹è±¡çš„æ–‡å­—ä¹‹é—´åŠ ä¸Šä¸€ä¸ªç©ºæ ¼
    jsxBracketSameLine: true,          // æŠŠ > ç¬¦å·æ”¾åœ¨å¤šè¡Œçš„ JSX å…ƒç´ çš„æœ€åä¸€è¡Œ
    arrowParens: 'avoid',              // å½“ç®­å¤´å‡½æ•°ä¸­åªæœ‰ä¸€ä¸ªå‚æ•°çš„æ—¶å€™å¯ä»¥å¿½ç•¥æ‹¬å¼§
    htmlWhitespaceSensitivity: 'ignore', // vue template ä¸­çš„ç»“æŸæ ‡ç­¾ç»“å°¾å°–æ‹¬å·æ‰åˆ°äº†ä¸‹ä¸€è¡Œ
    vueIndentScriptAndStyle: false,    //ï¼ˆé»˜è®¤å€¼ï¼‰å¯¹äº .vue æ–‡ä»¶ï¼Œä¸ç¼©è¿› <script> å’Œ <style> é‡Œçš„å†…å®¹
    embeddedLanguageFormatting: 'auto', //ï¼ˆé»˜è®¤å€¼ï¼‰å…è®¸è‡ªåŠ¨æ ¼å¼åŒ–å†…åµŒçš„ä»£ç å—
};
```
> æ‰©å¼ é˜…è¯»ï¼šå…³äº[Trailing commas](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Trailing_commas)ä½ æˆ–è®¸æƒ³äº†è§£æ›´å¤š

ç„¶åå¯ä»¥é€šè¿‡å‘½ä»¤æ¥æ ¼å¼åŒ–ä»£ç 
```
# å°†æ ¼å¼åŒ–å½“å‰ç›®å½•åŠå­ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶
npx prettier --write .

# æ£€æŸ¥æŸä¸ªæ–‡ä»¶æ˜¯å¦å·²ç»æ ¼å¼åŒ–
npx prettier --check src/main.js
```
å¦‚æœä¸æƒ³è¢«Prettieræ ¼å¼åŒ–ï¼Œå¯ä»¥å°†å…¶å†™å…¥åˆ°.prettierignoreé‡Œ
```
build/
package.json
public/
test/*.*
```
### Prettierå’ŒESLintä¸€èµ·å¹²æ´»æ›´é…å“¦
ä¸Šé¢ä»‹ç»äº†Prettierçš„å…·ä½“é…ç½®ï¼Œè¿™é‡Œä¸»è¦ä»‹ç»å’ŒESLintç»„åˆä½¿ç”¨çš„é…ç½®å’Œæ³¨æ„äº‹é¡¹

å’ŒESLinté…åˆä½¿ç”¨éœ€è¦ç”¨åˆ°eslint-plugin-prettierè¿™ä¸ªæ’ä»¶
```
npm i eslint-plugin-prettier -D
```
é…ç½®
```
{
    plugins: ['prettier'],
    rules: {
        'prettier/prettier': 'error'
    }
}
```
è¿™ä¸ªæ’ä»¶çš„å·¥ä½œåŸç†æ˜¯å…ˆè°ƒç”¨Prettierå¯¹ä½ çš„ä»£ç è¿›è¡Œæ ¼å¼åŒ–ï¼Œç„¶åä¼šæŠŠæ ¼å¼åŒ–å‰åä¸ä¸€è‡´çš„åœ°æ–¹è¿›è¡Œæ ‡è®°ï¼Œé€šè¿‡é…ç½®'prettier/prettier':'error'æ­¤æ¡è§„åˆ™ä¼šå°†æ ‡è®°åœ°æ–¹è¿›è¡Œerrorçº§åˆ«æŠ¥é”™æç¤ºï¼Œç„¶åå¯ä»¥é€šè¿‡ESLintçš„--fixè‡ªåŠ¨ä¿®å¤åŠŸèƒ½å°†å…¶ä¿®å¤
#### å†²çªäº†æ€ä¹ˆåŠ
é€šè¿‡å‰é¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬çŸ¥é“ ESLint ä¹Ÿæ˜¯ä¼šå¯¹ä»£ç é£æ ¼åšä¸€äº›é™åˆ¶çš„ï¼Œè€Œ Prettier ä¸»è¦å°±æ˜¯è§„èŒƒä»£ç é£æ ¼ï¼Œæ‰€ä»¥åœ¨æŠŠå®ƒä»¬ç»“åˆä¸€èµ·ä½¿ç”¨çš„æ—¶å€™æ˜¯å­˜ä¼šåœ¨ä¸€äº›é—®é¢˜çš„ã€‚å¯¹äºä¸ªåˆ«è§„åˆ™ï¼Œä¼šä½¿å¾—åŒæ–¹åœ¨æ ¡éªŒåå‡ºç°ä»£ç æ ¼å¼ä¸ä¸€è‡´çš„é—®é¢˜ã€‚

é‚£ä¹ˆå½“ Prettier å’Œ ESLint å‡ºç°å†²çªä¹‹åï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ

ç”¨Prettierçš„è¯æ¥è¯´å¾ˆç®€å•ï¼Œåªè¦ä½¿ç”¨eslint-config-prettierå°±å¯ä»¥äº†ã€‚**è§£å†³å†²çªçš„æ€è·¯å°±æ˜¯é€šè¿‡å°†è¿™ä¸ªåŒ…æä¾›çš„æ‰©å±•æ”¾åˆ°extendsæœ€åé¢å¼•å…¥ï¼Œä¾æ®rulesç”Ÿæ•ˆçš„ä¼˜å…ˆçº§ï¼Œæ‰€ä»¥å®ƒä¼šè¦†ç›–å‰é¢èµ·å†²çªçš„è§„åˆ™ï¼Œæ¯”å¦‚**
```
{
  extends: [
    'eslint: recommended',
    'prettier', // å¿…é¡»æ”¾æœ€å
  ]
}
```
é™¤äº†èƒ½è¦†ç›–å’ŒESLintä¸­èµ·å†²çªçš„è§„åˆ™ä¹‹å¤–ï¼Œeslint-config-prettierè¿˜èƒ½è¦†ç›–ä»¥ä¸‹æ’ä»¶è§„åˆ™(åªåˆ—å‡ºäº†éƒ¨åˆ†)
- eslint-plugin-standard
- eslint-plugin-vue

é‚£eslint-config-prettieråˆ°åº•æä¾›äº†é‚£äº›è¦†ç›–è§„åˆ™å‘¢ï¼Ÿç›´æ¥æŸ¥çœ‹è¿™ä¸ªåˆ—è¡¨[eslint-config-prettier rules](https://github.com/prettier/eslint-config-prettier/blob/main/index.js)

å¦‚æœæƒ³è¦è¦†ç›–æŸäº›æ’ä»¶çš„è§„åˆ™ï¼Œéœ€è¦å¼•å…¥å¯¹åº”æ’ä»¶çš„æ‰©å¼  æ¯”å¦‚
```
{
    extends: [
        'standard',
        'plugin:vue/recommended',
        'prettier/standard',      // è¦†ç›– eslint-config-stanard 
        'prettier/vue',           // è¦†ç›– eslint-plugin-vue 
    ],
}
```
:::danger
æç¤ºï¼šåœ¨eslint-config-prettier 8.0.0ç‰ˆæœ¬åï¼Œextendsä¸åœ¨éœ€è¦ä¸ºå•ç‹¬çš„æ’ä»¶å¼•å…¥å¯¹åº”æ‰©å±•æ¥è¦†ç›–å†²çªäº†ï¼Œç»Ÿä¸€å¼•å…¥prettierå³å¯
:::

**å¦‚æœåŒæ—¶ä½¿ç”¨äº†eslint-plugin-prettierå’Œeslint-config-prettier å¯ä»¥è¿™ä¹ˆé…ç½®**
```
{
  extends: ['plugin:prettier/recommended']
}
```
å®ƒå…¶å®å’Œä¸‹é¢è¿™äº›é…ç½®æ˜¯ç­‰ä»·çš„
```
{
  extends: ['prettier'], // eslint-config-prettieræä¾›çš„ï¼Œç”¨äºè¦†ç›–èµ·å†²çªçš„è§„åˆ™
  plugins: ['prettier'], // æ³¨å†Œeslint-plugin-prettier æ’ä»¶
  rules: {
    'prettier/prettier': 'error',
    'arrow-body-style': 'off',
    'prefer-arrow-callback': 'off'
  }
}
```
æ‰€ä»¥å¦‚æœåœ¨vue2é¡¹ç›®ä¸­é…ç½®ESLintå’ŒPrettierä¼šæ€ä¹ˆé…ç½®
```
{
  parser: 'vue-eslint-parser',
  parserOptions: {
    parser: 'babel-eslint'ï¼Œ
    ecmaVersion: 12,
    sourceType: 'module'
  },
  extends: [
    'eslint:recommended', 
    'plugin:vue/recommended',
    'plugin:prettier/recommended',  // åœ¨å‰é¢ Vue é…ç½®çš„åŸºç¡€ä¸ŠåŠ ä¸Šè¿™è¡Œ
  ],
  plugins: ['vue']
}
```
å…¶å®å¦‚æœä½ çš„é¡¹ç›®æ˜¯ç”¨vue-cliåˆå§‹åŒ–çš„ï¼Œä¸”é€‰æ‹©äº†eslint+prettieræ–¹æ¡ˆçš„è¯ï¼Œç”Ÿæˆçš„é¡¹ç›®ä¸­ï¼Œ.eslintrc.jsé…ç½®æ–‡ä»¶ä¸­extendsçš„é…ç½®æ˜¯è¿™æ ·çš„
```
{
    extends: [
        'plugin:vue/essential',
        'eslint:recommended', 
        '@vue/prettier'
    ]
}
```
å®ƒçš„æœ€åä¸€é¡¹æ‰©å±•æ˜¯@vue/prettierï¼Œè¿™ä¸ªå¯¹åº”çš„æ˜¯@vue/eslint-config-prettier,è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªåŒ…

ä¸‹é¢çš„index.jså†…å®¹
```
{
  plugins: ['prettier'],
  extends: [
    require.resolve('eslint-config-prettier'),
    require.resolve('eslint-config-prettier/vue')
  ],
  rules: {
    'prettier/prettier': 'warn'
  }
}
```
è¿™ä¸ªå’Œæˆ‘ä»¬ä¸Šé¢é…ç½®çš„å†…å®¹ç›¸å·®æ— å‡ çš„ï¼Œè€Œå¼•å…¥eslint-config-prettier/vueæ˜¯å› ä¸ºè¿™ä¸ª@vue/eslin-config-prettieråŒ…ä¾èµ–çš„eslint-config-prettierç‰ˆæœ¬^6.0.0ç‰ˆæœ¬çš„ï¼Œæ‰€ä»¥åœ¨å¤„ç†å†²çªçš„æ—¶å€™éœ€è¦ç‰¹åˆ«æŒ‡å®šå’Œå¯¹åº”ç±»å‹æ’ä»¶åŒ¹é…çš„æ‰©å±•
## è®©EditorConfigåŠ©åŠ›å¤šç¼–è¾‘å™¨å¼€å‘å§
[EditorConfig](https://editorconfig.org/)æ˜¯å•¥ç©æ„ï¼Ÿå®ƒå¯ä»¥å¯¹å¤šé‡ç±»å‹çš„å•æ–‡ä»¶è¿›è¡Œç®€å•çš„æ ¼å¼åŒ–ï¼Œå®ƒæä¾›çš„é…ç½®å‚æ•°å¾ˆå°‘ï¼š
```
# å‘Šè¯‰ EditorConfig æ’ä»¶ï¼Œè¿™æ˜¯æ ¹æ–‡ä»¶ï¼Œä¸ç”¨ç»§ç»­å¾€ä¸ŠæŸ¥æ‰¾
root = true

# åŒ¹é…å…¨éƒ¨æ–‡ä»¶
[*]

# è®¾ç½®å­—ç¬¦é›†
charset = utf-8

# ç¼©è¿›é£æ ¼ï¼Œå¯é€‰ spaceã€tab
indent_style = tab

# ç¼©è¿›çš„ç©ºæ ¼æ•°ï¼Œå½“ indent_style = tab å°†ä½¿ç”¨ tab_width
# å¦åˆ™ä½¿ç”¨ indent_size
indent_size = 2
tab_width = 2

# ç»“å°¾æ¢è¡Œç¬¦ï¼Œå¯é€‰ lfã€crã€crlf
end_of_line = lf

# åœ¨æ–‡ä»¶ç»“å°¾æ’å…¥æ–°è¡Œ
insert_final_newline = true

# åˆ é™¤ä¸€è¡Œä¸­çš„å‰åç©ºæ ¼
trim_trailing_whitespace = true

# åŒ¹é…mdç»“å°¾çš„æ–‡ä»¶
[*.md]
insert_final_newline = false
trim_trailing_whitespace = false
```
è™½ç„¶å®ƒæä¾›çš„æ ¼å¼åŒ–çš„é…ç½®å‚æ•°å¾ˆå°‘ï¼Œå°±3ä¸ªï¼Œ**ç¼©è¿›é£æ ¼ã€æ˜¯å¦åœ¨æ–‡ä»¶æœ«å°¾æ’å…¥æ–°è¡Œå’Œæ˜¯å¦åˆ é™¤ä¸€è¡Œä¸­å‰åç©ºæ ¼**ã€‚ä½†æ˜¯å®ƒè¿˜æ˜¯éå¸¸æœ‰å¿…è¦å­˜åœ¨çš„ç†ç”±æœ‰ä¸‰ä¸ª
- èƒ½å¤Ÿåœ¨ä¸åŒçš„ç¼–è¾‘å™¨å’ŒIDEä¸­ä¿æŒä¸€è‡´çš„ä»£ç é£æ ¼
- é…åˆæ’ä»¶æ‰“å¼€æ–‡ä»¶å³è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œéå¸¸æ–¹ä¾¿
- æ”¯æŒæ ¼å¼åŒ–çš„æ–‡ä»¶ç±»å‹å¾ˆå¤š
å¦‚æœéœ€è¦è®©ä»¥ä¸Šé…ç½®ç”Ÿæ•ˆï¼Œè¿˜å¾—åœ¨VSCodeé‡Œå®‰è£…EditorConfig for VS Code è¿™ä¸ªæ’ä»¶é…åˆ

**ç»ˆç‚¹æ¥äº†**

å¯ä»¥çœ‹åˆ° EditorConfig å’Œ Prettier ä¼šå­˜åœ¨ä¸€äº›é‡å¤çš„é…ç½®ï¼Œæ¯”å¦‚éƒ½æä¾›äº†å¯¹ç¼©è¿›çš„é…ç½®å‚æ•°ï¼Œæ‰€ä»¥åœ¨å®é™…ä½¿ç”¨çš„æ—¶å€™éœ€è¦é¿å…å®ƒä»¬ï¼Œæˆ–è€…æŠŠä»–ä»¬çš„å‚æ•°è®¾ç½®ä¸ºä¸€è‡´ã€‚

### åœ¨VSCodeä¸­æ”¯æŒeslint
å‰é¢åšçš„é…ç½®ï¼Œéƒ½éœ€è¦æ‰§è¡Œå‘½ä»¤æ‰èƒ½è¿›è¡Œæ£€æŸ¥å’Œä¿®å¤ä»£ç ï¼Œè¿˜æ˜¯æŒºä¸æ–¹ä¾¿çš„ï¼Œå¦‚æœæˆ‘å¸Œæœ›ç¼–è¾‘å®Œæˆ–ä¿å­˜çš„æ—¶å€™å»æ£€æŸ¥ä»£ç æ”¹å¦‚ä½•å»åšå‘¢ï¼Ÿå¯ä»¥ç›´æ¥åœ¨IDEé‡Œå®‰è£…ESLintæ’ä»¶ï¼Œå› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯VSCodeï¼Œæ‰€ä»¥è¿™é‡Œåªä»‹ç»vscodeä¸­é…ç½®

åœ¨ä½¿ç”¨å‰ï¼Œéœ€è¦æŠŠ ESLint æ‰©å±•å®‰è£…åˆ° VSCode é‡Œï¼Œè¿™é‡Œæˆ‘å°±ä¸ç»†è¯´å®‰è£…æ­¥éª¤äº†ã€‚ å®‰è£…å®Œæˆåï¼Œéœ€è¦åœ¨è®¾ç½®é‡Œå†™å…¥é…ç½®ï¼š
- åœ¨ VSCode å·¦ä¸‹è§’æ‰¾åˆ°ä¸€ä¸ªé½¿è½® âš™ å›¾æ ‡ï¼Œç‚¹å‡»åé€‰æ‹©è®¾ç½®é€‰é¡¹ï¼Œè¿™ä¸ªæ—¶å€™æ‰“å¼€äº†è®¾ç½®é¢æ¿ï¼›
- ç„¶ååœ¨ VSCode å³ä¸Šè§’æ‰¾åˆ°æ‰“å¼€è®¾ç½®ï¼ˆjsonï¼‰çš„å›¾æ ‡ï¼Œç‚¹å‡»åï¼Œä¼šæ‰“å¼€ settings.json æ–‡ä»¶ï¼›
- ç„¶åæŠŠä»¥ä¸‹é…ç½®è´´è¿›å»å³å¯ï¼›
```
{
    "eslint.alwaysShowStatus": true,  // æ€»æ˜¯åœ¨ VSCode æ˜¾ç¤º ESLint çš„çŠ¶æ€
    "eslint.quiet": true,             // å¿½ç•¥ warning çš„é”™è¯¯
    "editor.codeActionsOnSave": {     // ä¿å­˜æ—¶ä½¿ç”¨ ESLint ä¿®å¤å¯ä¿®å¤é”™è¯¯
        "source.fixAll": true,
        "source.fixAll.eslint": true
    }	
}
```
é…ç½®è¯´æ˜ï¼Œåœ¨ESLint 2.0.4ç‰ˆæœ¬å¼€å§‹:
- ä¸éœ€è¦é€šè¿‡eslint.validateæ¥æŒ‡å®šæ ¡éªŒçš„æ–‡ä»¶ç±»å‹äº†ï¼Œå·²ç»è‡ªåŠ¨æ”¯æŒäº†.vueæ–‡ä»¶
- editor.codeActionsOnSave å¼€å¯ä¿å­˜è‡ªåŠ¨ä¿®å¤åŠŸèƒ½
å½“è¿™æ ·é…ç½®ä¹‹åå‘¢ï¼Œæ¯æ¬¡ç¼–è¾‘ä»£ç ESLintéƒ½ä¼šå®æ—¶æ ¡éªŒä»£ç ï¼Œä¸”å½“ä¿å­˜çš„æ—¶å€™ä¼šè‡ªåŠ¨fixï¼Œæ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿å‘¢ã€‚ä¸è¿‡å¯¹äºæœ‰äº›æ— æ³•è‡ªåŠ¨fixçš„ä»£ç å°±éœ€è¦ä½ æ‰‹åŠ¨å»ä¿®æ”¹äº†ï¼Œå¦‚æœä¸æƒ³ä¿®æ”¹çš„è¯å¯ä»¥é…ç½®rulesæŠŠè¯¥æ¡è§„åˆ™ç»™å…³é—­æ‰

å…¶å®åœ¨å›¢é˜Ÿå¼€å‘çš„æ—¶å€™ï¼Œæœ€å¥½æŠŠé’ˆå¯¹VSCodeçš„é…ç½®ï¼Œå†™ä¸€ä¸ªæ–‡ä»¶è€¿ç©—è¿™é¡¹ç›®ï¼Œä¸€èµ·æäº¤åˆ°è¿œç¨‹ä»“åº“ï¼Œè¿™æ ·çš„è¯å°±ä¿è¯äº†é¡¹ç›®æˆå‘˜éƒ½æ˜¯ç”¨çš„è¿™å¥—é…ç½®ã€‚æ¯”å¦‚å¯ä»¥åœ¨é¡¹ç›®çš„æ ¹ç›®å½•æ–°å»º.vscode/settings.json,ç„¶åå†™å…¥ä¸Šé¢çš„é‚£ä¸²é…ç½®å†…å®¹

### åœ¨æäº¤å‰åšæ ¡éªŒpre-commit
ä»¥ä¸Šåªæ˜¯é€šè¿‡ESLintè‡ªåŠ¨ä¿®å¤èƒ½å¤Ÿä¿®å¤çš„é”™è¯¯ä»¥åŠé€šè¿‡Prettierè¿›è¡Œä»£ç æ ¼å¼åŒ–ï¼Œä½†æ˜¯åœ¨å®é™…å¼€å‘çš„æ—¶å€™éš¾å…é‡åˆ°æ— æ³•fixçš„é”™è¯¯ï¼Œå¯èƒ½å¼€å‘äººå‘˜ä¹Ÿå¿˜è®°ä¿®æ”¹ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™æŠŠä»£ç æäº¤åˆ°è¿œç¨‹ä»“åº“ï¼Œé‚£å°±æŠŠç³Ÿç³•çš„å—²å—æäº¤ä¸Šå»äº†

é‚£ä¹ˆå¦‚ä½•æœç»æŠŠç³Ÿç³•çš„ä»£ç æäº¤ä¸Šå»å‘¢ï¼Œå¯ä»¥é€šè¿‡é…ç½®git hooksçš„pre-commité’©å­æ¥å®ç°è¿™ä¸ªç›®çš„ã€‚ä¸»è¦æ˜¯åˆ©ç”¨äº†huskyå’Œlint-stagedè¿™ä¸¤ä¸ªåŒ…ã€‚huskyå°±æ˜¯ç”¨æ¥é…ç½®git hooksçš„ï¼Œè€Œlint-stagedåˆ™æ˜¯å¯¹æ‹¿åˆ°çš„stagedæ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚æ‰§è¡Œnpx eslint --fixè¿›è¡Œä»£ç æ ¡éªŒã€‚

å…·ä½“æ“ä½œåˆ†ä¸¤ç§æƒ…å†µ
- package.jsonå’Œ.gitåœ¨åŒä¸€ä¸ªç›®å½•ä¸‹
- package.jsonå’Œ.gitä¸åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹
#### package.jsonå’Œ.gitåœ¨åŒä¸€ä¸ªç›®å½•ä¸‹
1. æ‰§è¡Œä¸€ä¸‹å‘½ä»¤
  ```
  npx mrm lint-staged
  ```
  ä¼šè‡ªåŠ¨å®‰è£…lint-stagedå’Œhuskyå¹¶ä¸”åœ¨package.jsoné‡Œå†™å…¥lint-staged
  ::: danger
  æ³¨æ„ï¼šmrmæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–å·¥å…·ï¼Œå®ƒä¼šæ ¹æ®package.jsonä¾èµ–é¡¹ä¸­çš„ä»£ç è´¨é‡å·¥å…·æ¥å®‰è£…å’Œé…ç½® huskyå’Œlint-stagedï¼Œå› æ­¤è¯·ç¡®ä¿åœ¨æ­¤ä¹‹å‰å®‰è£…å¹¶é…ç½®æ‰€æœ‰ä»£ç è´¨é‡å·¥å…·å¦‚Prettierå’Œeslint
  :::
  å¦‚æœä¸Šé¢é¡ºåˆ©ä¼šåœ¨package.jsonä¸­å¸å…¥lint-staged,å¯ä»¥è‡ªè¡Œä¿®æ”¹è®©ä»–æ”¯æŒ.vueæ–‡ä»¶æ ¡éªŒ
  ```
  {
    "lint-staged": {
      "*.{js,vue}": "eslint --cache --fix"
    }
  }
  ```
  å¯èƒ½ä½ åœ¨åˆ«çš„åœ°æ–¹æœ‰çœ‹è¿‡å¦‚ä¸‹è¿™ç§åœ¨lint-stagedæœ€åä¸€é¡¹åŠ äº†git addçš„é…ç½®ï¼Œè¿™æ ·ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œå¦‚æœlint-stagedæ˜¯11.x.xçš„ç‰ˆæœ¬å·²ç»è‡ªåŠ¨å®ç°äº†å°†ä¿®æ”¹è¿‡çš„ä»£ç è‡ªåŠ¨æ·»åŠ æš‚å­˜åŒºçš„åŠŸèƒ½ï¼Œæ‰€ä»¥ä¸éœ€è¦åœ¨åŠ git add
  ```
  "lint-staged": {
    "*.{js,vue}": ["eslint --cache --fix", "git add"]
  }
  ```
2. å¯åŠ¨git hooks
  ```
  npx husky install
  ```
  ç»è¿‡ä¸Šé¢çš„å‘½ä»¤åï¼Œv6ç‰ˆæœ¬çš„huskyä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºä¸€ä¸ª.huskyç›®å½•ã€‚å¦‚æœæ˜¯V4ç‰ˆæœ¬ä¼šå†™å…¥åˆ°package.jsoné‡Œ
3. åˆ›å»ºpre-commité’©å­
  ```
  npx husky add .husky/pre-commit "npx lint-staged"
  ```
åˆ°è¿™é‡Œåï¼Œgit commit å‰è‡ªåŠ¨æ‰§è¡Œä»£ç æ ¡éªŒå’Œä¿®å¤çš„åŠŸèƒ½å°±ç®—å®Œæˆäº†ã€‚ç„¶åä½ å¯ä»¥è¯•è¯•ä¿®æ”¹æ–‡ä»¶ï¼Œç„¶åæäº¤è¯•è¯•ã€‚

![husky](./images/0d42902275e94e20827dfc3afdd79d66_tplv-k3u1fbpfcp-watermark.jpg)
#### package.jsonå’Œ.gitåœ¨ä¸åŒç›®å½•ä¸‹
å¦‚æœä½ çš„é¡¹ç›®ä¸æ˜¯çº¯å‰ç«¯é¡¹ç›®ï¼Œè€Œæ˜¯å‰åç«¯ä»£ç æ”¾åœ¨ä¸€ä¸ªé¡¹ç›®ä¸‹ï¼Œæ¯”å¦‚å¦‚ä¸‹è¿™ä¸ªshop-systemçš„é¡¹ç›®ç»“æ„
```
|-.git  // .gitç›®å½•
|- shop-service // åç«¯é¡¹ç›®
|- show-web // å‰ç«¯é¡¹ç›®
```
å¦‚æœpackage.jsonå’Œ.gitåœ¨ä¸åŒçš„ç›®å½•ä¸‹ï¼Œé‚£ä¹ˆé€šè¿‡ç¬¬ä¸€ç§æ–¹å¼çš„npm nrm lint-staged æ¥åˆ›å»ºä¼šå¤±è´¥ï¼Œå°†æ— æ³•åˆ›å»º.huskyç›®å½•ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦å¾®å¾®éº»çƒ¦ç‚¹äº†ã€‚

åœ¨shop-webç›®å½•ç»ˆç«¯ä¸‹è¿è¡Œ
```
# å®‰è£… husky
npm install husky --save-dev

# å¯åŠ¨ git hooks
cd .. && husky install shop-web/.husky

# æ·»åŠ  pre-commit é’©å­
npx husky add .husky/pre-commit "cd shop-web && npx lint-staged"

# å®‰è£… lint-staged
npm install lint-staged -D
```
ç„¶ååœ¨package.jsoné‡Œé…ç½®lint-staged,å°±å¯ä»¥å¤§åŠŸå‘Šæˆ
```
{
    "lint-staged": {
        "*.{js,vue}": "eslint --cache --fix"
    }
}
```
å‚è€ƒï¼š[è‡ªå®šä¹‰ç›®å½•å¯åŠ¨ git hook](https://typicode.github.io/husky/#/?id=custom-directory), [å‰ç«¯ä»£ç è§„èŒƒæ£€æŸ¥æœ€ä½³å®è·µ](/front-end/engineering/best-husky.html)


## æ€»ç»“
è¿™ç¯‡æ–‡ç« æ¯”è¾ƒé•¿ï¼Œå‰å‰ååè®²äº†å¾ˆå¤šä»£ç æ ¡éªŒçš„ä¸œè¥¿ï¼Œç°åœ¨æˆ‘ä»¬æ¥æ¢³ç†ä¸‹ã€‚

é¦–å…ˆç”¨ ESLint æ¥åšä»£ç æ ¡éªŒï¼Œå®ƒè‡ªå¸¦çš„ ruels èƒ½æä¾› 2 ç§ç±»å‹çš„æ ¡éªŒï¼Œåˆ†åˆ«æ˜¯ä»£ç é”™è¯¯æ ¡éªŒå’Œä»£ç æ ¼å¼æ ¡éªŒï¼Œè€Œ ESLint æœ¬èº«çš„æ ¸å¿ƒå·¥ä½œå…¶å®å°±æ˜¯æ ¡éªŒå’Œä¿®å¤é”™è¯¯çš„ä»£ç ï¼Œè€Œå¯¹æ ¼å¼åŒ–çš„è§„åˆ™æä¾›çš„ä¸å¤šã€‚

æ‰€ä»¥å¦‚æœæˆ‘ä»¬ç›¸å¯¹ä»£ç æ ¼å¼åŒ–è¿›è¡Œä¸€ä¸ªæ›´åŠ ç²¾ç»†çš„é…ç½®åˆ™éœ€è¦å€ŸåŠ©Prettier,å› ä¸ºå®ƒæ˜¯åªè´Ÿè´£é£æ ¼çš„ç®¡æ§ï¼Œæ‰€ä»¥ç”¨å®ƒåœ¨åˆé€‚ä¸è¿‡äº†ã€‚ä½†æ˜¯å¦‚æœESLintå’ŒPerttierç»“åˆèµ·æ¥ä¸€èµ·ä½¿ç”¨çš„è¯ï¼Œå°±å¯èƒ½ä¼šå‡ºç°è§„åˆ™çš„å†²çªäº†ï¼Œæ¯•ç«Ÿä¸¤è€…éƒ½ä¼šå¯¹é£æ ¼è¿›è¡Œå¤„ç†ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™å°±å¯ä»¥é€šè¿‡eslint-config-prettierè¿™ä¸ªæ‰©å±•æ¥æŠŠå†²çªçš„è§„åˆ™è¿›è¡Œå…³é—­ï¼Œè¿™ä¸ªæ‰©å±•ä¸ä»…å¯ä»¥å…³é—­å’ŒESLintå†…ç½®è§„åˆ™çš„å†²çªï¼Œè¿˜å¯ä»¥å…³é—­å®é™…é¡¹ç›®ä¸­å¼•ç”¨åˆ°çš„æ‰©å±•è§„åˆ™çš„å†²çªï¼Œæ¯”å¦‚å’ŒVueã€Reactã€Typescriptã€Flowçš„å†²çª

åœ¨æŠŠESLintå’ŒPerttierç»“åˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›è®©Eslintæ¥æ£€æŸ¥ä»£ç çš„é”™è¯¯ï¼Œè€ŒPrettieræ ¡éªŒä»£ç é£æ ¼ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å…¶å®æœ‰æ˜¯æœ‰2ä¸ªä»»åŠ¡çš„ï¼Œéœ€è¦2æ¡å‘½ä»¤æ¥å¤„ç†ã€‚ä½†æ˜¯æœ‰äº†eslint-plugin-prettierè¿™ä¸ªæ’ä»¶å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„æŠŠä»–ä»¬ç»“åˆèµ·æ¥ï¼Œå½“éœ€è¦æ ¡éªŒä»£ç é”™è¯¯çš„æ—¶å€™ESLintè‡ªåŠ¨ä¼šç»™ä½ æ ¡éªŒï¼Œå½“ç„¶å‰ææ˜¯VSCodeç¦»å¿…é¡»æŒ‰ESLintæ’ä»¶ï¼Œè€Œå½“éœ€è¦æ ¡éªŒä»£ç é£æ ¼çš„æ—¶å€™ESLintå°±ä¼šè°ƒç”¨Prettierçš„èƒ½åŠ›è¿›è¡Œä»£ç é£æ ¼æ£€æŸ¥ã€‚

æ–‡ç« çš„åé¢åˆ†åˆ«åˆç»†è¯´äº†EditorConfigå’Œæäº¤ä»£ç é’±æ ¡éªŒçš„å¤„ç†ï¼Œè¿™é‡Œå°±ä¸å¤šè®²äº†

## å‚è€ƒæ–‡æ¡£
[åŸæ–‡åœ°å€](https://juejin.cn/post/6974223481181306888)

[åŸæ–‡åœ°å€1](https://mp.weixin.qq.com/s/f3WzR5lXTZ4FNuzMqlXQdA)

[vue3ä¸­åŠ å…¥eslintå’Œprettier](https://juejin.cn/post/7021464780242321439)